{"version":3,"sources":["cheetahGrid.es5.min/cheetahGrid.es5.min.js","cheetahGrid.es5.min/webpack/universalModuleDefinition","cheetahGrid.es5.min/webpack/bootstrap","cheetahGrid.es5.min/./internal/utils.js","cheetahGrid.es5.min/./internal/symbolManager.js","cheetahGrid.es5.min/./internal/EventHandler.js","cheetahGrid.es5.min/./core/DG_EVENT_TYPE.js","cheetahGrid.es5.min/node_modules/css-loader/lib/css-base.js","cheetahGrid.es5.min/node_modules/style-loader/lib/addStyles.js","cheetahGrid.es5.min/./columns/style/Style.js","cheetahGrid.es5.min/./columns/type/BaseColumn.js","cheetahGrid.es5.min/./internal/canvases.js","cheetahGrid.es5.min/./columns/action/action-utils.js","cheetahGrid.es5.min/./columns/action/Editor.js","cheetahGrid.es5.min/./internal/dom.js","cheetahGrid.es5.min/./columns/type/Column.js","cheetahGrid.es5.min/./header/style/Style.js","cheetahGrid.es5.min/./header/type/BaseHeader.js","cheetahGrid.es5.min/./element/Inline.js","cheetahGrid.es5.min/./columns.js","cheetahGrid.es5.min/./internal/animate.js","cheetahGrid.es5.min/./columns/style/BaseStyle.js","cheetahGrid.es5.min/./core/EventTarget.js","cheetahGrid.es5.min/./columns/style/StdBaseStyle.js","cheetahGrid.es5.min/./columns/type/columnUtils.js","cheetahGrid.es5.min/./internal/Rect.js","cheetahGrid.es5.min/./header/type.js","cheetahGrid.es5.min/./columns/action/actionBind.js","cheetahGrid.es5.min/./columns/action/BaseAction.js","cheetahGrid.es5.min/./columns/style.js","cheetahGrid.es5.min/./internal/icons.js","cheetahGrid.es5.min/./columns/utils/index.js","cheetahGrid.es5.min/./internal/calc.js","cheetahGrid.es5.min/./data/DataSource.js","cheetahGrid.es5.min/./header/action.js","cheetahGrid.es5.min/./header/action/BaseAction.js","cheetahGrid.es5.min/./header/style.js","cheetahGrid.es5.min/./header/style/BaseStyle.js","cheetahGrid.es5.min/./themes.js","cheetahGrid.es5.min/./internal/path2DManager.js","cheetahGrid.es5.min/./list-grid/LG_EVENT_TYPE.js","cheetahGrid.es5.min/./columns/message/messageUtils.js","cheetahGrid.es5.min/./columns/message/BaseMessage.js","cheetahGrid.es5.min/./columns/message/internal/MessageElement.js","cheetahGrid.es5.min/./columns/action/Action.js","cheetahGrid.es5.min/./columns/action/BaseInputEditor.js","cheetahGrid.es5.min/./columns/action/internal/input-value-handler.js","cheetahGrid.es5.min/./columns/type.js","cheetahGrid.es5.min/./columns/style/ButtonStyle.js","cheetahGrid.es5.min/./columns/style/CheckStyle.js","cheetahGrid.es5.min/./columns/style/IconStyle.js","cheetahGrid.es5.min/./columns/style/ImageStyle.js","cheetahGrid.es5.min/./columns/style/MenuStyle.js","cheetahGrid.es5.min/./columns/style/MultilineTextStyle.js","cheetahGrid.es5.min/./columns/style/NumberStyle.js","cheetahGrid.es5.min/./columns/style/PercentCompleteBarStyle.js","cheetahGrid.es5.min/./columns/style/RadioStyle.js","cheetahGrid.es5.min/./internal/imgs.js","cheetahGrid.es5.min/./internal/menu-items.js","cheetahGrid.es5.min/./core/DrawGrid.js","cheetahGrid.es5.min/./internal/style.js","cheetahGrid.es5.min/./internal/paste-utils.js","cheetahGrid.es5.min/./data.js","cheetahGrid.es5.min/./internal/sort.js","cheetahGrid.es5.min/./header/action/actionBind.js","cheetahGrid.es5.min/./header/style/CheckHeaderStyle.js","cheetahGrid.es5.min/./header/style/MultilineTextHeaderStyle.js","cheetahGrid.es5.min/./header/style/SortHeaderStyle.js","cheetahGrid.es5.min/./icons.js","cheetahGrid.es5.min/./plugins/icons.js","cheetahGrid.es5.min/./plugins/themes.js","cheetahGrid.es5.min/./tools/canvashelper.js","cheetahGrid.es5.min/./list-grid/layout-map/internal/utils.js","cheetahGrid.es5.min/./GridCanvasHelper.js","cheetahGrid.es5.min/./internal/fonts.js","cheetahGrid.es5.min/./element/InlineDrawer.js","cheetahGrid.es5.min/./element/InlineImage.js","cheetahGrid.es5.min/./internal/color.js","cheetahGrid.es5.min/./main.js","cheetahGrid.es5.min/./columns/action.js","cheetahGrid.es5.min/./columns/action/ButtonAction.js","cheetahGrid.es5.min/node_modules/webpack/buildin/global.js","cheetahGrid.es5.min/./columns/action/CheckEditor.js","cheetahGrid.es5.min/./columns/action/InlineInputEditor.js","cheetahGrid.es5.min/./columns/action/internal/InlineInputElement.js","cheetahGrid.es5.min/../src/js/columns/action/internal/InlineInputElement.css*","cheetahGrid.es5.min/../src/js/columns/action/internal/InlineInputElement.css","cheetahGrid.es5.min/node_modules/style-loader/lib/urls.js","cheetahGrid.es5.min/./columns/action/InlineMenuEditor.js","cheetahGrid.es5.min/./columns/action/internal/InlineMenuElement.js","cheetahGrid.es5.min/../src/js/columns/action/internal/InlineMenuElement.css*","cheetahGrid.es5.min/../src/js/columns/action/internal/InlineMenuElement.css","cheetahGrid.es5.min/./columns/type/BranchGraphColumn.js","cheetahGrid.es5.min/./columns/style/BranchGraphStyle.js","cheetahGrid.es5.min/./columns/type/ButtonColumn.js","cheetahGrid.es5.min/./columns/type/CheckColumn.js","cheetahGrid.es5.min/./columns/type/IconColumn.js","cheetahGrid.es5.min/./columns/type/ImageColumn.js","cheetahGrid.es5.min/./internal/LRUCache.js","cheetahGrid.es5.min/./columns/type/MenuColumn.js","cheetahGrid.es5.min/./columns/type/MultilineTextColumn.js","cheetahGrid.es5.min/./columns/type/NumberColumn.js","cheetahGrid.es5.min/./columns/type/PercentCompleteBarColumn.js","cheetahGrid.es5.min/./columns/type/RadioColumn.js","cheetahGrid.es5.min/./columns/action/RadioEditor.js","cheetahGrid.es5.min/./columns/action/SmallDialogInputEditor.js","cheetahGrid.es5.min/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid.es5.min/../src/js/columns/action/internal/SmallDialogInputElement.css*","cheetahGrid.es5.min/../src/js/columns/action/internal/SmallDialogInputElement.css","cheetahGrid.es5.min/./core.js","cheetahGrid.es5.min/./internal/hiDPI.js","cheetahGrid.es5.min/../src/js/internal/style.css*","cheetahGrid.es5.min/../src/js/internal/style.css","cheetahGrid.es5.min/./internal/NumberMap.js","cheetahGrid.es5.min/./internal/Scrollable.js","cheetahGrid.es5.min/./data/CachedDataSource.js","cheetahGrid.es5.min/./data/FilterDataSource.js","cheetahGrid.es5.min/./headers.js","cheetahGrid.es5.min/./header/action/CheckHeaderAction.js","cheetahGrid.es5.min/./header/action/SortHeaderAction.js","cheetahGrid.es5.min/./header/style/StdBaseStyle.js","cheetahGrid.es5.min/./header/type/CheckHeader.js","cheetahGrid.es5.min/./header/type/Header.js","cheetahGrid.es5.min/./header/type/MultilineTextHeader.js","cheetahGrid.es5.min/./header/type/SortHeader.js","cheetahGrid.es5.min/node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg","cheetahGrid.es5.min/node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg","cheetahGrid.es5.min/node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg","cheetahGrid.es5.min/node_modules/material-design-icons/content/svg/production/ic_add_48px.svg","cheetahGrid.es5.min/node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg","cheetahGrid.es5.min/node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg","cheetahGrid.es5.min/node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg","cheetahGrid.es5.min/./register.js","cheetahGrid.es5.min/./themes/theme.js","cheetahGrid.es5.min/./themes/BASIC.js","cheetahGrid.es5.min/./themes/MATERIAL_DESIGN.js","cheetahGrid.es5.min/./tools.js","cheetahGrid.es5.min/./ListGrid.js","cheetahGrid.es5.min/./list-grid/layout-map/index.js","cheetahGrid.es5.min/./list-grid/layout-map/internal/simple-header-layout.js","cheetahGrid.es5.min/./list-grid/layout-map/internal/multi-layout.js","cheetahGrid.es5.min/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid.es5.min/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid.es5.min/./element/inlines.js","cheetahGrid.es5.min/./internal/legacy/canvas/Path2DShim.js","cheetahGrid.es5.min/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid.es5.min/./internal/legacy/canvas/PathCommands.js","cheetahGrid.es5.min/./element/InlineIcon.js","cheetahGrid.es5.min/./element/InlinePath2D.js","cheetahGrid.es5.min/./element/InlineSvg.js","cheetahGrid.es5.min/./columns/message/MessageHandler.js","cheetahGrid.es5.min/./columns/message/ErrorMessage.js","cheetahGrid.es5.min/./columns/message/internal/ErrorMessageElement.js","cheetahGrid.es5.min/../src/js/columns/message/internal/MessageElement.css*","cheetahGrid.es5.min/../src/js/columns/message/internal/MessageElement.css","cheetahGrid.es5.min/../src/js/columns/message/internal/ErrorMessageElement.css*","cheetahGrid.es5.min/../src/js/columns/message/internal/ErrorMessageElement.css","cheetahGrid.es5.min/./columns/message/InfoMessage.js","cheetahGrid.es5.min/./columns/message/WarningMessage.js","cheetahGrid.es5.min/./columns/message/internal/WarningMessageElement.js","cheetahGrid.es5.min/../src/js/columns/message/internal/WarningMessageElement.css*","cheetahGrid.es5.min/../src/js/columns/message/internal/WarningMessageElement.css","cheetahGrid.es5.min/./tooltip/TooltipHandler.js","cheetahGrid.es5.min/./tooltip/Tooltip.js","cheetahGrid.es5.min/./tooltip/BaseTooltip.js","cheetahGrid.es5.min/./tooltip/internal/TooltipElement.js","cheetahGrid.es5.min/../src/js/tooltip/internal/TooltipElement.css*","cheetahGrid.es5.min/../src/js/tooltip/internal/TooltipElement.css","cheetahGrid.es5.min/./get-internal.js"],"names":["window","root","factory","installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","arrayFind","arrayFindIndex","isNode","array","Array","find","arr","predicate","index","findIndex","undefined","length","isDef","data","IE","Edge","Chrome","Firefox","Safari","ua","navigator","userAgent","toLowerCase","exec","indexOf","analyzeUserAgent","applyChainSafe","obj","fn","isPromise","Boolean","then","each","extend","result","args","forEach","source","set","val","configurable","isDescendantElement","target","parentElement","getChainSafe","names","getOrApply","callback","getIgnoreCase","u","k","cellEquals","a","b","col","row","cellInRange","range","start","end","browser","heightLimit","setReadonly","isObject","str","endsWith","searchString","position","subjectString","toString","isFinite","Math","floor","lastIndex","lastIndexOf","genChars","re","next","res","genWords","event","getMouseButtons","e","buttons","which","button","getKeyCode","keyCode","isTouchEvent","changedTouches","cancel","preventDefault","stopPropagation","style","toBoxArray","isArray","emptyFn","Function","require","global","random","cl","mem","getProtectedSymbol","getCheckColumnStateId","getRadioColumnStateId","getButtonColumnStateId","getColumnFadeinStateId","getBranchGraphColumnStateId","getSmallDialogInputEditorStateId","getInlineInputEditorStateId","getInlineMenuEditorStateId","getCheckHeaderStateId","this","utils_1","nextId","EventHandler","constructor","_listeners","type","listener","options","addEventListener","id","on","off","list","removeEventListener","push","clear","DG_EVENT_TYPE","CLICK_CELL","DBLCLICK_CELL","DBLTAP_CELL","MOUSEDOWN_CELL","MOUSEUP_CELL","SELECTED_CELL","KEYDOWN","MOUSEMOVE_CELL","MOUSEENTER_CELL","MOUSELEAVE_CELL","MOUSEOVER_CELL","MOUSEOUT_CELL","CONTEXTMENU_CELL","INPUT_CELL","PASTE_CELL","DELETE_CELL","EDITABLEINPUT_CELL","MODIFY_STATUS_EDITABLEINPUT_CELL","RESIZE_COLUMN","SCROLL","FOCUS_GRID","BLUR_GRID","useSourceMap","map","item","content","sourceMap","cssMapping","btoa","sourceMapping","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","memo","stylesInDom","isOldIE","document","all","atob","apply","arguments","getTarget","parent","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","splice","createStyleElement","createElement","attrs","nonce","addAttrs","el","keys","setAttribute","update","remove","transform","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","replacement","filter","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","defaultStyle","Style","_color","color","_font","font","_padding","padding","_textOverflow","textOverflow","doChangeStyle","StdBaseStyle","__importStar","mod","styleContents","BaseStyle_1","animate_1","symbolManager_1","COLUMN_FADEIN_STATE_ID","getFadinState","grid","state","cells","_generateFadinPointAction","context","drawInternal","drawCellBase","point","stateKey","opacity","cellState","ctx","getContext","globalAlpha","fadinMgr","activeFadeins","animate","f","BaseColumn","option","onDrawCell","_fadeinWhenCallbackInPromise","fadeinWhenCallbackInPromise","cellValue","info","_a","getRecord","helper","getGridCanvasHelper","promise","record","Date","now","toCurrentContext","getDrawRect","time","currentContext","actStyle","of","StyleClass","convertInternal","drawMessageInternal","getMessage","column","configure","isFadeinWhenCallbackInPromise","message","messageHandler","drawCellMessage","_grid","_cellId","_cell","BaseStyle","fontSizeCache","calcStartPosition","rect","width","height","offset","left","paddingLeft","right","paddingRight","top","paddingTop","bottom","paddingBottom","textAlign","textBaseline","x","y","getFontSize","fontName","bk","em","measureText","calcBasePosition","getBooleanOptionOfRecord","getRowRecord","isDisabledRecord","disabled","isReadOnlyRecord","readOnly","toggleValue","replace","Editor","_readOnly","onChangeReadOnlyInternal","BaseAction","tagName","classList","text","html","element","add","textContent","innerHTML","toNodeList","arg","node","nodeType","nodeName","dom","slice","toNode","isFocusable","tabIndex","empty","appendHtml","inner","disableFocus","dataset","disableBeforeTabIndex","children","enableFocus","Number","findPrevSiblingFocusable","previousSibling","findNextSiblingFocusable","utils","BaseColumn_1","Style_1","Column","getIcon","bgColor","testFontLoad","loadIcons","icons","BaseHeader","getWidth","breakWidth","itr","candidateIndex","chars","ret","beforeWidth","pop","charWidth","beforeContent","afterContent","Inline","after","_content","_callback","canvashelper","offsetLeft","offsetRight","offsetTop","offsetBottom","fillTextRect","allWidth","candidate","action","cubicBezier","x2","y2","x3","y3","step","abs","EASINGS","linear","easeIn","easeOut","easeInOut","raf","requestAnimationFrame","setTimeout","duration","easing","startedAt","easingFn","canceledFlg","createAnim","resolve","reject","anim","Promise","EventTarget_1","STYLE_EVENT_TYPE","CHANGE_STYLE","_bgColor","fireListeners","EventTarget","_","listeners","listenerData","listen","unlisten","_textAlign","_textBaseline","icon","argIcon","iconList","toNormarizeArray","Rect","_left","_top","_width","_height","_right","_bottom","x0","max","x1","min","y0","y1","bounds","another","rect1","rect2","BaseHeader_1","CheckHeader_1","CheckHeader","Header_1","Header","MultilineTextHeader_1","MultilineTextHeader","SortHeader_1","SortHeader","TYPES","DEFAULT","SORT","CHECK","MULTILINETEXT","headerType","toUpperCase","ofCell","headerCell","sort","DG_EVENT_TYPE_1","bindCellClickAction","cellId","mouseOver","mouseOut","isTarget","getLayoutCellId","cursor","bindCellKeyAction","acceptKeys","keyboardOptions","moveCellOnEnter","sel","selection","select","_disabled","onChangeDisabledInternal","ButtonStyle_1","ButtonStyle","CheckStyle_1","CheckStyle","IconStyle_1","IconStyle","ImageStyle_1","ImageStyle","MenuStyle_1","MenuStyle","MultilineTextStyle_1","MultilineTextStyle","NumberStyle_1","NumberStyle","PercentCompleteBarStyle_1","PercentCompleteBarStyle","RadioStyle_1","RadioStyle","EVENT_TYPE","columnStyle","StyleClassDef","ICON_PROP_KEYS","doms","props","getIconProps","className","tagProps","body","beforeStyle","defaultView","getComputedStyle","getPropertyValue","substr","quoted","split","test","quote","clientWidth","isLiga","toSimpleArray","iconProps","workData","count","prop","toPropArray","isIconKey","normarize","iconPropKeys","toBoolean","createError","calc","PRECEDENCE","parse","calcStr","lex","tokens","buildBinaryExpNode","stack","op","token","shift","deep","closeIndex","beforeOp","num","parseFloat","unit","exp","reUnit","reNum","reOp","trim","tokenize","toPxInternal","calcNode","full","toPx","isFieldAssessor","field","UPDATE_LENGTH","UPDATED_LENGTH","UPDATED_ORDER","getValue","setPromiseBack","maybePromiseValue","promiseValue","setField","fieldSet","ss","_getIndex","sortedIndexMap","mapIndex","DataSource","_sortedIndexMap","_get","_length","_source","getOriginal","getOriginalField","hasOriginalField","setOriginalField","order","orderFn","v1","v2","sortPromise","recordPromiseCallBackInternal","getField","fieldGet","fieldPromiseCallBackInternal","_index","_field","_value","_record","results","v","EMPTY","BaseAction_1","CheckHeaderAction_1","CheckHeaderAction","SortHeaderAction_1","SortHeaderAction","ImmutableSortHeaderAction","ImmutableCheckHeaderAction","headerAction","ACTIONS","sortMethod","CheckHeaderStyle_1","CheckHeaderStyle","MultilineTextHeaderStyle_1","MultilineTextHeaderStyle","SortHeaderStyle_1","SortHeaderStyle","headerStyle","__importDefault","theme_1","BASIC_1","MATERIAL_DESIGN_1","themes_1","BASIC","Theme","MATERIAL_DESIGN","builtin","defTheme","getChoices","themes","theme","getDefault","setDefault","defaultTheme","getPath2D","Path2D","Path2DShim","fill","pathModule","w","h","save","upsideDown","ud","offsetX","offsetY","xrate","yrate","translate","scale","path2d","restore","LG_EVENT_TYPE","CHANGED_VALUE","CHANGED_HEADER_VALUE","Rect_1","drawExclamationMarkBox","getRect","fillStyle","boxRect","copy","fillRect","fillColor","fillRectWithState","drawInfomationMarkBox","BaseMessage","_messageElement","detachMessageElement","dispose","createMessageElementInternal","_getMessageElement","attach","move","_detach","drawCellMessageInternal","EventHandler_1","dom_1","CLASSNAME","MESSAGE_CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","MessageElement","_handler","rootElement","_rootElement","messageElement","createMessageDomElement","detach","_attachCell","getAttachCellsArea","getCellRange","frozenRowCount","frozenColCount","offsetHeight","offsetWidth","toFixed","actionBind_1","action_utils_1","Action","_action","getState","cell","mouseActiveCell","invalidateCellRange","Editor_1","BaseInputEditor","open","onOpenCellInternal","input","onInputCellInternal","multi","selectionRange","normalizeValue","stopCellMoving","onChangeSelectCellInternal","selected","onGridScrollInternal","baseRect","getCellRect","rangeRect","getCellRangeRect","onSetInputAttrsInternal","doChangeValue","setInputValue","handler","once","_e","BranchGraphColumn_1","BranchGraphColumn","ButtonColumn_1","ButtonColumn","CheckColumn_1","CheckColumn","Column_1","IconColumn_1","IconColumn","ImageColumn_1","ImageColumn","MenuColumn_1","MenuColumn","MultilineTextColumn_1","MultilineTextColumn","NumberColumn_1","NumberColumn","PercentCompleteBarColumn_1","PercentCompleteBarColumn","RadioColumn_1","RadioColumn","NUMBER","RADIO","BUTTON","IMAGE","columnType","adj","buttonBgColor","_buttonBgColor","uncheckBgColor","checkBgColor","borderColor","_uncheckBgColor","_checkBgColor","_borderColor","_imageSizing","imageSizing","_margin","margin","appearance","_appearance","_lineHeight","lineHeight","_autoWrapText","autoWrapText","_lineClamp","lineClamp","DEFAULT_BAR_COLOR","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","checkColor","uncheckBorderColor","checkBorderColor","_checkColor","_uncheckBorderColor","_checkBorderColor","LRUCache_1","allCache","loadImage","src","console","error","img","Image","onload","onerror","url","warn","getCacheOrLoad","cacheName","cacheSize","cache","put","getCacheOrLoad0","LRUCache","normalize","label","caption","normalizeToFn","hiDPI","NumberMap_1","Scrollable_1","canvases_1","paste_utils_1","cancelEvent","createRootElement","_vibrate","vibrate","_getTargetRowAt","absoluteY","internal","getTargetRowAtInternal","candRow","ceil","defaultRowHeight","rowCount","_getRowsHeight","startRow","startBottom","_getRowHeight","findAfter","findBefore","_getTargetColAt","absoluteX","colCount","_getColWidth","_getTargetFrozenRowAt","scroll","_getTargetFrozenColAt","_getFrozenRowsRect","canvas","_getFrozenColsRect","_drawCell","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","drawRect","cellDrawing","drawCells","_getCellDrawing","dcContext","DrawCellContext","_putCellDrawing","pCol","_delayMode","_removeCellDrawing","terminate","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","beginPath","underlayBackgroundColor","_getInitContext","_invalidateRect","_getVisibleRect","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","draw","_toPxWidth","round","calcWidthContext","_adjustColWidth","orgWidth","limits","_getColWidthLimits","_applyColWidthLimits","_getColWidthDefine","colWidthsMap","defaultColWidth","limit","colWidthsLimit","minDef","maxDef","isAutoDefine","_calcAutoColWidthExpr","others","autoCount","hasLimitsOnAuto","def","expr","newWidth","autoPx","_colWidthDefineToPxWidth","_setColWidth","startCol","endCol","defaultColPxWidth","has","getRowHeightInternal","rowHeightsMap","endRow","getRowsHeightInternal","_getScrollHeight","getScrollHeightInternal","_onKeyDownMove","_b","_c","shiftKey","focusCell","focus","ctrlKey","metaKey","hmove","vmove","moveCellOnTab","getMoveUpRowByKeyDownInternal","_moveFocusCell","getMoveDownRowByKeyDownInternal","getMoveLeftColByKeyDownInternal","getMoveRightColByKeyDownInternal","selectAllOnCtrlA","invalidate","vDir","hDir","shiftKeyFlg","getOffsetInvalidateCells","extendRange","beforeRange","beforeRect","_setFocusCell","makeVisibleCell","afterRange","afterRect","intersection","_updatedSelection","focusControl","selCol","selRow","editMode","storeInputStatus","setDefaultInputStatus","_getMouseAbstractPoint","evt","clientX","pageX","scrollX","clientY","pageY","scrollY","getBoundingClientRect","_bindEvents","scrollable","getCellEventArgsSet","abstractPos","getCellAt","eventArgs","canResizeColumn","disableColumnResize","eventArgsSet","resizeCol","_getResizeColAt","columnResizer","cellSelector","hasListeners","doubleTapBefore","longTouchId","clearTimeout","defaultPrevented","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","related","onMouseleaveCell","beforeMouseCell","onMouseoverCell","onMouseoutCell","scrollElement","enterCell","outCell","moving","lastMoving","onKeyDown","onScroll","lastLeft","lastTop","moveX","scrollLeft","moveY","scrollTop","drawImage","redrawRect","frozenRect","_onScroll","onKeyDownMove","copyRange","getCopyRangeInternal","copyValue","copyCellValue","getCopyCellValue","strCellValue","onCopy","onPaste","rangeBoxValues","pasteCellEvent","parsePasteRangeBoxValues","onInput","onDelete","onFocus","focusedGrid","invalidateCell","onBlur","abstractX","abstractY","inPoint","cellRect","_toRelativeRect","absoluteRect","BaseMouseDownMover","_events","_started","_moved","last","_mouseEndPoint","pt","events","touchmove","_mouseMove","passive","touchend","_mouseUp","touchcancel","mousemove","mouseup","_moveInternal","_upInternal","CellSelector","_getTargetCell","_bindMoveAndUp","oldCol","oldRow","newCol","newRow","makeVisibleCol","makeVisibleRow","ColumnResizer","_x","_preX","_invalidateAbsoluteLeft","_targetCol","pre","getColWidth","afterSize","_storeAutoColWidthExprs","updateScroll","setSafeInputValue","FocusControl","_scrollable","lastInputValue","_input","_isComposition","_compositionEnd","inputClear","handleCompositionEnd","stopCellMove","fireKeyDownMove","deleteCellValueOnDel","dummyInput","pasteText","clipboardData","getData","items","types","setData","_keyDownMoveCallback","calcTop","getScrollBarSize","contains","composition","atts","attributes","removeNames","att","_inputStatus","removeName","removeAttribute","inputStatus","Selection","_sel","_focus","_start","_end","_wrapFireSelectedEvent","keepSelect","_setSelectCell","_isWraped","points","needChange","_layers","level","DrawLayer","addDraw","_level","_list","drawing","_rectFilter","_col","_row","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","_childContexts","_cancel","rectFilter","_getRectInternal","_isOutOfRange","_toRelativeDrawRect","isFrozenCell","fRect","onTerminate","_onTerminate","getCellRelativeRect","DrawGrid","protectedSpace","initDocument","Scrollable","alpha","NumberMap","cellTextOverflows","updateSize","bindEventsInternal","cfg","config","setFocusRect","newHeight","scrollHeight","scrollWidth","setScrollSize","_setRowHeight","maxwidth","minwidth","isFrozenStartCell","isFrozenEndCell","getCellsRect","isFrozenRow","isFrozenCol","frozen","getRowAt","getColAt","frozenColsWidth","frozenRowsHeight","_getScrollableVisibleRect","oldEditMode","resetInputStatus","setFocusCursor","invalidateGridRect","cellsRect","invalidateTarget","_range","overflowText","disposable","disposables","_absoluteY","_startRow","_endRow","strokeStyle","lineWidth","_updateGridRange","visibleTop","visibleLeft","SCROLLBAR_SIZE","initDocumentVar","dummy","parseInt","getScrollBarWidth","values","line","reduce","getCellValue","offsetCol","offsetRow","DataSource_1","CachedDataSource_1","CachedDataSource","FilterDataSource_1","FilterDataSource","createArrayPromise","plist","setArrayField","compare","old","createArray","r1","r2","sortArray","dummyPromise","inMouse","_sortArrowColor","sortArrowColor","icons_1","builtins","PI","roundRect","radius","arc","closePath","fillRoundRect","strokeRoundRect","stroke","fillCircle","strokeCircle","measureCheckbox","measureRadioButton","strokeColorsRect","borderColors","strokeRect","positions","preColor","pos1","moveTo","pos2","lineTo","strokeRectLines","clip","pos","fillText","drawInlineImageRect","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","drawCheckbox","check","boxSize","checkPoint","leftX","topY","size","leftWidth","rightWidth","leftLeftPos","leftTopPos","drawRadioButton","ratio","checkSize","drawButton","backgroundColor","shadow","blur","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","columns","seqId","newEmptyHeaderData","define","newEmptyColumnData","EmptyDataCache","headers","rows","fonts","inlineUtils","color_1","InlineDrawer_1","INLINE_ELLIPSIS","getColor","getFont","getThemeColor","defaultThemeColor","gridThemeColor","drawInlines","inlines","drawInline","inline","canDraw","onReady","inlineWidths","inlineWidth","buildInlines","inlineToString","string","getOverflowInline","isAllowOverflow","getOverflowInlinesIndex","maxWidth","remWidth","breakWidthInlines","indexData","beforeInlines","overflow","afterInlines","canBreak","breakWord","breakAll","splitIndex","truncateInlines","overflowInline","_inlineRect","isOverflowInlines","truncInlines","setCellOverflowText","_multiInlineRect","multiInlines","buildedMultiInlines","rectHeight","procLineClamp","hasNext","procLine","lineRow","pad","buildedInline","calcElapsedColor","startColor","endColor","elapsedTime","startColorRGB","colorToRGB","endColorRGB","getRGB","colorName","diff","animElapsedTime","checkbox","positionOpt","boxWidth","radioButton","ThemeResolver","_checkbox","_radioButton","_button","_header","GridCanvasHelper","_theme","calcWidth","calcHeight","calculator","createCalculator","box","clipLeft","clipWidth","clipTop","clipHeight","frozenRowsColor","drawWithClip","paddingNums","toBoxPixelArray","multilines","defaultBgColor","getFillColorState","fillCell","getSelection","selectionBgColor","highlightBgColor","frozenRowsBgColor","drawBorderWithClip","startOffset","highlightBorderColor","border","frozenRowsBorderColor","self","InlineDrawer","load","loads","_testStr","fontFaceSet","legacy","testStr","ready","_draw","_arg","Inline_1","imgs_1","InlineImage","imageLeft","imageTop","imageWidth","imageHeight","_inlineImgPromise","_inlineImg","_src","_imageLeft","_imageTop","_imageWidth","_imageHeight","_onloaded","_loadImage","rgbMap","hexToNum","hex","createRGB","g","testRGB","rateToByte","colorToRGB0","g1","g2","b1","b2","rgb","styleColor","styleColorToRGB","core","register","tools","ListGrid_1","ListGrid","GridCanvasHelper_1","get_internal_1","getIcons","_getInternal","getInternal","Action_1","ButtonAction_1","ButtonAction","CheckEditor_1","CheckEditor","InlineInputEditor_1","InlineInputEditor","InlineMenuEditor_1","InlineMenuEditor","RadioEditor_1","RadioEditor","SmallDialogInputEditor_1","SmallDialogInputEditor","ImmutableCheckEditor","ImmutableRadioEditor","ImmutableInputEditor","INPUT","columnAction","BUTTON_COLUMN_STATE_ID","CHECK_COLUMN_STATE_ID","_state","block","elapsed","cellKey","onChange","selrange","pasteValue","doGetCellValue","newValue","BaseInputEditor_1","InlineInputElement_1","globalElement","bindGridCount","attachInput","editor","InlineInputElement","addDisposable","detachInput","gridFocus","_classList","_type","inputValue","_selected","setInputAttrs","input_value_handler_1","_bindInputEvents","_beforePropEditor","_activeData","tryWithOffEvents","selectionStart","selectionEnd","createTextRange","collapse","moveEnd","moveStart","_attaching","_isActive","stopPropagationOnly","_onKeydownEnter","_onKeydownTab","locals","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","InlineMenuElement_1","type_1","menu_items_1","attachMenu","InlineMenuElement","detachMenu","_options","pasteOpt","_pasteDataToOptionValue","_textToOptionValue","getColumnType","hasOptions","normalizePasteValueStr","captionOpt","opt","ITEM_CLASSNAME","EMPTY_ITEM_CLASSNAME","findItemParents","attachElement","menu","openMenu","emptyItemEl","valueItemEl","valueindex","span","optionToLi","focusEl","focusIndex","allHeight","transformOrigin","menuClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","_menu","_bindMenuEvents","closeMenu","_doChangeValue","querySelectorAll","BranchGraphStyle_1","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","froms","tos","mergeLines","joinLine","timeline","branchIndex","reverse","calcCommand","command","timelineData","cmd","from","branch","to","branches","fromTargetIndex","findBranchRootIndex","branchTargetFromIndex","branchPoint","targetLine","merge","fromTargetLine","commitMerge","commitTag","calcBranchesInfo","dataSource","allData","dataIndex","getAllColumnData","_cache","Map","upLineIndexKey","downLineIndexKey","branchColors","branchLineWidth","circleSize","mergeStyle","branchXPoints","tl","textWidth","calcBranchXPoints","upLineIndex","downLineIndex","pointIndex","lineCap","upX","upRect","upY","bezierCurveTo","downX","downRect","downY","renderMerge","BranchGraphStyle","DEFAULT_BRANCH_COLORS","_name","_branchColors","_circleSize","_branchLineWidth","_mergeStyle","_caption","clone","active","utils_2","_tagName","_className","_iconWidth","iconWidth","isNaN","Infinity","repeatArray","maxHeight","calcKeepAspectRatioSize","_map","_cacheSize","_convertInternal","basePadding","textPadding","iconPadding","path","multilineText","defaultFotmat","_format","format","Intl","NumberFormat","fmt","_min","_max","_formatter","formatter","svalue","rate","barMaxWidth","MARGIN","barTop","barLeft","barSize","RADIO_COLUMN_STATE_ID","defaultGroupResolver","getRecordStartRowByRecordIndex","getRecordIndexByRow","recordRowCount","targetRow","_group","group","flag","actionCell","SmallDialogInputElement_1","SmallDialogInputElement","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","INPUT_CLASSNAME","_dialog","createDialogElement","_bindDialogEvents","dialog","unbindProps","errorMessage","activeData","_onInputValue","bindProps","_beforeValue","_validate","onKeyupAndPress","_onInputValueChange","inputOnly","DrawGrid_1","setRatio","devicePixelRatio","getAttribute","wh","_keys","_vals","_sorted","keyFrom","keyTo","elm","low","high","indexFirst","MAX_SCROLL","_p","_endPointElement","_update","relativeTop","domHeight","sbSize","vScrollRange","rScrollRange","_rCache","_fCache","rowCache","fCache","_setFieldCache","DataSourceIterator","_dataSource","_curIndex","_data","_getIndexData","nest","FilterData","dc","original","_owner","_dataSourceItr","_filter","_filterdList","_queues","filterdList","queues","indexQueue","_findIndex","timeout","_findIndexWithTimeout","testTimeout","dataSourceItr","movePrev","queue","_filterData","CHECK_HEADER_STATE_ID","checked","getHeaderValue","setHeaderValue","_sort","newState","fieldRow","sortState","_executeSort","inlineCheck","buildCheckBoxInline","arrowSize","header","registers","getProp","superObj","defNames","superTheme","hasThemeProperty","hasProperty","cacheLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","getLinearGradient","0","1","data_1","layout_map_1","style_1","style_2","LG_EVENT_TYPE_1","MessageHandler_1","TooltipHandler_1","_getCellRange","layoutMap","_updateRect","setRectFilter","getRowHeight","_getCellValue","headerRowCount","getHeader","getBody","_getField","_getCellMessage","_getCellIcon0","retIcon","iconOpt","_getRecordIndexByRow","hasField","_hasField","_onDrawValue","gridCanvasHelper","drawCellBg","fillOpt","fillCellWithState","drawCellBorder","selRecordIndex","selId","getCellId","isSelectCell","_borderWithState","_getCellIcon","_refreshHeader","headerEvents","layout","MultiLayoutMap","SimpleHeaderLayoutMap","headerObjects","ids","bindGridEvent","columnObjects","columnWidths","minWidth","setColWidth","setMinColWidth","setMaxColWidth","headerRowHeight","setRowHeight","_refreshRowCount","bodyRowCount","_tryWithUpdateDataSource","dataSourceEventIds","_setRecords","records","newDataSource","ofArray","_setDataSource","_onRangePaste","pasteRowCount","pasteColCount","hasEditable","actionColumnsBox","bodyRow","actionColumnsRow","editable","startRowOffset","duplicate","actionRow","valuesRow","valuesCol","oldValue","onPasteCellRangeBox","newEnd","_onRangeDelete","deleteRowCount","deleteColCount","_oldValue","onDeleteCellRangeBox","adjustListGridOption","allowRangePaste","MessageHandler","tooltipHandler","TooltipHandler","getCellRangeByField","colObj","layoutRange","getBodyLayoutRangeById","newFocus","cellRange","hd","valueCallback","changeValueCallback","_setCellValue","getHeaderField","headerValues","oldField","oldState","newField","simple_header_layout_1","multi_layout_1","_emptyDataCache","_columns","_headerCellIds","_headerObjects","_addHeaders","_headerObjectMap","roots","rowCells","_newRow","headerField","colDef","prev","LayoutObjectGrid","objects","objectGrid","objectMap","columnCount","rowLayout","_findStartCell","rowSpan","colSpan","rowIndex","objectGridRow","_getObjectGridRow","colIndex","_setWidthDataIfAbsent","_useColumnIndex","_columnWidths","hbLayouut","normalizeLayout","_body","_columnCount","widthDef","_d","bodyLayoutRow","recordIndex","layoutRow","_f","_g","_h","_j","_k","FontRuler_1","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","FontRuler","fontRulerB_","lastResortRulerA","lastResortRulerB","started_","check_","activeCallback","inactiveCallback","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","lastResortFont","HAS_WEBKIT_FALLBACK_BUG","match","hasWebKitFallbackBug","widthsMatchLastResortWidths_","callbacks","cb","display","computeStyle","el_","path2DManager","InlineIcon_1","InlineImage_1","InlinePath2D_1","InlineSvg_1","iconOf","isIconConstructorOption","InlineIcon","isInlineImageConstructorOption","svg","InlineSvg","isInlineSvgConstructorOption","InlinePath2D","regedIcons","regedIcon","drawWidth","drawHeight","drawRegisteredIcon","il","parser","PathCommandsParser","_ops","CanvasRenderingContext2D","originalFill","PathCommands_1","builder","argsProvider","_commands","PathCommands","buildPush","quadraticCurveTo","rotate","arcTo","ellipse","numArgs","ops","pathTokens","subsequentCommand","fst","log","mag","sqrt","pow","angle","sign","acos","dot","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","cost","cos","sint","sin","rotClockwise","xPrime2","pointMul","rx2","ry2","lambda","factor","cPrime","sum","rotCounterClockwise","meanVec","x1UnitVector","x2UnitVector","theta","lMx","lMy","reflected","lx","ly","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","_icon","letterSpacing","_path","buildSvgDataUrl","XMLSerializer","serializeToString","getSvgElement","DOMParser","parseFromString","svgElem","elmWidth","elmHeight","numElmWidth","numElmHeight","ErrorMessage_1","InfoMessage_1","WarningMessage_1","EMPTY_MESSAGE","MESSAGE_INSTANCE_FACTORY","ErrorMessage","InfoMessage","warning","WarningMessage","normalizeMessage","hasMessage","_attachInfo","_messageInstances","_bindGridEvent","messageInstances","_getMessageInstanceOfMessage","instance","attachMessageElement","moveMessageElement","onSelectMessage","_attach","_move","messageUtils","BaseMessage_1","ErrorMessageElement_1","ErrorMessageElement","_message","_info","hasFocusGrid","MessageElement_1","WarningMessageElement_1","WarningMessageElement","Tooltip_1","TOOLTIP_INSTANCE_FACTORY","Tooltip","_tooltipInstances","tooltipInstances","instanceInfo","_getTooltipInstanceInfo","detachTooltipElement","attachTooltipElement","moveTooltipElement","_isAttachCell","getCellOverflowText","getTooltipInstanceInfo","BaseTooltip_1","TooltipElement_1","TooltipElement","BaseTooltip","_tooltipElement","createTooltipElementInternal","_getTooltipElement","CONTENT_CLASSNAME","createTooltipDomElement","symbolManager","amd"],"mappings":"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","file":"cheetahGrid.es5.min.js","sourcesContent":["(function(window){\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 75);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst isNode = typeof window === \"undefined\" || typeof window.window === \"undefined\";\nexports.isNode = isNode;\nlet arrayFind;\nlet arrayFindIndex;\nconst array = {\n  get find() {\n    if (arrayFind) {\n      return arrayFind;\n    }\n\n    if (Array.prototype.find) {\n      arrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\n    } else {\n      arrayFind = (arr, predicate) => {\n        const index = array.findIndex(arr, predicate);\n        return index >= 0 ? arr[index] : undefined;\n      };\n    }\n\n    return arrayFind;\n  },\n\n  get findIndex() {\n    if (arrayFindIndex) {\n      return arrayFindIndex;\n    }\n\n    if (Array.prototype.findIndex) {\n      arrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\n    } else {\n      arrayFindIndex = (arr, predicate) => {\n        const {\n          length\n        } = arr;\n\n        for (let i = 0; i < length; i++) {\n          const value = arr[i];\n\n          if (predicate(value, i, arr)) {\n            return i;\n          }\n        }\n\n        return -1;\n      };\n    }\n\n    return arrayFindIndex;\n  }\n\n};\nexports.array = array;\n\nfunction isDef(data) {\n  return data !== null && typeof data !== \"undefined\";\n}\n\nexports.isDef = isDef;\n\nfunction analyzeUserAgent() {\n  if (isNode) {\n    return {\n      IE: false,\n      Edge: false,\n      Chrome: false,\n      Firefox: false,\n      Safari: false\n    };\n  } else {\n    const ua = window.navigator.userAgent.toLowerCase();\n    return {\n      IE: !!/(msie|trident)/.exec(ua),\n      Edge: ua.indexOf(\"edge\") > -1,\n      Chrome: ua.indexOf(\"chrome\") > -1 && ua.indexOf(\"edge\") === -1,\n      Firefox: ua.indexOf(\"firefox\") > -1,\n      Safari: ua.indexOf(\"safari\") > -1 && ua.indexOf(\"edge\") === -1\n    };\n  }\n}\n\nconst {\n  IE,\n  Chrome,\n  Firefox,\n  Edge,\n  Safari\n} = analyzeUserAgent();\n\nfunction setReadonly(obj, name, value) {\n  Object.defineProperty(obj, name, {\n    enumerable: false,\n    configurable: true,\n    value\n  });\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction each(obj, fn) {\n  for (const key in obj) {\n    fn(obj[key], key, obj);\n  }\n}\n\nexports.each = each; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\nfunction extend(...args) {\n  const result = {};\n  args.forEach(source => {\n    for (const key in source) {\n      Object.defineProperty(result, key, {\n        get() {\n          return source[key];\n        },\n\n        set(val) {\n          source[key] = val;\n        },\n\n        configurable: true,\n        enumerable: true\n      });\n    }\n  });\n  return result;\n}\n\nexports.extend = extend;\n\nfunction isDescendantElement(root, target) {\n  while (target.parentElement) {\n    const p = target.parentElement;\n\n    if (root === p) {\n      return true;\n    }\n\n    target = p;\n  }\n\n  return false;\n}\n\nexports.isDescendantElement = isDescendantElement;\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nfunction applyChainSafe(obj, fn, ...names) {\n  let value = obj;\n\n  for (let i = 0; i < names.length && isDef(value); i++) {\n    value = fn(value, names[i]);\n  }\n\n  return value;\n}\n\nexports.applyChainSafe = applyChainSafe;\n\nfunction getChainSafe(obj, ...names) {\n  return applyChainSafe(obj, (val, name) => val[name], ...names);\n}\n\nexports.getChainSafe = getChainSafe;\n\nfunction getOrApply(value, ...args) {\n  if (typeof value === \"function\") {\n    return value(...args);\n  } else {\n    return value;\n  }\n}\n\nexports.getOrApply = getOrApply;\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\nfunction endsWith(str, searchString, position) {\n  const subjectString = str.toString();\n\n  if (typeof position !== \"number\" || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n    position = subjectString.length;\n  }\n\n  position -= searchString.length;\n  const lastIndex = subjectString.lastIndexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\nfunction genChars(s) {\n  // Surrogate Code Point\n  // [\\uD800-\\uDBFF]\n  // Variation Selectors\n  // FVS [\\u180B-\\u180D]\n  // VS1VS16 [\\uFE00-\\uFE0F]\n  // VS17VS256 \\uDB40[\\uDD00-\\uDDEF]\n  const re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\r\\n|[^\\uD800-\\uDFFF])([\\u180B-\\u180D]|[\\uFE00-\\uFE0F]|\\uDB40[\\uDD00-\\uDDEF])?/g;\n  return {\n    next() {\n      const res = re.exec(s);\n      return res !== null ? res[0] : null;\n    }\n\n  };\n}\n\nfunction genWords(s) {\n  const re = /[!-~]+|[^!-~\\s]+|\\s+/g;\n  return {\n    next() {\n      const res = re.exec(s);\n      return res !== null ? res[0] : null;\n    }\n\n  };\n}\n\nfunction isPromise(data) {\n  return Boolean(data && typeof data.then === \"function\");\n}\n\nexports.isPromise = isPromise;\n\nfunction then(result, callback) {\n  return isPromise(result) ? result.then(r => callback(r)) : callback(result);\n}\n\nexports.then = then;\n\nfunction getMouseButtons(e) {\n  if (isDef(e.buttons)) {\n    return e.buttons;\n  }\n  /*for legacy*/\n\n\n  if (isDef(e.which)) {\n    if (e.which === 3) {\n      //right?\n      return 4;\n    }\n\n    if (e.which === 2) {\n      //middle?\n      return 4;\n    }\n\n    return e.which; //left or no\n  }\n\n  if (e.button === 0 || e.button === 1) {\n    return 1; //candidate left\n  }\n\n  if (e.button === 2) {\n    return 2; // right\n  }\n\n  return 0; //no or middle?\n}\n\nfunction getKeyCode(e) {\n  return e.keyCode || e.which;\n}\n\nfunction isTouchEvent(e) {\n  return !!e.changedTouches;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction getIgnoreCase(obj, name) {\n  if (obj[name]) {\n    return obj[name];\n  }\n\n  const l = name.toLowerCase();\n\n  if (obj[l]) {\n    return obj[l];\n  }\n\n  const u = name.toLowerCase();\n\n  if (obj[u]) {\n    return obj[u];\n  }\n\n  for (const k in obj) {\n    if (k.toLowerCase() === l) {\n      return obj[k];\n    }\n  }\n\n  return undefined;\n}\n\nexports.getIgnoreCase = getIgnoreCase;\n\nfunction cancel(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\nfunction toBoxArray(obj) {\n  if (!Array.isArray(obj)) {\n    return [obj\n    /*top*/\n    , obj\n    /*right*/\n    , obj\n    /*bottom*/\n    , obj\n    /*left*/\n    ];\n  }\n\n  if (obj.length === 3) {\n    return [obj[0]\n    /*top*/\n    , obj[1]\n    /*right*/\n    , obj[2]\n    /*bottom*/\n    , obj[1]\n    /*left*/\n    ];\n  }\n\n  if (obj.length === 2) {\n    return [obj[0]\n    /*top*/\n    , obj[1]\n    /*right*/\n    , obj[0]\n    /*bottom*/\n    , obj[1]\n    /*left*/\n    ];\n  }\n\n  if (obj.length === 1) {\n    return [obj[0]\n    /*top*/\n    , obj[0]\n    /*right*/\n    , obj[0]\n    /*bottom*/\n    , obj[0]\n    /*left*/\n    ];\n  }\n\n  return obj;\n}\n\nfunction cellEquals(a, b) {\n  return a.col === b.col && a.row === b.row;\n}\n\nexports.cellEquals = cellEquals;\n\nfunction cellInRange(range, col, row) {\n  return range.start.col <= col && col <= range.end.col && range.start.row <= row && row <= range.end.row;\n}\n\nexports.cellInRange = cellInRange;\nexports.browser = {\n  IE,\n  Edge,\n  Chrome,\n  Firefox,\n  Safari,\n  // Chrome 33554431\n  // FireFox 17895588\n  // IE 10737433\n  heightLimit: Chrome ? 33554431 : Firefox ? 17895588 : 10737433\n};\nexports.obj = {\n  setReadonly,\n  isObject\n};\nexports.str = {\n  endsWith,\n  genChars,\n  genWords\n};\nexports.event = {\n  getMouseButtons,\n  getKeyCode,\n  isTouchEvent,\n  cancel\n};\nexports.style = {\n  toBoxArray\n};\nexports.emptyFn = Function.prototype;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nconst utils_1 = __webpack_require__(0);\n\nconst Symbol = utils_1.isNode ? global.Symbol : window.Symbol ? window.Symbol : (() => {\n  function random() {\n    const c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n    const cl = c.length;\n    let r = \"\";\n\n    for (let i = 0; i < 10; i++) {\n      r += c[Math.floor(Math.random() * cl)];\n    }\n\n    return r;\n  }\n\n  return name => {\n    if (name) {\n      return `#${name}_${random()}`;\n    } else {\n      return `#_${random()}`;\n    }\n  };\n})();\nconst mem = {};\n\nfunction get(name) {\n  if (name) {\n    return mem[name] ? mem[name] : mem[name] = Symbol(name);\n  } else {\n    return Symbol();\n  }\n}\n\nexports.get = get;\n\nfunction getProtectedSymbol() {\n  return get(\"protected\");\n}\n\nexports.getProtectedSymbol = getProtectedSymbol;\n\nfunction getCheckColumnStateId() {\n  return get(\"chkcol.stateID\");\n}\n\nexports.getCheckColumnStateId = getCheckColumnStateId;\n\nfunction getRadioColumnStateId() {\n  return get(\"rdcol.stateID\");\n}\n\nexports.getRadioColumnStateId = getRadioColumnStateId;\n\nfunction getButtonColumnStateId() {\n  return get(\"btncol.stateID\");\n}\n\nexports.getButtonColumnStateId = getButtonColumnStateId;\n\nfunction getColumnFadeinStateId() {\n  return get(\"col.fadein_stateID\");\n}\n\nexports.getColumnFadeinStateId = getColumnFadeinStateId;\n\nfunction getBranchGraphColumnStateId() {\n  return get(\"branch_graph_col.stateID\");\n}\n\nexports.getBranchGraphColumnStateId = getBranchGraphColumnStateId;\n\nfunction getSmallDialogInputEditorStateId() {\n  return get(\"small_dialog_input_editor.stateID\");\n}\n\nexports.getSmallDialogInputEditorStateId = getSmallDialogInputEditorStateId;\n\nfunction getInlineInputEditorStateId() {\n  return get(\"inline_input_editor.stateID\");\n}\n\nexports.getInlineInputEditorStateId = getInlineInputEditorStateId;\n\nfunction getInlineMenuEditorStateId() {\n  return get(\"inline_menu_editor.stateID\");\n}\n\nexports.getInlineMenuEditorStateId = getInlineMenuEditorStateId;\n\nfunction getCheckHeaderStateId() {\n  return get(\"check_header.stateID\");\n}\n\nexports.getCheckHeaderStateId = getCheckHeaderStateId;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(78)))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n/** @private */\n\n\nlet nextId = 1;\n\nclass EventHandler {\n  constructor() {\n    this._listeners = {};\n  }\n\n  on(target, type, listener, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ...options) {\n    if (target.addEventListener) {\n      target.addEventListener(type, listener, ...options);\n    }\n\n    const obj = {\n      target,\n      type,\n      listener,\n      options\n    };\n    const id = nextId++;\n    this._listeners[id] = obj;\n    return id;\n  }\n\n  once(target, type, listener, ...options) {\n    const id = this.on(target, type, (...args) => {\n      this.off(id);\n      listener(...args);\n    }, ...options);\n    return id;\n  }\n\n  tryWithOffEvents(target, type, call) {\n    const list = [];\n\n    try {\n      utils_1.each(this._listeners, obj => {\n        if (obj.target === target && obj.type === type) {\n          if (obj.target.removeEventListener) {\n            obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n          }\n\n          list.push(obj);\n        }\n      });\n      call();\n    } finally {\n      list.forEach(obj => {\n        if (obj.target.addEventListener) {\n          obj.target.addEventListener(obj.type, obj.listener, ...obj.options);\n        }\n      });\n    }\n  }\n\n  off(id) {\n    if (id == null) {\n      return;\n    }\n\n    const obj = this._listeners[id];\n\n    if (!obj) {\n      return;\n    }\n\n    delete this._listeners[id];\n\n    if (obj.target.removeEventListener) {\n      obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n    }\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  fire(target, type, ...args) {\n    utils_1.each(this._listeners, obj => {\n      if (obj.target === target && obj.type === type) {\n        obj.listener.call(obj.target, ...args);\n      }\n    });\n  }\n\n  hasListener(target, type) {\n    let result = false;\n    utils_1.each(this._listeners, obj => {\n      if (obj.target === target && obj.type === type) {\n        result = true;\n      }\n    });\n    return result;\n  }\n\n  clear() {\n    utils_1.each(this._listeners, obj => {\n      if (obj.target.removeEventListener) {\n        obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n      }\n    });\n    this._listeners = {};\n  }\n\n  dispose() {\n    this.clear(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this._listeners = null;\n  }\n\n}\n\nexports.EventHandler = EventHandler;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * DrawGrid event types\n * @classdesc cheetahGrid.core.EVENT_TYPE\n * @memberof cheetahGrid.core\n */\n\nexports.DG_EVENT_TYPE = {\n  CLICK_CELL: \"click_cell\",\n  DBLCLICK_CELL: \"dblclick_cell\",\n  DBLTAP_CELL: \"dbltap_cell\",\n  MOUSEDOWN_CELL: \"mousedown_cell\",\n  MOUSEUP_CELL: \"mouseup_cell\",\n  SELECTED_CELL: \"selected_cell\",\n  KEYDOWN: \"keydown\",\n  MOUSEMOVE_CELL: \"mousemove_cell\",\n  MOUSEENTER_CELL: \"mouseenter_cell\",\n  MOUSELEAVE_CELL: \"mouseleave_cell\",\n  MOUSEOVER_CELL: \"mouseover_cell\",\n  MOUSEOUT_CELL: \"mouseout_cell\",\n  CONTEXTMENU_CELL: \"contextmenu_cell\",\n  INPUT_CELL: \"input_cell\",\n  PASTE_CELL: \"paste_cell\",\n  DELETE_CELL: \"delete_cell\",\n  EDITABLEINPUT_CELL: \"editableinput_cell\",\n  MODIFY_STATUS_EDITABLEINPUT_CELL: \"modify_status_editableinput_cell\",\n  RESIZE_COLUMN: \"resize_column\",\n  SCROLL: \"scroll\",\n  FOCUS_GRID: \"focus_grid\",\n  BLUR_GRID: \"blur_grid\"\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = __webpack_require__(84);\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (false) {}\n\n\treturn __webpack_require__.nc;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst StdBaseStyle_1 = __webpack_require__(20);\n\nlet defaultStyle;\n\nclass Style extends StdBaseStyle_1.StdBaseStyle {\n  constructor(style = {}) {\n    super(style);\n    this._color = style.color;\n    this._font = style.font;\n    this._padding = style.padding;\n    this._textOverflow = style.textOverflow || \"clip\";\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new Style();\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color) {\n    this._color = color;\n    this.doChangeStyle();\n  }\n\n  get font() {\n    return this._font;\n  }\n\n  set font(font) {\n    this._font = font;\n    this.doChangeStyle();\n  }\n\n  get padding() {\n    return this._padding;\n  }\n\n  set padding(padding) {\n    this._padding = padding;\n    this.doChangeStyle();\n  }\n\n  get textOverflow() {\n    return this._textOverflow;\n  }\n\n  set textOverflow(textOverflow) {\n    this._textOverflow = textOverflow;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new Style(this);\n  }\n\n}\n\nexports.Style = Style;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst styleContents = __importStar(__webpack_require__(26));\n\nconst utils_1 = __webpack_require__(0);\n\nconst BaseStyle_1 = __webpack_require__(18);\n\nconst animate_1 = __webpack_require__(17);\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst {\n  setReadonly\n} = utils_1.obj;\nconst COLUMN_FADEIN_STATE_ID = symbolManager_1.getColumnFadeinStateId();\n\nfunction isFadeinWhenCallbackInPromise(column, grid) {\n  if (utils_1.isDef(column.fadeinWhenCallbackInPromise)) {\n    return column.fadeinWhenCallbackInPromise;\n  }\n\n  return !!grid.configure(\"fadeinWhenCallbackInPromise\");\n}\n\nfunction getFadinState(grid) {\n  let state = grid[COLUMN_FADEIN_STATE_ID];\n\n  if (!state) {\n    state = {\n      cells: {}\n    };\n    setReadonly(grid, COLUMN_FADEIN_STATE_ID, state);\n  }\n\n  return state;\n}\n\nfunction _generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\n  return point => {\n    const state = getFadinState(grid);\n    const stateKey = `${row}:${col}`;\n\n    if (point === 1) {\n      delete state.cells[stateKey];\n    } else {\n      state.cells[stateKey] = {\n        opacity: point\n      };\n    }\n\n    drawCellBase();\n    drawInternal();\n    const cellState = state.cells[stateKey];\n\n    if (cellState) {\n      //\n      const ctx = context.getContext();\n      ctx.globalAlpha = 1 - cellState.opacity;\n\n      try {\n        drawCellBase();\n      } finally {\n        ctx.globalAlpha = 1;\n      }\n    }\n  };\n}\n\nconst fadinMgr = {\n  animate(grid, col, row, context, drawInternal, drawCellBase) {\n    // fadein animation\n    const state = getFadinState(grid);\n    const activeFadeins = [_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase)];\n    state.activeFadeins = activeFadeins;\n    animate_1.animate(500, point => {\n      activeFadeins.forEach(f => f(point));\n\n      if (point === 1) {\n        delete state.activeFadeins;\n      }\n    });\n  },\n\n  margeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\n    const state = getFadinState(grid);\n\n    if (state.activeFadeins) {\n      state.activeFadeins.push(_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase));\n    } else {\n      drawInternal();\n    }\n  }\n\n};\n\nclass BaseColumn {\n  constructor(option = {}) {\n    this.onDrawCell = this.onDrawCell.bind(this); //\n    //Promisecallback\n\n    this._fadeinWhenCallbackInPromise = option.fadeinWhenCallbackInPromise || false;\n  }\n\n  get fadeinWhenCallbackInPromise() {\n    return this._fadeinWhenCallbackInPromise;\n  }\n\n  get StyleClass() {\n    return BaseStyle_1.BaseStyle;\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    var _a;\n\n    const {\n      style,\n      getRecord,\n      drawCellBase\n    } = info;\n    const helper = grid.getGridCanvasHelper();\n    drawCellBase();\n    const record = getRecord();\n    let promise;\n\n    if (utils_1.isPromise(record)) {\n      promise = record.then(() => cellValue);\n    } else if (utils_1.isPromise(cellValue)) {\n      promise = cellValue;\n    } //\n\n\n    if (promise) {\n      const start = Date.now();\n      return promise.then(val => {\n        const currentContext = context.toCurrentContext();\n        const drawRect = currentContext.getDrawRect();\n\n        if (!drawRect) {\n          return;\n        }\n\n        const time = Date.now() - start;\n\n        const drawInternal = () => {\n          const currentContext = context.toCurrentContext();\n          const drawRect = currentContext.getDrawRect();\n\n          if (!drawRect) {\n            return;\n          }\n\n          const record = getRecord();\n\n          if (utils_1.isPromise(record)) {\n            return;\n          }\n\n          const actStyle = styleContents.of(style, record, this.StyleClass);\n          this.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\n          this.drawMessageInternal(info.getMessage(), currentContext, actStyle, helper, grid, info);\n        };\n\n        if (!isFadeinWhenCallbackInPromise(this, grid)) {\n          drawInternal(); //\n        } else {\n          const {\n            col,\n            row\n          } = context;\n\n          if (time < 80) {\n            //80msPromiseCallback\n            fadinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\n          } else {\n            //\n            fadinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\n          }\n        }\n      });\n    } else {\n      const actStyle = styleContents.of(style, record, this.StyleClass);\n      this.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\n      this.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info); //\n\n      const {\n        col,\n        row\n      } = context;\n      const stateKey = `${col}:${row}`;\n      const cellState = (_a = grid[COLUMN_FADEIN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.cells[stateKey];\n\n      if (cellState) {\n        const ctx = context.getContext();\n        ctx.globalAlpha = 1 - cellState.opacity;\n\n        try {\n          drawCellBase();\n        } finally {\n          ctx.globalAlpha = 1;\n        }\n      }\n\n      return undefined;\n    }\n  }\n\n  convertInternal(value) {\n    return utils_1.isDef(value) ? value : \"\";\n  }\n\n  drawMessageInternal(message, context, style, helper, grid, info) {\n    info.messageHandler.drawCellMessage(message, context, style, helper, grid, info);\n  }\n\n  bindGridEvent(_grid, _cellId) {\n    return [];\n  }\n\n  getCopyCellValue(value, _grid, _cell) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return value;\n  }\n\n}\n\nexports.BaseColumn = BaseColumn;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst fontSizeCache = {};\n\nfunction getFontSize(ctx, font) {\n  const fontName = font || ctx.font;\n\n  if (fontSizeCache[fontName]) {\n    return fontSizeCache[fontName];\n  }\n\n  const bk = ctx.font;\n\n  try {\n    ctx.font = fontName;\n    const em = ctx.measureText(\"\").width;\n    return fontSizeCache[fontName] = {\n      width: em,\n      height: em\n    };\n  } finally {\n    ctx.font = bk;\n  }\n}\n\nexports.getFontSize = getFontSize;\n\nfunction calcBasePosition(ctx, rect, {\n  offset = 0,\n  padding: {\n    left: paddingLeft = 0,\n    right: paddingRight = 0,\n    top: paddingTop = 0,\n    bottom: paddingBottom = 0\n  } = {}\n} = {}) {\n  return calcStartPosition(ctx, rect, 0, 0, {\n    offset,\n    padding: {\n      left: paddingLeft,\n      right: paddingRight,\n      top: paddingTop,\n      bottom: paddingBottom\n    }\n  });\n}\n\nexports.calcBasePosition = calcBasePosition;\n\nfunction calcStartPosition(ctx, rect, width, height, {\n  offset = 0,\n  padding: {\n    left: paddingLeft = 0,\n    right: paddingRight = 0,\n    top: paddingTop = 0,\n    bottom: paddingBottom = 0\n  } = {}\n} = {}) {\n  const textAlign = ctx.textAlign || \"left\";\n  const textBaseline = ctx.textBaseline || \"middle\";\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  let x = rect.left + offset + paddingLeft;\n\n  if (textAlign === \"right\" || textAlign === \"end\") {\n    x = rect.right - width - offset - paddingRight;\n  } else if (textAlign === \"center\") {\n    x = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\n  }\n\n  let y = rect.top + offset + paddingTop;\n\n  if (textBaseline === \"bottom\" || textBaseline === \"alphabetic\" || textBaseline === \"ideographic\") {\n    y = rect.bottom - height - offset - paddingBottom;\n  } else if (textBaseline === \"middle\") {\n    y = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\n  }\n\n  return {\n    x,\n    y\n  };\n}\n\nexports.calcStartPosition = calcStartPosition;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nfunction isDisabledRecord( // eslint-disable-next-line @typescript-eslint/no-explicit-any\noption, grid, row) {\n  if (grid.disabled) {\n    return true;\n  }\n\n  return getBooleanOptionOfRecord(option, grid, row);\n}\n\nexports.isDisabledRecord = isDisabledRecord;\n\nfunction isReadOnlyRecord( // eslint-disable-next-line @typescript-eslint/no-explicit-any\noption, grid, row) {\n  if (grid.readOnly) {\n    return true;\n  }\n\n  return getBooleanOptionOfRecord(option, grid, row);\n}\n\nexports.isReadOnlyRecord = isReadOnlyRecord;\n\nfunction toggleValue(val) {\n  if (typeof val === \"number\") {\n    if (val === 0) {\n      return 1;\n    } else {\n      return 0;\n    }\n  } else if (typeof val === \"string\") {\n    if (val === \"false\") {\n      return \"true\";\n    } else if (val === \"off\") {\n      return \"on\";\n    } else if (/^0+$/.exec(val)) {\n      return val.replace(/^(0*)0$/, \"$11\");\n    } else if (val === \"true\") {\n      return \"false\";\n    } else if (val === \"on\") {\n      return \"off\";\n    } else if (/^0*1$/.exec(val)) {\n      return val.replace(/^(0*)1$/, \"$10\");\n    }\n  }\n\n  return !val;\n}\n\nexports.toggleValue = toggleValue;\n\nfunction getBooleanOptionOfRecord( // eslint-disable-next-line @typescript-eslint/no-explicit-any\noption, grid, row) {\n  if (typeof option === \"function\") {\n    const record = grid.getRowRecord(row);\n\n    if (utils_1.isPromise(record)) {\n      return true;\n    }\n\n    return !!option(record);\n  }\n\n  return !!option;\n}\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseAction_1 = __webpack_require__(25);\n\nclass Editor extends BaseAction_1.BaseAction {\n  constructor(option = {}) {\n    super(option);\n    this._readOnly = option.readOnly || false;\n  }\n\n  get editable() {\n    return true;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n  set readOnly(readOnly) {\n    this._readOnly = !!readOnly;\n    this.onChangeReadOnlyInternal();\n  }\n\n  onChangeReadOnlyInternal() {// abstruct\n  }\n\n}\n\nexports.Editor = Editor;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nfunction createElement(tagName, {\n  classList,\n  text,\n  html\n} = {}) {\n  const element = document.createElement(tagName);\n\n  if (classList) {\n    if (Array.isArray(classList)) {\n      element.classList.add(...classList);\n    } else {\n      element.classList.add(classList);\n    }\n  }\n\n  if (text) {\n    element.textContent = text;\n  } else if (html) {\n    element.innerHTML = html;\n  }\n\n  return element;\n}\n\nexports.createElement = createElement;\n\nfunction empty(dom) {\n  let c;\n\n  while (c = dom.firstChild) {\n    dom.removeChild(c);\n  }\n}\n\nexports.empty = empty;\n\nfunction isNode(arg) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return !!(arg.nodeType && arg.nodeName);\n}\n\nfunction toNode(arg) {\n  if (isNode(arg)) {\n    return arg;\n  }\n\n  const dom = createElement(\"div\", {\n    html: arg\n  });\n  return Array.prototype.slice.call(dom.childNodes);\n}\n\nfunction toNodeList(arg) {\n  if (Array.isArray(arg)) {\n    const result = [];\n    arg.forEach(e => {\n      result.push(...toNodeList(e));\n    });\n    return result;\n  }\n\n  const node = toNode(arg);\n  return Array.isArray(node) ? node : [node];\n}\n\nexports.toNodeList = toNodeList;\n\nfunction appendHtml(dom, inner) {\n  toNodeList(inner).forEach(node => {\n    dom.appendChild(node);\n  });\n}\n\nexports.appendHtml = appendHtml;\n\nfunction disableFocus(el) {\n  el.dataset.disableBeforeTabIndex = `${el.tabIndex}`;\n  el.tabIndex = -1;\n  Array.prototype.slice.call(el.children, 0).forEach(disableFocus);\n}\n\nexports.disableFocus = disableFocus;\n\nfunction enableFocus(el) {\n  if (\"disableBeforeTabIndex\" in el.dataset) {\n    el.tabIndex = Number(el.dataset.disableBeforeTabIndex);\n  }\n\n  Array.prototype.slice.call(el.children, 0).forEach(enableFocus);\n}\n\nexports.enableFocus = enableFocus;\n\nfunction isFocusable(el) {\n  return utils_1.isDef(el.tabIndex) && el.tabIndex > -1;\n}\n\nexports.isFocusable = isFocusable;\n\nfunction findPrevSiblingFocusable(el) {\n  let n = el.previousSibling;\n\n  while (n && !isFocusable(n)) {\n    n = n.previousSibling;\n  }\n\n  return n;\n}\n\nexports.findPrevSiblingFocusable = findPrevSiblingFocusable;\n\nfunction findNextSiblingFocusable(el) {\n  let n = el.nextSibling;\n\n  while (n && !isFocusable(n)) {\n    n = n.nextSibling;\n  }\n\n  return n;\n}\n\nexports.findNextSiblingFocusable = findNextSiblingFocusable;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils = __importStar(__webpack_require__(21));\n\nconst BaseColumn_1 = __webpack_require__(7);\n\nconst Style_1 = __webpack_require__(6);\n\nclass Column extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return Style_1.Style;\n  }\n\n  clone() {\n    return new Column(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    helper.testFontLoad(font, value, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.text(value, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.Column = Column;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst StdBaseStyle_1 = __webpack_require__(117);\n\nlet defaultStyle;\n\nclass Style extends StdBaseStyle_1.StdBaseStyle {\n  constructor(style = {}) {\n    super(style);\n    this._color = style.color;\n    this._font = style.font;\n    this._textOverflow = style.textOverflow || \"ellipsis\";\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new Style();\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color) {\n    this._color = color;\n    this.doChangeStyle();\n  }\n\n  get font() {\n    return this._font;\n  }\n\n  set font(font) {\n    this._font = font;\n    this.doChangeStyle();\n  }\n\n  get textOverflow() {\n    return this._textOverflow;\n  }\n\n  set textOverflow(textOverflow) {\n    this._textOverflow = textOverflow;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new Style(this);\n  }\n\n}\n\nexports.Style = Style;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst styleContents = __importStar(__webpack_require__(33));\n\nconst BaseStyle_1 = __webpack_require__(34);\n\nconst utils_1 = __webpack_require__(0);\n\nclass BaseHeader {\n  constructor(_options = {}) {\n    this.onDrawCell = this.onDrawCell.bind(this); //\n  }\n\n  get StyleClass() {\n    return BaseStyle_1.BaseStyle;\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    const {\n      style,\n      drawCellBase\n    } = info;\n    const helper = grid.getGridCanvasHelper();\n    drawCellBase(); //\n\n    this.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, this.StyleClass), helper, grid, info);\n  }\n\n  convertInternal(value) {\n    if (typeof value === \"function\") {\n      value = value();\n    } // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\n\n    return utils_1.isDef(value) ? `${value}` : \"\";\n  }\n\n  bindGridEvent(_grid, _cellId) {\n    return [];\n  }\n\n}\n\nexports.BaseHeader = BaseHeader;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nfunction getWidth(ctx, content) {\n  return ctx.measureText(content).width;\n}\n\nfunction breakWidth(ctx, content, itr, candidateIndex, width) {\n  const chars = [];\n  let ret = itr.next();\n\n  for (let i = 0; i < candidateIndex && ret !== null; i++, ret = itr.next()) {\n    chars.push(ret);\n  }\n\n  let beforeWidth = getWidth(ctx, chars.join(\"\"));\n\n  if (beforeWidth > width) {\n    while (chars.length) {\n      const c = chars.pop();\n      beforeWidth -= getWidth(ctx, c || \"\");\n\n      if (beforeWidth <= width) {\n        break;\n      }\n    }\n  } else if (beforeWidth < width) {\n    while (ret !== null) {\n      const charWidth = getWidth(ctx, ret);\n\n      if (beforeWidth + charWidth > width) {\n        break;\n      }\n\n      chars.push(ret);\n      beforeWidth += charWidth;\n      ret = itr.next();\n    }\n  }\n\n  const beforeContent = chars.join(\"\").replace(/\\s+$/, \"\");\n  const afterContent = content.slice(beforeContent.length).replace(/^\\s+/, \"\");\n  return {\n    before: beforeContent ? new Inline(beforeContent) : null,\n    after: afterContent ? new Inline(afterContent) : null\n  };\n}\n\nclass Inline {\n  constructor(content) {\n    this._content = utils_1.isDef(content) ? content : \"\";\n  }\n\n  width({\n    ctx\n  }) {\n    return getWidth(ctx, this._content);\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    return null;\n  }\n\n  canDraw() {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\n  onReady(_callback) {}\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    canvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\n      offset: offset + 1,\n      padding: {\n        left: offsetLeft,\n        right: offsetRight,\n        top: offsetTop,\n        bottom: offsetBottom\n      }\n    });\n  }\n\n  canBreak() {\n    return !!this._content;\n  }\n\n  splitIndex(index) {\n    const content = this._content;\n    const itr = utils_1.str.genChars(content);\n    const chars = [];\n    let ret = itr.next();\n\n    for (let i = 0; i < index && ret !== null; i++, ret = itr.next()) {\n      chars.push(ret);\n    }\n\n    const beforeContent = chars.join(\"\");\n    const afterContent = content.slice(beforeContent.length);\n    return {\n      before: beforeContent ? new Inline(beforeContent) : null,\n      after: afterContent ? new Inline(afterContent) : null\n    };\n  }\n\n  breakWord(ctx, width) {\n    const content = this._content;\n    const allWidth = this.width({\n      ctx\n    });\n    const candidate = Math.floor(this._content.length * width / allWidth);\n    const itr = utils_1.str.genWords(content);\n    return breakWidth(ctx, content, itr, candidate, width);\n  }\n\n  breakAll(ctx, width) {\n    const content = this._content;\n    const allWidth = this.width({\n      ctx\n    });\n    const candidate = Math.floor(this._content.length * width / allWidth);\n    const itr = utils_1.str.genChars(content);\n    return breakWidth(ctx, content, itr, candidate, width);\n  }\n\n  toString() {\n    return this._content;\n  }\n\n}\n\nexports.Inline = Inline;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst action = __importStar(__webpack_require__(76));\n\nexports.action = action;\n\nconst style = __importStar(__webpack_require__(26));\n\nexports.style = style;\n\nconst type = __importStar(__webpack_require__(44));\n\nexports.type = type;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nfunction cubicBezier(x2, y2, x3, y3) {\n  let step;\n  const err = 0.0001;\n  x2 *= 3;\n  y2 *= 3;\n  x3 *= 3;\n  y3 *= 3;\n  return function (t) {\n    let p, a, b, c, d, x, s;\n\n    if (t < 0 || 1 < t) {\n      throw new Error(`${t}`);\n    }\n\n    p = step || t;\n\n    do {\n      a = 1 - p;\n      b = a * a;\n      c = p * p;\n      d = c * p;\n      x = x2 * b * p + x3 * a * c + d;\n      s = t - x;\n      p += s * 0.5;\n    } while (err < Math.abs(s));\n\n    step = p;\n    return y2 * b * p + y3 * a * c + d;\n  };\n}\n\nconst EASINGS = {\n  linear(p) {\n    return p;\n  },\n\n  easeIn: cubicBezier(0.42, 0.0, 1.0, 1.0),\n  easeOut: cubicBezier(0.0, 0.0, 0.58, 1.0),\n  easeInOut: cubicBezier(0.42, 0.0, 0.58, 1.0)\n};\nconst raf = utils_1.isNode ? () => {} : window.requestAnimationFrame || ( // eslint-disable-next-line @typescript-eslint/no-explicit-any\nfn => setTimeout(fn, 1));\n\nfunction now() {\n  return Date.now();\n}\n/**\n * <pre>\n * Animates.\n * </pre>\n * @function\n * @param {number} duration animation time.\n * @param {function} step step\n * @param {function|string} easing easing\n * @returns {object} Deferred object.\n */\n\n\nfunction animate(duration, step, easing) {\n  const startedAt = now();\n  const easingFn = easing == null ? EASINGS.easeInOut : typeof easing === \"string\" ? EASINGS[easing] : easing;\n  let canceledFlg = false;\n\n  const createAnim = (resolve, reject) => {\n    const anim = () => {\n      const point = now() - startedAt;\n\n      if (canceledFlg) {\n        //cancel\n        if (reject) {\n          reject();\n        }\n      } else if (point >= duration) {\n        //end\n        step(1);\n\n        if (resolve) {\n          resolve();\n        }\n      } else {\n        step(easingFn(point / duration));\n        raf(anim);\n      }\n    };\n\n    return anim;\n  };\n\n  const cancel = () => {\n    canceledFlg = true;\n  };\n\n  if (typeof Promise !== \"undefined\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const result = new Promise((resolve, reject) => {\n      const anim = createAnim(resolve, reject);\n      step(0);\n      anim();\n    });\n    result.cancel = cancel;\n    return result;\n  } else {\n    const anim = createAnim(() => {}, () => {});\n    step(0);\n    anim();\n    return {\n      cancel\n    };\n  }\n}\n\nexports.animate = animate;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst EventTarget_1 = __webpack_require__(19);\n\nconst STYLE_EVENT_TYPE = {\n  CHANGE_STYLE: \"change_style\"\n};\nlet defaultStyle;\n\nclass BaseStyle extends EventTarget_1.EventTarget {\n  constructor({\n    bgColor\n  } = {}) {\n    super();\n    this._bgColor = bgColor;\n  }\n\n  static get EVENT_TYPE() {\n    return STYLE_EVENT_TYPE;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n  }\n\n  get bgColor() {\n    return this._bgColor;\n  }\n\n  set bgColor(bgColor) {\n    this._bgColor = bgColor;\n    this.doChangeStyle();\n  }\n\n  doChangeStyle() {\n    this.fireListeners(STYLE_EVENT_TYPE.CHANGE_STYLE);\n  }\n\n  clone() {\n    return new BaseStyle(this);\n  }\n\n}\n\nexports.BaseStyle = BaseStyle;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _a;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst symbolManager_1 = __webpack_require__(1); //private symbol\n\n/** @private */\n\n\nconst _ = symbolManager_1.get();\n/** @private */\n\n\nlet nextId = 1;\n/**\n * event target.\n */\n\nclass EventTarget {\n  constructor() {\n    this[_a] = {\n      listeners: {},\n      listenerData: {}\n    };\n  }\n  /**\n   * Adds an event listener.\n   * @param  {string} type The event type id.\n   * @param  {function} listener Callback method.\n   * @return {number} unique id for the listener.\n   */\n\n\n  listen(type, listener) {\n    const list = this[_].listeners[type] || (this[_].listeners[type] = []);\n    list.push(listener);\n    const id = nextId++;\n    this[_].listenerData[id] = {\n      type,\n      listener,\n      remove: () => {\n        delete this[_].listenerData[id];\n        const index = list.indexOf(listener);\n        list.splice(index, 1);\n\n        if (!this[_].listeners[type].length) {\n          delete this[_].listeners[type];\n        }\n      }\n    };\n    return id;\n  }\n  /**\n   * Removes an event listener which was added with listen() by the id returned by listen().\n   * @param  {number} id the id returned by listen().\n   * @return {void}\n   */\n\n\n  unlisten(id) {\n    if (!this[_]) {\n      return;\n    }\n\n    this[_].listenerData[id].remove();\n  }\n\n  addEventListener(type, listener) {\n    this.listen(type, listener);\n  }\n\n  removeEventListener(type, listener) {\n    if (!this[_]) {\n      return;\n    }\n\n    utils_1.each(this[_].listenerData, (obj, id) => {\n      if (obj.type === type && obj.listener === listener) {\n        this.unlisten(id);\n      }\n    });\n  }\n\n  hasListeners(type) {\n    return !!this[_].listeners[type];\n  }\n  /**\n   * Fires all registered listeners\n   * @param  {string}    type The type of the listeners to fire.\n   * @param  {...*} args fire arguments\n   * @return {*} the result of the last listener\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  fireListeners(type, ...args) {\n    const list = this[_].listeners[type];\n\n    if (!list) {\n      return [];\n    }\n\n    return list.map(listener => listener.call(this, ...args)).filter(utils_1.isDef);\n  }\n\n  dispose() {\n    delete this[_];\n  }\n\n}\n\nexports.EventTarget = EventTarget;\n_a = _;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseStyle_1 = __webpack_require__(18);\n\nlet defaultStyle;\n\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\n  constructor(style = {}) {\n    super(style);\n    this._textAlign = style.textAlign || \"left\";\n    this._textBaseline = style.textBaseline || \"middle\";\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdBaseStyle();\n  }\n\n  get textAlign() {\n    return this._textAlign;\n  }\n\n  set textAlign(textAlign) {\n    this._textAlign = textAlign;\n    this.doChangeStyle();\n  }\n\n  get textBaseline() {\n    return this._textBaseline;\n  }\n\n  set textBaseline(textBaseline) {\n    this._textBaseline = textBaseline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new StdBaseStyle(this);\n  }\n\n}\n\nexports.StdBaseStyle = StdBaseStyle;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst icons = __importStar(__webpack_require__(27));\n\nconst utils_1 = __webpack_require__(0);\n\nfunction loadIcons( // eslint-disable-next-line @typescript-eslint/no-explicit-any\nicon, context, helper, callback) {\n  let argIcon = undefined;\n\n  if (icon) {\n    if (utils_1.isPromise(icon)) {\n      icon.then(i => {\n        loadIcons(i, context.toCurrentContext(), helper, callback);\n      });\n    } else {\n      const iconList = icons.toNormarizeArray(icon);\n      iconList.forEach(i => {\n        if (i.font && i.content) {\n          helper.testFontLoad(i.font, i.content, context);\n        }\n      });\n      argIcon = iconList;\n    }\n  }\n\n  callback(argIcon, context);\n}\n\nexports.loadIcons = loadIcons;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nclass Rect {\n  constructor(left, top, width, height) {\n    this._left = left;\n    this._top = top;\n    this._width = width;\n    this._height = height;\n  }\n\n  static bounds(left, top, right, bottom) {\n    return new Rect(left, top, right - left, bottom - top);\n  }\n\n  static max(rect1, rect2) {\n    return Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\n  }\n\n  get left() {\n    return this._left;\n  }\n\n  set left(left) {\n    const {\n      right\n    } = this;\n    this._left = left;\n    this.right = right;\n  }\n\n  get top() {\n    return this._top;\n  }\n\n  set top(top) {\n    const {\n      bottom\n    } = this;\n    this._top = top;\n    this.bottom = bottom;\n  }\n\n  get width() {\n    return this._width;\n  }\n\n  set width(width) {\n    this._width = width;\n    this._right = undefined;\n  }\n\n  get height() {\n    return this._height;\n  }\n\n  set height(height) {\n    this._height = height;\n    this._bottom = undefined;\n  }\n\n  get right() {\n    return this._right !== undefined ? this._right : this._right = this.left + this.width;\n  }\n\n  set right(right) {\n    this._right = right;\n    this.width = right - this.left;\n  }\n\n  get bottom() {\n    return this._bottom !== undefined ? this._bottom : this._bottom = this.top + this.height;\n  }\n\n  set bottom(bottom) {\n    this._bottom = bottom;\n    this.height = bottom - this.top;\n  }\n\n  offsetLeft(offset) {\n    this._left += offset;\n    this._right = undefined;\n  }\n\n  offsetTop(offset) {\n    this._top += offset;\n    this._bottom = undefined;\n  }\n\n  copy() {\n    return new Rect(this.left, this.top, this.width, this.height);\n  }\n\n  intersection(rect) {\n    const x0 = Math.max(this.left, rect.left);\n    const x1 = Math.min(this.left + this.width, rect.left + rect.width);\n\n    if (x0 <= x1) {\n      const y0 = Math.max(this.top, rect.top);\n      const y1 = Math.min(this.top + this.height, rect.top + rect.height);\n\n      if (y0 <= y1) {\n        return Rect.bounds(x0, y0, x1, y1);\n      }\n    }\n\n    return null;\n  }\n\n  contains(another) {\n    return this.left <= another.left && this.left + this.width >= another.left + another.width && this.top <= another.top && this.top + this.height >= another.top + another.height;\n  }\n\n  inPoint(x, y) {\n    return this.left <= x && this.left + this.width >= x && this.top <= y && this.top + this.height >= y;\n  }\n\n}\n\nexports.Rect = Rect;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseHeader_1 = __webpack_require__(14);\n\nexports.BaseHeader = BaseHeader_1.BaseHeader;\n\nconst CheckHeader_1 = __webpack_require__(118);\n\nexports.CheckHeader = CheckHeader_1.CheckHeader;\n\nconst Header_1 = __webpack_require__(119);\n\nexports.Header = Header_1.Header;\n\nconst MultilineTextHeader_1 = __webpack_require__(120);\n\nexports.MultilineTextHeader = MultilineTextHeader_1.MultilineTextHeader;\n\nconst SortHeader_1 = __webpack_require__(121);\n\nexports.SortHeader = SortHeader_1.SortHeader;\nconst TYPES = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DEFAULT: new Header_1.Header(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  SORT: new SortHeader_1.SortHeader(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  CHECK: new CheckHeader_1.CheckHeader(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  MULTILINETEXT: new MultilineTextHeader_1.MultilineTextHeader()\n};\n\nfunction of(headerType) {\n  if (!headerType) {\n    return TYPES.DEFAULT;\n  } else if (typeof headerType === \"string\") {\n    const key = headerType.toUpperCase();\n    return TYPES[key] || of(null);\n  } else {\n    return headerType;\n  }\n}\n\nexports.of = of;\n\nfunction ofCell(headerCell) {\n  if (headerCell.sort) {\n    return TYPES.SORT;\n  }\n\n  return of(headerCell.headerType);\n}\n\nexports.ofCell = ofCell;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(3);\n\nconst KEY_ENTER = 13;\nconst KEY_SPACE = 32;\n\nfunction bindCellClickAction(grid, cellId, {\n  action,\n  mouseOver,\n  mouseOut\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  return [// click\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (utils_1.isPromise(grid.getRowRecord(e.row))) {\n      return;\n    }\n\n    action({\n      col: e.col,\n      row: e.row\n    });\n  }), // mouse move\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (utils_1.isPromise(grid.getRowRecord(e.row))) {\n      return;\n    }\n\n    if (mouseOver) {\n      if (!mouseOver({\n        col: e.col,\n        row: e.row\n      })) {\n        return;\n      }\n    }\n\n    grid.getElement().style.cursor = \"pointer\";\n  }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (mouseOut) {\n      mouseOut({\n        col: e.col,\n        row: e.row\n      });\n    }\n\n    grid.getElement().style.cursor = \"\";\n  })];\n}\n\nexports.bindCellClickAction = bindCellClickAction;\n\nfunction bindCellKeyAction(grid, cellId, {\n  action,\n  acceptKeys = []\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\n  return [// enter key down\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n    var _a;\n\n    if (acceptKeys.indexOf(e.keyCode) === -1) {\n      return;\n    }\n\n    if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\n      // When moving with the enter key, no action is taken with the enter key.\n      return;\n    }\n\n    const sel = grid.selection.select;\n\n    if (!isTarget(sel.col, sel.row)) {\n      return;\n    }\n\n    if (utils_1.isPromise(grid.getRowRecord(sel.row))) {\n      return;\n    }\n\n    action({\n      col: sel.col,\n      row: sel.row\n    });\n    utils_1.event.cancel(e.event);\n  })];\n}\n\nexports.bindCellKeyAction = bindCellKeyAction;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nclass BaseAction {\n  constructor(option = {}) {\n    this._disabled = option.disabled || false;\n  }\n\n  get disabled() {\n    return this._disabled;\n  }\n\n  set disabled(disabled) {\n    this._disabled = disabled;\n    this.onChangeDisabledInternal();\n  }\n\n  onChangeDisabledInternal() {// abstruct\n  }\n\n}\n\nexports.BaseAction = BaseAction;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseStyle_1 = __webpack_require__(18);\n\nexports.BaseStyle = BaseStyle_1.BaseStyle;\n\nconst ButtonStyle_1 = __webpack_require__(45);\n\nexports.ButtonStyle = ButtonStyle_1.ButtonStyle;\n\nconst CheckStyle_1 = __webpack_require__(46);\n\nexports.CheckStyle = CheckStyle_1.CheckStyle;\n\nconst IconStyle_1 = __webpack_require__(47);\n\nexports.IconStyle = IconStyle_1.IconStyle;\n\nconst ImageStyle_1 = __webpack_require__(48);\n\nexports.ImageStyle = ImageStyle_1.ImageStyle;\n\nconst MenuStyle_1 = __webpack_require__(49);\n\nexports.MenuStyle = MenuStyle_1.MenuStyle;\n\nconst MultilineTextStyle_1 = __webpack_require__(50);\n\nexports.MultilineTextStyle = MultilineTextStyle_1.MultilineTextStyle;\n\nconst NumberStyle_1 = __webpack_require__(51);\n\nexports.NumberStyle = NumberStyle_1.NumberStyle;\n\nconst PercentCompleteBarStyle_1 = __webpack_require__(52);\n\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle_1.PercentCompleteBarStyle;\n\nconst RadioStyle_1 = __webpack_require__(53);\n\nexports.RadioStyle = RadioStyle_1.RadioStyle;\n\nconst Style_1 = __webpack_require__(6);\n\nexports.Style = Style_1.Style;\nconst {\n  EVENT_TYPE\n} = BaseStyle_1.BaseStyle;\nexports.EVENT_TYPE = EVENT_TYPE;\n\nfunction of(columnStyle, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nrecord, StyleClassDef = Style_1.Style) {\n  if (columnStyle) {\n    if (columnStyle instanceof BaseStyle_1.BaseStyle) {\n      return columnStyle;\n    } else if (typeof columnStyle === \"function\") {\n      return of(columnStyle(record), record, StyleClassDef);\n    } else if (record && columnStyle in record) {\n      return of(record[columnStyle], record, StyleClassDef);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    return new StyleClassDef(columnStyle);\n  } else {\n    return StyleClassDef.DEFAULT;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst ICON_PROP_KEYS = [\"content\", \"font\", \"color\", \"className\", \"tagName\", \"isLiga\", \"width\", \"src\", \"svg\", \"name\", \"path\"];\n\nfunction quote(name) {\n  const quoted = [];\n  const split = name.split(/,\\s*/);\n\n  for (let i = 0; i < split.length; i++) {\n    const part = split[i].replace(/['\"]/g, \"\");\n\n    if (part.indexOf(\" \") === -1 && !/^\\d/.test(part)) {\n      quoted.push(part);\n    } else {\n      quoted.push(`'${part}'`);\n    }\n  }\n\n  return quoted.join(\",\");\n}\n\nconst doms = {};\nconst props = {};\n\nfunction getIconProps(tagName, className) {\n  const tagProps = props[tagName] || (props[tagName] = {});\n\n  if (tagProps[className]) {\n    return tagProps[className];\n  }\n\n  const dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\n  dom.className = className;\n  document.body.appendChild(dom);\n\n  try {\n    const beforeStyle = (document.defaultView || window).getComputedStyle(dom, \"::before\");\n    let content = beforeStyle.getPropertyValue(\"content\");\n\n    if (content.length >= 3 && (content[0] === '\"' || content[0] === \"'\")) {\n      if (content[0] === content[content.length - 1]) {\n        content = content.substr(1, content.length - 2);\n      }\n    }\n\n    let font = beforeStyle.getPropertyValue(\"font\");\n\n    if (!font) {\n      font = `${beforeStyle.getPropertyValue(\"font-style\")} ${beforeStyle.getPropertyValue(\"font-variant\")} ${beforeStyle.getPropertyValue(\"font-weight\")} ${beforeStyle.getPropertyValue(\"font-size\")}/${beforeStyle.getPropertyValue(\"line-height\")} ${quote(beforeStyle.getPropertyValue(\"font-family\"))}`;\n    }\n\n    const color = beforeStyle.getPropertyValue(\"color\");\n    const width = dom.clientWidth;\n    const isLiga = (beforeStyle.getPropertyValue(\"font-feature-settings\") || \"\").indexOf(\"liga\") > -1;\n    return tagProps[className] = {\n      content,\n      font,\n      color,\n      width,\n      isLiga\n    };\n  } finally {\n    document.body.removeChild(dom);\n  }\n}\n\nexports.getIconProps = getIconProps;\n\nfunction toPropArray(prop, count) {\n  const result = [];\n\n  if (Array.isArray(prop)) {\n    result.push(...prop);\n\n    for (let i = prop.length; i < count; i++) {\n      result.push(null);\n    }\n  } else {\n    for (let i = 0; i < count; i++) {\n      result.push(prop);\n    }\n  }\n\n  return result;\n}\n\nfunction toSimpleArray(iconProps) {\n  if (!iconProps) {\n    return iconProps;\n  } else if (Array.isArray(iconProps)) {\n    return iconProps;\n  }\n\n  const workData = {};\n  let count = 0;\n  ICON_PROP_KEYS.forEach(k => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const prop = iconProps[k];\n\n    if (prop) {\n      if (Array.isArray(prop)) {\n        count = Math.max(count, prop.length);\n      } else {\n        count = Math.max(count, 1);\n      }\n    }\n  });\n  ICON_PROP_KEYS.forEach(k => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const arr = toPropArray(iconProps[k], count); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    workData[k] = arr;\n  });\n  const result = [];\n\n  for (let i = 0; i < count; i++) {\n    const data = {};\n    ICON_PROP_KEYS.forEach(k => {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const val = workData[k][i]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      data[k] = val;\n    });\n    result.push(data);\n  }\n\n  return result;\n}\n\nfunction normarize(iconProps) {\n  const data = {};\n\n  for (const k in iconProps) {\n    if (k === \"className\") {\n      continue;\n    }\n\n    if (isIconKey(k)) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      data[k] = iconProps[k];\n    }\n  }\n\n  if (iconProps.className) {\n    const prop = getIconProps(iconProps.tagName || \"i\", iconProps.className);\n\n    for (const k in prop) {\n      if (isIconKey(k)) {\n        if (!utils_1.isDef(iconProps[k])) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          data[k] = prop[k];\n        }\n      }\n    }\n  }\n\n  return data;\n}\n\nfunction toNormarizeArray(iconProps) {\n  const icons = toSimpleArray(iconProps);\n\n  if (!icons) {\n    return icons;\n  }\n\n  return icons.map(icon => normarize(icon));\n}\n\nexports.toNormarizeArray = toNormarizeArray;\nexports.iconPropKeys = ICON_PROP_KEYS;\n\nfunction isIconKey(k) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return ICON_PROP_KEYS.indexOf(k) >= 0;\n}\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction toBoolean(val) {\n  if (typeof val === \"string\") {\n    if (val === \"false\") {\n      return false;\n    } else if (val === \"off\") {\n      return false;\n    } else if (/^0+$/.exec(val)) {\n      return false;\n    }\n  }\n\n  return Boolean(val);\n}\n\nexports.toBoolean = toBoolean;\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst TYPE_PUNCTURE = \"p\";\nconst TYPE_UNIT = \"u\";\nconst TYPE_OPERATOR = \"o\";\nconst TYPE_NUMBER = \"n\";\nconst NODE_TYPE_UNIT = \"u\";\nconst NODE_TYPE_BINARY_EXPRESSION = \"b\";\nconst NODE_TYPE_NUMBER = \"n\";\n\nfunction createError(calc) {\n  return new Error(`calc parse error: ${calc}`);\n}\n/**\n * tokenize\n * @param {string} calc calc expression\n * @returns {Array} tokens\n * @private\n */\n\n\nfunction tokenize(calc) {\n  let exp = calc.replace(/calc\\(/g, \"(\");\n  const reUnit = /^[-+]?(\\d*\\.\\d+|\\d+)[a-z%]+/i;\n  const reNum = /^[-+]?(\\d*\\.\\d+|\\d+)/i;\n  const reOp = /^[-+*/]/;\n  const tokens = [];\n  let re;\n\n  while (exp = exp.trim()) {\n    if (exp[0] === \"(\" || exp[0] === \")\") {\n      tokens.push({\n        value: exp[0],\n        type: TYPE_PUNCTURE\n      });\n      exp = exp.slice(1);\n    } else if (re = reUnit.exec(exp)) {\n      tokens.push({\n        value: re[0],\n        type: TYPE_UNIT\n      });\n      exp = exp.slice(re[0].length);\n    } else if (re = reNum.exec(exp)) {\n      tokens.push({\n        value: re[0],\n        type: TYPE_NUMBER\n      });\n      exp = exp.slice(re[0].length);\n    } else if (re = reOp.exec(exp)) {\n      tokens.push({\n        value: re[0],\n        type: TYPE_OPERATOR\n      });\n      exp = exp.slice(re[0].length);\n    } else {\n      throw createError(calc);\n    }\n  }\n\n  return tokens;\n}\n\nconst PRECEDENCE = {\n  \"*\": 3,\n  \"/\": 3,\n  \"+\": 2,\n  \"-\": 2\n};\n\nfunction lex(tokens, calc) {\n  var _a;\n\n  function buildBinaryExpNode(stack) {\n    const right = stack.pop();\n    const op = stack.pop();\n    const left = stack.pop();\n\n    if (!left || !left.nodeType || !op || op.type !== TYPE_OPERATOR || !right || !right.nodeType) {\n      throw createError(calc);\n    }\n\n    return {\n      nodeType: NODE_TYPE_BINARY_EXPRESSION,\n      left,\n      op,\n      right\n    };\n  }\n\n  const stack = [];\n\n  while (tokens.length) {\n    const token = tokens.shift();\n\n    if (token.type === TYPE_PUNCTURE && token.value === \"(\") {\n      let deep = 0;\n      const closeIndex = utils_1.array.findIndex(tokens, t => {\n        if (t.type === TYPE_PUNCTURE && t.value === \"(\") {\n          deep++;\n        } else if (t.type === TYPE_PUNCTURE && t.value === \")\") {\n          if (!deep) {\n            return true;\n          }\n\n          deep--;\n        }\n\n        return false;\n      });\n\n      if (closeIndex === -1) {\n        throw createError(calc);\n      }\n\n      stack.push(lex(tokens.slice(0, closeIndex), calc));\n      tokens.splice(0, closeIndex + 1);\n    } else if (token.type === TYPE_OPERATOR) {\n      if (stack.length >= 3) {\n        const beforeOp = stack[stack.length - 2].value;\n\n        if (PRECEDENCE[token.value] <= PRECEDENCE[beforeOp]) {\n          stack.push(buildBinaryExpNode(stack));\n        }\n      }\n\n      stack.push(token);\n    } else if (token.type === TYPE_UNIT) {\n      const {\n        value\n      } = token;\n      const num = parseFloat(value);\n      const unit = ((_a = /[a-z%]+/i.exec(value)) === null || _a === void 0 ? void 0 : _a[0]) || \"\";\n      stack.push({\n        nodeType: NODE_TYPE_UNIT,\n        value: num,\n        unit\n      });\n    } else if (token.type === TYPE_NUMBER) {\n      stack.push({\n        nodeType: NODE_TYPE_NUMBER,\n        value: parseFloat(token.value)\n      });\n    }\n  }\n\n  while (stack.length > 1) {\n    stack.push(buildBinaryExpNode(stack));\n  }\n\n  return stack[0];\n}\n\nfunction parse(calcStr) {\n  const tokens = tokenize(calcStr);\n  return lex(tokens, calcStr);\n}\n\nfunction calcNode(node, context) {\n  if (node.nodeType === NODE_TYPE_BINARY_EXPRESSION) {\n    const left = calcNode(node.left, context);\n    const right = calcNode(node.right, context);\n\n    switch (node.op.value) {\n      case \"+\":\n        return left + right;\n\n      case \"-\":\n        return left - right;\n\n      case \"*\":\n        return left * right;\n\n      case \"/\":\n        return left / right;\n\n      default:\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        throw new Error(`calc error. unknown operator: ${node.op.value}`);\n    }\n  } else if (node.nodeType === NODE_TYPE_UNIT) {\n    switch (node.unit) {\n      case \"%\":\n        return node.value * context.full / 100;\n\n      case \"em\":\n        return node.value * context.em;\n\n      case \"px\":\n        return node.value;\n\n      default:\n        throw new Error(`calc error. unknown unit: ${node.unit}`);\n    }\n  } else if (node.nodeType === NODE_TYPE_NUMBER) {\n    return node.value;\n  }\n\n  throw new Error(\"calc error.\");\n}\n\nfunction toPxInternal(value, context) {\n  const ast = parse(value);\n  return calcNode(ast, context);\n}\n\nfunction toPx(value, context) {\n  if (typeof value === \"string\") {\n    return toPxInternal(value.trim(), context);\n  }\n\n  return value - 0;\n}\n\nexports.toPx = toPx;\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst sort = __importStar(__webpack_require__(60));\n\nconst utils_1 = __webpack_require__(0);\n\nconst EventTarget_1 = __webpack_require__(19);\n/** @private */\n\n\nfunction isFieldAssessor(field) {\n  if (utils_1.obj.isObject(field)) {\n    const a = field;\n\n    if (a.get && a.set) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/** @private */\n\n\nconst EVENT_TYPE = {\n  UPDATE_LENGTH: \"update_length\",\n  UPDATED_LENGTH: \"updated_length\",\n  UPDATED_ORDER: \"updated_order\"\n};\n/** @private */\n\nfunction getValue(value, setPromiseBack) {\n  const maybePromiseValue = utils_1.getOrApply(value);\n\n  if (utils_1.isPromise(maybePromiseValue)) {\n    const promiseValue = maybePromiseValue.then(r => {\n      setPromiseBack(r);\n      return r;\n    }); //\n\n    setPromiseBack(promiseValue);\n    return promiseValue;\n  } else {\n    return maybePromiseValue;\n  }\n}\n/** @private */\n\n\nfunction getField(record, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nsetPromiseBack) {\n  if (!utils_1.isDef(record)) {\n    return undefined;\n  }\n\n  if (utils_1.isPromise(record)) {\n    return record.then(r => getField(r, field, setPromiseBack));\n  }\n\n  const fieldGet = isFieldAssessor(field) ? field.get : field;\n\n  if (fieldGet in record) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const fieldResult = record[fieldGet]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    return getValue(fieldResult, setPromiseBack);\n  }\n\n  if (typeof fieldGet === \"function\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const fieldResult = fieldGet(record);\n    return getValue(fieldResult, setPromiseBack);\n  } // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\n\n  const ss = `${fieldGet}`.split(\".\");\n\n  if (ss.length <= 1) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const fieldResult = record[fieldGet];\n    return getValue(fieldResult, setPromiseBack);\n  }\n\n  const fieldResult = utils_1.applyChainSafe(record, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (val, name) => getField(val, name, utils_1.emptyFn), ...ss);\n  return getValue(fieldResult, setPromiseBack);\n}\n/** @private */\n\n\nfunction setField(record, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n  if (record == null) {\n    return false;\n  }\n\n  const fieldSet = isFieldAssessor(field) ? field.set : field;\n\n  if (fieldSet in record) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    record[fieldSet] = value;\n  } else if (typeof fieldSet === \"function\") {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return fieldSet(record, value);\n  } else if (typeof fieldSet === \"string\") {\n    const ss = `${fieldSet}`.split(\".\"); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    let obj = record;\n    const {\n      length\n    } = ss;\n\n    for (let i = 0; i < length; i++) {\n      const f = ss[i];\n\n      if (i === length - 1) {\n        obj[f] = value;\n      } else {\n        obj = obj[f] || (obj[f] = {});\n      }\n    }\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    record[fieldSet] = value;\n  }\n\n  return true;\n}\n/** @private */\n\n\nfunction _getIndex(sortedIndexMap, index) {\n  if (!sortedIndexMap) {\n    return index;\n  }\n\n  const mapIndex = sortedIndexMap[index];\n  return utils_1.isDef(mapIndex) ? mapIndex : index;\n}\n/**\n * grid data source\n *\n * @classdesc cheetahGrid.data.DataSource\n * @memberof cheetahGrid.data\n */\n\n\nclass DataSource extends EventTarget_1.EventTarget {\n  constructor(obj) {\n    var _a;\n\n    super();\n    this._sortedIndexMap = null; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this._get = (obj === null || obj === void 0 ? void 0 : obj.get.bind(obj)) || undefined;\n    this._length = (obj === null || obj === void 0 ? void 0 : obj.length) || 0;\n    this._source = (_a = obj === null || obj === void 0 ? void 0 : obj.source) !== null && _a !== void 0 ? _a : obj;\n  }\n\n  static get EVENT_TYPE() {\n    return EVENT_TYPE;\n  }\n\n  static ofArray(array) {\n    return new DataSource({\n      get: index => array[index],\n      length: array.length,\n      source: array\n    });\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  get source() {\n    return this._source;\n  }\n\n  get(index) {\n    return this.getOriginal(_getIndex(this._sortedIndexMap, index));\n  }\n\n  getField(index, field) {\n    return this.getOriginalField(_getIndex(this._sortedIndexMap, index), field);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  hasField(index, field) {\n    return this.hasOriginalField(_getIndex(this._sortedIndexMap, index), field);\n  }\n\n  setField(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    return this.setOriginalField(_getIndex(this._sortedIndexMap, index), field, value);\n  }\n\n  sort(field, order) {\n    const sortedIndexMap = new Array(this._length);\n    const orderFn = order !== \"desc\" ? (v1, v2) => v1 === v2 ? 0 : v1 > v2 ? 1 : -1 : (v1, v2) => v1 === v2 ? 0 : v1 < v2 ? 1 : -1;\n    return sort.sortPromise(index => utils_1.isDef(sortedIndexMap[index]) ? sortedIndexMap[index] : sortedIndexMap[index] = index, (index, rel) => {\n      sortedIndexMap[index] = rel;\n    }, this._length, orderFn, index => this.getOriginalField(index, field)).then(() => {\n      this._sortedIndexMap = sortedIndexMap;\n      this.fireListeners(EVENT_TYPE.UPDATED_ORDER);\n    });\n  }\n\n  get length() {\n    return this._length;\n  }\n\n  set length(length) {\n    if (this._length === length) {\n      return;\n    }\n\n    const results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\n\n    if (utils_1.array.findIndex(results, v => !v) >= 0) {\n      return;\n    }\n\n    this._length = length;\n    this.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\n  }\n\n  get dataSource() {\n    return this;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n  getOriginal(index) {\n    return getValue(this._get(index), val => {\n      this.recordPromiseCallBackInternal(index, val);\n    });\n  }\n\n  getOriginalField(index, field) {\n    if (!utils_1.isDef(field)) {\n      return undefined;\n    }\n\n    const record = this.getOriginal(index);\n    return getField(record, field, val => {\n      this.fieldPromiseCallBackInternal(index, field, val);\n    });\n  }\n\n  hasOriginalField(index, field) {\n    if (!utils_1.isDef(field)) {\n      return false;\n    }\n\n    if (typeof field === \"function\") {\n      return true;\n    }\n\n    const record = this.getOriginal(index);\n    return Boolean(record && field in record);\n  }\n\n  setOriginalField(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    if (!utils_1.isDef(field)) {\n      return false;\n    }\n\n    const record = this.getOriginal(index);\n\n    if (utils_1.isPromise(record)) {\n      return record.then(r => setField(r, field, value));\n    }\n\n    return setField(record, field, value);\n  }\n\n  fieldPromiseCallBackInternal(_index, _field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _value) {//\n  }\n\n  recordPromiseCallBackInternal(_index, _record) {//\n  }\n\n}\n\nexports.DataSource = DataSource; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nDataSource.EMPTY = new DataSource({\n  get() {\n    /*noop */\n  },\n\n  length: 0\n});\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseAction_1 = __webpack_require__(32);\n\nexports.BaseAction = BaseAction_1.BaseAction;\n\nconst CheckHeaderAction_1 = __webpack_require__(115);\n\nexports.CheckHeaderAction = CheckHeaderAction_1.CheckHeaderAction;\n\nconst SortHeaderAction_1 = __webpack_require__(116);\n\nexports.SortHeaderAction = SortHeaderAction_1.SortHeaderAction;\n\nclass ImmutableSortHeaderAction extends SortHeaderAction_1.SortHeaderAction {\n  get disabled() {\n    return this._disabled;\n  }\n\n}\n\nclass ImmutableCheckHeaderAction extends CheckHeaderAction_1.CheckHeaderAction {\n  get disabled() {\n    return this._disabled;\n  }\n\n}\n\nexports.ACTIONS = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  SORT: new ImmutableSortHeaderAction(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  CHECK: new ImmutableCheckHeaderAction()\n};\n\nfunction of(headerAction) {\n  if (!headerAction) {\n    return undefined;\n  } else if (typeof headerAction === \"string\") {\n    const key = headerAction.toUpperCase();\n    return exports.ACTIONS[key] || of(null);\n  } else {\n    return headerAction;\n  }\n}\n\nexports.of = of;\n\nfunction ofCell(headerCell) {\n  if (headerCell.sort) {\n    if (typeof headerCell.sort === \"function\") {\n      const sortMethod = headerCell.sort; // 0.9.0 Backward compatibility\n\n      const sort = ({\n        order,\n        col,\n        grid\n      }) => sortMethod.call(headerCell, order, col, grid);\n\n      return new ImmutableSortHeaderAction({\n        sort\n      });\n    }\n\n    return exports.ACTIONS.SORT;\n  }\n\n  return of(headerCell.headerAction);\n}\n\nexports.ofCell = ofCell;\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nclass BaseAction {\n  constructor(option = {}) {\n    this._disabled = option.disabled || false;\n  }\n\n  get disabled() {\n    return this._disabled;\n  }\n\n  set disabled(disabled) {\n    this._disabled = disabled;\n    this.onChangeDisabledInternal();\n  }\n\n  clone() {\n    return new BaseAction(this);\n  }\n\n  bindGridEvent(_grid, _cellId) {\n    return [];\n  }\n\n  onChangeDisabledInternal() {// impl\n  }\n\n}\n\nexports.BaseAction = BaseAction;\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseStyle_1 = __webpack_require__(34);\n\nexports.BaseStyle = BaseStyle_1.BaseStyle;\n\nconst CheckHeaderStyle_1 = __webpack_require__(62);\n\nexports.CheckHeaderStyle = CheckHeaderStyle_1.CheckHeaderStyle;\n\nconst MultilineTextHeaderStyle_1 = __webpack_require__(63);\n\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\n\nconst SortHeaderStyle_1 = __webpack_require__(64);\n\nexports.SortHeaderStyle = SortHeaderStyle_1.SortHeaderStyle;\n\nconst Style_1 = __webpack_require__(13);\n\nexports.Style = Style_1.Style;\n\nfunction of(headerStyle, StyleClass) {\n  if (headerStyle) {\n    if (headerStyle instanceof Style_1.Style) {\n      return headerStyle;\n    } else if (typeof headerStyle === \"function\") {\n      return of(headerStyle(), StyleClass);\n    }\n\n    return new StyleClass(headerStyle);\n  } else {\n    return StyleClass.DEFAULT;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst EventTarget_1 = __webpack_require__(19);\n\nconst EVENT_TYPE = {\n  CHANGE_STYLE: \"change_style\"\n};\nlet defaultStyle;\n\nclass BaseStyle extends EventTarget_1.EventTarget {\n  constructor({\n    bgColor\n  } = {}) {\n    super();\n    this._bgColor = bgColor;\n  }\n\n  static get EVENT_TYPE() {\n    return EVENT_TYPE;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n  }\n\n  get bgColor() {\n    return this._bgColor;\n  }\n\n  set bgColor(bgColor) {\n    this._bgColor = bgColor;\n    this.doChangeStyle();\n  }\n\n  doChangeStyle() {\n    this.fireListeners(EVENT_TYPE.CHANGE_STYLE);\n  }\n\n  clone() {\n    return new BaseStyle(this);\n  }\n\n}\n\nexports.BaseStyle = BaseStyle;\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst theme_1 = __webpack_require__(130);\n\nconst BASIC_1 = __importDefault(__webpack_require__(131));\n\nconst MATERIAL_DESIGN_1 = __importDefault(__webpack_require__(132));\n\nconst themes_1 = __webpack_require__(67);\n\nexports.BASIC = new theme_1.Theme(BASIC_1.default);\nexports.MATERIAL_DESIGN = new theme_1.Theme(MATERIAL_DESIGN_1.default);\nconst builtin = {\n  BASIC: exports.BASIC,\n  MATERIAL_DESIGN: exports.MATERIAL_DESIGN\n};\nlet defTheme = exports.MATERIAL_DESIGN;\nexports.theme = {\n  Theme: theme_1.Theme\n};\n\nfunction of(value) {\n  if (!value) {\n    return null;\n  }\n\n  if (typeof value === \"string\") {\n    const t = utils_1.getIgnoreCase(getChoices(), value);\n\n    if (t) {\n      return t;\n    }\n\n    return null;\n  }\n\n  if (value instanceof theme_1.Theme) {\n    return value;\n  }\n\n  return new theme_1.Theme(value);\n}\n\nexports.of = of;\n\nfunction getDefault() {\n  return defTheme;\n}\n\nexports.getDefault = getDefault;\n\nfunction setDefault(defaultTheme) {\n  defTheme = of(defaultTheme) || defTheme;\n}\n\nexports.setDefault = setDefault;\n\nfunction getChoices() {\n  return utils_1.extend(builtin, themes_1.themes);\n}\n\nexports.getChoices = getChoices;\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nfunction getPath2D() {\n  if (typeof Path2D !== \"undefined\" && !utils_1.browser.Edge) {\n    return Path2D;\n  }\n\n  return __webpack_require__(141).Path2DShim;\n}\n\nexports.getPath2D = getPath2D;\n\nfunction fill(pathModule, ctx, x, y, w, h) {\n  ctx.save();\n\n  try {\n    const {\n      width,\n      height\n    } = pathModule;\n    const {\n      ud: upsideDown,\n      x: offsetX = 0,\n      y: offsetY = 0\n    } = pathModule;\n    w = w || width;\n    h = h || height;\n    const xrate = w / width;\n    const yrate = h / (upsideDown ? -height : height);\n    x = x || 0;\n    y = upsideDown ? (y || 0) + -height * yrate : y || 0;\n    ctx.translate(x, y);\n    ctx.scale(xrate, yrate);\n\n    if (offsetX !== 0 || offsetY !== 0) {\n      ctx.translate(offsetX, offsetY);\n    }\n\n    const Path2D = getPath2D();\n    const path2d = pathModule.path2d = pathModule.path2d || new Path2D(pathModule.d);\n    ctx.fill(path2d);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.fill = fill;\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(3);\n\nconst utils_1 = __webpack_require__(0);\n\nexports.LG_EVENT_TYPE = utils_1.extend(DG_EVENT_TYPE_1.DG_EVENT_TYPE, {\n  CHANGED_VALUE: \"changed_value\",\n  CHANGED_HEADER_VALUE: \"changed_header_value\"\n});\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Rect_1 = __webpack_require__(22);\n\nfunction drawExclamationMarkBox(context, style, helper) {\n  const {\n    bgColor,\n    color\n  } = style;\n  const ctx = context.getContext();\n  const rect = context.getRect(); // draw box\n\n  ctx.fillStyle = bgColor;\n  const boxRect = rect.copy();\n  boxRect.left = boxRect.right - 24;\n  ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1); // draw exclamation mark\n\n  const fillColor = color;\n  const height = 20;\n  const width = height / 5;\n  const left = boxRect.left + (boxRect.width - width) / 2;\n  const top = boxRect.top + (boxRect.height - height) / 2;\n  helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5 * 3), context, {\n    fillColor\n  });\n  helper.fillRectWithState(new Rect_1.Rect(left, top + height / 5 * 4, width, height / 5), context, {\n    fillColor\n  });\n}\n\nexports.drawExclamationMarkBox = drawExclamationMarkBox;\n\nfunction drawInfomationMarkBox(context, style, helper) {\n  const {\n    bgColor,\n    color\n  } = style;\n  const ctx = context.getContext();\n  const rect = context.getRect(); // draw box\n\n  ctx.fillStyle = bgColor;\n  const boxRect = rect.copy();\n  boxRect.left = boxRect.right - 24;\n  ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1); // draw i mark\n\n  const fillColor = color;\n  const height = 20;\n  const width = height / 5;\n  const left = boxRect.left + (boxRect.width - width) / 2;\n  const top = boxRect.top + (boxRect.height - height) / 2;\n  helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5), context, {\n    fillColor\n  });\n  helper.fillRectWithState(new Rect_1.Rect(left, top + height / 5 * 2, width, height / 5 * 3), context, {\n    fillColor\n  });\n}\n\nexports.drawInfomationMarkBox = drawInfomationMarkBox;\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nclass BaseMessage {\n  constructor(grid) {\n    this._messageElement = null;\n    this._grid = grid;\n  }\n\n  dispose() {\n    this.detachMessageElement();\n\n    if (this._messageElement) {\n      this._messageElement.dispose();\n    }\n\n    this._messageElement = null;\n  }\n\n  _getMessageElement() {\n    return this._messageElement || (this._messageElement = this.createMessageElementInternal());\n  }\n\n  attachMessageElement(col, row, message) {\n    const messageElement = this._getMessageElement();\n\n    messageElement.attach(this._grid, col, row, message);\n  }\n\n  moveMessageElement(col, row) {\n    const messageElement = this._getMessageElement();\n\n    messageElement.move(this._grid, col, row);\n  }\n\n  detachMessageElement() {\n    const messageElement = this._getMessageElement();\n\n    messageElement._detach();\n  }\n\n  drawCellMessage(message, context, style, helper, grid, info) {\n    this.drawCellMessageInternal(message, context, style, helper, grid, info);\n  }\n\n}\n\nexports.BaseMessage = BaseMessage;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst EventHandler_1 = __webpack_require__(2);\n\nconst dom_1 = __webpack_require__(11);\n\nconst CLASSNAME = \"cheetah-grid__message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\n\nfunction createMessageDomElement() {\n  __webpack_require__(150);\n\n  const rootElement = dom_1.createElement(\"div\", {\n    classList: [CLASSNAME, HIDDEN_CLASSNAME]\n  });\n  const messageElement = dom_1.createElement(\"span\", {\n    classList: [MESSAGE_CLASSNAME]\n  });\n  rootElement.appendChild(messageElement);\n  return rootElement;\n}\n\nclass MessageElement {\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    const rootElement = this._rootElement = createMessageDomElement();\n    this._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\n  }\n\n  dispose() {\n    this.detach();\n\n    this._handler.dispose();\n\n    delete this._rootElement;\n    delete this._messageElement;\n  }\n\n  attach(grid, col, row, message) {\n    const rootElement = this._rootElement;\n    const messageElement = this._messageElement;\n    rootElement.classList.remove(SHOWN_CLASSNAME);\n    rootElement.classList.add(HIDDEN_CLASSNAME);\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n      messageElement.textContent = message.message;\n    } else {\n      this._detach();\n    }\n  }\n\n  move(grid, col, row) {\n    const rootElement = this._rootElement;\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n    } else {\n      this._detach();\n    }\n  }\n\n  detach() {\n    this._detach();\n  }\n\n  _detach() {\n    const rootElement = this._rootElement;\n\n    if (rootElement.parentElement) {\n      rootElement.parentElement.removeChild(rootElement);\n      rootElement.classList.remove(SHOWN_CLASSNAME);\n      rootElement.classList.add(HIDDEN_CLASSNAME);\n    }\n  }\n\n  _attachCell(grid, col, row) {\n    const rootElement = this._rootElement;\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    const {\n      bottom: top,\n      left,\n      width\n    } = rect;\n    const {\n      frozenRowCount,\n      frozenColCount\n    } = grid;\n\n    if (row >= frozenRowCount && frozenRowCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\n\n      if (top < frozenRect.bottom) {\n        return false; //\n      }\n    } else {\n      if (top < 0) {\n        return false; //\n      }\n    }\n\n    if (col >= frozenColCount && frozenColCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\n\n      if (left < frozenRect.right) {\n        return false; //\n      }\n    } else {\n      if (left < 0) {\n        return false; //\n      }\n    }\n\n    const {\n      offsetHeight,\n      offsetWidth\n    } = element;\n\n    if (offsetHeight < top) {\n      return false; //\n    }\n\n    if (offsetWidth < left) {\n      return false; //\n    }\n\n    rootElement.style.top = `${top.toFixed()}px`;\n    rootElement.style.left = `${left.toFixed()}px`;\n    rootElement.style.width = `${width.toFixed()}px`;\n\n    if (rootElement.parentElement !== element) {\n      element.appendChild(rootElement);\n    }\n\n    return true;\n  }\n\n}\n\nexports.MessageElement = MessageElement;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst actionBind_1 = __webpack_require__(24);\n\nconst BaseAction_1 = __webpack_require__(25);\n\nconst action_utils_1 = __webpack_require__(9);\n\nclass Action extends BaseAction_1.BaseAction {\n  constructor(option = {}) {\n    super(option);\n\n    this._action = option.action || (() => {});\n  }\n\n  get editable() {\n    return false;\n  }\n\n  get action() {\n    return this._action;\n  }\n\n  set action(action) {\n    this._action = action;\n  }\n\n  clone() {\n    return new Action(this);\n  }\n\n  getState(_grid) {\n    return {};\n  }\n\n  bindGridEvent(grid, cellId) {\n    const state = this.getState(grid);\n\n    const action = cell => {\n      if (action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n        return;\n      }\n\n      const record = grid.getRowRecord(cell.row);\n\n      this._action(record, cell);\n    };\n\n    return [...actionBind_1.bindCellClickAction(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if (action_utils_1.isDisabledRecord(this.disabled, grid, e.row)) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...actionBind_1.bindCellKeyAction(grid, cellId, {\n      action\n    })];\n  }\n\n  onPasteCellRangeBox() {// noop\n  }\n\n  onDeleteCellRangeBox() {// noop\n  }\n\n}\n\nexports.Action = Action;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst action_utils_1 = __webpack_require__(9);\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(3);\n\nconst Editor_1 = __webpack_require__(10);\n\nconst KEY_ENTER = 13;\nconst KEY_F2 = 113;\n\nclass BaseInputEditor extends Editor_1.Editor {\n  constructor(option = {}) {\n    super(option);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const open = cell => {\n      if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      this.onOpenCellInternal(grid, cell);\n      return true;\n    };\n\n    const input = (cell, value) => {\n      if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n        return;\n      }\n\n      this.onInputCellInternal(grid, cell, value);\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      input({\n        col: e.col,\n        row: e.row\n      }, e.value);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!utils_1.cellEquals(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n      input({\n        col: e.col,\n        row: e.row\n      }, e.normalizeValue);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      open({\n        col: cell.col,\n        row: cell.row\n      });\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      open({\n        col: e.col,\n        row: e.row\n      });\n      utils_1.event.cancel(e.event);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n      if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\n        return;\n      }\n\n      const sel = grid.selection.select;\n\n      if (!isTarget(sel.col, sel.row)) {\n        return;\n      }\n\n      if (open({\n        col: sel.col,\n        row: sel.row\n      })) {\n        e.stopCellMoving();\n      }\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, e => {\n      this.onChangeSelectCellInternal(grid, {\n        col: e.col,\n        row: e.row\n      }, e.selected);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\n      this.onGridScrollInternal(grid);\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return false;\n      }\n\n      if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      return true;\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n        return;\n      }\n\n      const range = grid.getCellRange(cell.col, cell.row);\n\n      if (range.start.col !== range.end.col || range.start.row !== range.end.row) {\n        const {\n          input\n        } = cell;\n        const baseRect = grid.getCellRect(cell.col, cell.row);\n        const rangeRect = grid.getCellRangeRect(range);\n        input.style.top = `${(parseFloat(input.style.top) + (rangeRect.top - baseRect.top)).toFixed()}px`;\n        input.style.left = `${(parseFloat(input.style.left) + (rangeRect.left - baseRect.left)).toFixed()}px`;\n        input.style.width = `${rangeRect.width.toFixed()}px`;\n        input.style.height = `${rangeRect.height.toFixed()}px`;\n      }\n\n      this.onSetInputAttrsInternal(grid, {\n        col: cell.col,\n        row: cell.row\n      }, cell.input);\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value) {\n    if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    grid.doChangeValue(cell.col, cell.row, () => value);\n  }\n\n  onDeleteCellRangeBox(grid, cell) {\n    if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    grid.doChangeValue(cell.col, cell.row, () => \"\");\n  }\n\n}\n\nexports.BaseInputEditor = BaseInputEditor;\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst EventHandler_1 = __webpack_require__(2);\n\nfunction setInputValue(input, value) {\n  const sign = input.type === \"number\" && value === \"-\";\n\n  if (sign) {\n    // When `type=\"number\"`, the minus sign is not accepted, so change it to `type=\"text\"` once.\n    input.type = \"\";\n    let handler = new EventHandler_1.EventHandler();\n\n    const dispose = () => {\n      if (handler) {\n        handler.dispose();\n        handler = null;\n      }\n    };\n\n    handler.once(input, \"input\", _e => {\n      input.type = \"number\";\n      dispose();\n    });\n    handler.once(input, \"blur\", _e => {\n      dispose();\n    });\n  }\n\n  input.value = value !== null && value !== void 0 ? value : \"\";\n}\n\nexports.setInputValue = setInputValue;\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BranchGraphColumn_1 = __webpack_require__(89);\n\nexports.BranchGraphColumn = BranchGraphColumn_1.BranchGraphColumn;\n\nconst ButtonColumn_1 = __webpack_require__(91);\n\nexports.ButtonColumn = ButtonColumn_1.ButtonColumn;\n\nconst CheckColumn_1 = __webpack_require__(92);\n\nexports.CheckColumn = CheckColumn_1.CheckColumn;\n\nconst Column_1 = __webpack_require__(12);\n\nexports.Column = Column_1.Column;\n\nconst IconColumn_1 = __webpack_require__(93);\n\nexports.IconColumn = IconColumn_1.IconColumn;\n\nconst ImageColumn_1 = __webpack_require__(94);\n\nexports.ImageColumn = ImageColumn_1.ImageColumn;\n\nconst MenuColumn_1 = __webpack_require__(96);\n\nexports.MenuColumn = MenuColumn_1.MenuColumn;\n\nconst MultilineTextColumn_1 = __webpack_require__(97);\n\nexports.MultilineTextColumn = MultilineTextColumn_1.MultilineTextColumn;\n\nconst NumberColumn_1 = __webpack_require__(98);\n\nexports.NumberColumn = NumberColumn_1.NumberColumn;\n\nconst PercentCompleteBarColumn_1 = __webpack_require__(99);\n\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn_1.PercentCompleteBarColumn;\n\nconst RadioColumn_1 = __webpack_require__(100);\n\nexports.RadioColumn = RadioColumn_1.RadioColumn;\nconst TYPES = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DEFAULT: new Column_1.Column(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  NUMBER: new NumberColumn_1.NumberColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  CHECK: new CheckColumn_1.CheckColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  RADIO: new RadioColumn_1.RadioColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  BUTTON: new ButtonColumn_1.ButtonColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  IMAGE: new ImageColumn_1.ImageColumn(),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  MULTILINETEXT: new MultilineTextColumn_1.MultilineTextColumn()\n};\n\nfunction of( // eslint-disable-next-line @typescript-eslint/no-explicit-any\ncolumnType // eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n  if (!columnType) {\n    return TYPES.DEFAULT;\n  } else if (typeof columnType === \"string\") {\n    const key = columnType.toUpperCase();\n    return TYPES[key] || of(null);\n  } else {\n    return columnType;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Style_1 = __webpack_require__(6);\n\nfunction adj(style) {\n  const {\n    textAlign = \"center\"\n  } = style;\n  style.textAlign = textAlign;\n  return style;\n}\n\nlet defaultStyle;\n\nclass ButtonStyle extends Style_1.Style {\n  constructor(style = {}) {\n    super(adj(style));\n    const {\n      buttonBgColor\n    } = style;\n    this._buttonBgColor = buttonBgColor;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new ButtonStyle();\n  }\n\n  get buttonBgColor() {\n    return this._buttonBgColor;\n  }\n\n  set buttonBgColor(buttonBgColor) {\n    this._buttonBgColor = buttonBgColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new ButtonStyle(this);\n  }\n\n}\n\nexports.ButtonStyle = ButtonStyle;\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst StdBaseStyle_1 = __webpack_require__(20);\n\nfunction adj(style) {\n  const {\n    textAlign = \"center\"\n  } = style;\n  style.textAlign = textAlign;\n  return style;\n}\n\nlet defaultStyle;\n\nclass CheckStyle extends StdBaseStyle_1.StdBaseStyle {\n  constructor(style = {}) {\n    super(adj(style));\n    const {\n      uncheckBgColor,\n      checkBgColor,\n      borderColor\n    } = style;\n    this._uncheckBgColor = uncheckBgColor;\n    this._checkBgColor = checkBgColor;\n    this._borderColor = borderColor;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new CheckStyle();\n  }\n\n  get uncheckBgColor() {\n    return this._uncheckBgColor;\n  }\n\n  set uncheckBgColor(uncheckBgColor) {\n    this._uncheckBgColor = uncheckBgColor;\n    this.doChangeStyle();\n  }\n\n  get checkBgColor() {\n    return this._checkBgColor;\n  }\n\n  set checkBgColor(checkBgColor) {\n    this._checkBgColor = checkBgColor;\n    this.doChangeStyle();\n  }\n\n  get borderColor() {\n    return this._borderColor;\n  }\n\n  set borderColor(borderColor) {\n    this._borderColor = borderColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new CheckStyle(this);\n  }\n\n}\n\nexports.CheckStyle = CheckStyle;\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Style_1 = __webpack_require__(6);\n\nfunction adj(style) {\n  const {\n    textAlign = \"center\"\n  } = style;\n  style.textAlign = textAlign;\n  return style;\n}\n\nlet defaultStyle;\n\nclass IconStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new IconStyle();\n  }\n\n  constructor(style = {}) {\n    super(adj(style));\n  }\n\n  clone() {\n    return new IconStyle(this);\n  }\n\n}\n\nexports.IconStyle = IconStyle;\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst StdBaseStyle_1 = __webpack_require__(20);\n\nlet defaultStyle;\n\nfunction adj(style) {\n  const {\n    textAlign = \"center\"\n  } = style;\n  style.textAlign = textAlign;\n  return style;\n}\n\nclass ImageStyle extends StdBaseStyle_1.StdBaseStyle {\n  constructor(style = {}) {\n    super(adj(style));\n    this._imageSizing = style.imageSizing;\n    this._margin = style.margin || 4;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new ImageStyle();\n  }\n\n  get imageSizing() {\n    return this._imageSizing;\n  }\n\n  set imageSizing(imageSizing) {\n    this._imageSizing = imageSizing;\n    this.doChangeStyle();\n  }\n\n  get margin() {\n    return this._margin;\n  }\n\n  set margin(margin) {\n    this._margin = margin;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new ImageStyle(this);\n  }\n\n}\n\nexports.ImageStyle = ImageStyle;\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Style_1 = __webpack_require__(6);\n\nlet defaultStyle;\n\nclass MenuStyle extends Style_1.Style {\n  constructor(style = {}) {\n    super(style);\n    const {\n      appearance\n    } = style;\n    this._appearance = appearance;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new MenuStyle();\n  }\n\n  get appearance() {\n    return this._appearance || \"menulist-button\";\n  }\n\n  set appearance(appearance) {\n    this._appearance = appearance;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new MenuStyle(this);\n  }\n\n}\n\nexports.MenuStyle = MenuStyle;\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Style_1 = __webpack_require__(6);\n\nfunction adj(style) {\n  const {\n    textBaseline = \"top\"\n  } = style;\n  style.textBaseline = textBaseline;\n  return style;\n}\n\nlet defaultStyle;\n\nclass MultilineTextStyle extends Style_1.Style {\n  constructor(style = {}) {\n    super(adj(style));\n    this._lineHeight = style.lineHeight || \"1em\";\n    this._autoWrapText = style.autoWrapText || false;\n    this._lineClamp = style.lineClamp;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new MultilineTextStyle();\n  }\n\n  clone() {\n    return new MultilineTextStyle(this);\n  }\n\n  get lineHeight() {\n    return this._lineHeight;\n  }\n\n  set lineHeight(lineHeight) {\n    this._lineHeight = lineHeight;\n    this.doChangeStyle();\n  }\n\n  get lineClamp() {\n    return this._lineClamp;\n  }\n\n  set lineClamp(lineClamp) {\n    this._lineClamp = lineClamp;\n    this.doChangeStyle();\n  }\n\n  get autoWrapText() {\n    return this._autoWrapText;\n  }\n\n  set autoWrapText(autoWrapText) {\n    this._autoWrapText = autoWrapText;\n    this.doChangeStyle();\n  }\n\n}\n\nexports.MultilineTextStyle = MultilineTextStyle;\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Style_1 = __webpack_require__(6);\n\nfunction adj(style) {\n  const {\n    textAlign = \"right\"\n  } = style;\n  style.textAlign = textAlign;\n  return style;\n}\n\nlet defaultStyle;\n\nclass NumberStyle extends Style_1.Style {\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new NumberStyle();\n  }\n\n  constructor(style = {}) {\n    super(adj(style));\n  }\n\n  clone() {\n    return new NumberStyle(this);\n  }\n\n}\n\nexports.NumberStyle = NumberStyle;\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Style_1 = __webpack_require__(6);\n\nlet defaultStyle;\n\nconst DEFAULT_BAR_COLOR = num => {\n  if (num > 80) {\n    return \"#20a8d8\";\n  }\n\n  if (num > 50) {\n    return \"#4dbd74\";\n  }\n\n  if (num > 20) {\n    return \"#ffc107\";\n  }\n\n  return \"#f86c6b\";\n};\n\nclass PercentCompleteBarStyle extends Style_1.Style {\n  constructor(style = {}) {\n    super(style);\n    this._barColor = style.barColor || DEFAULT_BAR_COLOR;\n    this._barBgColor = style.barBgColor || \"#f0f3f5\";\n    this._barHeight = style.barHeight || 3;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new PercentCompleteBarStyle();\n  }\n\n  get barColor() {\n    return this._barColor;\n  }\n\n  set barColor(barColor) {\n    this._barColor = barColor;\n    this.doChangeStyle();\n  }\n\n  get barBgColor() {\n    return this._barBgColor;\n  }\n\n  set barBgColor(barBgColor) {\n    this._barBgColor = barBgColor;\n    this.doChangeStyle();\n  }\n\n  get barHeight() {\n    return this._barHeight;\n  }\n\n  set barHeight(barHeight) {\n    this._barHeight = barHeight;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new PercentCompleteBarStyle(this);\n  }\n\n}\n\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle;\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst StdBaseStyle_1 = __webpack_require__(20);\n\nfunction adj(style) {\n  const {\n    textAlign = \"center\"\n  } = style;\n  style.textAlign = textAlign;\n  return style;\n}\n\nlet defaultStyle;\n\nclass RadioStyle extends StdBaseStyle_1.StdBaseStyle {\n  constructor(style = {}) {\n    super(adj(style));\n    const {\n      checkColor,\n      uncheckBorderColor,\n      checkBorderColor,\n      uncheckBgColor,\n      checkBgColor\n    } = style;\n    this._checkColor = checkColor;\n    this._uncheckBorderColor = uncheckBorderColor;\n    this._checkBorderColor = checkBorderColor;\n    this._uncheckBgColor = uncheckBgColor;\n    this._checkBgColor = checkBgColor;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new RadioStyle();\n  }\n\n  get checkColor() {\n    return this._checkColor;\n  }\n\n  set checkColor(checkColor) {\n    this._checkColor = checkColor;\n    this.doChangeStyle();\n  }\n\n  get uncheckBorderColor() {\n    return this._uncheckBorderColor;\n  }\n\n  set uncheckBorderColor(uncheckBorderColor) {\n    this._uncheckBorderColor = uncheckBorderColor;\n    this.doChangeStyle();\n  }\n\n  get checkBorderColor() {\n    return this._checkBorderColor;\n  }\n\n  set checkBorderColor(checkBorderColor) {\n    this._checkBorderColor = checkBorderColor;\n    this.doChangeStyle();\n  }\n\n  get uncheckBgColor() {\n    return this._uncheckBgColor;\n  }\n\n  set uncheckBgColor(uncheckBgColor) {\n    this._uncheckBgColor = uncheckBgColor;\n    this.doChangeStyle();\n  }\n\n  get checkBgColor() {\n    return this._checkBgColor;\n  }\n\n  set checkBgColor(checkBgColor) {\n    this._checkBgColor = checkBgColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new RadioStyle(this);\n  }\n\n}\n\nexports.RadioStyle = RadioStyle;\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst LRUCache_1 = __webpack_require__(95);\n\nconst utils_1 = __webpack_require__(0);\n\nconst allCache = {};\n\nfunction loadImage(src) {\n  if (typeof Promise === \"undefined\") {\n    console.error(\"Promise is not loaded. load Promise before this process.\");\n    return {\n      then() {\n        return this;\n      }\n\n    };\n  }\n\n  const img = new Image();\n  const result = new Promise(resolve => {\n    img.onload = () => {\n      resolve(img);\n    };\n  });\n\n  img.onerror = () => {\n    const url = src.length > 200 ? `${src.substr(0, 200)}...` : src;\n    console.warn(`cannot load: ${url}`);\n    throw new Error(`IMAGE LOAD ERROR: ${url}`);\n  };\n\n  img.src = src;\n  return result;\n}\n\nexports.loadImage = loadImage;\n\nfunction getCacheOrLoad0(cache, src) {\n  return utils_1.then(src, src => {\n    const c = cache.get(src);\n\n    if (c) {\n      return c;\n    }\n\n    const result = loadImage(src).then(img => {\n      cache.put(src, img);\n      return img;\n    });\n    cache.put(src, result);\n    return result;\n  });\n}\n\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\n  const cache = allCache[cacheName] || (allCache[cacheName] = new LRUCache_1.LRUCache(cacheSize));\n  return getCacheOrLoad0(cache, src);\n}\n\nexports.getCacheOrLoad = getCacheOrLoad;\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/** @private */\n\nfunction extend(a, b) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const o = {};\n\n  for (const k in a) {\n    o[k] = a[k];\n  }\n\n  for (const k in b) {\n    o[k] = b[k];\n  }\n\n  return o;\n}\n/**\n * Normalize the given menu options.\n * @param {*} options menu options to given\n * @returns {Array} Normalized options\n * @private\n */\n\n\nfunction normalize(options) {\n  if (!options) {\n    return [];\n  }\n\n  if (Array.isArray(options)) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return options.map( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    e => extend(e, {\n      label: e.caption || e.label\n    }));\n  }\n\n  if (typeof options === \"string\") {\n    return normalize(JSON.parse(options));\n  }\n\n  const result = [];\n\n  for (const k in options) {\n    result.push({\n      value: k,\n      label: options[k]\n    });\n  }\n\n  return result;\n}\n\nexports.normalize = normalize;\n/**\n * Normalize the given menu options.\n * @param {*} options menu options to given\n * @returns {Array} Normalized options\n * @private\n */\n\nfunction normalizeToFn(options) {\n  if (typeof options === \"function\") {\n    return record => normalize(options(record));\n  }\n\n  return () => normalize(options);\n}\n\nexports.normalizeToFn = normalizeToFn;\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst calc = __importStar(__webpack_require__(29));\n\nconst hiDPI = __importStar(__webpack_require__(107));\n\nconst style = __importStar(__webpack_require__(57));\n\nconst utils_1 = __webpack_require__(0);\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(3);\n\nconst EventHandler_1 = __webpack_require__(2);\n\nconst EventTarget_1 = __webpack_require__(19);\n\nconst NumberMap_1 = __webpack_require__(110);\n\nconst Rect_1 = __webpack_require__(22);\n\nconst Scrollable_1 = __webpack_require__(111);\n\nconst canvases_1 = __webpack_require__(8); //protected symbol\n\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst paste_utils_1 = __webpack_require__(58);\n\nconst {\n  /** @private */\n  isTouchEvent,\n\n  /** @private */\n  getMouseButtons,\n\n  /** @private */\n  getKeyCode,\n\n  /** @private */\n  cancel: cancelEvent\n} = utils_1.event;\n/** @private */\n\nconst _ = symbolManager_1.getProtectedSymbol();\n/** @private */\n\n\nfunction createRootElement() {\n  const element = document.createElement(\"div\");\n  element.classList.add(\"cheetah-grid\");\n  return element;\n}\n/** @private */\n\n\nconst KEY_BS = 8;\n/** @private */\n\nconst KEY_TAB = 9;\n/** @private */\n\nconst KEY_ENTER = 13;\n/** @private */\n\nconst KEY_END = 35;\n/** @private */\n\nconst KEY_HOME = 36;\n/** @private */\n\nconst KEY_LEFT = 37;\n/** @private */\n\nconst KEY_UP = 38;\n/** @private */\n\nconst KEY_RIGHT = 39;\n/** @private */\n\nconst KEY_DOWN = 40;\n/** @private */\n\nconst KEY_DEL = 46;\n/** @private */\n\nconst KEY_ALPHA_A = 65;\n/** @private */\n\nconst KEY_ALPHA_C = 67;\n/** @private */\n\nconst KEY_ALPHA_V = 86; //private methods\n\n/** @private */\n\nfunction _vibrate(e) {\n  if (navigator.vibrate && isTouchEvent(e)) {\n    navigator.vibrate(50);\n  }\n}\n/** @private */\n\n\nfunction _getTargetRowAt(absoluteY) {\n  const internal = this.getTargetRowAtInternal(absoluteY);\n\n  if (utils_1.isDef(internal)) {\n    return internal;\n  }\n\n  const findBefore = (startRow, startBottom) => {\n    let bottom = startBottom;\n\n    for (let row = startRow; row >= 0; row--) {\n      const height = _getRowHeight.call(this, row);\n\n      const top = bottom - height;\n\n      if (top <= absoluteY && absoluteY < bottom) {\n        return {\n          top,\n          row\n        };\n      }\n\n      bottom = top;\n    }\n\n    return null;\n  };\n\n  const findAfter = (startRow, startBottom) => {\n    let top = startBottom - _getRowHeight.call(this, startRow);\n\n    const {\n      rowCount\n    } = this[_];\n\n    for (let row = startRow; row < rowCount; row++) {\n      const height = _getRowHeight.call(this, row);\n\n      const bottom = top + height;\n\n      if (top <= absoluteY && absoluteY < bottom) {\n        return {\n          top,\n          row\n        };\n      }\n\n      top = bottom;\n    }\n\n    return null;\n  };\n\n  const candRow = Math.min(Math.ceil(absoluteY / this[_].defaultRowHeight), this.rowCount - 1);\n\n  const bottom = _getRowsHeight.call(this, 0, candRow);\n\n  if (absoluteY >= bottom) {\n    return findAfter(candRow, bottom);\n  } else {\n    return findBefore(candRow, bottom);\n  }\n}\n/** @private */\n\n\nfunction _getTargetColAt(grid, absoluteX) {\n  let left = 0;\n  const {\n    colCount\n  } = grid[_];\n\n  for (let col = 0; col < colCount; col++) {\n    const width = _getColWidth(grid, col);\n\n    const right = left + width;\n\n    if (right > absoluteX) {\n      return {\n        left,\n        col\n      };\n    }\n\n    left = right;\n  }\n\n  return null;\n}\n/** @private */\n\n\nfunction _getTargetFrozenRowAt(grid, absoluteY) {\n  if (!grid[_].frozenRowCount) {\n    return null;\n  }\n\n  let {\n    top\n  } = grid[_].scroll;\n  const rowCount = grid[_].frozenRowCount;\n\n  for (let row = 0; row < rowCount; row++) {\n    const height = _getRowHeight.call(grid, row);\n\n    const bottom = top + height;\n\n    if (bottom > absoluteY) {\n      return {\n        top,\n        row\n      };\n    }\n\n    top = bottom;\n  }\n\n  return null;\n}\n/** @private */\n\n\nfunction _getTargetFrozenColAt(grid, absoluteX) {\n  if (!grid[_].frozenColCount) {\n    return null;\n  }\n\n  let {\n    left\n  } = grid[_].scroll;\n  const colCount = grid[_].frozenColCount;\n\n  for (let col = 0; col < colCount; col++) {\n    const width = _getColWidth(grid, col);\n\n    const right = left + width;\n\n    if (right > absoluteX) {\n      return {\n        left,\n        col\n      };\n    }\n\n    left = right;\n  }\n\n  return null;\n}\n/** @private */\n\n\nfunction _getFrozenRowsRect(grid) {\n  if (!grid[_].frozenRowCount) {\n    return null;\n  }\n\n  const {\n    top\n  } = grid[_].scroll;\n  let height = 0;\n  const rowCount = grid[_].frozenRowCount;\n\n  for (let row = 0; row < rowCount; row++) {\n    height += _getRowHeight.call(grid, row);\n  }\n\n  return new Rect_1.Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\n}\n/** @private */\n\n\nfunction _getFrozenColsRect(grid) {\n  if (!grid[_].frozenColCount) {\n    return null;\n  }\n\n  const {\n    left\n  } = grid[_].scroll;\n  let width = 0;\n  const colCount = grid[_].frozenColCount;\n\n  for (let col = 0; col < colCount; col++) {\n    width += _getColWidth(grid, col);\n  }\n\n  return new Rect_1.Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\n}\n/** @private */\n\n\nfunction _getCellDrawing(grid, col, row) {\n  if (!grid[_].drawCells[row]) {\n    return null;\n  }\n\n  return grid[_].drawCells[row][col];\n}\n/** @private */\n\n\nfunction _putCellDrawing(grid, col, row, context) {\n  if (!grid[_].drawCells[row]) {\n    grid[_].drawCells[row] = {};\n  }\n\n  grid[_].drawCells[row][col] = context;\n}\n/** @private */\n\n\nfunction _removeCellDrawing(grid, col, row) {\n  if (!grid[_].drawCells[row]) {\n    return;\n  }\n\n  delete grid[_].drawCells[row][col];\n\n  if (Object.keys(grid[_].drawCells[row]).length === 0) {\n    delete grid[_].drawCells[row];\n  }\n}\n/** @private */\n\n\nfunction _drawCell(ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\n  const rect = new Rect_1.Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\n  const drawRect = Rect_1.Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\n\n  if (drawRect.height > 0 && drawRect.width > 0) {\n    ctx.save();\n\n    try {\n      const cellDrawing = _getCellDrawing(this, col, row);\n\n      if (cellDrawing) {\n        cellDrawing.cancel();\n      }\n\n      const dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, !!cellDrawing, this[_].selection, drawLayers);\n      const p = this.onDrawCell(col, row, dcContext);\n\n      if (utils_1.isPromise(p)) {\n        //\n        _putCellDrawing(this, col, row, dcContext);\n\n        const pCol = col;\n\n        dcContext._delayMode(this, () => {\n          _removeCellDrawing(this, pCol, row);\n        });\n\n        p.then(() => {\n          dcContext.terminate();\n        });\n      }\n    } finally {\n      ctx.restore();\n    }\n  }\n}\n/** @private */\n\n\nfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\n  const {\n    colCount\n  } = grid[_];\n\n  const drawOuter = (col, absoluteLeft) => {\n    //\n    if (col >= colCount - 1 && grid[_].canvas.width > absoluteLeft - visibleRect.left) {\n      const outerLeft = absoluteLeft - visibleRect.left;\n      ctx.save();\n      ctx.beginPath();\n      ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\n      ctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\n      ctx.fill();\n      ctx.restore();\n    }\n  };\n\n  let skipAbsoluteLeft = 0;\n\n  if (initFrozenCol) {\n    let absoluteLeft = initFrozenCol.left;\n    const count = grid[_].frozenColCount;\n\n    for (let {\n      col\n    } = initFrozenCol; col < count; col++) {\n      const width = _getColWidth(grid, col);\n\n      _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\n\n      absoluteLeft += width;\n\n      if (drawRight <= absoluteLeft) {\n        //\n        drawOuter(col, absoluteLeft);\n        return;\n      }\n    }\n\n    skipAbsoluteLeft = absoluteLeft;\n  }\n\n  let absoluteLeft = initCol.left;\n\n  for (let {\n    col\n  } = initCol; col < colCount; col++) {\n    const width = _getColWidth(grid, col);\n\n    _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\n\n    absoluteLeft += width;\n\n    if (drawRight <= absoluteLeft) {\n      //\n      drawOuter(col, absoluteLeft);\n      return;\n    }\n  }\n\n  drawOuter(colCount - 1, absoluteLeft);\n}\n/** @private */\n\n\nfunction _getInitContext() {\n  return this._getInitContext();\n}\n/** @private */\n\n\nfunction _invalidateRect(grid, drawRect) {\n  const visibleRect = _getVisibleRect(grid);\n\n  const {\n    rowCount\n  } = grid[_];\n\n  const ctx = _getInitContext.call(grid);\n\n  const initRow = _getTargetRowAt.call(grid, Math.max(visibleRect.top, drawRect.top)) || {\n    top: _getRowsHeight.call(grid, 0, rowCount - 1),\n    row: rowCount\n  };\n  const initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\n    left: _getColsWidth(grid, 0, grid[_].colCount - 1),\n    col: grid[_].colCount\n  };\n  const drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\n  const drawRight = Math.min(visibleRect.right, drawRect.right);\n\n  const initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\n\n  const initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\n\n  const drawLayers = new DrawLayers();\n\n  const drawOuter = (row, absoluteTop) => {\n    //\n    if (row >= rowCount - 1 && grid[_].canvas.height > absoluteTop - visibleRect.top) {\n      const outerTop = absoluteTop - visibleRect.top;\n      ctx.save();\n      ctx.beginPath();\n      ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\n      ctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\n      ctx.fill();\n      ctx.restore();\n    }\n  };\n\n  let skipAbsoluteTop = 0;\n\n  if (initFrozenRow) {\n    let absoluteTop = initFrozenRow.top;\n    const count = grid[_].frozenRowCount;\n\n    for (let {\n      row\n    } = initFrozenRow; row < count; row++) {\n      const height = _getRowHeight.call(grid, row);\n\n      _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\n\n      absoluteTop += height;\n\n      if (drawBottom <= absoluteTop) {\n        //\n        drawOuter(row, absoluteTop);\n        drawLayers.draw(ctx);\n        return;\n      }\n    }\n\n    skipAbsoluteTop = absoluteTop;\n  }\n\n  let absoluteTop = initRow.top;\n\n  for (let {\n    row\n  } = initRow; row < rowCount; row++) {\n    const height = _getRowHeight.call(grid, row); //\n\n\n    _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\n\n    absoluteTop += height;\n\n    if (drawBottom <= absoluteTop) {\n      //\n      drawOuter(row, absoluteTop);\n      drawLayers.draw(ctx);\n      return;\n    }\n  }\n\n  drawOuter(rowCount - 1, absoluteTop);\n  drawLayers.draw(ctx);\n}\n/** @private */\n\n\nfunction _toPxWidth(grid, width) {\n  return Math.round(calc.toPx(width, grid[_].calcWidthContext));\n}\n/** @private */\n\n\nfunction _adjustColWidth(grid, col, orgWidth) {\n  const limits = _getColWidthLimits(grid, col);\n\n  return Math.max(_applyColWidthLimits(limits, orgWidth), 0);\n}\n/** @private */\n\n\nfunction _applyColWidthLimits(limits, orgWidth) {\n  if (!limits) {\n    return orgWidth;\n  }\n\n  if (limits.min) {\n    if (limits.min > orgWidth) {\n      return limits.min;\n    }\n  }\n\n  if (limits.max) {\n    if (limits.max < orgWidth) {\n      return limits.max;\n    }\n  }\n\n  return orgWidth;\n}\n/**\n * Gets the definition of the column width.\n * @param {DrawGrid} grid grid instance\n * @param {number} col number of column\n * @returns {string|number} width definition\n * @private\n */\n\n\nfunction _getColWidthDefine(grid, col) {\n  const width = grid[_].colWidthsMap.get(col);\n\n  if (width) {\n    return width;\n  }\n\n  return grid.defaultColWidth;\n}\n/**\n * Gets the column width limits.\n * @param {DrawGrid} grid grid instance\n * @param {number} col number of column\n * @returns {object|null} the column width limits\n * @private\n */\n\n\nfunction _getColWidthLimits(grid, col) {\n  const limit = grid[_].colWidthsLimit[col];\n\n  if (!limit) {\n    return null;\n  }\n\n  const result = {};\n\n  if (limit.min) {\n    result.min = _toPxWidth(grid, limit.min);\n    result.minDef = limit.min;\n  }\n\n  if (limit.max) {\n    result.max = _toPxWidth(grid, limit.max);\n    result.maxDef = limit.max;\n  }\n\n  return result;\n}\n/**\n * Checks if the given width definition is `auto`.\n * @param {string|number} width width definition to check\n * @returns {boolean} `true ` if the given width definition is `auto`\n * @private\n */\n\n\nfunction isAutoDefine(width) {\n  return Boolean(width && typeof width === \"string\" && width.toLowerCase() === \"auto\");\n}\n/**\n * Creates a formula to calculate the auto width.\n * @param {DrawGrid} grid grid instance\n * @returns {string} formula\n * @private\n */\n\n\nfunction _calcAutoColWidthExpr(grid) {\n  const others = [];\n  let autoCount = 0;\n  const hasLimitsOnAuto = [];\n\n  for (let col = 0; col < grid[_].colCount; col++) {\n    const def = _getColWidthDefine(grid, col);\n\n    const limits = _getColWidthLimits(grid, col);\n\n    if (isAutoDefine(def)) {\n      if (limits) {\n        hasLimitsOnAuto.push(limits);\n      }\n\n      autoCount++;\n    } else {\n      let expr = typeof def === \"number\" ? `${def}px` : def;\n\n      if (limits) {\n        const orgWidth = _toPxWidth(grid, expr);\n\n        const newWidth = _applyColWidthLimits(limits, orgWidth);\n\n        if (orgWidth !== newWidth) {\n          expr = `${newWidth}px`;\n        }\n      }\n\n      others.push(expr);\n    }\n  }\n\n  if (hasLimitsOnAuto.length && others.length) {\n    const autoPx = _toPxWidth(grid, `calc(100% - (${others.join(\" + \")}))`) / autoCount;\n\n    for (let index = 0; index < hasLimitsOnAuto.length; index++) {\n      const limits = hasLimitsOnAuto[index];\n\n      if (limits.min && autoPx < limits.min) {\n        others.push(typeof limits.minDef === \"number\" ? `${limits.minDef}px` : limits.minDef);\n        autoCount--;\n      } else if (limits.max && limits.max < autoPx) {\n        others.push(typeof limits.maxDef === \"number\" ? `${limits.maxDef}px` : limits.maxDef);\n        autoCount--;\n      }\n    }\n\n    if (autoCount <= 0) {\n      return `${autoPx}px`;\n    }\n  }\n\n  if (others.length) {\n    return `calc((100% - (${others.join(\" + \")})) / ${autoCount})`;\n  } else {\n    return `${100 / autoCount}%`;\n  }\n}\n/**\n * Calculate the pixels of width from the definition of width.\n * @param {DrawGrid} grid grid instance\n * @param {string|number} width width definition\n * @returns {number} the pixels of width\n * @private\n */\n\n\nfunction _colWidthDefineToPxWidth(grid, width) {\n  if (isAutoDefine(width)) {\n    return _toPxWidth(grid, _calcAutoColWidthExpr(grid));\n  }\n\n  return _toPxWidth(grid, width);\n}\n/** @private */\n\n\nfunction _getColWidth(grid, col) {\n  const width = _getColWidthDefine(grid, col);\n\n  return _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width));\n}\n/** @private */\n\n\nfunction _setColWidth(grid, col, width) {\n  grid[_].colWidthsMap.put(col, width);\n}\n/**\n * Overwrites the definition of a column whose width is set to `auto` with the current auto width formula.\n * @param {DrawGrid} grid grid instance\n * @returns {void}\n * @private\n */\n\n\nfunction _storeAutoColWidthExprs(grid) {\n  let expr = null;\n\n  for (let col = 0; col < grid[_].colCount; col++) {\n    const def = _getColWidthDefine(grid, col);\n\n    if (isAutoDefine(def)) {\n      _setColWidth(grid, col, expr || (expr = _calcAutoColWidthExpr(grid)));\n    }\n  }\n}\n/** @private */\n\n\nfunction _getColsWidth(grid, startCol, endCol) {\n  const defaultColPxWidth = _colWidthDefineToPxWidth(grid, grid.defaultColWidth);\n\n  const colCount = endCol - startCol + 1;\n  let w = defaultColPxWidth * colCount;\n\n  grid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\n    w += _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width)) - defaultColPxWidth;\n  });\n\n  for (let col = startCol; col <= endCol; col++) {\n    if (grid[_].colWidthsMap.has(col)) {\n      continue;\n    }\n\n    const adj = _adjustColWidth(grid, col, defaultColPxWidth);\n\n    if (adj !== defaultColPxWidth) {\n      w += adj - defaultColPxWidth;\n    }\n  }\n\n  return w;\n}\n/** @private */\n\n\nfunction _getRowHeight(row) {\n  const internal = this.getRowHeightInternal(row);\n\n  if (utils_1.isDef(internal)) {\n    return internal;\n  }\n\n  const height = this[_].rowHeightsMap.get(row);\n\n  if (height) {\n    return height;\n  }\n\n  return this[_].defaultRowHeight;\n}\n/** @private */\n\n\nfunction _setRowHeight(grid, row, height) {\n  grid[_].rowHeightsMap.put(row, height);\n}\n/** @private */\n\n\nfunction _getRowsHeight(startRow, endRow) {\n  const internal = this.getRowsHeightInternal(startRow, endRow);\n\n  if (utils_1.isDef(internal)) {\n    return internal;\n  }\n\n  const rowCount = endRow - startRow + 1;\n  let h = this[_].defaultRowHeight * rowCount;\n\n  this[_].rowHeightsMap.each(startRow, endRow, height => {\n    h += height - this[_].defaultRowHeight;\n  });\n\n  return h;\n}\n/** @private */\n\n\nfunction _getScrollWidth(grid) {\n  return _getColsWidth(grid, 0, grid[_].colCount - 1);\n}\n/** @private */\n\n\nfunction _getScrollHeight(row) {\n  const internal = this.getScrollHeightInternal(row);\n\n  if (utils_1.isDef(internal)) {\n    return internal;\n  }\n\n  let h = this[_].defaultRowHeight * this[_].rowCount;\n\n  this[_].rowHeightsMap.each(0, this[_].rowCount - 1, height => {\n    h += height - this[_].defaultRowHeight;\n  });\n\n  return h;\n}\n/** @private */\n\n\nfunction _onScroll(grid, _e) {\n  const lastLeft = grid[_].scroll.left;\n  const lastTop = grid[_].scroll.top;\n  const moveX = grid[_].scrollable.scrollLeft - lastLeft;\n  const moveY = grid[_].scrollable.scrollTop - lastTop; //\n\n  grid[_].scroll = {\n    left: grid[_].scrollable.scrollLeft,\n    top: grid[_].scrollable.scrollTop\n  };\n\n  const visibleRect = _getVisibleRect(grid);\n\n  if (Math.abs(moveX) >= visibleRect.width || Math.abs(moveY) >= visibleRect.height) {\n    //\n    _invalidateRect(grid, visibleRect);\n  } else {\n    //\n    grid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\n\n    if (moveX !== 0) {\n      //\n      const redrawRect = visibleRect.copy();\n\n      if (moveX < 0) {\n        redrawRect.width = -moveX;\n\n        if (grid[_].frozenColCount > 0) {\n          //\n          const frozenRect = _getFrozenColsRect(grid);\n\n          redrawRect.width += frozenRect.width;\n        }\n      } else if (moveX > 0) {\n        redrawRect.left = redrawRect.right - moveX;\n      } //\n\n\n      _invalidateRect(grid, redrawRect);\n\n      if (moveX > 0) {\n        if (grid[_].frozenColCount > 0) {\n          //\n          _invalidateRect(grid, _getFrozenColsRect(grid));\n        }\n      }\n    }\n\n    if (moveY !== 0) {\n      //\n      const redrawRect = visibleRect.copy();\n\n      if (moveY < 0) {\n        redrawRect.height = -moveY;\n\n        if (grid[_].frozenRowCount > 0) {\n          //\n          const frozenRect = _getFrozenRowsRect(grid);\n\n          redrawRect.height += frozenRect.height;\n        }\n      } else if (moveY > 0) {\n        redrawRect.top = redrawRect.bottom - moveY;\n      } //\n\n\n      _invalidateRect(grid, redrawRect);\n\n      if (moveY > 0) {\n        if (grid[_].frozenRowCount > 0) {\n          //\n          _invalidateRect(grid, _getFrozenRowsRect(grid));\n        }\n      }\n    }\n  }\n}\n/** @private */\n// eslint-disable-next-line complexity\n\n\nfunction _onKeyDownMove(e) {\n  var _a, _b, _c;\n\n  const {\n    shiftKey\n  } = e;\n  const keyCode = getKeyCode(e);\n  const focusCell = shiftKey ? this.selection.focus : this.selection.select;\n\n  if (keyCode === KEY_LEFT) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, null, \"W\");\n    } else {\n      if (!hmove.call(this, \"W\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_UP) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"N\", null);\n    } else {\n      if (!vmove.call(this, \"N\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_RIGHT) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, null, \"E\");\n    } else {\n      if (!hmove.call(this, \"E\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_DOWN) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"S\", null);\n    } else {\n      if (!vmove.call(this, \"S\")) {\n        return;\n      }\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_HOME) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"N\", \"W\");\n    } else {\n      move(this, null, \"W\");\n    }\n\n    cancelEvent(e);\n  } else if (keyCode === KEY_END) {\n    if (e.ctrlKey || e.metaKey) {\n      move(this, \"S\", \"E\");\n    } else {\n      move(this, null, \"E\");\n    }\n\n    cancelEvent(e);\n  } else if (((_a = this.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\n    if (shiftKey) {\n      if (!hmove.call(this, \"W\", false)) {\n        const row = this.getMoveUpRowByKeyDownInternal(focusCell);\n\n        if (0 > row) {\n          return;\n        }\n\n        _moveFocusCell.call(this, this.colCount - 1, row, false);\n      }\n    } else {\n      if (!hmove.call(this, \"E\", false)) {\n        const row = this.getMoveDownRowByKeyDownInternal(focusCell);\n\n        if (this.rowCount <= row) {\n          return;\n        }\n\n        _moveFocusCell.call(this, 0, row, false);\n      }\n    }\n\n    cancelEvent(e);\n  } else if (((_b = this.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\n    if (shiftKey) {\n      if (!vmove.call(this, \"N\", false)) {\n        const col = this.getMoveLeftColByKeyDownInternal(focusCell);\n\n        if (0 > col) {\n          return;\n        }\n\n        _moveFocusCell.call(this, col, this.rowCount - 1, false);\n      }\n    } else {\n      if (!vmove.call(this, \"S\", false)) {\n        const col = this.getMoveRightColByKeyDownInternal(focusCell);\n\n        if (this.colCount <= col) {\n          return;\n        }\n\n        _moveFocusCell.call(this, col, Math.min(this.frozenRowCount, this.rowCount - 1), false);\n      }\n    }\n\n    cancelEvent(e);\n  } else if (((_c = this.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) && keyCode === KEY_ALPHA_A && (e.ctrlKey || e.metaKey)) {\n    this.selection.range = {\n      start: {\n        col: 0,\n        row: 0\n      },\n      end: {\n        col: this.colCount - 1,\n        row: this.rowCount - 1\n      }\n    };\n    this.invalidate();\n    cancelEvent(e);\n  }\n\n  function move(grid, vDir, hDir) {\n    const row = vDir === \"S\" ? grid.rowCount - 1 : vDir === \"N\" ? 0 : focusCell.row;\n    const col = hDir === \"E\" ? grid.colCount - 1 : hDir === \"W\" ? 0 : focusCell.col;\n\n    _moveFocusCell.call(grid, col, row, shiftKey);\n  }\n\n  function vmove(vDir, shiftKeyFlg = shiftKey) {\n    let row;\n\n    if (vDir === \"S\") {\n      row = this.getMoveDownRowByKeyDownInternal(focusCell);\n\n      if (this.rowCount <= row) {\n        return false;\n      }\n    } else {\n      row = this.getMoveUpRowByKeyDownInternal(focusCell);\n\n      if (row < 0) {\n        return false;\n      }\n    }\n\n    const {\n      col\n    } = focusCell;\n\n    _moveFocusCell.call(this, col, row, shiftKeyFlg);\n\n    return true;\n  }\n\n  function hmove(hDir, shiftKeyFlg = shiftKey) {\n    let col;\n\n    if (hDir === \"E\") {\n      col = this.getMoveRightColByKeyDownInternal(focusCell);\n\n      if (this.colCount <= col) {\n        return false;\n      }\n    } else {\n      col = this.getMoveLeftColByKeyDownInternal(focusCell);\n\n      if (col < 0) {\n        return false;\n      }\n    }\n\n    const {\n      row\n    } = focusCell;\n\n    _moveFocusCell.call(this, col, row, shiftKeyFlg);\n\n    return true;\n  }\n}\n/** @private */\n\n\nfunction _moveFocusCell(col, row, shiftKey) {\n  const offset = this.getOffsetInvalidateCells();\n\n  function extendRange(range) {\n    if (offset > 0) {\n      range.start.col -= offset;\n      range.start.row -= offset;\n      range.end.col += offset;\n      range.end.row += offset;\n    }\n\n    return range;\n  }\n\n  const beforeRange = extendRange(this.selection.range);\n  const beforeRect = this.getCellRangeRect(beforeRange);\n\n  this.selection._setFocusCell(col, row, shiftKey);\n\n  this.makeVisibleCell(col, row);\n  this.focusCell(col, row);\n  const afterRange = extendRange(this.selection.range);\n  const afterRect = this.getCellRangeRect(afterRange);\n\n  if (afterRect.intersection(beforeRect)) {\n    const invalidateRect = Rect_1.Rect.max(afterRect, beforeRect);\n\n    _invalidateRect(this, invalidateRect);\n  } else {\n    _invalidateRect(this, beforeRect);\n\n    _invalidateRect(this, afterRect);\n  }\n}\n/** @private */\n\n\nfunction _updatedSelection() {\n  const {\n    focusControl\n  } = this[_];\n  const {\n    col: selCol,\n    row: selRow\n  } = this[_].selection.select;\n  const results = this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, {\n    col: selCol,\n    row: selRow\n  });\n  const editMode = utils_1.array.findIndex(results, v => !!v) >= 0;\n  focusControl.editMode = editMode;\n\n  if (editMode) {\n    focusControl.storeInputStatus();\n    focusControl.setDefaultInputStatus();\n    this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, {\n      col: selCol,\n      row: selRow,\n      input: focusControl.input\n    });\n  }\n}\n/** @private */\n\n\nfunction _getMouseAbstractPoint(grid, evt) {\n  let e;\n\n  if (isTouchEvent(evt)) {\n    e = evt.changedTouches[0];\n  } else {\n    e = evt;\n  }\n\n  const clientX = e.clientX || e.pageX + window.scrollX;\n  const clientY = e.clientY || e.pageY + window.scrollY;\n\n  const rect = grid[_].canvas.getBoundingClientRect();\n\n  if (rect.right <= clientX) {\n    return null;\n  }\n\n  if (rect.bottom <= clientY) {\n    return null;\n  }\n\n  const x = clientX - rect.left + grid[_].scroll.left;\n  const y = clientY - rect.top + grid[_].scroll.top;\n  return {\n    x,\n    y\n  };\n}\n/** @private */\n\n\nfunction _bindEvents() {\n  // eslint-disable-next-line consistent-this, @typescript-eslint/no-this-alias\n  const grid = this;\n  const {\n    handler,\n    element,\n    scrollable\n  } = grid[_];\n\n  const getCellEventArgsSet = e => {\n    const abstractPos = _getMouseAbstractPoint(grid, e);\n\n    if (!abstractPos) {\n      return {};\n    }\n\n    const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\n\n    if (cell.col < 0 || cell.row < 0) {\n      return {\n        abstractPos,\n        cell\n      };\n    }\n\n    const eventArgs = {\n      col: cell.col,\n      row: cell.row,\n      event: e\n    };\n    return {\n      abstractPos,\n      cell,\n      eventArgs\n    };\n  };\n\n  const canResizeColumn = col => {\n    if (grid[_].disableColumnResize) {\n      return false;\n    }\n\n    const limit = grid[_].colWidthsLimit[col];\n\n    if (!limit || !limit.min || !limit.max) {\n      return true;\n    }\n\n    return limit.max !== limit.min;\n  };\n\n  handler.on(element, \"mousedown\", e => {\n    const eventArgsSet = getCellEventArgsSet(e);\n    const {\n      abstractPos,\n      eventArgs\n    } = eventArgsSet;\n\n    if (!abstractPos) {\n      return;\n    }\n\n    if (eventArgs) {\n      const results = grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\n\n      if (utils_1.array.findIndex(results, v => !v) >= 0) {\n        return;\n      }\n    }\n\n    if (getMouseButtons(e) !== 1) {\n      return;\n    }\n\n    const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\n    if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n      //\n      grid[_].columnResizer.start(resizeCol, e);\n    } else {\n      //\n      grid[_].cellSelector.start(e);\n    }\n  });\n  handler.on(element, \"mouseup\", e => {\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (eventArgs) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL, eventArgs);\n    }\n  });\n  let doubleTapBefore = null;\n  let longTouchId = null;\n  handler.on(element, \"touchstart\", e => {\n    if (!doubleTapBefore) {\n      doubleTapBefore = getCellEventArgsSet(e).eventArgs;\n      setTimeout(() => {\n        doubleTapBefore = null;\n      }, 350);\n    } else {\n      const {\n        eventArgs\n      } = getCellEventArgsSet(e);\n\n      if (eventArgs && eventArgs.col === doubleTapBefore.col && eventArgs.row === doubleTapBefore.row) {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, eventArgs);\n      }\n\n      doubleTapBefore = null;\n\n      if (e.defaultPrevented) {\n        return;\n      }\n    }\n\n    longTouchId = setTimeout(() => {\n      //\n      longTouchId = null;\n\n      const abstractPos = _getMouseAbstractPoint(grid, e);\n\n      if (!abstractPos) {\n        return;\n      }\n\n      const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\n\n      if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n        //\n        grid[_].columnResizer.start(resizeCol, e);\n      } else {\n        //\n        grid[_].cellSelector.start(e);\n      }\n    }, 500);\n  });\n\n  function cancel(_e) {\n    if (longTouchId) {\n      clearTimeout(longTouchId);\n      longTouchId = null;\n    }\n  }\n\n  handler.on(element, \"touchcancel\", cancel);\n  handler.on(element, \"touchmove\", cancel);\n  handler.on(element, \"touchend\", e => {\n    if (longTouchId) {\n      clearTimeout(longTouchId);\n\n      grid[_].cellSelector.select(e);\n\n      longTouchId = null;\n    }\n  });\n  let isMouseover = false;\n  let mouseEnterCell = null;\n  let mouseOverCell = null;\n\n  function onMouseenterCell(cell, related) {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEENTER_CELL, {\n      col: cell.col,\n      row: cell.row,\n      related\n    });\n    mouseEnterCell = cell;\n  }\n\n  function onMouseleaveCell(related) {\n    const beforeMouseCell = mouseEnterCell;\n    mouseEnterCell = null;\n\n    if (beforeMouseCell) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSELEAVE_CELL, {\n        col: beforeMouseCell.col,\n        row: beforeMouseCell.row,\n        related\n      });\n    }\n\n    return beforeMouseCell || undefined;\n  }\n\n  function onMouseoverCell(cell, related) {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, {\n      col: cell.col,\n      row: cell.row,\n      related\n    });\n    mouseOverCell = cell;\n  }\n\n  function onMouseoutCell(related) {\n    const beforeMouseCell = mouseOverCell;\n    mouseOverCell = null;\n\n    if (beforeMouseCell) {\n      grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, {\n        col: beforeMouseCell.col,\n        row: beforeMouseCell.row,\n        related\n      });\n    }\n\n    return beforeMouseCell || undefined;\n  }\n\n  const scrollElement = scrollable.getElement();\n  handler.on(scrollElement, \"mouseover\", _e => {\n    isMouseover = true;\n  });\n  handler.on(scrollElement, \"mouseout\", _e => {\n    isMouseover = false;\n    onMouseoutCell();\n  });\n  handler.on(element, \"mouseleave\", _e => {\n    onMouseleaveCell();\n  });\n  handler.on(element, \"mousemove\", e => {\n    const eventArgsSet = getCellEventArgsSet(e);\n    const {\n      abstractPos,\n      eventArgs\n    } = eventArgsSet;\n\n    if (eventArgs) {\n      const beforeMouseCell = mouseEnterCell;\n\n      if (beforeMouseCell) {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n\n        if (beforeMouseCell.col !== eventArgs.col || beforeMouseCell.row !== eventArgs.row) {\n          const enterCell = {\n            col: eventArgs.col,\n            row: eventArgs.row\n          };\n          const outCell = onMouseoutCell(enterCell);\n          const leaveCell = onMouseleaveCell(enterCell);\n          onMouseenterCell(enterCell, leaveCell);\n\n          if (isMouseover) {\n            onMouseoverCell(enterCell, outCell);\n          }\n        } else if (isMouseover && !mouseOverCell) {\n          onMouseoverCell({\n            col: eventArgs.col,\n            row: eventArgs.row\n          });\n        }\n      } else {\n        const enterCell = {\n          col: eventArgs.col,\n          row: eventArgs.row\n        };\n        onMouseenterCell(enterCell);\n\n        if (isMouseover) {\n          onMouseoverCell(enterCell);\n        }\n\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n      }\n    } else {\n      onMouseoutCell();\n      onMouseleaveCell();\n    }\n\n    if (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\n      return;\n    }\n\n    const {\n      style\n    } = element;\n\n    if (!abstractPos) {\n      if (style.cursor === \"col-resize\") {\n        style.cursor = \"\";\n      }\n\n      return;\n    }\n\n    const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\n    if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n      style.cursor = \"col-resize\";\n    } else {\n      if (style.cursor === \"col-resize\") {\n        style.cursor = \"\";\n      }\n    }\n  });\n  handler.on(element, \"click\", e => {\n    if (grid[_].columnResizer.lastMoving(e) || grid[_].cellSelector.lastMoving(e)) {\n      return;\n    }\n\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (!eventArgs) {\n      return;\n    }\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, eventArgs);\n  });\n  handler.on(element, \"contextmenu\", e => {\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (!eventArgs) {\n      return;\n    }\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL, eventArgs);\n  });\n  handler.on(element, \"dblclick\", e => {\n    if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL)) {\n      return;\n    }\n\n    const {\n      eventArgs\n    } = getCellEventArgsSet(e);\n\n    if (!eventArgs) {\n      return;\n    }\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, eventArgs);\n  });\n\n  grid[_].focusControl.onKeyDown(evt => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, evt);\n  });\n\n  grid[_].selection.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data, data.selected);\n  });\n\n  scrollable.onScroll(e => {\n    _onScroll(grid, e);\n\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, {\n      event: e\n    });\n  });\n\n  grid[_].focusControl.onKeyDownMove(e => {\n    _onKeyDownMove.call(grid, e);\n  });\n\n  grid.listen(\"copydata\", range => {\n    const copyRange = grid.getCopyRangeInternal(range);\n    let copyValue = \"\";\n\n    for (let {\n      row\n    } = copyRange.start; row <= copyRange.end.row; row++) {\n      for (let {\n        col\n      } = copyRange.start; col <= copyRange.end.col; col++) {\n        const copyCellValue = grid.getCopyCellValue(col, row, copyRange);\n\n        if (typeof Promise !== \"undefined\" && copyCellValue instanceof Promise) {//\n        } else {\n          // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n          const strCellValue = `${copyCellValue}`;\n\n          if (/^\\[object .*\\]$/.exec(strCellValue)) {//object \n          } else {\n            copyValue += strCellValue;\n          }\n        }\n\n        if (col < copyRange.end.col) {\n          copyValue += \"\\t\";\n        }\n      }\n\n      copyValue += \"\\n\";\n    }\n\n    return copyValue;\n  });\n\n  grid[_].focusControl.onCopy(_e => utils_1.array.find(grid.fireListeners(\"copydata\", grid[_].selection.range), utils_1.isDef));\n\n  grid[_].focusControl.onPaste(({\n    value,\n    event\n  }) => {\n    const normalizeValue = value.replace(/\\r?\\n$/, \"\");\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    const multi = /[\\r\\n\\u2028\\u2029\\t]/.test(normalizeValue); // is multi cell values\n\n    let rangeBoxValues = null;\n    const pasteCellEvent = {\n      col,\n      row,\n      value,\n      normalizeValue,\n      multi,\n\n      get rangeBoxValues() {\n        return rangeBoxValues !== null && rangeBoxValues !== void 0 ? rangeBoxValues : rangeBoxValues = paste_utils_1.parsePasteRangeBoxValues(normalizeValue);\n      },\n\n      event\n    };\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, pasteCellEvent);\n  });\n\n  grid[_].focusControl.onInput(value => {\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, {\n      col,\n      row,\n      value\n    });\n  });\n\n  grid[_].focusControl.onDelete(event => {\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DELETE_CELL, {\n      col,\n      row,\n      event\n    });\n  });\n\n  grid[_].focusControl.onFocus(e => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.FOCUS_GRID, e);\n    grid[_].focusedGrid = true;\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.invalidateCell(col, row);\n  });\n\n  grid[_].focusControl.onBlur(e => {\n    grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.BLUR_GRID, e);\n    grid[_].focusedGrid = false;\n    const {\n      col,\n      row\n    } = grid[_].selection.select;\n    grid.invalidateCell(col, row);\n  });\n}\n/** @private */\n\n\nfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\n  if (grid[_].frozenRowCount <= 0) {\n    return -1;\n  }\n\n  const frozenRect = _getFrozenRowsRect(grid);\n\n  if (!frozenRect.inPoint(abstractX, abstractY)) {\n    return -1;\n  }\n\n  const cell = grid.getCellAt(abstractX, abstractY);\n  const cellRect = grid.getCellRect(cell.col, cell.row);\n\n  if (abstractX < cellRect.left + offset) {\n    return cell.col - 1;\n  }\n\n  if (cellRect.right - offset < abstractX) {\n    return cell.col;\n  }\n\n  return -1;\n}\n/** @private */\n\n\nfunction _getVisibleRect(grid) {\n  const {\n    scroll: {\n      left,\n      top\n    },\n    canvas: {\n      width,\n      height\n    }\n  } = grid[_];\n  return new Rect_1.Rect(left, top, width, height);\n}\n/** @private */\n\n\nfunction _getScrollableVisibleRect(grid) {\n  let frozenColsWidth = 0;\n\n  if (grid[_].frozenColCount > 0) {\n    //\n    const frozenRect = _getFrozenColsRect(grid);\n\n    frozenColsWidth = frozenRect.width;\n  }\n\n  let frozenRowsHeight = 0;\n\n  if (grid[_].frozenRowCount > 0) {\n    //\n    const frozenRect = _getFrozenRowsRect(grid);\n\n    frozenRowsHeight = frozenRect.height;\n  }\n\n  return new Rect_1.Rect(grid[_].scrollable.scrollLeft + frozenColsWidth, grid[_].scrollable.scrollTop + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\n}\n/** @private */\n\n\nfunction _toRelativeRect(grid, absoluteRect) {\n  const rect = absoluteRect.copy();\n\n  const visibleRect = _getVisibleRect(grid);\n\n  rect.offsetLeft(-visibleRect.left);\n  rect.offsetTop(-visibleRect.top);\n  return rect;\n} //end private methods\n//\n//\n//\n//\n\n/**\n * managing mouse down moving\n * @private\n */\n\n\nclass BaseMouseDownMover {\n  constructor(grid) {\n    this._grid = grid;\n    this._handler = new EventHandler_1.EventHandler();\n    this._events = {};\n    this._started = false;\n    this._moved = false;\n  }\n\n  moving(_e) {\n    return !!this._started;\n  }\n\n  lastMoving(e) {\n    // mouseupclick\n    if (this.moving(e)) {\n      return true;\n    }\n\n    const last = this._mouseEndPoint;\n\n    if (!last) {\n      return false;\n    }\n\n    const pt = _getMouseAbstractPoint(this._grid, e);\n\n    return pt != null && pt.x === last.x && pt.y === last.y;\n  }\n\n  _bindMoveAndUp(e) {\n    const events = this._events;\n    const handler = this._handler;\n\n    if (!isTouchEvent(e)) {\n      events.mousemove = handler.on(document.body, \"mousemove\", e => this._mouseMove(e));\n      events.mouseup = handler.on(document.body, \"mouseup\", e => this._mouseUp(e));\n    } else {\n      events.touchmove = handler.on(document.body, \"touchmove\", e => this._mouseMove(e), {\n        passive: false\n      });\n      events.touchend = handler.on(document.body, \"touchend\", e => this._mouseUp(e));\n      events.touchcancel = handler.on(document.body, \"touchcancel\", e => this._mouseUp(e));\n    }\n\n    this._started = true;\n    this._moved = false;\n  }\n\n  _mouseMove(e) {\n    if (!isTouchEvent(e)) {\n      if (getMouseButtons(e) !== 1) {\n        this._mouseUp(e);\n\n        return;\n      }\n    }\n\n    this._moved = this._moveInternal(e) || this._moved\n    /*calculation on after*/\n    ;\n    cancelEvent(e);\n  }\n\n  _moveInternal(_e) {\n    //protected\n    return false;\n  }\n\n  _mouseUp(e) {\n    const events = this._events;\n    const handler = this._handler;\n    handler.off(events.mousemove);\n    handler.off(events.touchmove);\n    handler.off(events.mouseup);\n    handler.off(events.touchend); // handler.off(this._events.mouseleave);\n\n    handler.off(events.touchcancel);\n    this._started = false;\n\n    this._upInternal(e); // mouseupclick\n\n\n    if (this._moved) {\n      //\n      this._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\n      setTimeout(() => {\n        this._mouseEndPoint = null;\n      }, 10);\n    }\n  }\n\n  _upInternal(_e) {//protected\n  }\n\n  dispose() {\n    this._handler.dispose();\n  }\n\n}\n/**\n * managing cell selection operation with mouse\n * @private\n */\n\n\nclass CellSelector extends BaseMouseDownMover {\n  start(e) {\n    const cell = this._getTargetCell(e);\n\n    if (!cell) {\n      return;\n    }\n\n    _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\n\n    this._bindMoveAndUp(e);\n\n    this._cell = cell;\n    cancelEvent(e);\n\n    _vibrate(e);\n  }\n\n  select(e) {\n    const cell = this._getTargetCell(e);\n\n    if (!cell) {\n      return;\n    }\n\n    _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\n\n    this._cell = cell;\n  }\n\n  _moveInternal(e) {\n    const cell = this._getTargetCell(e);\n\n    if (!cell) {\n      return false;\n    }\n\n    const {\n      col: oldCol,\n      row: oldRow\n    } = this._cell;\n    const {\n      col: newCol,\n      row: newRow\n    } = cell;\n\n    if (oldCol === newCol && oldRow === newRow) {\n      return false;\n    }\n\n    const grid = this._grid;\n\n    _moveFocusCell.call(grid, newCol, newRow, true); //make visible\n\n\n    const makeVisibleCol = (() => {\n      if (newCol < oldCol && 0 < newCol) {\n        // move left\n        return newCol - 1;\n      } else if (oldCol < newCol && newCol + 1 < grid.colCount) {\n        // move right\n        return newCol + 1;\n      }\n\n      return newCol;\n    })();\n\n    const makeVisibleRow = (() => {\n      if (newRow < oldRow && 0 < newRow) {\n        // move up\n        return newRow - 1;\n      } else if (oldRow < newRow && newRow + 1 < grid.rowCount) {\n        // move down\n        return newRow + 1;\n      }\n\n      return newRow;\n    })();\n\n    if (makeVisibleCol !== newCol || makeVisibleRow !== newRow) {\n      grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\n    }\n\n    this._cell = cell;\n    return true;\n  }\n\n  _getTargetCell(e) {\n    const grid = this._grid;\n\n    const abstractPos = _getMouseAbstractPoint(grid, e);\n\n    if (!abstractPos) {\n      return null;\n    }\n\n    const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\n\n    if (cell.col < 0 || cell.row < 0) {\n      return null;\n    }\n\n    return cell;\n  }\n\n}\n/**\n * managing row width changing operation with mouse\n * @private\n */\n\n\nclass ColumnResizer extends BaseMouseDownMover {\n  constructor(grid) {\n    super(grid);\n    this._x = -1;\n    this._preX = -1;\n    this._invalidateAbsoluteLeft = -1;\n    this._targetCol = -1;\n  }\n\n  start(col, e) {\n    let pageX;\n\n    if (!isTouchEvent(e)) {\n      ({\n        pageX\n      } = e);\n    } else {\n      ({\n        pageX\n      } = e.changedTouches[0]);\n    }\n\n    this._x = pageX;\n    this._preX = 0;\n\n    this._bindMoveAndUp(e);\n\n    this._targetCol = col;\n    this._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\n    cancelEvent(e);\n\n    _vibrate(e);\n  }\n\n  _moveInternal(e) {\n    const pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\n    const x = pageX - this._x;\n    const moveX = x - this._preX;\n    this._preX = x;\n\n    const pre = this._grid.getColWidth(this._targetCol);\n\n    let afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\n\n    if (afterSize < 10 && moveX < 0) {\n      afterSize = 10;\n    }\n\n    _storeAutoColWidthExprs(this._grid);\n\n    _setColWidth(this._grid, this._targetCol, afterSize);\n\n    const rect = _getVisibleRect(this._grid);\n\n    rect.left = this._invalidateAbsoluteLeft;\n\n    _invalidateRect(this._grid, rect);\n\n    this._grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.RESIZE_COLUMN, {\n      col: this._targetCol\n    });\n\n    return true;\n  }\n\n  _upInternal(_e) {\n    const grid = this._grid;\n\n    if (grid.updateScroll()) {\n      grid.invalidate();\n    }\n  }\n\n}\n/** @private */\n\n\nfunction setSafeInputValue(input, value) {\n  const {\n    type\n  } = input;\n  input.type = \"\";\n  input.value = value;\n\n  if (type) {\n    input.type = type;\n  }\n}\n/**\n * Manage focus\n * @private\n */\n\n\nclass FocusControl extends EventTarget_1.EventTarget {\n  constructor(grid, parentElement, scrollable) {\n    super();\n    this._grid = grid;\n    this._scrollable = scrollable;\n    const handler = this._handler = new EventHandler_1.EventHandler();\n    const input = this._input = document.createElement(\"input\");\n    input.classList.add(\"grid-focus-control\");\n    input.readOnly = true;\n    parentElement.appendChild(input);\n    handler.on(input, \"compositionstart\", _e => {\n      input.classList.add(\"composition\");\n      input.style.font = grid.font || \"16px sans-serif\";\n      this._isComposition = true;\n\n      if (this._compositionEnd) {\n        clearTimeout(this._compositionEnd);\n        delete this._compositionEnd;\n      }\n\n      grid.focus();\n    });\n    let lastInputValue;\n\n    const inputClear = () => {\n      lastInputValue = input.value;\n\n      if (this._isComposition) {\n        return;\n      }\n\n      if (lastInputValue !== \"\") {\n        setSafeInputValue(input, \"\");\n      }\n    };\n\n    const handleCompositionEnd = () => {\n      this._isComposition = false;\n      input.classList.remove(\"composition\");\n      input.style.font = \"\";\n      const {\n        value\n      } = input;\n      inputClear();\n\n      if (!input.readOnly) {\n        this.fireListeners(\"input\", value);\n      }\n\n      if (this._compositionEnd) {\n        clearTimeout(this._compositionEnd);\n        delete this._compositionEnd;\n      }\n    };\n\n    handler.on(input, \"compositionend\", _e => {\n      this._compositionEnd = setTimeout(handleCompositionEnd, 1);\n    });\n    handler.on(input, \"keypress\", e => {\n      if (this._isComposition) {\n        return;\n      }\n\n      if (!input.readOnly && e.key && e.key.length === 1) {\n        if (e.ctrlKey || e.metaKey) {\n          if (e.key === \"c\") {//copy! for Firefox & Safari\n          } else if (e.key === \"v\") {//paste! for Firefox & Safari\n          }\n        } else {\n          if (e.key === \" \") {\n            // Since the full-width space cannot be determined, it is processed by \"input\".\n            return;\n          }\n\n          this.fireListeners(\"input\", e.key);\n          cancelEvent(e);\n        }\n      }\n\n      inputClear();\n    });\n    handler.on(input, \"keydown\", e => {\n      var _a;\n\n      if (this._isComposition) {\n        if (this._compositionEnd) {\n          handleCompositionEnd();\n          cancelEvent(e);\n        }\n\n        return;\n      }\n\n      const keyCode = getKeyCode(e);\n      let stopCellMove = false;\n      const evt = {\n        keyCode,\n        event: e,\n\n        stopCellMoving() {\n          stopCellMove = true;\n        }\n\n      };\n      this.fireListeners(\"keydown\", evt);\n\n      if (!input.readOnly && lastInputValue) {\n        // for Safari\n        this.fireListeners(\"input\", lastInputValue);\n      }\n\n      if (!stopCellMove) this.fireKeyDownMove(keyCode, e);\n\n      if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.deleteCellValueOnDel) && (keyCode === KEY_DEL || keyCode === KEY_BS)) {\n        this.fireListeners(\"delete\", e);\n      }\n\n      inputClear();\n    });\n    handler.on(input, \"keyup\", _e => {\n      if (this._isComposition) {\n        if (this._compositionEnd) {\n          handleCompositionEnd();\n        }\n      }\n\n      inputClear();\n    });\n    handler.on(input, \"input\", e => {\n      if (e.data === \" \" || e.data === \"\") {\n        // Since the full-width space cannot be determined on \"keypress\", it is processed by \"input\".\n        this.fireListeners(\"input\", e.data);\n      }\n\n      inputClear();\n    });\n\n    if (utils_1.browser.IE) {\n      handler.on(document, \"keydown\", e => {\n        if (e.target !== input) {\n          return;\n        }\n\n        const keyCode = getKeyCode(e);\n\n        if (keyCode === KEY_ALPHA_C && e.ctrlKey) {\n          // When text is not selected copy-event is not emit, on IE.\n          setSafeInputValue(input, \"dummy\");\n          input.select();\n          setTimeout(() => {\n            setSafeInputValue(input, \"\");\n          }, 100);\n        } else if (keyCode === KEY_ALPHA_V && e.ctrlKey) {\n          // When input is read-only paste-event is not emit, on IE.\n          if (input.readOnly) {\n            input.readOnly = false;\n            setTimeout(() => {\n              input.readOnly = true;\n              setSafeInputValue(input, \"\");\n            }, 10);\n          }\n        }\n      });\n    }\n\n    if (utils_1.browser.Edge) {\n      handler.once(document, \"keydown\", e => {\n        var _a;\n\n        if (!utils_1.isDescendantElement(parentElement, e.target)) {\n          return;\n        } // When the input has focus on the first page opening, the paste-event and copy-event is not emit, on Edge.\n\n\n        const dummyInput = document.createElement(\"input\");\n        grid.getElement().appendChild(dummyInput);\n        dummyInput.focus();\n        input.focus();\n        (_a = dummyInput.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(dummyInput);\n      });\n    }\n\n    handler.on(document, \"paste\", e => {\n      if (!utils_1.isDescendantElement(parentElement, e.target)) {\n        return;\n      }\n\n      let pasteText = undefined;\n\n      if (utils_1.browser.IE) {\n        // IE\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        pasteText = window.clipboardData.getData(\"Text\");\n      } else {\n        const {\n          clipboardData\n        } = e;\n\n        if (clipboardData.items) {\n          // Chrome & Firefox & Edge\n          pasteText = clipboardData.getData(\"text/plain\");\n        } else {\n          // Safari\n          if (-1 !== Array.prototype.indexOf.call(clipboardData.types, \"text/plain\")) {\n            pasteText = clipboardData.getData(\"Text\");\n          }\n        }\n      }\n\n      if (utils_1.isDef(pasteText) && pasteText.length) {\n        this.fireListeners(\"paste\", {\n          value: pasteText,\n          event: e\n        });\n      }\n    });\n    handler.on(document, \"copy\", e => {\n      if (this._isComposition) {\n        return;\n      }\n\n      if (!utils_1.isDescendantElement(parentElement, e.target)) {\n        return;\n      }\n\n      setSafeInputValue(input, \"\");\n      const data = utils_1.array.find(this.fireListeners(\"copy\"), utils_1.isDef);\n\n      if (utils_1.isDef(data)) {\n        cancelEvent(e);\n\n        if (utils_1.browser.IE) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          window.clipboardData.setData(\"Text\", data); // IE\n        } else {\n          e.clipboardData.setData(\"text/plain\", data); // Chrome, Firefox\n        }\n      }\n    });\n    handler.on(input, \"focus\", e => {\n      this.fireListeners(\"focus\", e);\n    });\n    handler.on(input, \"blur\", e => {\n      this.fireListeners(\"blur\", e);\n    });\n  }\n\n  fireKeyDownMove(keyCode, e) {\n    var _a, _b, _c;\n\n    const fn = this._keyDownMoveCallback;\n\n    if (!fn) {\n      return;\n    }\n\n    if (this._isComposition) {\n      return;\n    }\n\n    if (keyCode === KEY_LEFT || keyCode === KEY_UP || keyCode === KEY_RIGHT || keyCode === KEY_DOWN || keyCode === KEY_HOME || keyCode === KEY_END) {\n      fn(e);\n    } else if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\n      fn(e);\n    } else if (((_b = this._grid.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\n      fn(e);\n    } else if (((_c = this._grid.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) && keyCode === KEY_ALPHA_A && (e.ctrlKey || e.metaKey)) {\n      fn(e);\n    }\n  }\n\n  onKeyDownMove(fn) {\n    this._keyDownMoveCallback = fn;\n  }\n\n  onKeyDown(fn) {\n    return this.listen(\"keydown\", fn);\n  }\n\n  onInput(fn) {\n    return this.listen(\"input\", fn);\n  }\n\n  onDelete(fn) {\n    return this.listen(\"delete\", fn);\n  }\n\n  onCopy(fn) {\n    return this.listen(\"copy\", fn);\n  }\n\n  onPaste(fn) {\n    return this.listen(\"paste\", fn);\n  }\n\n  onFocus(fn) {\n    return this.listen(\"focus\", fn);\n  }\n\n  onBlur(fn) {\n    return this.listen(\"blur\", fn);\n  }\n\n  focus() {\n    // this._input.value = '';\n    this._input.focus();\n  }\n\n  setFocusRect(rect) {\n    const input = this._input;\n\n    const top = this._scrollable.calcTop(rect.top);\n\n    input.style.top = `${(top - style.getScrollBarSize()).toFixed()}px`; //position:relative IE position:relative\n\n    input.style.left = `${rect.left.toFixed()}px`;\n    input.style.width = `${rect.width.toFixed()}px`;\n    input.style.height = `${rect.height.toFixed()}px`;\n  }\n\n  get editMode() {\n    return !this._input.readOnly;\n  }\n\n  set editMode(editMode) {\n    this._input.readOnly = !editMode;\n  }\n\n  resetInputStatus() {\n    var _a;\n\n    const el = this._input;\n\n    if (!el.classList.contains(\"grid-focus-control--stored-status\")) {\n      return;\n    }\n\n    const composition = el.classList.contains(\"composition\");\n    const atts = el.attributes;\n    const removeNames = [];\n\n    for (let i = 0, n = atts.length; i < n; i++) {\n      const att = atts[i];\n\n      if (!((_a = this._inputStatus) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(att.nodeName))) {\n        removeNames.push(att.name);\n      }\n    }\n\n    removeNames.forEach(removeName => {\n      el.removeAttribute(removeName);\n    });\n\n    for (const name in this._inputStatus) {\n      el.setAttribute(name, this._inputStatus[name]);\n    }\n\n    if (composition) {\n      el.classList.add(\"composition\");\n      el.style.font = this._grid.font || \"16px sans-serif\";\n    } else {\n      el.classList.remove(\"composition\");\n    }\n\n    el.classList.remove(\"grid-focus-control--stored-status\");\n  }\n\n  storeInputStatus() {\n    const el = this._input;\n\n    if (el.classList.contains(\"grid-focus-control--stored-status\")) {\n      return;\n    }\n\n    const inputStatus = this._inputStatus = {};\n    const atts = el.attributes;\n\n    for (let i = 0, n = atts.length; i < n; i++) {\n      const att = atts[i];\n      inputStatus[att.name] = att.value;\n    }\n\n    el.classList.add(\"grid-focus-control--stored-status\");\n  }\n\n  setDefaultInputStatus() {// \n    // this._input.style.font = this._grid.font || '16px sans-serif';\n  }\n\n  get input() {\n    return this._input;\n  }\n\n  dispose() {\n    super.dispose();\n\n    this._handler.dispose();\n  }\n\n}\n/**\n * Selected area management\n */\n\n\nclass Selection extends EventTarget_1.EventTarget {\n  constructor(grid) {\n    super();\n    this._grid = grid;\n    this._sel = {\n      col: 0,\n      row: 0\n    };\n    this._focus = {\n      col: 0,\n      row: 0\n    };\n    this._start = {\n      col: 0,\n      row: 0\n    };\n    this._end = {\n      col: 0,\n      row: 0\n    };\n  }\n\n  get range() {\n    const start = this._start;\n    const end = this._end;\n    const startCol = Math.min(start.col, end.col);\n    const startRow = Math.min(start.row, end.row);\n    const endCol = Math.max(start.col, end.col);\n    const endRow = Math.max(start.row, end.row);\n    return {\n      start: {\n        col: startCol,\n        row: startRow\n      },\n      end: {\n        col: endCol,\n        row: endRow\n      }\n    };\n  }\n\n  set range(range) {\n    const startCol = Math.min(range.start.col, range.end.col);\n    const startRow = Math.min(range.start.row, range.end.row);\n    const endCol = Math.max(range.start.col, range.end.col);\n    const endRow = Math.max(range.start.row, range.end.row);\n\n    this._wrapFireSelectedEvent(() => {\n      this._sel = {\n        col: startCol,\n        row: startRow\n      };\n      this._focus = {\n        col: startCol,\n        row: startRow\n      };\n      this._start = {\n        col: startCol,\n        row: startRow\n      };\n      this._end = {\n        col: endCol,\n        row: endRow\n      };\n\n      _updatedSelection.call(this._grid);\n    });\n  }\n\n  get focus() {\n    const {\n      col,\n      row\n    } = this._focus;\n    return {\n      col,\n      row\n    };\n  }\n\n  get select() {\n    const {\n      col,\n      row\n    } = this._sel;\n    return {\n      col,\n      row\n    };\n  }\n\n  set select(cell) {\n    this._wrapFireSelectedEvent(() => {\n      const {\n        col = 0,\n        row = 0\n      } = cell;\n\n      this._setSelectCell(col, row);\n\n      this._setFocusCell(col, row, true);\n\n      _updatedSelection.call(this._grid);\n    });\n  }\n\n  _setSelectCell(col, row) {\n    this._wrapFireSelectedEvent(() => {\n      this._sel = {\n        col,\n        row\n      };\n      this._start = {\n        col,\n        row\n      };\n    });\n  }\n\n  _setFocusCell(col, row, keepSelect) {\n    this._wrapFireSelectedEvent(() => {\n      if (!keepSelect) {\n        this._setSelectCell(col, row);\n      }\n\n      this._focus = {\n        col,\n        row\n      };\n      this._end = {\n        col,\n        row\n      };\n    });\n  }\n\n  _wrapFireSelectedEvent(callback) {\n    if (this._isWraped) {\n      callback();\n    } else {\n      this._isWraped = true;\n\n      try {\n        const before = {\n          col: this._sel.col,\n          row: this._sel.row,\n          selected: false\n        };\n        callback();\n        const after = {\n          col: this._sel.col,\n          row: this._sel.row,\n          selected: true,\n          before: {\n            col: before.col,\n            row: before.row\n          }\n        };\n        before.after = {\n          col: after.col,\n          row: after.row\n        };\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, before);\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, after);\n      } finally {\n        this._isWraped = false;\n      }\n    }\n  }\n\n  _updateGridRange() {\n    const {\n      rowCount,\n      colCount\n    } = this._grid;\n    const points = [this._sel, this._focus, this._start, this._end];\n    let needChange = false;\n\n    for (let i = 0; i < points.length; i++) {\n      if (colCount <= points[i].col || rowCount <= points[i].row) {\n        needChange = true;\n        break;\n      }\n    }\n\n    if (!needChange) {\n      return false;\n    }\n\n    this._wrapFireSelectedEvent(() => {\n      points.forEach(p => {\n        p.col = Math.min(colCount - 1, p.col);\n        p.row = Math.min(rowCount - 1, p.row);\n      });\n    });\n\n    return true;\n  }\n\n}\n/**\n * This class manages the drawing process for each layer\n */\n\n/** @private */\n\n\nclass DrawLayers {\n  constructor() {\n    this._layers = {};\n  }\n\n  addDraw(level, fn) {\n    const l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\n    l.addDraw(fn);\n  }\n\n  draw(ctx) {\n    const list = [];\n\n    for (const k in this._layers) {\n      list.push(this._layers[k]);\n    }\n\n    list.sort((a, b) => a.level - b.level);\n    list.forEach(l => l.draw(ctx));\n  }\n\n}\n/** @private */\n\n\nclass DrawLayer {\n  constructor(level) {\n    this._level = level;\n    this._list = [];\n  }\n\n  get level() {\n    return this._level;\n  }\n\n  addDraw(fn) {\n    this._list.push(fn);\n  }\n\n  draw(ctx) {\n    this._list.forEach(fn => {\n      ctx.save();\n\n      try {\n        fn(ctx);\n      } finally {\n        ctx.restore();\n      }\n    });\n  }\n\n}\n/**\n * Context of cell drawing\n * @private\n */\n\n\nclass DrawCellContext {\n  //  private _grid: any;\n  //  private _onTerminate: any;\n\n  /**\n   * constructor\n   * @param {number} col index of column\n   * @param {number} row index of row\n   * @param {CanvasRenderingContext2D} ctx context\n   * @param {Rect} rect rect of cell area\n   * @param {Rect} drawRect rect of drawing area\n   * @param {boolean} drawing `true` if drawing is in progress\n   * @param {object} selection the selection\n   * @param {Array} drawLayers array of draw layers\n   * @private\n   */\n  constructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\n    this._rectFilter = null;\n    this._col = col;\n    this._row = row;\n    this._mode = 0;\n    this._ctx = ctx;\n    this._rect = rect;\n    this._drawRect = drawRect;\n    this._drawing = drawing;\n    this._selection = selection;\n    this._drawLayers = drawLayers;\n    this._childContexts = [];\n  }\n\n  get drawing() {\n    if (this._mode === 0) {\n      return this._drawing;\n    } else {\n      return true;\n    }\n  }\n\n  get row() {\n    return this._row;\n  }\n\n  get col() {\n    return this._col;\n  }\n\n  cancel() {\n    this._cancel = true;\n\n    this._childContexts.forEach(ctx => {\n      ctx.cancel();\n    });\n  }\n  /**\n   * select status.\n   * @return {object} select status\n   */\n\n\n  getSelection() {\n    return {\n      select: this._selection.select,\n      range: this._selection.range\n    };\n  }\n  /**\n   * Canvas context.\n   * @return {CanvasRenderingContext2D} Canvas context.\n   */\n\n\n  getContext() {\n    if (this._mode === 0) {\n      return this._ctx;\n    } else {\n      return _getInitContext.call(this._grid);\n    }\n  }\n  /**\n   * Rectangle of cell.\n   * @return {Rect} rect Rectangle of cell.\n   */\n\n\n  getRect() {\n    const rectFilter = this._rectFilter;\n    return rectFilter ? rectFilter(this._getRectInternal()) : this._getRectInternal();\n  }\n\n  setRectFilter(rectFilter) {\n    this._rectFilter = rectFilter;\n  }\n  /**\n   * Rectangle of Drawing range.\n   * @return {Rect} Rectangle of Drawing range.\n   */\n\n\n  getDrawRect() {\n    if (this._cancel) {\n      return null;\n    }\n\n    if (this._mode === 0) {\n      return this._drawRect;\n    } else {\n      if (this._isOutOfRange()) {\n        return null;\n      }\n\n      const absoluteRect = this._grid.getCellRect(this._col, this._row);\n\n      return this._toRelativeDrawRect(absoluteRect);\n    }\n  }\n\n  _isOutOfRange() {\n    const {\n      colCount,\n      rowCount\n    } = this._grid;\n    return colCount <= this._col || rowCount <= this._row;\n  }\n  /**\n   * get Context of current state\n   * @return {DrawCellContext} current DrawCellContext.\n   */\n\n\n  toCurrentContext() {\n    if (this._mode === 0) {\n      return this;\n    } else {\n      const absoluteRect = this._grid.getCellRect(this._col, this._row);\n\n      const rect = _toRelativeRect(this._grid, absoluteRect);\n\n      const drawRect = this._isOutOfRange() ? null : this._toRelativeDrawRect(absoluteRect);\n      const context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers); // toCurrentContext  toCurrentContext\n\n      context.toCurrentContext = this.toCurrentContext.bind(this);\n\n      this._childContexts.push(context);\n\n      if (this._cancel) {\n        context.cancel();\n      }\n\n      context._rectFilter = this._rectFilter;\n      return context;\n    }\n  }\n\n  addLayerDraw(level, fn) {\n    this._drawLayers.addDraw(level, fn);\n  }\n\n  _toRelativeDrawRect(absoluteRect) {\n    const visibleRect = _getVisibleRect(this._grid);\n\n    let rect = absoluteRect.copy();\n\n    if (!rect.intersection(visibleRect)) {\n      return null;\n    }\n\n    const grid = this._grid;\n    const isFrozenCell = grid.isFrozenCell(this._col, this._row);\n\n    if (grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\n      const fRect = grid.getCellRect(grid.frozenColCount - 1, this._row);\n      rect = Rect_1.Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\n    }\n\n    if (grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\n      const fRect = grid.getCellRect(this._col, grid.frozenRowCount - 1);\n      rect = Rect_1.Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\n    }\n\n    if (!rect.intersection(visibleRect)) {\n      return null;\n    }\n\n    rect.offsetLeft(-visibleRect.left);\n    rect.offsetTop(-visibleRect.top);\n    return rect;\n  }\n\n  _delayMode(grid, onTerminate) {\n    this._mode = 1;\n    this._ctx = null;\n    this._rect = null;\n    this._drawRect = null;\n    this._grid = grid;\n    this._onTerminate = onTerminate;\n  }\n  /**\n   * terminate\n   * @return {void}\n   */\n\n\n  terminate() {\n    var _a;\n\n    if (this._mode !== 0) {\n      (_a = this._onTerminate) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n  }\n\n  _getRectInternal() {\n    if (this._mode === 0) {\n      return this._rect;\n    } else {\n      if (this._rect) {\n        return this._rect;\n      }\n\n      return this._grid.getCellRelativeRect(this._col, this._row);\n    }\n  }\n\n}\n/** @private */\n\n\nconst protectedKey = _;\n/**\n * DrawGrid\n * @classdesc cheetahGrid.core.DrawGrid\n * @memberof cheetahGrid.core\n */\n\nclass DrawGrid extends EventTarget_1.EventTarget {\n  constructor(options = {}) {\n    super();\n    const {\n      rowCount = 10,\n      colCount = 10,\n      frozenColCount = 0,\n      frozenRowCount = 0,\n      defaultRowHeight = 40,\n      defaultColWidth = 80,\n      font,\n      underlayBackgroundColor,\n      keyboardOptions,\n      parentElement,\n      disableColumnResize\n    } = options;\n    const protectedSpace = this[_] = {};\n    style.initDocument();\n    protectedSpace.element = createRootElement();\n    protectedSpace.scrollable = new Scrollable_1.Scrollable();\n    protectedSpace.handler = new EventHandler_1.EventHandler();\n    protectedSpace.selection = new Selection(this);\n    protectedSpace.focusControl = new FocusControl(this, protectedSpace.scrollable.getElement(), protectedSpace.scrollable);\n    protectedSpace.canvas = hiDPI.transform(document.createElement(\"canvas\"));\n    protectedSpace.context = protectedSpace.canvas.getContext(\"2d\", {\n      alpha: false\n    });\n    protectedSpace.rowCount = rowCount;\n    protectedSpace.colCount = colCount;\n    protectedSpace.frozenColCount = frozenColCount;\n    protectedSpace.frozenRowCount = frozenRowCount;\n    protectedSpace.defaultRowHeight = defaultRowHeight;\n    protectedSpace.defaultColWidth = defaultColWidth;\n    protectedSpace.font = font;\n    protectedSpace.underlayBackgroundColor = underlayBackgroundColor;\n    protectedSpace.keyboardOptions = keyboardOptions;\n    protectedSpace.disableColumnResize = disableColumnResize; /////\n\n    protectedSpace.rowHeightsMap = new NumberMap_1.NumberMap();\n    protectedSpace.colWidthsMap = new NumberMap_1.NumberMap();\n    protectedSpace.colWidthsLimit = {};\n    protectedSpace.calcWidthContext = {\n      _: protectedSpace,\n\n      get full() {\n        return this._.canvas.width;\n      },\n\n      get em() {\n        return canvases_1.getFontSize(this._.context, this._.font).width;\n      }\n\n    };\n    protectedSpace.columnResizer = new ColumnResizer(this);\n    protectedSpace.cellSelector = new CellSelector(this);\n    protectedSpace.drawCells = {};\n    protectedSpace.cellTextOverflows = {};\n    protectedSpace.focusedGrid = false;\n    protectedSpace.element.appendChild(protectedSpace.canvas);\n    protectedSpace.element.appendChild(protectedSpace.scrollable.getElement());\n    protectedSpace.scroll = {\n      left: 0,\n      top: 0\n    };\n    this.updateScroll();\n\n    if (parentElement) {\n      parentElement.appendChild(protectedSpace.element);\n      this.updateSize();\n    } else {\n      this.updateSize();\n    }\n\n    _bindEvents.call(this);\n\n    this.bindEventsInternal();\n  }\n\n  static get EVENT_TYPE() {\n    return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\n  }\n  /**\n   * Get root element.\n   * @returns {HTMLElement} root element\n   */\n\n\n  getElement() {\n    return this[_].element;\n  }\n  /**\n   * Get canvas element.\n   */\n\n\n  get canvas() {\n    return this[_].canvas;\n  }\n  /**\n   * Focus the grid.\n   * @return {void}\n   */\n\n\n  focus() {\n    const {\n      col,\n      row\n    } = this[_].selection.select;\n    this.focusCell(col, row);\n  }\n\n  hasFocusGrid() {\n    return this[_].focusedGrid;\n  }\n  /**\n   * Get the selection instance.\n   */\n\n\n  get selection() {\n    return this[_].selection;\n  }\n  /**\n   * Get the number of rows.\n   */\n\n\n  get rowCount() {\n    return this[_].rowCount;\n  }\n  /**\n   * Set the number of rows.\n   */\n\n\n  set rowCount(rowCount) {\n    this[_].rowCount = rowCount;\n    this.updateScroll();\n\n    if (this[_].selection._updateGridRange()) {\n      const {\n        col,\n        row\n      } = this[_].selection.focus;\n      this.makeVisibleCell(col, row);\n      this.setFocusCursor(col, row);\n    }\n  }\n  /**\n   * Get the number of columns.\n   */\n\n\n  get colCount() {\n    return this[_].colCount;\n  }\n  /**\n   * Set the number of columns.\n   */\n\n\n  set colCount(colCount) {\n    this[_].colCount = colCount;\n    this.updateScroll();\n\n    if (this[_].selection._updateGridRange()) {\n      const {\n        col,\n        row\n      } = this[_].selection.focus;\n      this.makeVisibleCell(col, row);\n      this.setFocusCursor(col, row);\n    }\n  }\n  /**\n   * Get the number of frozen columns.\n   */\n\n\n  get frozenColCount() {\n    return this[_].frozenColCount;\n  }\n  /**\n   * Set the number of frozen columns.\n   */\n\n\n  set frozenColCount(frozenColCount) {\n    this[_].frozenColCount = frozenColCount;\n  }\n  /**\n   * Get the number of frozen rows.\n   */\n\n\n  get frozenRowCount() {\n    return this[_].frozenRowCount;\n  }\n  /**\n   * Set the number of frozen rows.\n   */\n\n\n  set frozenRowCount(frozenRowCount) {\n    this[_].frozenRowCount = frozenRowCount;\n  }\n  /**\n   * Get the default row height.\n   *\n   */\n\n\n  get defaultRowHeight() {\n    return this[_].defaultRowHeight;\n  }\n  /**\n   * Set the default row height.\n   */\n\n\n  set defaultRowHeight(defaultRowHeight) {\n    this[_].defaultRowHeight = defaultRowHeight;\n  }\n  /**\n   * Get the default column width.\n   */\n\n\n  get defaultColWidth() {\n    return this[_].defaultColWidth;\n  }\n  /**\n   * Set the default column width.\n   */\n\n\n  set defaultColWidth(defaultColWidth) {\n    this[_].defaultColWidth = defaultColWidth;\n  }\n  /**\n   * Get the font definition as a string.\n   */\n\n\n  get font() {\n    return this[_].font;\n  }\n  /**\n   * Set the font definition with the given string.\n   */\n\n\n  set font(font) {\n    this[_].font = font;\n  }\n  /**\n   * Get the background color of the underlay.\n   */\n\n\n  get underlayBackgroundColor() {\n    return this[_].underlayBackgroundColor;\n  }\n  /**\n   * Set the background color of the underlay.\n   */\n\n\n  set underlayBackgroundColor(underlayBackgroundColor) {\n    this[_].underlayBackgroundColor = underlayBackgroundColor;\n  }\n\n  get keyboardOptions() {\n    var _a;\n\n    return (_a = this[_].keyboardOptions) !== null && _a !== void 0 ? _a : null;\n  }\n\n  set keyboardOptions(keyboardOptions) {\n    this[_].keyboardOptions = keyboardOptions !== null && keyboardOptions !== void 0 ? keyboardOptions : undefined;\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  configure(name, value) {\n    const cfg = this[_].config || (this[_].config = {});\n\n    if (utils_1.isDef(value)) {\n      cfg[name] = value;\n    }\n\n    return cfg[name];\n  }\n  /**\n   * Apply the changed size.\n   * @return {void}\n   */\n\n\n  updateSize() {\n    //\n    const {\n      canvas\n    } = this[_];\n    canvas.style.width = \"\";\n    canvas.style.height = \"\";\n    const width = Math.floor(canvas.offsetWidth || canvas.parentElement.offsetWidth - style.getScrollBarSize()\n    /*for legacy*/\n    );\n    const height = Math.floor(canvas.offsetHeight || canvas.parentElement.offsetHeight - style.getScrollBarSize()\n    /*for legacy*/\n    );\n    canvas.width = width;\n    canvas.height = height; //style\n\n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n    const sel = this[_].selection.select;\n\n    this[_].focusControl.setFocusRect(this.getCellRect(sel.col, sel.row));\n  }\n  /**\n   * Apply the changed scroll size.\n   * @return {boolean} `true` if there was a change in the scroll size\n   */\n\n\n  updateScroll() {\n    const {\n      scrollable\n    } = this[_];\n\n    const newHeight = _getScrollHeight.call(this);\n\n    const newWidth = _getScrollWidth(this);\n\n    if (newHeight === scrollable.scrollHeight && newWidth === scrollable.scrollWidth) {\n      return false;\n    }\n\n    scrollable.setScrollSize(newWidth, newHeight);\n    this[_].scroll = {\n      left: scrollable.scrollLeft,\n      top: scrollable.scrollTop\n    };\n    return true;\n  }\n  /**\n   * Get the row height of the given the row index.\n   * @param  {number} row The row index\n   * @return {number} The row height\n   */\n\n\n  getRowHeight(row) {\n    return _getRowHeight.call(this, row);\n  }\n  /**\n   * Set the row height of the given the row index.\n   * @param  {number} row The row index\n   * @param  {number} height The row height\n   * @return {void}\n   */\n\n\n  setRowHeight(row, height) {\n    _setRowHeight(this, row, height);\n  }\n  /**\n   * Get the column width of the given the column index.\n   * @param  {number} col The column index\n   * @return {number} The column width\n   */\n\n\n  getColWidth(col) {\n    return _getColWidth(this, col);\n  }\n  /**\n   * Set the column widtht of the given the column index.\n   * @param  {number} col The column index\n   * @param  {number} width The column width\n   * @return {void}\n   */\n\n\n  setColWidth(col, width) {\n    _setColWidth(this, col, width);\n  }\n  /**\n   * Get the column max width of the given the column index.\n   * @param  {number} col The column index\n   * @return {number} The column max width\n   */\n\n\n  getMaxColWidth(col) {\n    const obj = this[_].colWidthsLimit[col];\n    return obj && obj.max || undefined;\n  }\n  /**\n   * Set the column max widtht of the given the column index.\n   * @param  {number} col The column index\n   * @param  {number} maxwidth The column max width\n   * @return {void}\n   */\n\n\n  setMaxColWidth(col, maxwidth) {\n    const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n    obj.max = maxwidth;\n  }\n  /**\n   * Get the column min width of the given the column index.\n   * @param  {number} col The column index\n   * @return {number} The column min width\n   */\n\n\n  getMinColWidth(col) {\n    const obj = this[_].colWidthsLimit[col];\n    return obj && obj.min || undefined;\n  }\n  /**\n   * Set the column min widtht of the given the column index.\n   * @param  {number} col The column index\n   * @param  {number} minwidth The column min width\n   * @return {void}\n   */\n\n\n  setMinColWidth(col, minwidth) {\n    const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n    obj.min = minwidth;\n  }\n  /**\n   * Get the rect of the cell.\n   * @param {number} col index of column, of the cell\n   * @param {number} row index of row, of the cell\n   * @returns {Rect} the rect of the cell.\n   */\n\n\n  getCellRect(col, row) {\n    const isFrozenCell = this.isFrozenCell(col, row);\n\n    let absoluteLeft = _getColsWidth(this, 0, col - 1);\n\n    const width = _getColWidth(this, col);\n\n    if (isFrozenCell && isFrozenCell.col) {\n      absoluteLeft += this[_].scroll.left;\n    }\n\n    let absoluteTop = _getRowsHeight.call(this, 0, row - 1);\n\n    const height = _getRowHeight.call(this, row);\n\n    if (isFrozenCell && isFrozenCell.row) {\n      absoluteTop += this[_].scroll.top;\n    }\n\n    return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\n  }\n  /**\n   * Get the relative rectangle of the cell.\n   * @param {number} col index of column, of the cell\n   * @param {number} row index of row, of the cell\n   * @returns {Rect} the rect of the cell.\n   */\n\n\n  getCellRelativeRect(col, row) {\n    return _toRelativeRect(this, this.getCellRect(col, row));\n  }\n  /**\n   * Get the rectangle of the cells area.\n   * @param {number} startCol index of the starting column, of the cell\n   * @param {number} startRow index of the starting row, of the cell\n   * @param {number} endCol index of the ending column, of the cell\n   * @param {number} endRow index of the ending row, of the cell\n   * @returns {Rect} the rect of the cells.\n   */\n\n\n  getCellsRect(startCol, startRow, endCol, endRow) {\n    const isFrozenStartCell = this.isFrozenCell(startCol, startRow);\n    const isFrozenEndCell = this.isFrozenCell(endCol, endRow);\n\n    let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\n\n    let width = _getColsWidth(this, startCol, endCol);\n\n    if (isFrozenStartCell && isFrozenStartCell.col) {\n      const scrollLeft = this[_].scroll.left;\n      absoluteLeft += scrollLeft;\n\n      if (!isFrozenEndCell || !isFrozenEndCell.col) {\n        width -= scrollLeft;\n        width = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\n      }\n    }\n\n    let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\n\n    let height = _getRowsHeight.call(this, startRow, endRow);\n\n    if (isFrozenStartCell && isFrozenStartCell.row) {\n      const scrollTop = this[_].scroll.top;\n      absoluteTop += scrollTop;\n\n      if (!isFrozenEndCell || !isFrozenEndCell.row) {\n        height -= scrollTop;\n        height = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\n      }\n    }\n\n    return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\n  }\n\n  getCellRangeRect(range) {\n    return this.getCellsRect(range.start.col, range.start.row, range.end.col, range.end.row);\n  }\n\n  isFrozenCell(col, row) {\n    const {\n      frozenRowCount,\n      frozenColCount\n    } = this[_];\n    const isFrozenRow = frozenRowCount > 0 && row < frozenRowCount;\n    const isFrozenCol = frozenColCount > 0 && col < frozenColCount;\n\n    if (isFrozenRow || isFrozenCol) {\n      return {\n        row: isFrozenRow,\n        col: isFrozenCol\n      };\n    } else {\n      return null;\n    }\n  }\n\n  getRowAt(absoluteY) {\n    const frozen = _getTargetFrozenRowAt(this, absoluteY);\n\n    if (frozen) {\n      return frozen.row;\n    }\n\n    const row = _getTargetRowAt.call(this, absoluteY);\n\n    return row ? row.row : -1;\n  }\n\n  getColAt(absoluteX) {\n    const frozen = _getTargetFrozenColAt(this, absoluteX);\n\n    if (frozen) {\n      return frozen.col;\n    }\n\n    const col = _getTargetColAt(this, absoluteX);\n\n    return col ? col.col : -1;\n  }\n\n  getCellAt(absoluteX, absoluteY) {\n    return {\n      row: this.getRowAt(absoluteY),\n      col: this.getColAt(absoluteX)\n    };\n  }\n  /**\n   * Scroll to where cell is visible.\n   * @param  {number} col The column index.\n   * @param  {number} row The row index\n   * @return {void}\n   */\n\n\n  makeVisibleCell(col, row) {\n    const isFrozenCell = this.isFrozenCell(col, row);\n\n    if (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\n      return;\n    }\n\n    const rect = this.getCellRect(col, row);\n\n    const visibleRect = _getScrollableVisibleRect(this);\n\n    if (visibleRect.contains(rect)) {\n      return;\n    }\n\n    const {\n      scrollable\n    } = this[_];\n\n    if (!isFrozenCell || !isFrozenCell.col) {\n      if (rect.left < visibleRect.left) {\n        scrollable.scrollLeft -= visibleRect.left - rect.left;\n      } else if (visibleRect.right < rect.right) {\n        scrollable.scrollLeft -= visibleRect.right - rect.right;\n      }\n    }\n\n    if (!isFrozenCell || !isFrozenCell.row) {\n      if (rect.top < visibleRect.top) {\n        scrollable.scrollTop -= visibleRect.top - rect.top;\n      } else if (visibleRect.bottom < rect.bottom) {\n        scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\n      }\n    }\n  }\n  /**\n   * Moves the focus cursor to the given cell.\n   * @param  {number} col The column index.\n   * @param  {number} row The row index\n   * @return {void}\n   */\n\n\n  setFocusCursor(col, row) {\n    const {\n      focusControl\n    } = this[_];\n    const oldEditMode = focusControl.editMode;\n    focusControl.setFocusRect(this.getCellRect(col, row));\n\n    _updatedSelection.call(this);\n\n    if (oldEditMode && !focusControl.editMode) {\n      focusControl.resetInputStatus();\n    }\n  }\n  /**\n   * Focus the cell.\n   * @param  {number} col The column index.\n   * @param  {number} row The row index\n   * @return {void}\n   */\n\n\n  focusCell(col, row) {\n    this.setFocusCursor(col, row); // Failure occurs in IE if focus is not last\n\n    this[_].focusControl.focus();\n  }\n  /**\n   * Redraws the range of the given cell.\n   * @param  {number} col The column index of cell.\n   * @param  {number} row The row index of cell.\n   * @return {void}\n   */\n\n\n  invalidateCell(col, row) {\n    this.invalidateGridRect(col, row);\n  }\n  /**\n   * Redraws the range of the given cells.\n   * @param {number} startCol index of the starting column, of the cell\n   * @param {number} startRow index of the starting row, of the cell\n   * @param {number} endCol index of the ending column, of the cell\n   * @param {number} endRow index of the ending row, of the cell\n   * @return {void}\n   */\n\n\n  invalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\n    const offset = this.getOffsetInvalidateCells();\n\n    if (offset > 0) {\n      startCol -= offset;\n      startRow -= offset;\n      endCol += offset;\n      endRow += offset;\n    }\n\n    const visibleRect = _getVisibleRect(this);\n\n    const cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\n    const invalidateTarget = visibleRect.intersection(cellsRect);\n\n    if (invalidateTarget) {\n      const {\n        frozenColCount,\n        frozenRowCount\n      } = this[_];\n\n      if (frozenColCount > 0 && endCol >= frozenColCount) {\n        const frozenRect = _getFrozenColsRect(this);\n\n        if (frozenRect.intersection(invalidateTarget)) {\n          invalidateTarget.left = Math.min(frozenRect.right - 1, invalidateTarget.left);\n        }\n      }\n\n      if (frozenRowCount > 0 && endRow >= frozenRowCount) {\n        const frozenRect = _getFrozenRowsRect(this);\n\n        if (frozenRect.intersection(invalidateTarget)) {\n          invalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\n        }\n      }\n\n      _invalidateRect(this, invalidateTarget);\n    }\n  }\n\n  invalidateCellRange(range) {\n    this.invalidateGridRect(range.start.col, range.start.row, range.end.col, range.end.row);\n  }\n  /**\n   * Redraws the whole grid.\n   * @return {void}\n   */\n\n\n  invalidate() {\n    const visibleRect = _getVisibleRect(this);\n\n    _invalidateRect(this, visibleRect);\n  }\n  /**\n   * Get the number of scrollable rows fully visible in the grid. visibleRowCount does not include the frozen rows counted by the frozenRowCount property. It does not include any partially visible rows on the bottom of the grid.\n   * @returns {number}\n   */\n\n\n  get visibleRowCount() {\n    const {\n      frozenRowCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleTop = frozenRowCount > 0 ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1) : visibleRect.top;\n\n    const initRow = _getTargetRowAt.call(this, visibleTop);\n\n    if (!initRow) {\n      return 0;\n    }\n\n    const startRow = Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\n\n    let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\n\n    let count = 0;\n    const {\n      rowCount\n    } = this;\n\n    for (let row = startRow; row < rowCount; row++) {\n      const height = _getRowHeight.call(this, row);\n\n      const bottom = absoluteTop + height;\n\n      if (visibleRect.bottom < bottom) {\n        break;\n      }\n\n      count++;\n      absoluteTop = bottom;\n    }\n\n    return count;\n  }\n  /**\n   * Get the number of scrollable columns fully visible in the grid. visibleColCount does not include the frozen columns counted by the frozenColCount property. It does not include any partially visible columns on the right of the grid.\n   * @returns {number}\n   */\n\n\n  get visibleColCount() {\n    const {\n      frozenColCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleLeft = frozenColCount > 0 ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1) : visibleRect.left;\n\n    const initCol = _getTargetColAt(this, visibleLeft);\n\n    if (!initCol) {\n      return 0;\n    }\n\n    const startCol = Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\n\n    let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\n\n    let count = 0;\n    const {\n      colCount\n    } = this;\n\n    for (let col = startCol; col < colCount; col++) {\n      const width = _getColWidth(this, col);\n\n      const right = absoluteLeft + width;\n\n      if (visibleRect.right < right) {\n        break;\n      }\n\n      count++;\n      absoluteLeft = right;\n    }\n\n    return count;\n  }\n  /**\n   * Get the index of the first row in the scrollable region that is visible.\n   * @returns {number}\n   */\n\n\n  get topRow() {\n    const {\n      frozenRowCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleTop = frozenRowCount > 0 ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1) : visibleRect.top;\n\n    const initRow = _getTargetRowAt.call(this, visibleTop);\n\n    if (!initRow) {\n      return 0;\n    }\n\n    return Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\n  }\n  /**\n   * Get the index of the first column in the scrollable region that is visible.\n   * @returns {number}\n   */\n\n\n  get leftCol() {\n    const {\n      frozenColCount\n    } = this;\n\n    const visibleRect = _getVisibleRect(this);\n\n    const visibleLeft = frozenColCount > 0 ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1) : visibleRect.left;\n\n    const initCol = _getTargetColAt(this, visibleLeft);\n\n    if (!initCol) {\n      return 0;\n    }\n\n    return Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\n  }\n  /**\n   * gets or sets the number of pixels that an element's content is scrolled vertically\n   */\n\n\n  get scrollTop() {\n    return this[_].scrollable.scrollTop;\n  }\n\n  set scrollTop(scrollTop) {\n    this[_].scrollable.scrollTop = scrollTop;\n  }\n  /**\n   * gets or sets the number of pixels that an element's content is scrolled from its left edge\n   */\n\n\n  get scrollLeft() {\n    return this[_].scrollable.scrollLeft;\n  }\n\n  set scrollLeft(scrollLeft) {\n    this[_].scrollable.scrollLeft = scrollLeft;\n  }\n  /**\n   * Get the value of cell with the copy action.\n   * <p>\n   * Please implement\n   * </p>\n   *\n   * @protected\n   * @param col Column index of cell.\n   * @param row Row index of cell.\n   * @param range Copy range.\n   * @return {string} the value of cell\n   */\n\n\n  getCopyCellValue(_col, _row, _range) {} //Please implement get cell value!!\n\n  /**\n   * Get the overflowed text in the cell rectangle, from the given cell.\n   * @param  {number} col The column index.\n   * @param  {number} row The row index\n   * @return {string | null} The text overflowing the cell rect.\n   */\n\n\n  getCellOverflowText(col, row) {\n    const key = `${col}:${row}`;\n    return this[_].cellTextOverflows[key] || null;\n  }\n  /**\n   * Set the overflowed text in the cell rectangle, to the given cell.\n   * @param  {number} col The column index.\n   * @param  {number} row The row index\n   * @param  {string} overflowText The overflowed text in the cell rectangle.\n   * @return {void}\n   */\n\n\n  setCellOverflowText(col, row, overflowText) {\n    const key = `${col}:${row}`;\n\n    if (overflowText) {\n      this[_].cellTextOverflows[key] = typeof overflowText === \"string\" ? overflowText.trim() : overflowText;\n    } else {\n      delete this[_].cellTextOverflows[key];\n    }\n  }\n\n  addDisposable(disposable) {\n    if (!disposable || !disposable.dispose || typeof disposable.dispose !== \"function\") {\n      throw new Error(\"not disposable!\");\n    }\n\n    const disposables = this[_].disposables = this[_].disposables || [];\n    disposables.push(disposable);\n  }\n  /**\n   * Dispose the grid instance.\n   * @returns {void}\n   */\n\n\n  dispose() {\n    super.dispose();\n    const protectedSpace = this[_];\n    protectedSpace.handler.dispose();\n    protectedSpace.scrollable.dispose();\n    protectedSpace.focusControl.dispose();\n    protectedSpace.columnResizer.dispose();\n    protectedSpace.cellSelector.dispose();\n\n    if (protectedSpace.disposables) {\n      protectedSpace.disposables.forEach(disposable => disposable.dispose());\n      protectedSpace.disposables = null;\n    }\n\n    const {\n      parentElement\n    } = protectedSpace.element;\n\n    if (parentElement) {\n      parentElement.removeChild(protectedSpace.element);\n    }\n  }\n\n  getAttachCellsArea(range) {\n    return {\n      element: this.getElement(),\n      rect: _toRelativeRect(this, this.getCellRangeRect(range))\n    };\n  }\n\n  onKeyDownMove(evt) {\n    _onKeyDownMove.call(this, evt);\n  }\n\n  bindEventsInternal() {//nop\n  }\n\n  getTargetRowAtInternal(_absoluteY) {// \n  }\n\n  getRowsHeightInternal(_startRow, _endRow) {// \n  }\n\n  getRowHeightInternal(_row) {// \n  }\n\n  getScrollHeightInternal(_row) {// \n  }\n\n  getMoveLeftColByKeyDownInternal({\n    col\n  }) {\n    return col - 1;\n  }\n\n  getMoveRightColByKeyDownInternal({\n    col\n  }) {\n    return col + 1;\n  }\n\n  getMoveUpRowByKeyDownInternal({\n    row\n  }) {\n    return row - 1;\n  }\n\n  getMoveDownRowByKeyDownInternal({\n    row\n  }) {\n    return row + 1;\n  }\n\n  getOffsetInvalidateCells() {\n    return 0;\n  }\n\n  getCopyRangeInternal(range) {\n    return range;\n  }\n\n  _getInitContext() {\n    const ctx = this[_].context; //\n\n    ctx.fillStyle = \"white\";\n    ctx.strokeStyle = \"black\";\n    ctx.textAlign = \"left\";\n    ctx.textBaseline = \"top\";\n    ctx.lineWidth = 1;\n    ctx.font = this.font || \"16px sans-serif\";\n    return ctx;\n  }\n\n  fireListeners(type, ...event) {\n    return super.fireListeners(type, ...event);\n  }\n\n}\n\nexports.DrawGrid = DrawGrid;\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction getScrollBarWidth() {\n  const dummy = document.createElement(\"div\");\n  const {\n    style\n  } = dummy;\n  style.position = \"absolute\";\n  style.height = \"9999px\";\n  style.width = \"calc(100vw - 100%)\";\n  style.opacity = \"0\";\n  dummy.textContent = \"x\";\n  document.body.appendChild(dummy);\n  const {\n    width\n  } = (document.defaultView || window).getComputedStyle(dummy, \"\");\n  document.body.removeChild(dummy);\n  return parseInt(width, 10);\n}\n\nlet SCROLLBAR_SIZE;\n\nfunction initDocumentInternal() {\n  __webpack_require__(108);\n\n  SCROLLBAR_SIZE = getScrollBarWidth() || 10;\n  const style = document.createElement(\"style\");\n  style.setAttribute(\"type\", \"text/css\");\n  style.setAttribute(\"data-name\", \"cheetah-grid\");\n  style.innerHTML = `\n.cheetah-grid .grid-scroll-end-point {\n\twidth: ${SCROLLBAR_SIZE}px;\n\theight: ${SCROLLBAR_SIZE}px;\n}\n.cheetah-grid > canvas {\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\n}\n\t\t`;\n  document.head.appendChild(style);\n}\n\nlet initDocumentVar = initDocumentInternal;\n\nfunction initDocument() {\n  initDocumentVar();\n  initDocumentVar = Function.prototype;\n}\n\nexports.initDocument = initDocument;\n\nfunction getScrollBarSize() {\n  return SCROLLBAR_SIZE;\n}\n\nexports.getScrollBarSize = getScrollBarSize;\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction parsePasteRangeBoxValues(value) {\n  const normalizeValue = value.replace(/\\r?\\n$/, \"\");\n  const lines = normalizeValue.split(/(?:\\r?\\n)|[\\u2028\\u2029]/g);\n  const values = lines.map(line => line.split(/\\t/g));\n  const colCount = values.reduce((n, cells) => Math.max(n, cells.length), 0);\n  return {\n    colCount,\n    rowCount: values.length,\n\n    getCellValue(offsetCol, offsetRow) {\n      var _a;\n\n      return ((_a = values[offsetRow]) === null || _a === void 0 ? void 0 : _a[offsetCol]) || \"\";\n    }\n\n  };\n}\n\nexports.parsePasteRangeBoxValues = parsePasteRangeBoxValues;\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst DataSource_1 = __webpack_require__(30);\n\nexports.DataSource = DataSource_1.DataSource;\n\nconst CachedDataSource_1 = __webpack_require__(112);\n\nexports.CachedDataSource = CachedDataSource_1.CachedDataSource;\n\nconst FilterDataSource_1 = __webpack_require__(113);\n\nexports.FilterDataSource = FilterDataSource_1.FilterDataSource;\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nfunction createArray(get, length) {\n  const array = new Array(length);\n\n  for (let i = 0; i < length; i++) {\n    array[i] = get(i);\n  }\n\n  return array;\n}\n\nfunction createArrayPromise(get, getField, length // eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n  return new Promise(resolve => {\n    const plist = [];\n    const array = new Array(length);\n\n    for (let i = 0; i < length; i++) {\n      const data = get(i);\n      const record = {\n        v: data,\n        f: data\n      };\n      array[i] = record;\n\n      if (utils_1.isPromise(data)) {\n        plist.push(data.then(v => {\n          record.v = v;\n          record.f = v;\n        }));\n      }\n    }\n\n    Promise.all(plist).then(() => getField == null ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    array : // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    setArrayField(array, getField)).then(resolve);\n  });\n}\n\nfunction setArrayField(array, getField) {\n  return new Promise(resolve => {\n    const {\n      length\n    } = array;\n    const plist = [];\n\n    for (let i = 0; i < length; i++) {\n      const record = array[i];\n      const f = getField(record.v);\n\n      if (utils_1.isPromise(f)) {\n        plist.push(f.then(v => {\n          record.f = v;\n        }));\n      } else {\n        record.f = f;\n      }\n    }\n\n    Promise.all(plist).then(() => resolve(array));\n  });\n}\n\nfunction sortArray(array, compare) {\n  Array.prototype.sort.call(array, compare);\n}\n\nexports.sortArray = sortArray;\n\nfunction sort(get, set, length, compare, getField) {\n  const old = createArray(get, length);\n\n  if (getField != null) {\n    old.sort((r1, r2) => compare(getField(r1), getField(r2)));\n  } else {\n    old.sort(compare);\n  }\n\n  for (let i = 0; i < length; i++) {\n    set(i, old[i]);\n  }\n}\n\nexports.sort = sort;\n\nfunction sortPromise(get, set, length, // eslint-disable-next-line @typescript-eslint/no-explicit-any\ncompare, // eslint-disable-next-line @typescript-eslint/no-explicit-any\ngetField) {\n  if (typeof Promise !== \"undefined\") {\n    return createArrayPromise(get, getField, length).then(array => {\n      array.sort((r1, r2) => compare(r1.f, r2.f));\n\n      for (let i = 0; i < length; i++) {\n        set(i, array[i].v);\n      }\n    });\n  } else {\n    sort(get, set, length, compare, getField);\n    const dummyPromise = {\n      then(fn) {\n        fn();\n        return dummyPromise;\n      },\n\n      catch() {\n        return dummyPromise;\n      }\n\n    };\n    return dummyPromise;\n  }\n}\n\nexports.sortPromise = sortPromise;\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(3);\n\nconst utils_1 = __webpack_require__(0);\n\nconst KEY_ENTER = 13;\n\nfunction bindCellClickAction(grid, cellId, {\n  action,\n  mouseOver,\n  mouseOut\n}) {\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  let inMouse;\n  return [// click\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    action({\n      col: e.col,\n      row: e.row\n    });\n  }), // mouse move\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (mouseOver) {\n      if (!mouseOver({\n        col: e.col,\n        row: e.row\n      })) {\n        return;\n      }\n    }\n\n    grid.getElement().style.cursor = \"pointer\";\n    inMouse = true;\n  }), //MOUSEENTER'col-resize'move\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (inMouse && !grid.getElement().style.cursor) {\n      grid.getElement().style.cursor = \"pointer\";\n    }\n  }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n    if (!isTarget(e.col, e.row)) {\n      return;\n    }\n\n    if (mouseOut) {\n      mouseOut({\n        col: e.col,\n        row: e.row\n      });\n    }\n\n    grid.getElement().style.cursor = \"\";\n    inMouse = false;\n  })];\n}\n\nexports.bindCellClickAction = bindCellClickAction;\n\nfunction bindCellKeyAction(grid, cellId, {\n  action,\n  acceptKeys = []\n}) {\n  acceptKeys = [...acceptKeys, KEY_ENTER];\n\n  function isTarget(col, row) {\n    return grid.getLayoutCellId(col, row) === cellId;\n  }\n\n  return [// enter key down\n  grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n    var _a;\n\n    if (acceptKeys.indexOf(e.keyCode) === -1) {\n      return;\n    }\n\n    if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\n      // When moving with the enter key, no action is taken with the enter key.\n      return;\n    }\n\n    const sel = grid.selection.select;\n\n    if (!isTarget(sel.col, sel.row)) {\n      return;\n    }\n\n    action({\n      col: sel.col,\n      row: sel.row\n    });\n    utils_1.event.cancel(e.event);\n  })];\n}\n\nexports.bindCellKeyAction = bindCellKeyAction;\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Style_1 = __webpack_require__(13);\n\nfunction adj(style) {\n  const {\n    textAlign = \"center\"\n  } = style;\n  style.textAlign = textAlign;\n  return style;\n}\n\nlet defaultStyle;\n\nclass CheckHeaderStyle extends Style_1.Style {\n  constructor(style = {}) {\n    super(adj(style));\n    const {\n      uncheckBgColor,\n      checkBgColor,\n      borderColor\n    } = style;\n    this._uncheckBgColor = uncheckBgColor;\n    this._checkBgColor = checkBgColor;\n    this._borderColor = borderColor;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new CheckHeaderStyle();\n  }\n\n  get uncheckBgColor() {\n    return this._uncheckBgColor;\n  }\n\n  set uncheckBgColor(uncheckBgColor) {\n    this._uncheckBgColor = uncheckBgColor;\n    this.doChangeStyle();\n  }\n\n  get checkBgColor() {\n    return this._checkBgColor;\n  }\n\n  set checkBgColor(checkBgColor) {\n    this._checkBgColor = checkBgColor;\n    this.doChangeStyle();\n  }\n\n  get borderColor() {\n    return this._borderColor;\n  }\n\n  set borderColor(borderColor) {\n    this._borderColor = borderColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new CheckHeaderStyle(this);\n  }\n\n}\n\nexports.CheckHeaderStyle = CheckHeaderStyle;\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Style_1 = __webpack_require__(13);\n\nlet defaultStyle;\n\nclass MultilineTextHeaderStyle extends Style_1.Style {\n  constructor(style = {}) {\n    super(style);\n    this._lineHeight = style.lineHeight || \"1em\";\n    this._autoWrapText = style.autoWrapText || false;\n    this._lineClamp = style.lineClamp;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new MultilineTextHeaderStyle();\n  }\n\n  clone() {\n    return new MultilineTextHeaderStyle(this);\n  }\n\n  get lineHeight() {\n    return this._lineHeight;\n  }\n\n  set lineHeight(lineHeight) {\n    this._lineHeight = lineHeight;\n    this.doChangeStyle();\n  }\n\n  get lineClamp() {\n    return this._lineClamp;\n  }\n\n  set lineClamp(lineClamp) {\n    this._lineClamp = lineClamp;\n    this.doChangeStyle();\n  }\n\n  get autoWrapText() {\n    return this._autoWrapText;\n  }\n\n  set autoWrapText(autoWrapText) {\n    this._autoWrapText = autoWrapText;\n    this.doChangeStyle();\n  }\n\n}\n\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle;\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Style_1 = __webpack_require__(13);\n\nlet defaultStyle;\n\nclass SortHeaderStyle extends Style_1.Style {\n  constructor(style = {}) {\n    super(style);\n    this._sortArrowColor = style.sortArrowColor;\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new SortHeaderStyle();\n  }\n\n  get sortArrowColor() {\n    return this._sortArrowColor;\n  }\n\n  set sortArrowColor(sortArrowColor) {\n    this._sortArrowColor = sortArrowColor;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new SortHeaderStyle(this);\n  }\n\n}\n\nexports.SortHeaderStyle = SortHeaderStyle;\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*eslint-disable @typescript-eslint/camelcase*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst icons_1 = __webpack_require__(66);\n\nconst builtins = {\n  get arrow_upward() {\n    return __webpack_require__(122);\n  },\n\n  get arrow_downward() {\n    return __webpack_require__(123);\n  },\n\n  get edit() {\n    return __webpack_require__(124);\n  },\n\n  get add() {\n    return __webpack_require__(125);\n  },\n\n  get star() {\n    return __webpack_require__(126);\n  },\n\n  get star_border() {\n    return __webpack_require__(127);\n  },\n\n  get star_half() {\n    return __webpack_require__(128);\n  }\n\n};\n\nfunction get() {\n  return utils_1.extend(builtins, icons_1.icons);\n}\n\nexports.get = get;\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.icons = {};\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.themes = {};\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst canvases_1 = __webpack_require__(8);\n\nconst {\n  ceil,\n  PI\n} = Math;\n\nfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\n  function strokeRectLines(positions) {\n    for (let i = 0; i < borderColors.length; i++) {\n      const color = borderColors[i];\n      const preColor = borderColors[i - 1];\n\n      if (color) {\n        if (preColor !== color) {\n          if (preColor) {\n            ctx.strokeStyle = preColor;\n            ctx.stroke();\n          }\n\n          const pos1 = positions[i];\n          ctx.beginPath();\n          ctx.moveTo(pos1.x, pos1.y);\n        }\n\n        const pos2 = positions[i + 1];\n        ctx.lineTo(pos2.x, pos2.y);\n      } else {\n        if (preColor) {\n          ctx.strokeStyle = preColor;\n          ctx.stroke();\n        }\n      }\n    }\n\n    const preColor = borderColors[borderColors.length - 1];\n\n    if (preColor) {\n      ctx.strokeStyle = preColor;\n      ctx.stroke();\n    }\n  }\n\n  if (borderColors[0] === borderColors[1] && borderColors[0] === borderColors[2] && borderColors[0] === borderColors[3]) {\n    if (borderColors[0]) {\n      ctx.strokeStyle = borderColors[0];\n      ctx.strokeRect(left, top, width, height);\n    }\n  } else {\n    strokeRectLines([{\n      x: left,\n      y: top\n    }, {\n      x: left + width,\n      y: top\n    }, {\n      x: left + width,\n      y: top + height\n    }, {\n      x: left,\n      y: top + height\n    }, {\n      x: left,\n      y: top\n    }]);\n  }\n}\n\nexports.strokeColorsRect = strokeColorsRect;\n\nfunction roundRect(ctx, left, top, width, height, radius) {\n  ctx.beginPath();\n  ctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\n  ctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\n  ctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\n  ctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\n  ctx.closePath();\n}\n\nexports.roundRect = roundRect;\n\nfunction fillRoundRect(ctx, left, top, width, height, radius) {\n  roundRect(ctx, left, top, width, height, radius);\n  ctx.fill();\n}\n\nexports.fillRoundRect = fillRoundRect;\n\nfunction strokeRoundRect(ctx, left, top, width, height, radius) {\n  roundRect(ctx, left, top, width, height, radius);\n  ctx.stroke();\n}\n\nexports.strokeRoundRect = strokeRoundRect;\n\nfunction fillCircle(ctx, left, top, width, height) {\n  const min = Math.min(width, height) / 2;\n  ctx.beginPath();\n  ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\n  ctx.closePath();\n  ctx.fill();\n}\n\nexports.fillCircle = fillCircle;\n\nfunction strokeCircle(ctx, left, top, width, height) {\n  const min = Math.min(width, height) / 2;\n  ctx.beginPath();\n  ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\n  ctx.closePath();\n  ctx.stroke();\n}\n\nexports.strokeCircle = strokeCircle;\n\nfunction fillTextRect(ctx, text, left, top, width, height, {\n  offset = 2,\n  padding\n} = {}) {\n  const rect = {\n    left,\n    top,\n    width,\n    height,\n    right: left + width,\n    bottom: top + height\n  };\n  ctx.save();\n\n  try {\n    ctx.beginPath();\n    ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n    ctx.clip(); //\n\n    const pos = canvases_1.calcBasePosition(ctx, rect, {\n      offset,\n      padding\n    });\n    ctx.fillText(text, pos.x, pos.y);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.fillTextRect = fillTextRect;\n\nfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, {\n  offset = 2,\n  padding\n} = {}) {\n  const rect = {\n    left,\n    top,\n    width,\n    height,\n    right: left + width,\n    bottom: top + height\n  };\n  ctx.save();\n\n  try {\n    ctx.beginPath();\n    ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n    ctx.clip(); //\n\n    const pos = canvases_1.calcStartPosition(ctx, rect, destWidth, destHeight, {\n      offset,\n      padding\n    });\n    ctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawInlineImageRect = drawInlineImageRect;\n/**\n * Returns an object containing the width of the checkbox.\n * @param  {CanvasRenderingContext2D} ctx canvas context\n * @return {Object} Object containing the width of the checkbox\n * @memberof cheetahGrid.tools.canvashelper\n */\n\nfunction measureCheckbox(ctx) {\n  return {\n    width: canvases_1.getFontSize(ctx, null).width\n  };\n}\n\nexports.measureCheckbox = measureCheckbox;\n/**\n * Returns an object containing the width of the radio button.\n * @param  {CanvasRenderingContext2D} ctx canvas context\n * @return {Object} Object containing the width of the radio button\n * @memberof cheetahGrid.tools.canvashelper\n */\n\nfunction measureRadioButton(ctx) {\n  return {\n    width: canvases_1.getFontSize(ctx, null).width\n  };\n}\n\nexports.measureRadioButton = measureRadioButton;\n/**\n * draw Checkbox\n * @param  {CanvasRenderingContext2D} ctx canvas context\n * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\n * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\n * @param  {boolean|number} check checkbox check status\n * @param  {object} option option\n * @return {void}\n * @memberof cheetahGrid.tools.canvashelper\n */\n\nfunction drawCheckbox(ctx, x, y, check, {\n  uncheckBgColor = \"#FFF\",\n  checkBgColor = \"rgb(76, 73, 72)\",\n  borderColor = \"#000\",\n  boxSize = measureCheckbox(ctx).width\n} = {}) {\n  const checkPoint = typeof check === \"number\" ? check > 1 ? 1 : check : 1;\n  ctx.save();\n\n  try {\n    ctx.fillStyle = check ? checkBgColor : uncheckBgColor;\n    const leftX = ceil(x);\n    const topY = ceil(y);\n    const size = ceil(boxSize);\n    fillRoundRect(ctx, leftX - 1, topY - 1, size + 1, size + 1, boxSize / 5);\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = borderColor;\n    strokeRoundRect(ctx, leftX - 0.5, topY - 0.5, size, size, boxSize / 5);\n\n    if (check) {\n      ctx.lineWidth = ceil(boxSize / 10);\n      ctx.strokeStyle = uncheckBgColor;\n      let leftWidth = boxSize / 4;\n      let rightWidth = boxSize / 2 * 0.9;\n      const leftLeftPos = x + boxSize * 0.2;\n      const leftTopPos = y + boxSize / 2;\n\n      if (checkPoint < 0.5) {\n        leftWidth *= checkPoint * 2;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(leftLeftPos, leftTopPos);\n      ctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\n\n      if (checkPoint > 0.5) {\n        if (checkPoint < 1) {\n          rightWidth *= (checkPoint - 0.5) * 2;\n        }\n\n        ctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\n      }\n\n      ctx.stroke();\n    }\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawCheckbox = drawCheckbox;\n/**\n * draw Radio button\n * @param  {CanvasRenderingContext2D} ctx canvas context\n * @param  {number} x The x coordinate where to start drawing the radio button (relative to the canvas)\n * @param  {number} y The y coordinate where to start drawing the radio button (relative to the canvas)\n * @param  {boolean|number} check radio button check status\n * @param  {object} option option\n * @return {void}\n * @memberof cheetahGrid.tools.canvashelper\n */\n\nfunction drawRadioButton(ctx, x, y, check, {\n  checkColor = \"rgb(76, 73, 72)\",\n  borderColor = \"#000\",\n  bgColor = \"#FFF\",\n  boxSize = measureRadioButton(ctx).width\n} = {}) {\n  const ratio = typeof check === \"number\" ? check > 1 ? 1 : check : 1;\n  ctx.save();\n\n  try {\n    ctx.fillStyle = bgColor;\n    const leftX = ceil(x);\n    const topY = ceil(y);\n    const size = ceil(boxSize);\n    fillCircle(ctx, leftX - 1, topY - 1, size + 1, size + 1);\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = borderColor;\n    strokeCircle(ctx, leftX - 0.5, topY - 0.5, size, size);\n\n    if (check) {\n      const checkSize = size * ratio / 2;\n      const padding = (size - checkSize) / 2;\n      ctx.fillStyle = checkColor;\n      fillCircle(ctx, ceil((leftX - 0.5 + padding) * 100) / 100, ceil((topY - 0.5 + padding) * 100) / 100, ceil(checkSize * 100) / 100, ceil(checkSize * 100) / 100);\n    }\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawRadioButton = drawRadioButton;\n/**\n * draw Button\n */\n\nfunction drawButton(ctx, left, top, width, height, option = {}) {\n  const {\n    backgroundColor = \"#FFF\",\n    bgColor = backgroundColor,\n    radius = 4,\n    shadow = {}\n  } = option;\n  ctx.save();\n\n  try {\n    ctx.fillStyle = bgColor;\n\n    if (shadow) {\n      const {\n        color = \"rgba(0, 0, 0, 0.24)\",\n        blur = 1,\n        offsetX = 0,\n        offsetY = 2,\n        offset: {\n          x: ox = offsetX,\n          y: oy = offsetY\n        } = {}\n      } = shadow;\n      ctx.shadowColor = color;\n      ctx.shadowBlur = blur; //\n\n      ctx.shadowOffsetX = ox;\n      ctx.shadowOffsetY = oy;\n    }\n\n    fillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\n  } finally {\n    ctx.restore();\n  }\n}\n\nexports.drawButton = drawButton;\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst columns = __importStar(__webpack_require__(16));\n\nconst headerType = __importStar(__webpack_require__(23));\n\nlet seqId = -1; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction newEmptyHeaderData() {\n  return {\n    id: seqId--,\n    define: {},\n    headerType: headerType.of(null)\n  };\n}\n\nexports.newEmptyHeaderData = newEmptyHeaderData; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction newEmptyColumnData() {\n  return {\n    id: seqId--,\n    define: {},\n    columnType: columns.type.of(null),\n    style: null\n  };\n}\n\nexports.newEmptyColumnData = newEmptyColumnData;\n\nclass EmptyDataCache {\n  constructor() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.headers = []; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this.columns = [];\n  }\n\n  getHeader(col, row) {\n    const rows = this.headers[row] || (this.headers[row] = []);\n    return rows[col] || (rows[col] = newEmptyHeaderData());\n  }\n\n  getBody(col, row) {\n    const rows = this.columns[row] || (this.columns[row] = []);\n    return rows[col] || (rows[col] = newEmptyColumnData());\n  }\n\n}\n\nexports.EmptyDataCache = EmptyDataCache;\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst calc = __importStar(__webpack_require__(29));\n\nconst canvashelper = __importStar(__webpack_require__(68));\n\nconst fonts = __importStar(__webpack_require__(71));\n\nconst inlineUtils = __importStar(__webpack_require__(140));\n\nconst themes = __importStar(__webpack_require__(35));\n\nconst color_1 = __webpack_require__(74);\n\nconst canvases_1 = __webpack_require__(8);\n\nconst utils_1 = __webpack_require__(0);\n\nconst InlineDrawer_1 = __webpack_require__(72);\n\nconst Rect_1 = __webpack_require__(22);\n\nconst {\n  toBoxArray\n} = utils_1.style;\nconst INLINE_ELLIPSIS = inlineUtils.of(\"\\u2026\");\n\nfunction invalidateCell(context, grid) {\n  const {\n    col,\n    row\n  } = context;\n  grid.invalidateCell(col, row);\n}\n\nfunction getColor(color, col, row, grid, context) {\n  return utils_1.getOrApply(color, {\n    col,\n    row,\n    grid,\n    context\n  });\n}\n\nfunction getFont(font, col, row, grid, context) {\n  if (font == null) {\n    return undefined;\n  }\n\n  return utils_1.getOrApply(font, {\n    col,\n    row,\n    grid,\n    context\n  });\n}\n\nfunction getThemeColor(grid, ...names) {\n  const gridThemeColor = utils_1.getChainSafe(grid.theme, ...names);\n\n  if (!utils_1.isDef(gridThemeColor)) {\n    // use default theme\n    return utils_1.getChainSafe(themes.getDefault(), ...names);\n  }\n\n  if (typeof gridThemeColor !== \"function\") {\n    return gridThemeColor;\n  }\n\n  let defaultThemeColor; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  return args => {\n    const color = gridThemeColor(args);\n\n    if (utils_1.isDef(color)) {\n      // use grid theme\n      return color;\n    } // use default theme\n\n\n    defaultThemeColor = defaultThemeColor || utils_1.getChainSafe(themes.getDefault(), ...names);\n    return utils_1.getOrApply(defaultThemeColor, args); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  };\n}\n\nfunction testFontLoad(font, value, context, grid) {\n  if (font) {\n    if (!fonts.check(font, value)) {\n      fonts.load(font, value, () => invalidateCell(context, grid));\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\n  function drawInline(inline, offsetLeft, offsetRight) {\n    if (inline.canDraw()) {\n      ctx.save();\n\n      try {\n        ctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\n        ctx.font = inline.font() || ctx.font;\n        inline.draw({\n          ctx,\n          canvashelper,\n          rect,\n          offset,\n          offsetLeft,\n          offsetRight,\n          offsetTop,\n          offsetBottom\n        });\n      } finally {\n        ctx.restore();\n      }\n    } else {\n      inline.onReady(() => grid.invalidateCell(col, row)); //noop\n    }\n  }\n\n  if (inlines.length === 1) {\n    //1\n    const inline = inlines[0];\n    drawInline(inline, 0, 0);\n  } else {\n    const inlineWidths = inlines.map(inline => (inline.width({\n      ctx\n    }) || 0) - 0);\n    let offsetRight = inlineWidths.reduce((a, b) => a + b);\n    let offsetLeft = 0;\n    inlines.forEach((inline, index) => {\n      const inlineWidth = inlineWidths[index];\n      offsetRight -= inlineWidth;\n      drawInline(inline, offsetLeft, offsetRight);\n      offsetLeft += inlineWidth;\n    });\n  }\n}\n\nfunction buildInlines(icons, inline) {\n  return inlineUtils.buildInlines(icons, inline || \"\");\n}\n\nfunction inlineToString(inline) {\n  return inlineUtils.string(inline);\n}\n\nfunction getOverflowInline(textOverflow) {\n  if (!isAllowOverflow(textOverflow) || textOverflow === \"ellipsis\") {\n    return INLINE_ELLIPSIS;\n  }\n\n  textOverflow = textOverflow.trim();\n\n  if (textOverflow.length === 1) {\n    return inlineUtils.of(textOverflow[0]);\n  }\n\n  return INLINE_ELLIPSIS;\n}\n\nfunction isAllowOverflow(textOverflow) {\n  return Boolean(textOverflow && textOverflow !== \"clip\" && typeof textOverflow === \"string\");\n}\n\nfunction getOverflowInlinesIndex(ctx, inlines, width) {\n  const maxWidth = width - 3;\n  /*buffer*/\n\n  let lineWidth = 0;\n\n  for (let i = 0; i < inlines.length; i++) {\n    const inline = inlines[i];\n    const inlineWidth = (inline.width({\n      ctx\n    }) || 0) - 0;\n\n    if (lineWidth + inlineWidth > maxWidth) {\n      return {\n        index: i,\n        lineWidth,\n        remWidth: maxWidth - lineWidth\n      };\n    }\n\n    lineWidth += inlineWidth;\n  }\n\n  return null;\n}\n\nfunction isOverflowInlines(ctx, inlines, width) {\n  return !!getOverflowInlinesIndex(ctx, inlines, width);\n}\n\nfunction breakWidthInlines(ctx, inlines, width) {\n  const indexData = getOverflowInlinesIndex(ctx, inlines, width);\n\n  if (!indexData) {\n    return {\n      beforeInlines: inlines,\n      overflow: false,\n      afterInlines: []\n    };\n  }\n\n  const {\n    index,\n    remWidth\n  } = indexData;\n  const inline = inlines[index];\n  const beforeInlines = inlines.slice(0, index);\n  const afterInlines = [];\n\n  if (inline.canBreak()) {\n    let {\n      before,\n      after\n    } = inline.breakWord(ctx, remWidth);\n\n    if (!before && !beforeInlines.length) {\n      ({\n        before,\n        after\n      } = inline.breakAll(ctx, remWidth));\n    }\n\n    if (!before && !beforeInlines.length) {\n      // Always return one char\n      ({\n        before,\n        after\n      } = inline.splitIndex(1));\n    }\n\n    if (before) {\n      beforeInlines.push(before);\n    }\n\n    if (after) {\n      afterInlines.push(after);\n    }\n\n    afterInlines.push(...inlines.slice(index + 1));\n  } else {\n    if (!beforeInlines.length) {\n      // Always return one char\n      beforeInlines.push(inline);\n    }\n\n    afterInlines.push(...inlines.slice(beforeInlines.length));\n  }\n\n  return {\n    beforeInlines,\n    overflow: true,\n    afterInlines\n  };\n}\n\nfunction truncateInlines(ctx, inlines, width, option) {\n  const indexData = getOverflowInlinesIndex(ctx, inlines, width);\n\n  if (!indexData) {\n    return {\n      inlines,\n      overflow: false\n    };\n  }\n\n  const {\n    index,\n    lineWidth\n  } = indexData;\n  const inline = inlines[index];\n  const overflowInline = getOverflowInline(option);\n  const ellipsisWidth = overflowInline.width({\n    ctx\n  });\n  const remWidth = width - lineWidth - ellipsisWidth;\n  const result = inlines.slice(0, index);\n\n  if (inline.canBreak()) {\n    const {\n      before\n    } = inline.breakAll(ctx, remWidth);\n\n    if (before) {\n      result.push(before);\n    }\n  }\n\n  result.push(overflowInline);\n  return {\n    inlines: result,\n    overflow: true\n  };\n}\n\nfunction _inlineRect(grid, ctx, inline, rect, col, row, {\n  offset,\n  color,\n  textAlign,\n  textBaseline,\n  font,\n  textOverflow,\n  icons\n}) {\n  //style\n  ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  ctx.font = font || ctx.font;\n  let inlines = buildInlines(icons, inline);\n\n  if (isAllowOverflow(textOverflow) && isOverflowInlines(ctx, inlines, rect.width)) {\n    const {\n      inlines: truncInlines,\n      overflow\n    } = truncateInlines(ctx, inlines, rect.width, textOverflow);\n    inlines = truncInlines;\n    grid.setCellOverflowText(col, row, overflow && inlineToString(inline));\n  } else {\n    grid.setCellOverflowText(col, row, false);\n  }\n\n  drawInlines(ctx, inlines, rect, offset, 0, 0, col, row, grid);\n} // eslint-disable-next-line complexity\n\n\nfunction _multiInlineRect(grid, ctx, multiInlines, rect, col, row, {\n  offset,\n  color,\n  textAlign,\n  textBaseline,\n  font,\n  lineHeight,\n  autoWrapText,\n  lineClamp,\n  textOverflow,\n  icons\n}) {\n  //style\n  ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  ctx.font = font || ctx.font;\n\n  if (lineClamp === \"auto\") {\n    const rectHeight = rect.height - offset * 2 - 2;\n    /*offset added by Inline#draw*/\n\n    lineClamp = Math.max(Math.floor(rectHeight / lineHeight), 1);\n  }\n\n  let buildedMultiInlines;\n\n  if (autoWrapText || lineClamp > 0 || isAllowOverflow(textOverflow)) {\n    const {\n      width\n    } = rect;\n    buildedMultiInlines = [];\n    const procLineClamp = lineClamp > 0 ? (inlines, hasNext) => {\n      if (buildedMultiInlines.length + 1 >= lineClamp) {\n        if (inlines.length === 0 && hasNext) {\n          buildedMultiInlines.push([getOverflowInline(textOverflow)]);\n          grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n        } else {\n          const {\n            inlines: truncInlines,\n            overflow\n          } = truncateInlines(ctx, inlines, width, textOverflow);\n          buildedMultiInlines.push(hasNext && !overflow ? truncInlines.concat([getOverflowInline(textOverflow)]) : truncInlines);\n\n          if (overflow || hasNext) {\n            grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n          }\n        }\n\n        return false;\n      }\n\n      return true;\n    } : () => true;\n    const procLine = autoWrapText ? (inlines, hasNext) => {\n      if (!procLineClamp(inlines, hasNext)) {\n        return false;\n      }\n\n      while (inlines.length) {\n        if (!procLineClamp(inlines, hasNext)) {\n          return false;\n        }\n\n        const {\n          beforeInlines,\n          afterInlines\n        } = breakWidthInlines(ctx, inlines, width);\n        buildedMultiInlines.push(beforeInlines);\n        inlines = afterInlines;\n      }\n\n      return true;\n    } : isAllowOverflow(textOverflow) ? (inlines, hasNext) => {\n      if (!procLineClamp(inlines, hasNext)) {\n        return false;\n      }\n\n      const {\n        inlines: truncInlines,\n        overflow\n      } = truncateInlines(ctx, inlines, width, textOverflow);\n      buildedMultiInlines.push(truncInlines);\n\n      if (overflow) {\n        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n      }\n\n      return true;\n    } : (inlines, hasNext) => {\n      if (!procLineClamp(inlines, hasNext)) {\n        return false;\n      }\n\n      buildedMultiInlines.push(inlines);\n      return true;\n    };\n    grid.setCellOverflowText(col, row, false);\n\n    for (let lineRow = 0; lineRow < multiInlines.length; lineRow++) {\n      const inline = multiInlines[lineRow];\n      const buildedInline = buildInlines(lineRow === 0 ? icons : undefined, inline);\n\n      if (!procLine(buildedInline, lineRow + 1 < multiInlines.length)) {\n        break;\n      }\n    }\n  } else {\n    grid.setCellOverflowText(col, row, false);\n    buildedMultiInlines = multiInlines.map((inline, lineRow) => buildInlines(lineRow === 0 ? icons : undefined, inline));\n  }\n\n  let paddingTop = 0;\n  let paddingBottom = lineHeight * (buildedMultiInlines.length - 1);\n\n  if (ctx.textBaseline === \"top\" || ctx.textBaseline === \"hanging\") {\n    const em = canvases_1.getFontSize(ctx, ctx.font).height;\n    const pad = (lineHeight - em) / 2;\n    paddingTop += pad;\n    paddingBottom -= pad;\n  } else if (ctx.textBaseline === \"bottom\" || ctx.textBaseline === \"alphabetic\" || ctx.textBaseline === \"ideographic\") {\n    const em = canvases_1.getFontSize(ctx, ctx.font).height;\n    const pad = (lineHeight - em) / 2;\n    paddingTop -= pad;\n    paddingBottom += pad;\n  }\n\n  buildedMultiInlines.forEach(buildedInline => {\n    drawInlines(ctx, buildedInline, rect, offset, paddingTop, paddingBottom, col, row, grid);\n    paddingTop += lineHeight;\n    paddingBottom -= lineHeight;\n  });\n}\n\nfunction calcElapsedColor(startColor, endColor, elapsedTime) {\n  const startColorRGB = color_1.colorToRGB(startColor);\n  const endColorRGB = color_1.colorToRGB(endColor);\n\n  const getRGB = colorName => {\n    const start = startColorRGB[colorName];\n    const end = endColorRGB[colorName];\n\n    if (elapsedTime >= 1) {\n      return end;\n    }\n\n    if (elapsedTime <= 0) {\n      return start;\n    }\n\n    const diff = start - end;\n    return Math.ceil(start - diff * elapsedTime);\n  };\n\n  return `rgb(${getRGB(\"r\")}, ${getRGB(\"g\")}, ${getRGB(\"b\")})`;\n}\n\nfunction drawCheckbox(ctx, rect, col, row, check, helper, {\n  animElapsedTime = 1,\n  uncheckBgColor = helper.theme.checkbox.uncheckBgColor,\n  checkBgColor = helper.theme.checkbox.checkBgColor,\n  borderColor = helper.theme.checkbox.borderColor,\n  textAlign = \"center\",\n  textBaseline = \"middle\"\n}, positionOpt = {}) {\n  const boxWidth = canvashelper.measureCheckbox(ctx).width;\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  const pos = canvases_1.calcStartPosition(ctx, rect, boxWidth + 1\n  /*+1*/\n  , boxWidth + 1\n  /*+1*/\n  , positionOpt);\n  uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\n  checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\n  borderColor = helper.getColor(borderColor, col, row, ctx);\n\n  if (0 < animElapsedTime && animElapsedTime < 1) {\n    uncheckBgColor = check ? uncheckBgColor : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\n    checkBgColor = check ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime) : checkBgColor;\n  }\n\n  canvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\n    uncheckBgColor,\n    checkBgColor,\n    borderColor\n  });\n}\n\nfunction drawRadioButton(ctx, rect, col, row, check, helper, {\n  animElapsedTime = 1,\n  checkColor = helper.theme.radioButton.checkColor,\n  uncheckBorderColor = helper.theme.radioButton.uncheckBorderColor,\n  checkBorderColor = helper.theme.radioButton.checkBorderColor,\n  uncheckBgColor = helper.theme.radioButton.uncheckBgColor,\n  checkBgColor = helper.theme.radioButton.checkBgColor,\n  textAlign = \"center\",\n  textBaseline = \"middle\"\n}, positionOpt = {}) {\n  const boxWidth = canvashelper.measureRadioButton(ctx).width;\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  const pos = canvases_1.calcStartPosition(ctx, rect, boxWidth + 1\n  /*+1*/\n  , boxWidth + 1\n  /*+1*/\n  , positionOpt);\n  checkColor = helper.getColor(checkColor, col, row, ctx);\n  uncheckBorderColor = helper.getColor(uncheckBorderColor, col, row, ctx);\n  checkBorderColor = helper.getColor(checkBorderColor, col, row, ctx);\n  uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\n  checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\n  let borderColor = check ? checkBorderColor : uncheckBorderColor;\n  let bgColor = check ? checkBgColor : uncheckBgColor;\n\n  if (0 < animElapsedTime && animElapsedTime < 1) {\n    borderColor = check ? calcElapsedColor(uncheckBorderColor, checkBorderColor, animElapsedTime) : calcElapsedColor(checkBorderColor, uncheckBorderColor, animElapsedTime);\n    bgColor = check ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime) : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\n  }\n\n  canvashelper.drawRadioButton(ctx, pos.x, pos.y, check ? animElapsedTime : 1 - animElapsedTime, {\n    checkColor,\n    borderColor,\n    bgColor\n  });\n}\n\nclass ThemeResolver {\n  constructor(grid) {\n    this._checkbox = null;\n    this._radioButton = null;\n    this._button = null;\n    this._header = null;\n    this._grid = grid;\n  }\n\n  getThemeColor(...name) {\n    return getThemeColor(this._grid, ...name);\n  }\n\n  get font() {\n    return getThemeColor(this._grid, \"font\");\n  }\n\n  get underlayBackgroundColor() {\n    return getThemeColor(this._grid, \"underlayBackgroundColor\");\n  } // color\n\n\n  get color() {\n    return getThemeColor(this._grid, \"color\");\n  }\n\n  get frozenRowsColor() {\n    return getThemeColor(this._grid, \"frozenRowsColor\");\n  } // background\n\n\n  get defaultBgColor() {\n    return getThemeColor(this._grid, \"defaultBgColor\");\n  }\n\n  get frozenRowsBgColor() {\n    return getThemeColor(this._grid, \"frozenRowsBgColor\");\n  }\n\n  get selectionBgColor() {\n    return getThemeColor(this._grid, \"selectionBgColor\");\n  }\n\n  get highlightBgColor() {\n    return getThemeColor(this._grid, \"highlightBgColor\");\n  } // border\n\n\n  get borderColor() {\n    return getThemeColor(this._grid, \"borderColor\");\n  }\n\n  get frozenRowsBorderColor() {\n    return getThemeColor(this._grid, \"frozenRowsBorderColor\");\n  }\n\n  get highlightBorderColor() {\n    return getThemeColor(this._grid, \"highlightBorderColor\");\n  }\n\n  get checkbox() {\n    const grid = this._grid;\n    return this._checkbox || (this._checkbox = {\n      get uncheckBgColor() {\n        return getThemeColor(grid, \"checkbox\", \"uncheckBgColor\");\n      },\n\n      get checkBgColor() {\n        return getThemeColor(grid, \"checkbox\", \"checkBgColor\");\n      },\n\n      get borderColor() {\n        return getThemeColor(grid, \"checkbox\", \"borderColor\");\n      }\n\n    });\n  }\n\n  get radioButton() {\n    const grid = this._grid;\n    return this._radioButton || (this._radioButton = {\n      get checkColor() {\n        return getThemeColor(grid, \"radioButton\", \"checkColor\");\n      },\n\n      get uncheckBorderColor() {\n        return getThemeColor(grid, \"radioButton\", \"uncheckBorderColor\");\n      },\n\n      get checkBorderColor() {\n        return getThemeColor(grid, \"radioButton\", \"checkBorderColor\");\n      },\n\n      get uncheckBgColor() {\n        return getThemeColor(grid, \"radioButton\", \"uncheckBgColor\");\n      },\n\n      get checkBgColor() {\n        return getThemeColor(grid, \"radioButton\", \"checkBgColor\");\n      }\n\n    });\n  }\n\n  get button() {\n    const grid = this._grid;\n    return this._button || (this._button = {\n      get color() {\n        return getThemeColor(grid, \"button\", \"color\");\n      },\n\n      get bgColor() {\n        return getThemeColor(grid, \"button\", \"bgColor\");\n      }\n\n    });\n  }\n\n  get header() {\n    const grid = this._grid;\n    return this._header || (this._header = {\n      get sortArrowColor() {\n        return getThemeColor(grid, \"header\", \"sortArrowColor\");\n      }\n\n    });\n  }\n\n}\n\nfunction strokeRect(ctx, color, left, top, width, height) {\n  if (!Array.isArray(color)) {\n    if (color) {\n      ctx.strokeStyle = color;\n      ctx.strokeRect(left, top, width, height);\n    }\n  } else {\n    const borderColors = toBoxArray(color);\n    canvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\n  }\n}\n\nclass GridCanvasHelper {\n  constructor(grid) {\n    this._grid = grid;\n    this._theme = new ThemeResolver(grid);\n  }\n\n  createCalculator(context, font) {\n    return {\n      calcWidth(width) {\n        return calc.toPx(width, {\n          get full() {\n            const rect = context.getRect();\n            return rect.width;\n          },\n\n          get em() {\n            return canvases_1.getFontSize(context.getContext(), font).width;\n          }\n\n        });\n      },\n\n      calcHeight(height) {\n        return calc.toPx(height, {\n          get full() {\n            const rect = context.getRect();\n            return rect.height;\n          },\n\n          get em() {\n            return canvases_1.getFontSize(context.getContext(), font).height;\n          }\n\n        });\n      }\n\n    };\n  }\n\n  getColor(color, col, row, ctx) {\n    return getColor(color, col, row, this._grid, ctx);\n  }\n\n  toBoxArray(obj) {\n    return toBoxArray(obj);\n  }\n\n  toBoxPixelArray(value, context, font) {\n    if (typeof value === \"string\" || Array.isArray(value)) {\n      const calculator = this.createCalculator(context, font);\n      const box = toBoxArray(value);\n      return [calculator.calcHeight(box[0]), calculator.calcWidth(box[1]), calculator.calcHeight(box[2]), calculator.calcWidth(box[3])];\n    }\n\n    return toBoxArray(value);\n  }\n\n  get theme() {\n    return this._theme;\n  }\n\n  drawWithClip(context, draw) {\n    const drawRect = context.getDrawRect();\n\n    if (!drawRect) {\n      return;\n    }\n\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      ctx.beginPath();\n      ctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height); //clip\n\n      ctx.clip();\n      draw(ctx);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  drawBorderWithClip(context, draw) {\n    const drawRect = context.getDrawRect();\n\n    if (!drawRect) {\n      return;\n    }\n\n    const rect = context.getRect();\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      //clip\n      ctx.beginPath();\n      let clipLeft = drawRect.left;\n      let clipWidth = drawRect.width;\n\n      if (drawRect.left === rect.left) {\n        clipLeft += -1;\n        clipWidth += 1;\n      }\n\n      let clipTop = drawRect.top;\n      let clipHeight = drawRect.height;\n\n      if (drawRect.top === rect.top) {\n        clipTop += -1;\n        clipHeight += 1;\n      }\n\n      ctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\n      ctx.clip();\n      draw(ctx);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  text(text, context, {\n    padding,\n    offset = 2,\n    color,\n    textAlign = \"left\",\n    textBaseline = \"middle\",\n    font,\n    textOverflow = \"clip\",\n    icons\n  } = {}) {\n    let rect = context.getRect();\n    const {\n      col,\n      row\n    } = context;\n\n    if (!color) {\n      ({\n        color\n      } = this.theme); // header color\n\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell && isFrozenCell.row) {\n        color = this.theme.frozenRowsColor;\n      }\n    }\n\n    this.drawWithClip(context, ctx => {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n\n      if (padding) {\n        const paddingNums = this.toBoxPixelArray(padding, context, font);\n        const left = rect.left + paddingNums[3];\n        const top = rect.top + paddingNums[0];\n        const width = rect.width - paddingNums[1] - paddingNums[3];\n        const height = rect.height - paddingNums[0] - paddingNums[2];\n        rect = new Rect_1.Rect(left, top, width, height);\n      }\n\n      _inlineRect(this._grid, ctx, text, rect, col, row, {\n        offset,\n        color,\n        textAlign,\n        textBaseline,\n        font,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n  multilineText(multilines, context, {\n    padding,\n    offset = 2,\n    color,\n    textAlign = \"left\",\n    textBaseline = \"middle\",\n    font,\n    lineHeight = \"1em\",\n    autoWrapText = false,\n    lineClamp = 0,\n    textOverflow = \"clip\",\n    icons\n  } = {}) {\n    let rect = context.getRect();\n    const {\n      col,\n      row\n    } = context;\n\n    if (!color) {\n      ({\n        color\n      } = this.theme); // header color\n\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell && isFrozenCell.row) {\n        color = this.theme.frozenRowsColor;\n      }\n    }\n\n    this.drawWithClip(context, ctx => {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n\n      if (padding) {\n        const paddingNums = this.toBoxPixelArray(padding, context, font);\n        const left = rect.left + paddingNums[3];\n        const top = rect.top + paddingNums[0];\n        const width = rect.width - paddingNums[1] - paddingNums[3];\n        const height = rect.height - paddingNums[0] - paddingNums[2];\n        rect = new Rect_1.Rect(left, top, width, height);\n      }\n\n      const calculator = this.createCalculator(context, font);\n      lineHeight = calculator.calcHeight(lineHeight);\n\n      _multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\n        offset,\n        color,\n        textAlign,\n        textBaseline,\n        font,\n        lineHeight,\n        autoWrapText,\n        lineClamp,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n  fillText(text, x, y, context, {\n    color,\n    textAlign = \"left\",\n    textBaseline = \"top\",\n    font\n  } = {}) {\n    const {\n      col,\n      row\n    } = context;\n\n    if (!color) {\n      ({\n        color\n      } = this.theme); // header color\n\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell && isFrozenCell.row) {\n        color = this.theme.frozenRowsColor;\n      }\n    }\n\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n      ctx.fillStyle = getColor(color, col, row, this._grid, ctx);\n      ctx.textAlign = textAlign;\n      ctx.textBaseline = textBaseline;\n      ctx.font = font || ctx.font;\n      ctx.fillText(text, x, y);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  fillCell(context, {\n    fillColor = this.theme.defaultBgColor\n  } = {}) {\n    const rect = context.getRect();\n    this.drawWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n      ctx.beginPath();\n      ctx.rect(rect.left, rect.top, rect.width, rect.height);\n      ctx.fill();\n    });\n  }\n\n  fillCellWithState(context, option = {}) {\n    option.fillColor = this.getFillColorState(context, option);\n    this.fillCell(context, option);\n  }\n\n  fillRect(rect, context, {\n    fillColor = this.theme.defaultBgColor\n  } = {}) {\n    const ctx = context.getContext();\n    ctx.save();\n\n    try {\n      const {\n        col,\n        row\n      } = context;\n      ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n      ctx.beginPath();\n      ctx.rect(rect.left, rect.top, rect.width, rect.height);\n      ctx.fill();\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  fillRectWithState(rect, context, option = {}) {\n    option.fillColor = this.getFillColorState(context, option);\n    this.fillRect(rect, context, option);\n  }\n\n  getFillColorState(context, option = {}) {\n    const sel = context.getSelection();\n    const {\n      col,\n      row\n    } = context;\n\n    if (!utils_1.cellEquals(sel.select, context) && utils_1.cellInRange(sel.range, col, row)) {\n      return this.theme.selectionBgColor;\n    }\n\n    if (option.fillColor) {\n      return option.fillColor;\n    }\n\n    if (utils_1.cellEquals(sel.select, context)) {\n      return this.theme.highlightBgColor;\n    }\n\n    const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n    if (isFrozenCell && isFrozenCell.row) {\n      return this.theme.frozenRowsBgColor;\n    }\n\n    return this.theme.defaultBgColor;\n  }\n\n  border(context, {\n    borderColor = this.theme.borderColor,\n    lineWidth = 1\n  } = {}) {\n    const rect = context.getRect();\n    this.drawBorderWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      const borderColors = getColor(borderColor, col, row, this._grid, ctx);\n\n      if (lineWidth === 1) {\n        ctx.lineWidth = 1;\n        strokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\n      } else if (lineWidth === 2) {\n        ctx.lineWidth = 2;\n        strokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\n      } else {\n        ctx.lineWidth = lineWidth;\n        const startOffset = lineWidth / 2 - 1;\n        strokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\n      }\n    });\n  } // Unused in main\n\n\n  borderWithState(context, option = {}) {\n    const rect = context.getRect();\n    const sel = context.getSelection();\n    const {\n      col,\n      row\n    } = context; //\n\n    if (utils_1.cellEquals(sel.select, context)) {\n      option.borderColor = this.theme.highlightBorderColor;\n      option.lineWidth = 2;\n      this.border(context, option);\n    } else {\n      // header color\n      const isFrozenCell = this._grid.isFrozenCell(col, row);\n\n      if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\n        option.borderColor = this.theme.frozenRowsBorderColor;\n      }\n\n      option.lineWidth = 1;\n      this.border(context, option); //\n\n      const sel = this._grid.selection.select;\n\n      if (sel.col + 1 === col && sel.row === row) {\n        //\n        this.drawBorderWithClip(context, ctx => {\n          const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[1] || ctx.strokeStyle;\n          ctx.beginPath();\n          ctx.moveTo(rect.left - 0.5, rect.top);\n          ctx.lineTo(rect.left - 0.5, rect.bottom);\n          ctx.stroke();\n        });\n      } else if (sel.col === col && sel.row + 1 === row) {\n        //\n        this.drawBorderWithClip(context, ctx => {\n          const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[0] || ctx.strokeStyle;\n          ctx.beginPath();\n          ctx.moveTo(rect.left, rect.top - 0.5);\n          ctx.lineTo(rect.right, rect.top - 0.5);\n          ctx.stroke();\n        });\n      }\n    }\n  }\n\n  buildCheckBoxInline(check, context, option = {}) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const self = this;\n    const ctx = context.getContext();\n    const boxWidth = canvashelper.measureCheckbox(ctx).width;\n    return new InlineDrawer_1.InlineDrawer({\n      draw,\n      width: boxWidth + 3,\n      height: boxWidth + 1,\n      color: undefined\n    });\n\n    function draw({\n      ctx,\n      rect,\n      offset,\n      offsetLeft,\n      offsetRight,\n      offsetTop,\n      offsetBottom\n    }) {\n      const {\n        col,\n        row\n      } = context;\n      drawCheckbox(ctx, rect, col, row, check, self, option, {\n        offset: offset + 1,\n        padding: {\n          left: offsetLeft + 1,\n          right: offsetRight,\n          top: offsetTop,\n          bottom: offsetBottom\n        }\n      });\n    }\n  }\n\n  checkbox(check, context, option = {}) {\n    this.drawWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      drawCheckbox(ctx, context.getRect(), col, row, check, this, option);\n    });\n  }\n\n  radioButton(check, context, option = {}) {\n    this.drawWithClip(context, ctx => {\n      const {\n        col,\n        row\n      } = context;\n      drawRadioButton(ctx, context.getRect(), col, row, check, this, option);\n    });\n  }\n\n  button(caption, context, {\n    bgColor = this.theme.button.bgColor,\n    padding,\n    offset = 2,\n    color = this.theme.button.color,\n    textAlign = \"center\",\n    textBaseline = \"middle\",\n    shadow,\n    font,\n    textOverflow = \"clip\",\n    icons\n  } = {}) {\n    const rect = context.getRect();\n    this.drawWithClip(context, ctx => {\n      font = getFont(font, context.col, context.row, this._grid, ctx);\n      const {\n        col,\n        row\n      } = context;\n      const paddingNums = this.toBoxPixelArray(padding || rect.height / 8, context, font);\n      const left = rect.left + paddingNums[3];\n      const top = rect.top + paddingNums[0];\n      const width = rect.width - paddingNums[1] - paddingNums[3];\n      const height = rect.height - paddingNums[0] - paddingNums[2];\n      bgColor = getColor(bgColor, context.col, context.row, this._grid, ctx);\n      canvashelper.drawButton(ctx, left, top, width, height, {\n        bgColor,\n        radius: rect.height / 8,\n        // offset,\n        shadow\n      });\n\n      _inlineRect(this._grid, ctx, caption, new Rect_1.Rect(left, top, width, height), col, row, {\n        offset,\n        color,\n        textAlign,\n        textBaseline,\n        font,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n  testFontLoad(font, value, context) {\n    return testFontLoad(font, value, context, this._grid);\n  }\n\n}\n\nexports.GridCanvasHelper = GridCanvasHelper;\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst loads = {};\nlet load;\nexports.load = load;\nlet check;\nexports.check = check;\n\nif (utils_1.isNode) {\n  exports.load = load = function (_font, _testStr, callback) {\n    callback();\n  };\n\n  exports.check = check = function () {\n    return false;\n  };\n} else {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const fontFaceSet = document.fonts;\n  const legacy = !fontFaceSet;\n  exports.load = load = legacy ? function (font, testStr, callback) {\n    //for legacy(IE)\n    if (loads[`${font} @ ${testStr}`]) {\n      callback();\n      return;\n    }\n\n    __webpack_require__(138).load(font, testStr, () => {\n      loads[`${font} @ ${testStr}`] = true;\n      callback();\n    }, () => {\n      loads[`${font} @ ${testStr}`] = true;\n      callback();\n    });\n  } : function (font, _testStr, callback) {\n    if (loads.all || loads[font]) {\n      callback();\n      return;\n    }\n\n    fontFaceSet.ready.then(() => {\n      loads.all = true;\n    });\n    fontFaceSet.load(font).then(() => {\n      loads[font] = true;\n      callback();\n    });\n  };\n  exports.check = check = legacy ? function (font, testStr) {\n    //for legacy(IE)\n    if (loads[`${font} @ ${testStr}`]) {\n      return true;\n    }\n\n    load(font, testStr, () => {});\n    return false;\n  } : function (font, testStr) {\n    if (loads.all || loads[font]) {\n      return true;\n    }\n\n    if (!fontFaceSet.check(font)) {\n      load(font, testStr, () => {});\n      return false;\n    }\n\n    return true;\n  };\n}\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Inline_1 = __webpack_require__(15);\n\nclass InlineDrawer extends Inline_1.Inline {\n  constructor({\n    draw,\n    width,\n    // height,\n    color\n  }) {\n    super();\n    this._draw = draw;\n    this._width = width; // this._height = height;\n\n    this._color = color;\n  }\n\n  width(_arg) {\n    return this._width;\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    var _a;\n\n    return (_a = this._color) !== null && _a !== void 0 ? _a : null;\n  }\n\n  canDraw() {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\n  onReady(_callback) {}\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    this._draw({\n      ctx,\n      canvashelper,\n      rect,\n      offset,\n      offsetLeft,\n      offsetRight,\n      offsetTop,\n      offsetBottom\n    });\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineDrawer = InlineDrawer;\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Inline_1 = __webpack_require__(15);\n\nconst imgs_1 = __webpack_require__(54);\n\nconst utils_1 = __webpack_require__(0);\n\nclass InlineImage extends Inline_1.Inline {\n  constructor({\n    src,\n    width,\n    height,\n    imageLeft,\n    imageTop,\n    imageWidth,\n    imageHeight\n  }) {\n    super();\n    this._inlineImgPromise = null;\n    this._inlineImg = null;\n    this._src = src;\n    this._width = width;\n    this._height = height;\n    this._imageLeft = imageLeft;\n    this._imageTop = imageTop;\n    this._imageWidth = imageWidth;\n    this._imageHeight = imageHeight;\n    this._onloaded = [];\n\n    if (utils_1.isPromise(src)) {\n      src.then(s => {\n        this._src = s;\n\n        this._loadImage(s);\n      });\n    } else {\n      this._loadImage(src);\n    }\n  }\n\n  _loadImage(src) {\n    const img = this._inlineImgPromise = imgs_1.getCacheOrLoad(\"InlineImage\", 50, src);\n\n    if (utils_1.isPromise(img)) {\n      img.then(i => {\n        this._inlineImg = i;\n\n        this._onloaded.forEach(fn => fn());\n      });\n    } else {\n      this._inlineImg = img;\n    }\n  }\n\n  width(_arg) {\n    var _a, _b;\n\n    return this._width || ((_b = (_a = this._inlineImg) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    return null;\n  }\n\n  canDraw() {\n    return !!this._inlineImg;\n  }\n\n  onReady(callback) {\n    if (utils_1.isPromise(this._src) || utils_1.isPromise(this._inlineImgPromise)) {\n      this._onloaded.push(() => callback());\n    }\n  }\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    const img = this._inlineImg;\n    canvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\n      offset: offset + 1,\n      padding: {\n        left: offsetLeft,\n        right: offsetRight,\n        top: offsetTop,\n        bottom: offsetBottom\n      }\n    });\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineImage = InlineImage;\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst rgbMap = {};\n\nfunction styleColorToRGB(color) {\n  const dummy = document.createElement(\"div\");\n  const {\n    style\n  } = dummy;\n  style.color = color;\n  style.position = \"fixed\";\n  style.height = \"1px\";\n  style.width = \"1px\";\n  style.opacity = \"0\";\n  document.body.appendChild(dummy);\n  const {\n    color: styleColor\n  } = (document.defaultView || window).getComputedStyle(dummy, \"\");\n  document.body.removeChild(dummy);\n  return colorToRGB0(styleColor || \"\");\n}\n\nfunction hexToNum(hex) {\n  return parseInt(hex, 16);\n}\n\nfunction createRGB(r, g, b, a = 1) {\n  return {\n    r,\n    g,\n    b,\n    a\n  };\n}\n\nfunction tripleHexToRGB({\n  1: r,\n  2: g,\n  3: b\n}) {\n  return createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\n}\n\nfunction sextupleHexToRGB({\n  1: r1,\n  2: r2,\n  3: g1,\n  4: g2,\n  5: b1,\n  6: b2\n}) {\n  return createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\n}\n\nfunction testRGB({\n  r,\n  g,\n  b,\n  a\n}) {\n  return 0 <= r && r <= 255 && 0 <= g && g <= 255 && 0 <= b && b <= 255 && 0 <= a && a <= 1;\n}\n\nfunction rateToByte(r) {\n  return Math.ceil(r * 255 / 100);\n}\n\nfunction colorToRGB0(color) {\n  if (/^#[0-9a-f]{3}$/i.exec(color)) {\n    return tripleHexToRGB(color);\n  }\n\n  if (/^#[0-9a-f]{6}$/i.exec(color)) {\n    return sextupleHexToRGB(color);\n  }\n\n  let ret = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/i.exec(color);\n\n  if (ret) {\n    const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  ret = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i.exec(color);\n\n  if (ret) {\n    const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]), Number(ret[4]));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  ret = /^rgb\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*\\)$/i.exec(color);\n\n  if (ret) {\n    const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[3])), rateToByte(Number(ret[5])));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  ret = /^rgba\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i.exec(color);\n\n  if (ret) {\n    const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[3])), rateToByte(Number(ret[5])), Number(ret[7]));\n\n    if (testRGB(rgb)) {\n      return rgb;\n    }\n  }\n\n  return null;\n}\n\nfunction colorToRGB(color) {\n  if (typeof color !== \"string\") {\n    return createRGB(0, 0, 0, 0);\n  }\n\n  color = color.toLowerCase().trim();\n\n  if (rgbMap[color]) {\n    return rgbMap[color];\n  }\n\n  return colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\n}\n\nexports.colorToRGB = colorToRGB;\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst columns = __importStar(__webpack_require__(16));\n\nexports.columns = columns;\n\nconst core = __importStar(__webpack_require__(106));\n\nexports.core = core;\n\nconst data = __importStar(__webpack_require__(59));\n\nexports.data = data;\n\nconst headers = __importStar(__webpack_require__(114));\n\nexports.headers = headers;\n\nconst icons = __importStar(__webpack_require__(65));\n\nconst register = __importStar(__webpack_require__(129));\n\nexports.register = register;\n\nconst themes = __importStar(__webpack_require__(35));\n\nexports.themes = themes;\n\nconst tools = __importStar(__webpack_require__(133));\n\nexports.tools = tools;\n\nconst ListGrid_1 = __webpack_require__(134);\n\nexports.ListGrid = ListGrid_1.ListGrid;\n\nconst GridCanvasHelper_1 = __webpack_require__(70);\n\nexports.GridCanvasHelper = GridCanvasHelper_1.GridCanvasHelper;\n\nvar get_internal_1 = __webpack_require__(165);\n\nexports._getInternal = get_internal_1.getInternal;\n/** @private */\n\nfunction getIcons() {\n  return icons.get();\n}\n\nexports.getIcons = getIcons; // backward compatibility\n\nexports.default = {\n  core,\n  tools,\n  // impl Grids\n  ListGrid: ListGrid_1.ListGrid,\n  // objects\n  columns,\n  headers,\n  themes,\n  data,\n  // helper\n  GridCanvasHelper: GridCanvasHelper_1.GridCanvasHelper,\n  //plugin registers\n  register,\n\n  get icons() {\n    return getIcons();\n  }\n\n}; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nObject.defineProperty(themes, \"default\", {\n  enumerable: false,\n  configurable: true,\n\n  get() {\n    return themes.getDefault();\n  },\n\n  set(defaultTheme) {\n    themes.setDefault(defaultTheme);\n  }\n\n}); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nObject.defineProperty(themes, \"choices\", {\n  enumerable: false,\n  configurable: true,\n\n  get() {\n    return themes.getChoices();\n  }\n\n});\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Action_1 = __webpack_require__(41);\n\nexports.Action = Action_1.Action;\n\nconst BaseAction_1 = __webpack_require__(25);\n\nexports.BaseAction = BaseAction_1.BaseAction;\n\nconst ButtonAction_1 = __webpack_require__(77);\n\nexports.ButtonAction = ButtonAction_1.ButtonAction;\n\nconst CheckEditor_1 = __webpack_require__(79);\n\nexports.CheckEditor = CheckEditor_1.CheckEditor;\n\nconst Editor_1 = __webpack_require__(10);\n\nexports.Editor = Editor_1.Editor;\n\nconst InlineInputEditor_1 = __webpack_require__(80);\n\nexports.InlineInputEditor = InlineInputEditor_1.InlineInputEditor;\n\nconst InlineMenuEditor_1 = __webpack_require__(85);\n\nexports.InlineMenuEditor = InlineMenuEditor_1.InlineMenuEditor;\n\nconst RadioEditor_1 = __webpack_require__(101);\n\nexports.RadioEditor = RadioEditor_1.RadioEditor;\n\nconst SmallDialogInputEditor_1 = __webpack_require__(102);\n\nexports.SmallDialogInputEditor = SmallDialogInputEditor_1.SmallDialogInputEditor; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nclass ImmutableCheckEditor extends CheckEditor_1.CheckEditor {\n  get disabled() {\n    return this._disabled;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nclass ImmutableRadioEditor extends RadioEditor_1.RadioEditor {\n  get disabled() {\n    return this._disabled;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nclass ImmutableInputEditor extends SmallDialogInputEditor_1.SmallDialogInputEditor {\n  get disabled() {\n    return this._disabled;\n  }\n\n  get readOnly() {\n    return this._readOnly;\n  }\n\n}\n\nexports.ACTIONS = {\n  CHECK: new ImmutableCheckEditor(),\n  INPUT: new ImmutableInputEditor(),\n  RADIO: new ImmutableRadioEditor()\n};\n\nfunction of(columnAction) {\n  if (!columnAction) {\n    return undefined;\n  } else if (typeof columnAction === \"string\") {\n    const key = columnAction.toUpperCase();\n    return exports.ACTIONS[key] || of(null);\n  } else {\n    return columnAction;\n  }\n}\n\nexports.of = of;\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Action_1 = __webpack_require__(41);\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst utils_1 = __webpack_require__(0);\n\nconst BUTTON_COLUMN_STATE_ID = symbolManager_1.getButtonColumnStateId();\n\nclass ButtonAction extends Action_1.Action {\n  getState(grid) {\n    let state = grid[BUTTON_COLUMN_STATE_ID];\n\n    if (!state) {\n      state = {};\n      utils_1.obj.setReadonly(grid, BUTTON_COLUMN_STATE_ID, state);\n    }\n\n    return state;\n  }\n\n}\n\nexports.ButtonAction = ButtonAction;\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst actionBind_1 = __webpack_require__(24);\n\nconst utils_1 = __webpack_require__(0);\n\nconst action_utils_1 = __webpack_require__(9);\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(3);\n\nconst Editor_1 = __webpack_require__(10);\n\nconst animate_1 = __webpack_require__(17);\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst CHECK_COLUMN_STATE_ID = symbolManager_1.getCheckColumnStateId();\n\nclass CheckEditor extends Editor_1.Editor {\n  clone() {\n    return new CheckEditor(this);\n  }\n\n  bindGridEvent(grid, cellId) {\n    let _state = grid[CHECK_COLUMN_STATE_ID];\n\n    if (!_state) {\n      _state = {\n        block: {},\n        elapsed: {}\n      };\n      utils_1.obj.setReadonly(grid, CHECK_COLUMN_STATE_ID, _state);\n    }\n\n    const state = _state;\n\n    const action = cell => {\n      const range = grid.getCellRange(cell.col, cell.row);\n      const cellKey = `${range.start.col}:${range.start.row}`;\n\n      if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row) || state.block[cellKey]) {\n        return;\n      }\n\n      const ret = grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\n\n      if (ret) {\n        const onChange = () => {\n          // checkbox animation\n          animate_1.animate(200, point => {\n            if (point === 1) {\n              delete state.elapsed[cellKey];\n            } else {\n              state.elapsed[cellKey] = point;\n            }\n\n            grid.invalidateCellRange(range);\n          });\n        };\n\n        if (utils_1.isPromise(ret)) {\n          state.block[cellKey] = true;\n          ret.then(() => {\n            delete state.block[cellKey];\n            onChange();\n          });\n        } else {\n          onChange();\n        }\n      }\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [...actionBind_1.bindCellClickAction(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if (action_utils_1.isDisabledRecord(this.disabled, grid, e.row)) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...actionBind_1.bindCellKeyAction(grid, cellId, {\n      action: _e => {\n        const selrange = grid.selection.range;\n        const {\n          col\n        } = grid.selection.select;\n\n        for (let {\n          row\n        } = selrange.start; row <= selrange.end.row; row++) {\n          if (!isTarget(col, row)) {\n            continue;\n          }\n\n          action({\n            col,\n            row\n          });\n        }\n      }\n    }), // paste value\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!utils_1.cellEquals(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      const pasteValue = e.normalizeValue.trim();\n      grid.doGetCellValue(e.col, e.row, value => {\n        const newValue = action_utils_1.toggleValue(value);\n\n        if (`${newValue}`.trim() === pasteValue) {\n          utils_1.event.cancel(e.event);\n          action({\n            col: e.col,\n            row: e.row\n          });\n        }\n      });\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value) {\n    if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const pasteValue = value.trim();\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      const newValue = action_utils_1.toggleValue(value);\n\n      if (`${newValue}`.trim() === pasteValue) {\n        grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\n      }\n    });\n  }\n\n  onDeleteCellRangeBox() {// noop\n  }\n\n}\n\nexports.CheckEditor = CheckEditor;\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseInputEditor_1 = __webpack_require__(42);\n\nconst InlineInputElement_1 = __webpack_require__(81);\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst utils_1 = __webpack_require__(0);\n\nconst _ = symbolManager_1.getInlineInputEditorStateId();\n\nfunction getState(grid) {\n  let state = grid[_];\n\n  if (!state) {\n    state = {};\n    utils_1.obj.setReadonly(grid, _, state);\n  }\n\n  return state;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nlet globalElement = null;\nlet bindGridCount = 0;\n\nfunction attachInput(grid, cell, editor, value) {\n  const state = getState(grid);\n\n  if (!globalElement) {\n    globalElement = new InlineInputElement_1.InlineInputElement();\n  }\n\n  if (!state.element) {\n    state.element = globalElement;\n    bindGridCount++;\n    grid.addDisposable({\n      dispose() {\n        bindGridCount--;\n\n        if (!bindGridCount) {\n          globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n          globalElement = null;\n          state.element = null;\n        }\n      }\n\n    });\n  }\n\n  globalElement.attach(grid, editor, cell.col, cell.row, value);\n}\n\nfunction detachInput(gridFocus) {\n  if (globalElement) {\n    globalElement.detach(gridFocus);\n  }\n}\n\nfunction doChangeValue(_grid) {\n  if (globalElement) {\n    globalElement.doChangeValue();\n  }\n}\n\nclass InlineInputEditor extends BaseInputEditor_1.BaseInputEditor {\n  constructor(option = {}) {\n    super(option);\n    this._classList = option.classList;\n    this._type = option.type;\n  }\n\n  get classList() {\n    if (!this._classList) {\n      return undefined;\n    }\n\n    return Array.isArray(this._classList) ? this._classList : [this._classList];\n  }\n\n  set classList(classList) {\n    this._classList = classList;\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  set type(type) {\n    this._type = type;\n  }\n\n  clone() {\n    return new InlineInputEditor(this);\n  }\n\n  onInputCellInternal(grid, cell, inputValue) {\n    attachInput(grid, cell, this, inputValue);\n  }\n\n  onOpenCellInternal(grid, cell) {\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      attachInput(grid, cell, this, value);\n    });\n  }\n\n  onChangeSelectCellInternal(grid, _cell, _selected) {\n    doChangeValue(grid);\n    detachInput();\n  }\n\n  onGridScrollInternal(grid) {\n    doChangeValue(grid);\n    detachInput(true);\n  }\n\n  onChangeDisabledInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onChangeReadOnlyInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onSetInputAttrsInternal(grid, _cell, input) {\n    InlineInputElement_1.InlineInputElement.setInputAttrs(this, grid, input);\n  }\n\n}\n\nexports.InlineInputEditor = InlineInputEditor;\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst EventHandler_1 = __webpack_require__(2);\n\nconst dom_1 = __webpack_require__(11);\n\nconst utils_1 = __webpack_require__(0);\n\nconst input_value_handler_1 = __webpack_require__(43);\n\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst CLASSNAME = \"cheetah-grid__inline-input\";\n\nfunction createInputElement() {\n  __webpack_require__(82);\n\n  return dom_1.createElement(\"input\", {\n    classList: CLASSNAME\n  });\n}\n\nfunction setInputAttrs(editor, _grid, input) {\n  const {\n    classList,\n    type\n  } = editor;\n\n  if (classList) {\n    input.classList.add(...classList);\n  }\n\n  input.type = type || \"\";\n}\n\nclass InlineInputElement {\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    this._input = createInputElement();\n\n    this._bindInputEvents();\n  }\n\n  static setInputAttrs(editor, grid, input) {\n    setInputAttrs(editor, grid, input);\n  }\n\n  dispose() {\n    var _a;\n\n    const input = this._input;\n    this.detach();\n\n    this._handler.dispose();\n\n    delete this._input;\n    this._beforePropEditor = null;\n    (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n  }\n\n  attach(grid, editor, col, row, value) {\n    const input = this._input;\n    const handler = this._handler;\n\n    if (this._beforePropEditor) {\n      const {\n        classList\n      } = this._beforePropEditor;\n\n      if (classList) {\n        input.classList.remove(...classList);\n      }\n    }\n\n    input.style.font = grid.font || \"16px sans-serif\";\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    input.style.top = `${rect.top.toFixed()}px`;\n    input.style.left = `${rect.left.toFixed()}px`;\n    input.style.width = `${rect.width.toFixed()}px`;\n    input.style.height = `${rect.height.toFixed()}px`;\n    element.appendChild(input);\n    setInputAttrs(editor, grid, input);\n    input_value_handler_1.setInputValue(input, value);\n    this._activeData = {\n      grid,\n      col,\n      row,\n      editor\n    };\n    this._beforePropEditor = editor;\n\n    const focus = () => {\n      input.focus();\n      const end = input.value.length;\n\n      try {\n        if (typeof input.selectionStart !== \"undefined\") {\n          input.selectionStart = end;\n          input.selectionEnd = end;\n          return;\n        }\n      } catch (e) {} //ignore\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n      if (document.selection) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const range = input.createTextRange();\n        range.collapse();\n        range.moveEnd(\"character\", end);\n        range.moveStart(\"character\", end);\n        range.select();\n      }\n    };\n\n    handler.tryWithOffEvents(input, \"blur\", () => {\n      focus();\n    });\n    this._attaching = true;\n    setTimeout(() => {\n      delete this._attaching;\n    });\n  }\n\n  detach(gridFocus) {\n    if (this._isActive()) {\n      const {\n        grid,\n        col,\n        row\n      } = this._activeData;\n      const input = this._input;\n\n      this._handler.tryWithOffEvents(input, \"blur\", () => {\n        var _a;\n\n        (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n      });\n\n      const range = grid.getCellRange(col, row);\n      grid.invalidateCellRange(range);\n\n      if (gridFocus) {\n        grid.focus();\n      }\n    }\n\n    this._activeData = null;\n  }\n\n  doChangeValue() {\n    if (!this._isActive()) {\n      return;\n    }\n\n    const input = this._input;\n    const {\n      value\n    } = input;\n    const {\n      grid,\n      col,\n      row\n    } = this._activeData;\n    grid.doChangeValue(col, row, () => value);\n  }\n\n  _isActive() {\n    const input = this._input;\n\n    if (!input || !input.parentElement) {\n      return false;\n    }\n\n    if (!this._activeData) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _bindInputEvents() {\n    const handler = this._handler;\n    const input = this._input;\n\n    const stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\n    handler.on(input, \"click\", stopPropagationOnly);\n    handler.on(input, \"mousedown\", stopPropagationOnly);\n    handler.on(input, \"touchstart\", stopPropagationOnly);\n    handler.on(input, \"dblclick\", stopPropagationOnly);\n    handler.on(input, \"compositionstart\", _e => {\n      input.classList.add(\"composition\");\n    });\n    handler.on(input, \"compositionend\", _e => {\n      input.classList.remove(\"composition\");\n    });\n    handler.on(input, \"keydown\", e => {\n      if (input.classList.contains(\"composition\")) {\n        return;\n      }\n\n      const keyCode = utils_1.event.getKeyCode(e);\n\n      if (keyCode === KEY_ENTER) {\n        this._onKeydownEnter(e);\n      } else if (keyCode === KEY_TAB) {\n        this._onKeydownTab(e);\n      }\n    });\n    handler.on(input, \"blur\", _e => {\n      this.doChangeValue();\n      this.detach();\n    });\n  }\n\n  _onKeydownEnter(e) {\n    var _a;\n\n    if (!this._isActive() || this._attaching) {\n      return;\n    }\n\n    const {\n      grid\n    } = this._activeData;\n    this.doChangeValue();\n    this.detach(true);\n    utils_1.event.cancel(e);\n\n    if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n      grid.onKeyDownMove(e);\n    }\n  }\n\n  _onKeydownTab(e) {\n    var _a;\n\n    if (!this._isActive()) {\n      return;\n    }\n\n    const {\n      grid\n    } = this._activeData;\n\n    if (!((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab)) {\n      return;\n    }\n\n    this.doChangeValue();\n    this.detach(true);\n    grid.onKeyDownMove(e);\n  }\n\n}\n\nexports.InlineInputElement = InlineInputElement;\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(83);\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(5)(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(4)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"/* ms */\\n.cheetah-grid__inline-input::-ms-clear {\\n\\tvisibility: hidden;\\n}\\n.cheetah-grid__inline-input {\\n\\tposition: absolute;\\n\\tbox-sizing: border-box;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports) {\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst action_utils_1 = __webpack_require__(9);\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(3);\n\nconst Editor_1 = __webpack_require__(10);\n\nconst InlineMenuElement_1 = __webpack_require__(86);\n\nconst type_1 = __webpack_require__(44);\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst menu_items_1 = __webpack_require__(55);\n\nconst _ = symbolManager_1.getInlineMenuEditorStateId();\n\nfunction getState(grid) {\n  let state = grid[_];\n\n  if (!state) {\n    state = {};\n    utils_1.obj.setReadonly(grid, _, state);\n  }\n\n  return state;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nlet globalElement = null;\nlet bindGridCount = 0;\n\nfunction attachMenu(grid, cell, editor, value, record) {\n  const state = getState(grid);\n\n  if (!globalElement) {\n    globalElement = new InlineMenuElement_1.InlineMenuElement();\n  }\n\n  if (!state.element) {\n    state.element = globalElement;\n    bindGridCount++;\n    grid.addDisposable({\n      dispose() {\n        bindGridCount--;\n\n        if (!bindGridCount) {\n          globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n          globalElement = null;\n          state.element = null;\n        }\n      }\n\n    });\n  }\n\n  globalElement.attach(grid, editor, cell.col, cell.row, value, record);\n}\n\nfunction detachMenu(gridFocus) {\n  if (globalElement) {\n    globalElement.detach(gridFocus);\n  }\n}\n\nconst KEY_ENTER = 13;\nconst KEY_F2 = 113;\n\nclass InlineMenuEditor extends Editor_1.Editor {\n  constructor(option = {}) {\n    super(option);\n    this._classList = option.classList;\n    this._options = menu_items_1.normalizeToFn(option.options);\n  }\n\n  dispose() {// noop\n  }\n\n  get classList() {\n    if (!this._classList) {\n      return undefined;\n    }\n\n    return Array.isArray(this._classList) ? this._classList : [this._classList];\n  }\n\n  set classList(classList) {\n    this._classList = classList;\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  set options(options) {\n    this._options = menu_items_1.normalizeToFn(options);\n  }\n\n  clone() {\n    return new InlineMenuEditor(this);\n  }\n\n  onChangeDisabledInternal() {\n    // cancel input\n    detachMenu(true);\n  }\n\n  onChangeReadOnlyInternal() {\n    // cancel input\n    detachMenu(true);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const open = cell => {\n      if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n        return false;\n      }\n\n      grid.doGetCellValue(cell.col, cell.row, value => {\n        const record = grid.getRowRecord(cell.row);\n\n        if (utils_1.isPromise(record)) {\n          return;\n        }\n\n        attachMenu(grid, cell, this, value, record);\n      });\n      return true;\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, cell => {\n      if (!isTarget(cell.col, cell.row)) {\n        return;\n      }\n\n      open({\n        col: cell.col,\n        row: cell.row\n      });\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, e => {\n      if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\n        return;\n      }\n\n      const sel = grid.selection.select;\n\n      if (!isTarget(sel.col, sel.row)) {\n        return;\n      }\n\n      if (open({\n        col: sel.col,\n        row: sel.row\n      })) {\n        e.stopCellMoving();\n      }\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, _e => {\n      detachMenu();\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\n      detachMenu(true);\n    }), // mouse move\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, e.row) || action_utils_1.isDisabledRecord(this.disabled, grid, e.row)) {\n        return;\n      }\n\n      grid.getElement().style.cursor = \"pointer\";\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, e.row) || action_utils_1.isDisabledRecord(this.disabled, grid, e.row)) {\n        return;\n      }\n\n      if (!grid.getElement().style.cursor) {\n        grid.getElement().style.cursor = \"pointer\";\n      }\n    }), grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      grid.getElement().style.cursor = \"\";\n    }), // paste value\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!utils_1.cellEquals(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, e.row) || action_utils_1.isDisabledRecord(this.disabled, grid, e.row)) {\n        return;\n      }\n\n      const record = grid.getRowRecord(e.row);\n\n      if (utils_1.isPromise(record)) {\n        return;\n      }\n\n      const pasteOpt = this._pasteDataToOptionValue(e.normalizeValue, grid, e, record);\n\n      if (pasteOpt) {\n        utils_1.event.cancel(e.event);\n        utils_1.then(grid.doChangeValue(e.col, e.row, () => pasteOpt.value), () => {\n          const range = grid.getCellRange(e.col, e.row);\n          grid.invalidateCellRange(range);\n        });\n      }\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value) {\n    if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const record = grid.getRowRecord(cell.row);\n\n    if (utils_1.isPromise(record)) {\n      return;\n    }\n\n    const pasteOpt = this._pasteDataToOptionValue(value, grid, cell, record);\n\n    if (pasteOpt) {\n      grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\n    }\n  }\n\n  onDeleteCellRangeBox(grid, cell) {\n    if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const record = grid.getRowRecord(cell.row);\n\n    if (utils_1.isPromise(record)) {\n      return;\n    }\n\n    const pasteOpt = this._pasteDataToOptionValue(\"\", grid, cell, record);\n\n    if (pasteOpt) {\n      grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\n    }\n  }\n\n  _pasteDataToOptionValue(value, grid, cell, record) {\n    const options = this._options(record);\n\n    const pasteOpt = _textToOptionValue(value, options);\n\n    if (pasteOpt) {\n      return pasteOpt;\n    }\n\n    const columnType = grid.getColumnType(cell.col, cell.row);\n\n    if (hasOptions(columnType)) {\n      // Find with caption.\n      const pasteValue = normalizePasteValueStr(value);\n      const captionOpt = utils_1.array.find(columnType.options, opt => normalizePasteValueStr(opt.label) === pasteValue);\n\n      if (captionOpt) {\n        return _textToOptionValue(captionOpt.value, options);\n      }\n    }\n\n    return undefined;\n  }\n\n}\n\nexports.InlineMenuEditor = InlineMenuEditor;\n\nfunction _textToOptionValue(value, options) {\n  const pasteValue = normalizePasteValueStr(value);\n  const pasteOpt = utils_1.array.find(options, opt => normalizePasteValueStr(opt.value) === pasteValue);\n\n  if (pasteOpt) {\n    return pasteOpt;\n  }\n\n  return undefined;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction normalizePasteValueStr(value) {\n  if (value == null) {\n    return \"\";\n  }\n\n  return `${value}`.trim();\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction hasOptions(columnType) {\n  if (columnType instanceof type_1.MenuColumn) {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  if (Array.isArray(columnType.options)) {\n    return true;\n  }\n\n  return false;\n}\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst dom_1 = __webpack_require__(11);\n\nconst utils_1 = __webpack_require__(0);\n\nconst EventHandler_1 = __webpack_require__(2);\n\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst KEY_UP = 38;\nconst KEY_DOWN = 40;\nconst KEY_ESC = 27;\nconst CLASSNAME = \"cheetah-grid__inline-menu\";\nconst ITEM_CLASSNAME = `${CLASSNAME}__menu-item`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\nconst EMPTY_ITEM_CLASSNAME = `${ITEM_CLASSNAME}--empty`;\n\nfunction findItemParents(target) {\n  let el = target;\n\n  while (el && !el.classList.contains(ITEM_CLASSNAME)) {\n    el = el.parentElement;\n\n    if (!el || el.classList.contains(CLASSNAME)) {\n      return null;\n    }\n  }\n\n  return el;\n}\n\nfunction createMenuElement() {\n  __webpack_require__(87);\n\n  return dom_1.createElement(\"ul\", {\n    classList: CLASSNAME\n  });\n}\n\nfunction attachElement(element, rect, menu) {\n  menu.style.top = `${rect.top.toFixed()}px`;\n  menu.style.left = `${rect.left.toFixed()}px`;\n  menu.style.width = `${rect.width.toFixed()}px`;\n  menu.style.lineHeight = `${rect.height.toFixed()}px`;\n  element.appendChild(menu);\n}\n\nfunction optionToLi({\n  classList,\n  label,\n  value,\n  html\n}, index) {\n  const item = dom_1.createElement(\"li\", {\n    classList: ITEM_CLASSNAME\n  });\n  item.tabIndex = 0;\n  item.dataset.valueindex = `${index}`;\n\n  if (classList) {\n    item.classList.add(...(Array.isArray(classList) ? classList : [classList]));\n  }\n\n  if (label) {\n    const span = dom_1.createElement(\"span\", {\n      text: label\n    });\n    item.appendChild(span);\n  } else if (html) {\n    dom_1.appendHtml(item, html);\n  }\n\n  if (value === \"\" || !utils_1.isDef(value)) {\n    item.classList.add(EMPTY_ITEM_CLASSNAME);\n  }\n\n  return item;\n}\n\nfunction openMenu(grid, editor, col, row, value, options, menu) {\n  const {\n    classList\n  } = editor;\n  menu.classList.remove(SHOWN_CLASSNAME);\n  menu.classList.add(HIDDEN_CLASSNAME);\n  dom_1.empty(menu);\n  menu.style.font = grid.font || \"16px sans-serif\";\n  let emptyItemEl = null;\n  let valueItemEl = null;\n  options.forEach((option, i) => {\n    const item = optionToLi(option, i);\n    menu.appendChild(item);\n\n    if (option.value === value) {\n      valueItemEl = item;\n      item.dataset.select = \"select\";\n    }\n\n    if (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\n      emptyItemEl = item;\n    }\n  });\n  const focusEl = valueItemEl || emptyItemEl || menu.children[0];\n\n  if (classList) {\n    menu.classList.add(...classList);\n  }\n\n  const children = Array.prototype.slice.call(menu.children, 0);\n  const focusIndex = children.indexOf(focusEl);\n  const {\n    element,\n    rect\n  } = grid.getAttachCellsArea(grid.getCellRange(col, row)); // Cover the right line\n\n  rect.width++; // append for calculation\n\n  attachElement(element, rect, menu); // Make the selection item at the middle\n\n  let offset = 0;\n  let allHeight = 0;\n\n  for (let i = 0; i < children.length; i++) {\n    const {\n      offsetHeight\n    } = children[i];\n\n    if (i < focusIndex) {\n      offset += offsetHeight;\n    }\n\n    allHeight += offsetHeight;\n  }\n\n  rect.offsetTop(-offset);\n  menu.style.transformOrigin = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\n  attachElement(element, rect, menu); // Control not to overflow the screen range\n\n  const menuClientRect = menu.getBoundingClientRect();\n  const scaleDiff = (allHeight - menuClientRect.height) / 2;\n  const orgMenuTop = menuClientRect.top - scaleDiff;\n  let menuTop = orgMenuTop;\n  const menuBottom = menuTop + allHeight;\n  const winBottom = window.innerHeight;\n  const winMargin = 20;\n\n  if (menuBottom > winBottom - winMargin) {\n    const diff = menuBottom - winBottom + winMargin;\n    menuTop -= diff;\n  }\n\n  if (menuTop < 0\n  /*winTop*/\n  + winMargin) {\n    menuTop = winMargin;\n  }\n\n  if (menuTop !== orgMenuTop) {\n    rect.offsetTop(-(orgMenuTop - menuTop)); // re update\n\n    attachElement(element, rect, menu);\n  }\n\n  if (focusEl) {\n    focusEl.focus();\n  }\n\n  menu.classList.remove(HIDDEN_CLASSNAME);\n  menu.classList.add(SHOWN_CLASSNAME);\n}\n\nfunction closeMenu(_grid, _col, _row, menu) {\n  menu.classList.remove(SHOWN_CLASSNAME);\n  menu.classList.add(HIDDEN_CLASSNAME);\n  dom_1.disableFocus(menu);\n}\n\nclass InlineMenuElement {\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    this._menu = createMenuElement();\n\n    this._bindMenuEvents();\n  }\n\n  dispose() {\n    var _a;\n\n    const menu = this._menu;\n    this.detach();\n\n    this._handler.dispose();\n\n    delete this._menu;\n    this._beforePropEditor = null;\n    (_a = menu.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(menu);\n  }\n\n  attach(grid, editor, col, row, value, record) {\n    const menu = this._menu;\n\n    if (this._beforePropEditor) {\n      const {\n        classList\n      } = this._beforePropEditor;\n\n      if (classList) {\n        menu.classList.remove(...classList);\n      }\n    }\n\n    const options = editor.options(record);\n    openMenu(grid, editor, col, row, value, options, menu);\n    this._activeData = {\n      grid,\n      col,\n      row,\n      editor,\n      options\n    };\n    this._beforePropEditor = editor;\n  }\n\n  detach(gridFocus) {\n    if (this._isActive()) {\n      const {\n        grid,\n        col,\n        row\n      } = this._activeData;\n      const menu = this._menu;\n      closeMenu(grid, col, row, menu);\n      const range = grid.getCellRange(col, row);\n      grid.invalidateCellRange(range);\n\n      if (gridFocus) {\n        grid.focus();\n      }\n    }\n\n    this._activeData = null;\n  }\n\n  _doChangeValue(valueindex) {\n    if (!this._isActive()) {\n      return;\n    }\n\n    const {\n      grid,\n      col,\n      row,\n      options\n    } = this._activeData;\n    const option = options[Number(valueindex)];\n\n    if (option) {\n      const {\n        value\n      } = option;\n      grid.doChangeValue(col, row, () => value);\n    }\n  }\n\n  _isActive() {\n    const menu = this._menu;\n\n    if (!menu || !menu.parentElement) {\n      return false;\n    }\n\n    if (!this._activeData) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _bindMenuEvents() {\n    const handler = this._handler;\n    const menu = this._menu;\n\n    const stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\n    handler.on(menu, \"mousedown\", stopPropagationOnly);\n    handler.on(menu, \"touchstart\", stopPropagationOnly);\n    handler.on(menu, \"dblclick\", stopPropagationOnly);\n    handler.on(menu, \"click\", e => {\n      e.stopPropagation();\n      const item = findItemParents(e.target);\n\n      if (!item) {\n        return;\n      }\n\n      const {\n        valueindex\n      } = item.dataset;\n\n      this._doChangeValue(valueindex || \"\");\n\n      this.detach(true);\n    });\n    handler.on(menu, \"keydown\", e => {\n      const item = findItemParents(e.target);\n\n      if (!item) {\n        return;\n      }\n\n      const keyCode = utils_1.event.getKeyCode(e);\n\n      if (keyCode === KEY_ENTER) {\n        this._onKeydownEnter(menu, item, e);\n      } else if (keyCode === KEY_ESC) {\n        this.detach(true);\n        utils_1.event.cancel(e);\n      } else if (keyCode === KEY_UP) {\n        const n = dom_1.findPrevSiblingFocusable(item);\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      } else if (keyCode === KEY_DOWN) {\n        const n = dom_1.findNextSiblingFocusable(item);\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      } else if (keyCode === KEY_TAB) {\n        this._onKeydownTab(menu, item, e);\n      }\n    });\n  }\n\n  _onKeydownEnter(_menu, item, e) {\n    var _a;\n\n    const grid = this._isActive() ? this._activeData.grid : null;\n    const {\n      valueindex\n    } = item.dataset;\n\n    this._doChangeValue(valueindex || \"\");\n\n    this.detach(true);\n    utils_1.event.cancel(e);\n\n    if (grid) {\n      if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n        grid.onKeyDownMove(e);\n      }\n    }\n  }\n\n  _onKeydownTab(menu, item, e) {\n    var _a;\n\n    if (this._isActive()) {\n      const {\n        grid\n      } = this._activeData;\n\n      if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) {\n        const {\n          valueindex\n        } = item.dataset;\n\n        this._doChangeValue(valueindex || \"\");\n\n        this.detach(true);\n        grid.onKeyDownMove(e);\n        return;\n      }\n    }\n\n    if (!e.shiftKey) {\n      if (!dom_1.findNextSiblingFocusable(item)) {\n        let n = menu.querySelector(`.${ITEM_CLASSNAME}`);\n\n        if (!dom_1.isFocusable(n)) {\n          n = dom_1.findNextSiblingFocusable(n);\n        }\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      }\n    } else {\n      if (!dom_1.findPrevSiblingFocusable(item)) {\n        const items = menu.querySelectorAll(`.${ITEM_CLASSNAME}`);\n        let n = items[items.length - 1];\n\n        if (!dom_1.isFocusable(n)) {\n          n = dom_1.findPrevSiblingFocusable(n);\n        }\n\n        if (n) {\n          n.focus();\n          utils_1.event.cancel(e);\n        }\n      }\n    }\n  }\n\n}\n\nexports.InlineMenuElement = InlineMenuElement;\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(88);\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(5)(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(4)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__inline-menu {\\n\\tposition: absolute;\\n\\tcolor: rgba(0, 0, 0, .87);\\n\\tbox-sizing: content-box;\\n\\tmargin: -1px auto auto -1px;\\n\\tpadding: 8px 0;\\n\\tbackground-color: #fafafa;\\n\\tlist-style-type: none;\\n\\tborder-radius: 2px;\\n\\tmax-height: calc(100vh - 40px);\\n\\toverflow-y: auto;\\n}\\n.cheetah-grid__inline-menu--hidden {\\n\\ttransform: scale(.9);\\n\\tbox-shadow: none;\\n\\topacity: 0;\\n\\tpointer-events: none;\\n\\ttransition: all 50ms ease-out;\\n}\\n.cheetah-grid__inline-menu--hidden * {\\n\\tpointer-events: none;\\n}\\n.cheetah-grid__inline-menu--shown {\\n\\ttransform: translateY(-7px);\\n\\tbox-shadow: 0 3px 1px -2px rgba(0, 0, 0, .2), 0 2px 2px 0 rgba(0, 0, 0, .14), 0 1px 5px 0 rgba(0, 0, 0, .12);\\n\\topacity: 1;\\n\\ttransition: all 150ms ease-out;\\n}\\n.cheetah-grid__inline-menu__menu-item {\\n\\theight: 100%;\\n\\tbox-sizing: border-box;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: flex-start;\\n\\toutline: none;\\n\\tcursor: pointer;\\n\\tposition: relative;\\n\\toverflow: hidden;\\n\\tpadding: 0 16px;\\n}\\n.cheetah-grid__inline-menu__menu-item--empty {\\n\\tcolor: rgba(0, 0, 0, .38);\\n}\\n.cheetah-grid__inline-menu__menu-item::before {\\n\\tcontent: \\\"\\\";\\n\\tposition: absolute;\\n\\ttop: -50%;\\n\\tleft: -50%;\\n\\twidth: 200%;\\n\\theight: 200%;\\n\\tbackground-color: #000;\\n\\topacity: 0;\\n\\tpointer-events: none;\\n\\ttransition: opacity 15ms linear;\\n}\\n.cheetah-grid__inline-menu__menu-item:hover::before {\\n\\topacity: .04;\\n}\\n.cheetah-grid__inline-menu__menu-item[data-select]::before {\\n\\topacity: .04;\\n}\\n.cheetah-grid__inline-menu__menu-item:focus::before {\\n\\topacity: .12;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst BaseColumn_1 = __webpack_require__(7);\n\nconst BranchGraphStyle_1 = __webpack_require__(90);\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst _ = symbolManager_1.getBranchGraphColumnStateId();\n\nfunction getAllColumnData(grid, field, callback) {\n  const {\n    dataSource\n  } = grid;\n  const allData = [];\n  let promise;\n\n  for (let index = 0; index < dataSource.length; index++) {\n    const data = dataSource.getField(index, field);\n\n    if (utils_1.isPromise(data)) {\n      const dataIndex = allData.length;\n      allData.push(undefined);\n\n      if (!promise) {\n        promise = data.then(d => {\n          allData[dataIndex] = d;\n        });\n      } else {\n        promise = promise.then(() => data).then(d => {\n          allData[dataIndex] = d;\n        });\n      }\n    } else {\n      allData.push(data);\n    }\n  }\n\n  if (promise) {\n    promise.then(() => callback(allData));\n  } else {\n    callback(allData);\n  }\n}\n\nclass BranchLine {\n  constructor({\n    fromIndex,\n    toIndex,\n    colorIndex,\n    point\n  }) {\n    this.fromIndex = fromIndex;\n    this.toIndex = toIndex;\n    this.colorIndex = colorIndex;\n    this.point = point;\n  }\n\n}\n\nclass BranchPoint {\n  constructor({\n    index,\n    commit = false,\n    lines = [],\n    tag\n  }) {\n    this.index = index;\n    this.commit = commit;\n    this.lines = lines;\n    this.tag = tag;\n  }\n\n  static mergeLines(lines) {\n    const result = lines.filter(l => utils_1.isDef(l.fromIndex) && utils_1.isDef(l.toIndex));\n    const froms = lines.filter(l => utils_1.isDef(l.fromIndex) && !utils_1.isDef(l.toIndex));\n    const tos = lines.filter(l => !utils_1.isDef(l.fromIndex) && utils_1.isDef(l.toIndex));\n    froms.forEach(f => {\n      for (let i = 0; i < tos.length; i++) {\n        const t = tos[i];\n\n        if (t.point) {\n          continue;\n        }\n\n        if (f.colorIndex === t.colorIndex) {\n          f.toIndex = t.toIndex;\n          tos.splice(i, 1);\n          break;\n        }\n      }\n\n      result.push(f);\n    });\n    return result.concat(tos);\n  }\n\n  static merge(a, b) {\n    if (!a) {\n      return b;\n    }\n\n    return new BranchPoint({\n      index: a.index,\n      commit: a.commit || b.commit,\n      lines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\n      tag: a.tag || b.tag\n    });\n  }\n\n}\n\nfunction joinLine(timeline, branchIndex) {\n  const reverse = [...timeline].reverse();\n\n  for (let i = 0; i < reverse.length; i++) {\n    const f = reverse[i][branchIndex];\n\n    if (f) {\n      f.lines = BranchPoint.mergeLines(f.lines.concat([new BranchLine({\n        toIndex: branchIndex,\n        colorIndex: branchIndex\n      })]));\n\n      for (let j = 0; j < i; j++) {\n        const tl = reverse[j];\n        tl[branchIndex] = new BranchPoint({\n          index: branchIndex,\n          lines: [new BranchLine({\n            fromIndex: branchIndex,\n            toIndex: branchIndex,\n            colorIndex: branchIndex\n          })]\n        });\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction branch({\n  timeline,\n  branches\n}, from, to) {\n  const fromIndex = from != null ? branches.indexOf(from) : -1;\n  let toIndex = branches.indexOf(to);\n\n  if (toIndex < 0) {\n    toIndex = branches.length;\n    branches.push(to);\n  }\n\n  function findBranchRootIndex() {\n    for (let index = timeline.length - 1; index >= 0; index--) {\n      const tl = timeline[index];\n      const from = tl[fromIndex];\n\n      if (from && from.commit) {\n        return index;\n      }\n    }\n\n    return -1;\n  }\n\n  if (fromIndex < 0) {\n    return new BranchPoint({\n      index: toIndex\n    });\n  } else {\n    const fromTargetIndex = findBranchRootIndex();\n\n    if (fromTargetIndex === -1) {\n      return null;\n    }\n\n    const branchTargetFromIndex = fromTargetIndex + 1;\n    const branchPoint = new BranchPoint({\n      index: toIndex,\n      lines: [new BranchLine({\n        fromIndex,\n        colorIndex: toIndex\n      })]\n    });\n    let point;\n    let result = null;\n\n    if (branchTargetFromIndex < timeline.length) {\n      const targetLine = timeline[branchTargetFromIndex];\n      point = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\n    } else {\n      point = branchPoint;\n      result = branchPoint;\n    }\n\n    const from = timeline[fromTargetIndex][fromIndex];\n    from.lines = BranchPoint.mergeLines(from.lines.concat([new BranchLine({\n      toIndex,\n      colorIndex: toIndex,\n      point\n    })]));\n    return result;\n  }\n}\n\nfunction commit({\n  timeline,\n  branches\n}, name) {\n  const index = branches.indexOf(name);\n\n  if (index < 0) {\n    return null;\n  }\n\n  const result = new BranchPoint({\n    index,\n    commit: true\n  });\n\n  if (joinLine(timeline, index)) {\n    result.lines = BranchPoint.mergeLines(result.lines.concat([new BranchLine({\n      fromIndex: index,\n      colorIndex: index\n    })]));\n  }\n\n  return result;\n}\n\nfunction commitTag({\n  branches\n}, name, tag) {\n  let index = branches.indexOf(name);\n\n  if (index < 0) {\n    index = branches.length;\n    branches.push(name);\n  }\n\n  return new BranchPoint({\n    index,\n    tag\n  });\n}\n\nfunction commitMerge({\n  timeline,\n  branches\n}, from, to) {\n  const fromIndex = branches.indexOf(from);\n  const toIndex = branches.indexOf(to);\n\n  if (toIndex < 0 || fromIndex < 0) {\n    return new BranchPoint({\n      index: toIndex,\n      commit: true\n    });\n  }\n\n  const result = new BranchPoint({\n    index: toIndex,\n    commit: true,\n    lines: [new BranchLine({\n      fromIndex,\n      colorIndex: fromIndex\n    }), new BranchLine({\n      fromIndex: toIndex,\n      colorIndex: toIndex\n    })]\n  });\n  const froms = [...timeline];\n  const fromTargetLine = froms.pop();\n\n  if (fromTargetLine) {\n    fromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\n      index: toIndex,\n      lines: [new BranchLine({\n        toIndex,\n        colorIndex: fromIndex\n      })]\n    }));\n  }\n\n  if (joinLine(froms, fromIndex) && fromTargetLine) {\n    fromTargetLine[fromIndex].lines = BranchPoint.mergeLines(fromTargetLine[fromIndex].lines.concat([new BranchLine({\n      fromIndex,\n      colorIndex: fromIndex\n    })]));\n  }\n\n  joinLine(timeline, toIndex);\n  return result;\n}\n\nfunction calcCommand(info, command) {\n  const {\n    timeline\n  } = info;\n  const timelineData = []; // const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\n\n  const commands = Array.isArray(command) ? command : [command];\n  commands.forEach(cmd => {\n    if (!cmd) {\n      return;\n    }\n\n    let point;\n\n    if (cmd.command === \"branch\") {\n      const from = utils_1.obj.isObject(cmd.branch) ? cmd.branch.from : null;\n      const to = utils_1.obj.isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\n      point = branch(info, from, to);\n    } else if (cmd.command === \"commit\") {\n      const {\n        branch\n      } = cmd;\n      point = commit(info, branch);\n    } else if (cmd.command === \"merge\") {\n      const {\n        from,\n        to\n      } = cmd.branch;\n      point = commitMerge(info, from, to);\n    } else if (cmd.command === \"tag\") {\n      const {\n        branch,\n        tag\n      } = cmd;\n      point = commitTag(info, branch, tag);\n    }\n\n    if (point && point.index > -1) {\n      timelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\n    }\n  });\n  timeline.push(timelineData);\n}\n\nfunction calcBranchesInfo(start, grid, field) {\n  const result = {\n    branches: [],\n    timeline: []\n  };\n  getAllColumnData(grid, field, data => {\n    if (start !== \"top\") {\n      data = [...data].reverse();\n    }\n\n    data.forEach(command => {\n      calcCommand(result, command);\n    });\n  });\n  return result;\n}\n\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\n  let w = Math.max(width / branches.length + 1, 5);\n  timeline.forEach(tl => {\n    tl.forEach((p, index) => {\n      if (index <= 0) {\n        // \n        return;\n      }\n\n      if (p.tag) {\n        const textWidth = ctx.measureText(p.tag).width;\n\n        if (w * index + radius * 2 + 4 + textWidth > width) {\n          w = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\n        }\n      }\n    });\n  });\n  const result = [];\n  let x = left;\n  branches.forEach(() => {\n    result.push(Math.ceil(x + radius));\n    x += w;\n  });\n  return result;\n}\n\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, {\n  branchXPoints,\n  // margin,\n  branchColors,\n  branchLineWidth,\n  mergeStyle\n}, {\n  // width,\n  col,\n  row,\n  branches\n}) {\n  if (utils_1.isDef(upLineIndex) || utils_1.isDef(downLineIndex)) {\n    ctx.strokeStyle = utils_1.getOrApply(branchColors, branches[colorIndex], colorIndex);\n    ctx.lineWidth = branchLineWidth;\n    ctx.lineCap = \"round\";\n    ctx.beginPath();\n\n    if (utils_1.isDef(upLineIndex)) {\n      const upX = branchXPoints[upLineIndex];\n      const upRect = grid.getCellRelativeRect(col, row - 1);\n      const upY = upRect.top + upRect.height / 2;\n      ctx.moveTo(upX, upY);\n\n      if (mergeStyle === \"bezier\") {\n        ctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n    } else {\n      ctx.moveTo(x, y);\n    }\n\n    if (utils_1.isDef(downLineIndex)) {\n      const downX = branchXPoints[downLineIndex];\n      const downRect = grid.getCellRelativeRect(col, row + 1);\n      const downY = downRect.top + downRect.height / 2;\n\n      if (mergeStyle === \"bezier\") {\n        ctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\n      } else {\n        ctx.lineTo(downX, downY);\n      }\n    }\n\n    ctx.stroke();\n  }\n}\n/**\n * BranchGraphColumn\n *\n * Data commands\n * - mastar branch or orphan branch\n *\n * ```js\n * {\n * \tcommand: 'branch',\n * \tbranch: 'branch name A',\n * }\n * ```\n *\n * - commit\n *\n * ```js\n * {\n * \tcommand: 'commit',\n * \tbranch: 'branch name A'\n * }\n * ```\n *\n * - branch\n *\n * ```js\n * {\n * \tcommand: 'branch',\n * \tbranch: {\n * \t\tfrom: 'branch name A',\n * \t\tto: 'branch name B'\n * \t}\n * }\n * ```\n *\n * - merge\n *\n * ```js\n * {\n * \tcommand: 'merge',\n * \tbranch: {\n * \t\tfrom: 'branch name B',\n * \t\tto: 'branch name A'\n * \t}\n * }\n * ```\n *\n * - tag\n *\n * ```js\n * {\n * \tcommand: 'tag',\n * \tbranch: 'branch name A',\n * \ttag: 'tag name'\n * }\n * ```\n *\n * @memberof cheetahGrid.columns.type\n */\n\n\nclass BranchGraphColumn extends BaseColumn_1.BaseColumn {\n  constructor(option = {}) {\n    super(option);\n    this._start = option.start || \"bottom\";\n    this._cache = utils_1.isDef(option.cache) ? option.cache : false;\n  }\n\n  get StyleClass() {\n    return BranchGraphStyle_1.BranchGraphStyle;\n  }\n\n  clearCache(grid) {\n    delete grid[_];\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    if (this._cache) {\n      const state = grid[_] || (grid[_] = new Map());\n      const {\n        col,\n        row\n      } = context;\n      const field = grid.getField(col, row);\n\n      if (!state.has(field)) {\n        state.set(field, calcBranchesInfo(this._start, grid, field));\n      }\n    }\n\n    return super.onDrawCell(cellValue, info, context, grid);\n  }\n\n  clone() {\n    return new BranchGraphColumn(this);\n  }\n\n  drawInternal(_value, context, style, helper, grid, {\n    drawCellBase\n  }) {\n    var _a, _b;\n\n    const {\n      col,\n      row\n    } = context;\n    const field = grid.getField(col, row);\n    const {\n      timeline,\n      branches\n    } = (_b = this._cache ? (_a = grid[_]) === null || _a === void 0 ? void 0 : _a.get(field) : null) !== null && _b !== void 0 ? _b : calcBranchesInfo(this._start, grid, field);\n    const {\n      upLineIndexKey,\n      downLineIndexKey\n    } = this._start !== \"top\" ? {\n      upLineIndexKey: \"toIndex\",\n      downLineIndexKey: \"fromIndex\"\n    } : {\n      upLineIndexKey: \"fromIndex\",\n      downLineIndexKey: \"toIndex\"\n    };\n    const data = this._start !== \"top\" ? timeline[timeline.length - (row - grid.frozenRowCount) - 1] : timeline[row - grid.frozenRowCount];\n    const {\n      branchColors,\n      branchLineWidth,\n      circleSize,\n      mergeStyle,\n      margin,\n      bgColor\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const rect = context.getRect();\n    const radius = circleSize / 2;\n    const width = rect.width - margin * 2;\n    helper.drawWithClip(context, ctx => {\n      ctx.textAlign = \"left\";\n      ctx.textBaseline = \"middle\";\n      const branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\n      const y = rect.top + rect.height / 2; // draw join lines\n\n      data.map((point, index) => point ? point.lines.map(line => ({\n        colorIndex: line.colorIndex,\n        upLineIndex: line[upLineIndexKey],\n        downLineIndex: line[downLineIndexKey],\n        pointIndex: index\n      })) : []).reduce((p, c) => p.concat(c), []) // flatMap\n      // order of overlap\n      .sort((a, b) => b.colorIndex - a.colorIndex).forEach(line => {\n        const x = branchXPoints[line.pointIndex];\n        renderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\n          margin,\n          branchXPoints,\n          branchLineWidth,\n          branchColors,\n          mergeStyle\n        }, {\n          width,\n          col,\n          row,\n          branches\n        });\n      }); // draw commit points\n\n      data.forEach((p, index) => {\n        if (p && p.commit) {\n          const x = branchXPoints[index];\n          ctx.fillStyle = utils_1.getOrApply(branchColors, branches[index], index);\n          ctx.beginPath();\n          ctx.arc(x, y, radius, 0, Math.PI * 2, true);\n          ctx.fill();\n          ctx.closePath();\n        }\n      }); // draw tags\n\n      data.forEach((p, index) => {\n        if (p && p.tag) {\n          ctx.fillStyle = utils_1.getOrApply(branchColors, branches[index], index);\n          ctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\n        }\n      });\n    });\n  }\n\n}\n\nexports.BranchGraphColumn = BranchGraphColumn;\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseStyle_1 = __webpack_require__(18);\n\nlet defaultStyle;\n\nconst DEFAULT_BRANCH_COLORS = (_name, index) => {\n  switch (index % 3) {\n    case 0:\n      return \"#979797\";\n\n    case 1:\n      return \"#008fb5\";\n\n    case 2:\n      return \"#f1c109\";\n\n    default:\n  }\n\n  return \"#979797\";\n};\n\nclass BranchGraphStyle extends BaseStyle_1.BaseStyle {\n  constructor(style = {}) {\n    super(style);\n    this._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\n    this._margin = style.margin || 4;\n    this._circleSize = style.circleSize || 16;\n    this._branchLineWidth = style.branchLineWidth || 4;\n    this._mergeStyle = style.mergeStyle === \"straight\" ? \"straight\" : \"bezier\";\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new BranchGraphStyle();\n  }\n\n  get branchColors() {\n    return this._branchColors;\n  }\n\n  set branchColors(branchColors) {\n    this._branchColors = branchColors;\n    this.doChangeStyle();\n  }\n\n  get margin() {\n    return this._margin;\n  }\n\n  set margin(margin) {\n    this._margin = margin;\n    this.doChangeStyle();\n  }\n\n  get circleSize() {\n    return this._circleSize;\n  }\n\n  set circleSize(circleSize) {\n    this._circleSize = circleSize;\n    this.doChangeStyle();\n  }\n\n  get branchLineWidth() {\n    return this._branchLineWidth;\n  }\n\n  set branchLineWidth(branchLineWidth) {\n    this._branchLineWidth = branchLineWidth;\n    this.doChangeStyle();\n  }\n\n  get mergeStyle() {\n    return this._mergeStyle;\n  }\n\n  set mergeStyle(mergeStyle) {\n    this._mergeStyle = mergeStyle;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new BranchGraphStyle(this);\n  }\n\n}\n\nexports.BranchGraphStyle = BranchGraphStyle;\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils = __importStar(__webpack_require__(21));\n\nconst ButtonStyle_1 = __webpack_require__(45);\n\nconst Column_1 = __webpack_require__(12);\n\nconst utils_1 = __webpack_require__(0);\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst BUTTON_COLUMN_STATE_ID = symbolManager_1.getButtonColumnStateId();\n\nclass ButtonColumn extends Column_1.Column {\n  constructor(option = {}) {\n    super(option);\n    this._caption = option.caption;\n  }\n\n  get StyleClass() {\n    return ButtonStyle_1.ButtonStyle;\n  }\n\n  get caption() {\n    return this._caption;\n  }\n\n  withCaption(caption) {\n    const c = this.clone();\n    c._caption = caption;\n    return c;\n  }\n\n  clone() {\n    return new ButtonColumn(this);\n  }\n\n  convertInternal(value) {\n    return this._caption || super.convertInternal(value);\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      bgColor,\n      color,\n      buttonBgColor,\n      font,\n      padding,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    helper.testFontLoad(font, value, context);\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    let active = false;\n    const state = grid[BUTTON_COLUMN_STATE_ID];\n\n    if (state) {\n      if (state.mouseActiveCell && utils_1.cellInRange(range, state.mouseActiveCell.col, state.mouseActiveCell.row)) {\n        active = true;\n      } else {\n        const {\n          select\n        } = context.getSelection();\n\n        if (utils_1.cellInRange(range, select.col, select.row)) {\n          active = true;\n        }\n      }\n    }\n\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.button(value, context, {\n        textAlign,\n        textBaseline,\n        bgColor: buttonBgColor,\n        color,\n        font,\n        padding,\n        shadow: active ? {\n          color: \"rgba(0, 0, 0, 0.48)\",\n          blur: 6,\n          offsetY: 3\n        } : {},\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.ButtonColumn = ButtonColumn;\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseColumn_1 = __webpack_require__(7);\n\nconst CheckStyle_1 = __webpack_require__(46);\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst utils_1 = __webpack_require__(0);\n\nconst utils_2 = __webpack_require__(28);\n\nconst CHECK_COLUMN_STATE_ID = symbolManager_1.getCheckColumnStateId();\n\nclass CheckColumn extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return CheckStyle_1.CheckStyle;\n  }\n\n  clone() {\n    return new CheckColumn(this);\n  }\n\n  convertInternal(value) {\n    return utils_2.toBoolean(value);\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase\n  }) {\n    var _a;\n\n    const {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor,\n      bgColor\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const elapsed = (_a = grid[CHECK_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\n    const opt = {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor\n    };\n\n    if (utils_1.isDef(elapsed)) {\n      opt.animElapsedTime = elapsed;\n    }\n\n    helper.checkbox(value, context, opt);\n  }\n\n}\n\nexports.CheckColumn = CheckColumn;\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst icons = __importStar(__webpack_require__(27));\n\nconst Column_1 = __webpack_require__(12);\n\nconst IconStyle_1 = __webpack_require__(47);\n\nfunction repeatArray(val, count) {\n  if (count === Infinity) {\n    count = 0;\n  }\n\n  const a = [];\n\n  for (let i = 0; i < count; i++) {\n    a.push(val);\n  }\n\n  return a;\n}\n\nclass IconColumn extends Column_1.Column {\n  constructor(option = {}) {\n    super(option);\n    this._tagName = option.tagName || \"i\";\n    this._className = option.className;\n    this._content = option.content;\n    this._name = option.name;\n    this._iconWidth = option.iconWidth;\n  }\n\n  get StyleClass() {\n    return IconStyle_1.IconStyle;\n  }\n\n  clone() {\n    return new IconColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, grid, info) {\n    const num = Number(value);\n\n    if (!isNaN(num)) {\n      const icon = {};\n      icons.iconPropKeys.forEach(k => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        icon[k] = style[k];\n      });\n      icon.className = this._className;\n      icon.tagName = this._tagName;\n\n      if (this._content) {\n        icon.content = this._content;\n      }\n\n      icon.name = this._name;\n\n      if (this._iconWidth) {\n        icon.width = this._iconWidth;\n      }\n\n      info.getIcon = () => repeatArray(icon, num);\n    } else {\n      info.getIcon = () => null;\n    }\n\n    super.drawInternal(\"\", context, style, helper, grid, info);\n  }\n\n}\n\nexports.IconColumn = IconColumn;\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseColumn_1 = __webpack_require__(7);\n\nconst ImageStyle_1 = __webpack_require__(48);\n\nconst canvases_1 = __webpack_require__(8);\n\nconst imgs_1 = __webpack_require__(54);\n\nconst MAX_LRU_CACHE_SIZE = 50;\n\nfunction getImage(url) {\n  return imgs_1.getCacheOrLoad(\"ImageColumn\", MAX_LRU_CACHE_SIZE, url);\n}\n\nfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\n  let newWidth = width;\n  let newHeight = height;\n\n  if (newWidth > maxWidth) {\n    newWidth = maxWidth;\n    newHeight = newWidth * height / width;\n  }\n\n  if (newHeight > maxHeight) {\n    newHeight = maxHeight;\n    newWidth = newHeight * width / height;\n  }\n\n  return {\n    width: newWidth,\n    height: newHeight\n  };\n}\n\nclass ImageColumn extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return ImageStyle_1.ImageStyle;\n  }\n\n  onDrawCell(cellValue, info, context, grid) {\n    return super.onDrawCell(getImage(cellValue), info, context, grid);\n  }\n\n  clone() {\n    return new ImageColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase\n  }) {\n    if (value) {\n      const {\n        textAlign,\n        textBaseline,\n        margin,\n        bgColor\n      } = style;\n\n      if (bgColor) {\n        drawCellBase({\n          bgColor\n        });\n      }\n\n      helper.drawWithClip(context, ctx => {\n        ctx.textAlign = textAlign;\n        ctx.textBaseline = textBaseline;\n        const rect = context.getRect();\n\n        if (style.imageSizing === \"keep-aspect-ratio\") {\n          const {\n            width,\n            height\n          } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\n          const pos = canvases_1.calcStartPosition(ctx, rect, width, height, {\n            offset: margin\n          });\n          ctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\n        } else {\n          ctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\n        }\n      });\n    }\n  }\n\n}\n\nexports.ImageColumn = ImageColumn;\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nclass LRUCache {\n  constructor(cacheSize) {\n    this._list = [];\n    this._map = {};\n    this._cacheSize = cacheSize || 50;\n  }\n\n  get(key) {\n    const val = this._map[key];\n\n    if (val) {\n      const list = this._list;\n      const idx = list.indexOf(key);\n      list.splice(idx, 1);\n      list.push(key);\n    }\n\n    return val;\n  }\n\n  put(key, value) {\n    const list = this._list;\n    const map = this._map;\n\n    if (map[key]) {\n      const idx = list.indexOf(key);\n      list.splice(idx, 1);\n    }\n\n    map[key] = value;\n    list.push(key);\n\n    if (list.length > this._cacheSize) {\n      const remKey = list.shift() || \"\";\n      delete map[remKey];\n    }\n  }\n\n}\n\nexports.LRUCache = LRUCache;\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils = __importStar(__webpack_require__(21));\n\nconst BaseColumn_1 = __webpack_require__(7);\n\nconst MenuStyle_1 = __webpack_require__(49);\n\nconst utils_1 = __webpack_require__(0);\n\nconst menu_items_1 = __webpack_require__(55);\n\nclass MenuColumn extends BaseColumn_1.BaseColumn {\n  constructor(option = {}) {\n    super(option);\n    this._options = menu_items_1.normalize(option.options);\n  }\n\n  get StyleClass() {\n    return MenuStyle_1.MenuStyle;\n  }\n\n  clone() {\n    return new MenuColumn(this);\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  withOptions(options) {\n    const c = this.clone();\n    c._options = menu_items_1.normalize(options);\n    return c;\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      font,\n      bgColor,\n      padding,\n      textOverflow,\n      appearance\n    } = style;\n    let {\n      color\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const text = this._convertInternal(value);\n\n    helper.testFontLoad(font, text, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      const basePadding = helper.toBoxPixelArray(padding || 0, context, font);\n      const textPadding = basePadding.slice(0);\n      textPadding[1] += 26; // icon padding\n\n      const iconPadding = basePadding.slice(0);\n      iconPadding[1] += 8;\n\n      if (!utils_1.isDef(color) && (!utils_1.isDef(value) || value === \"\")) {\n        color = \"rgba(0, 0, 0, .38)\";\n      }\n\n      helper.text(text, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding: textPadding,\n        textOverflow,\n        icons\n      });\n\n      if (appearance === \"menulist-button\") {\n        // draw dropdown arrow icon\n        helper.text(\"\", context, {\n          textAlign: \"right\",\n          textBaseline,\n          color,\n          font,\n          icons: [{\n            path: \"M0 2 5 7 10 2z\",\n            width: 10,\n            color: \"rgba(0, 0, 0, .54)\"\n          }],\n          padding: iconPadding\n        });\n      } else if (appearance !== \"none\") {\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        console.warn(`unsupported appearance:${appearance}`);\n      }\n    });\n  }\n\n  convertInternal(value) {\n    return value;\n  }\n\n  _convertInternal(value) {\n    const options = this._options;\n\n    for (let i = 0; i < options.length; i++) {\n      const option = options[i];\n\n      if (option.value === value) {\n        value = option.label;\n        break;\n      }\n    }\n\n    return super.convertInternal(value);\n  }\n\n  getCopyCellValue(value) {\n    return this._convertInternal(value);\n  }\n\n}\n\nexports.MenuColumn = MenuColumn;\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils = __importStar(__webpack_require__(21));\n\nconst BaseColumn_1 = __webpack_require__(7);\n\nconst MultilineTextStyle_1 = __webpack_require__(50);\n\nclass MultilineTextColumn extends BaseColumn_1.BaseColumn {\n  constructor(option = {}) {\n    super(option);\n  }\n\n  get StyleClass() {\n    return MultilineTextStyle_1.MultilineTextStyle;\n  }\n\n  clone() {\n    return new MultilineTextColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase,\n    getIcon\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      padding,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const multilines = value.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n    helper.testFontLoad(font, value, context);\n    utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n      helper.multilineText(multilines, context, {\n        textAlign,\n        textBaseline,\n        color,\n        font,\n        padding,\n        lineHeight,\n        autoWrapText,\n        lineClamp,\n        textOverflow,\n        icons\n      });\n    });\n  }\n\n}\n\nexports.MultilineTextColumn = MultilineTextColumn;\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Column_1 = __webpack_require__(12);\n\nconst NumberStyle_1 = __webpack_require__(51);\n\nlet defaultFotmat;\n\nclass NumberColumn extends Column_1.Column {\n  constructor(option = {}) {\n    super(option);\n    this._format = option.format;\n  }\n\n  static get defaultFotmat() {\n    return defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\n  }\n\n  static set defaultFotmat(fmt) {\n    defaultFotmat = fmt;\n  }\n\n  get StyleClass() {\n    return NumberStyle_1.NumberStyle;\n  }\n\n  clone() {\n    return new NumberColumn(this);\n  }\n\n  get format() {\n    return this._format;\n  }\n\n  withFormat(format) {\n    const c = this.clone();\n    c._format = format;\n    return c;\n  }\n\n  convertInternal(value) {\n    const num = Number(value);\n\n    if (isNaN(num)) {\n      return super.convertInternal(value);\n    }\n\n    const format = this._format || NumberColumn.defaultFotmat;\n    return format.format(num);\n  }\n\n}\n\nexports.NumberColumn = NumberColumn;\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst Column_1 = __webpack_require__(12);\n\nconst PercentCompleteBarStyle_1 = __webpack_require__(52);\n\nconst MARGIN = 2;\n\nclass PercentCompleteBarColumn extends Column_1.Column {\n  constructor(option = {}) {\n    super(option);\n    this._min = option.min || 0;\n    this._max = option.max || this._min + 100;\n\n    this._formatter = option.formatter || (v => v);\n  }\n\n  get StyleClass() {\n    return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\n  }\n\n  clone() {\n    return new PercentCompleteBarColumn(this);\n  }\n\n  drawInternal(value, context, style, helper, grid, info) {\n    super.drawInternal(this._formatter(value), context, style, helper, grid, info);\n    const {\n      barColor,\n      barBgColor,\n      barHeight\n    } = style;\n    let svalue = `${value}`;\n\n    if (utils_1.str.endsWith(svalue, \"%\")) {\n      svalue = svalue.substr(0, svalue.length - 1);\n    }\n\n    const num = Number(svalue);\n\n    if (isNaN(num)) {\n      return;\n    }\n\n    const rate = num < this._min ? 0 : num > this._max ? 1 : (num - this._min) / (this._max - this._min);\n    helper.drawWithClip(context, ctx => {\n      const rect = context.getRect();\n      const barMaxWidth = rect.width - MARGIN * 2 - 1;\n      /**/\n\n      const barTop = rect.bottom - MARGIN - barHeight - 1;\n      /**/\n\n      const barLeft = rect.left + MARGIN;\n      ctx.fillStyle = utils_1.getOrApply(barBgColor, rate * 100) || \"#f0f3f5\";\n      ctx.beginPath();\n      ctx.rect(barLeft, barTop, barMaxWidth, barHeight);\n      ctx.fill();\n      const barSize = Math.min(barMaxWidth * rate, barMaxWidth);\n      ctx.fillStyle = utils_1.getOrApply(barColor, rate * 100) || \"#20a8d8\";\n      ctx.beginPath();\n      ctx.rect(barLeft, barTop, barSize, barHeight);\n      ctx.fill();\n    });\n  }\n\n}\n\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn;\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseColumn_1 = __webpack_require__(7);\n\nconst RadioStyle_1 = __webpack_require__(53);\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst utils_1 = __webpack_require__(0);\n\nconst utils_2 = __webpack_require__(28);\n\nconst RADIO_COLUMN_STATE_ID = symbolManager_1.getRadioColumnStateId();\n\nclass RadioColumn extends BaseColumn_1.BaseColumn {\n  get StyleClass() {\n    return RadioStyle_1.RadioStyle;\n  }\n\n  clone() {\n    return new RadioColumn(this);\n  }\n\n  convertInternal(value) {\n    return utils_2.toBoolean(value);\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase\n  }) {\n    var _a;\n\n    const {\n      textAlign,\n      textBaseline,\n      checkColor,\n      uncheckBorderColor,\n      checkBorderColor,\n      uncheckBgColor,\n      checkBgColor,\n      bgColor\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const elapsed = (_a = grid[RADIO_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\n    const opt = {\n      textAlign,\n      textBaseline,\n      checkColor,\n      uncheckBorderColor,\n      checkBorderColor,\n      uncheckBgColor,\n      checkBgColor\n    };\n\n    if (utils_1.isDef(elapsed)) {\n      opt.animElapsedTime = elapsed;\n    }\n\n    helper.radioButton(value, context, opt);\n  }\n\n}\n\nexports.RadioColumn = RadioColumn;\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst actionBind_1 = __webpack_require__(24);\n\nconst utils_1 = __webpack_require__(0);\n\nconst action_utils_1 = __webpack_require__(9);\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(3);\n\nconst Editor_1 = __webpack_require__(10);\n\nconst animate_1 = __webpack_require__(17);\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst utils_2 = __webpack_require__(28);\n\nconst RADIO_COLUMN_STATE_ID = symbolManager_1.getRadioColumnStateId(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nconst defaultGroupResolver = ({\n  grid,\n  col,\n  row\n}) => {\n  const cellId = grid.getLayoutCellId(col, row);\n  const recordStartRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\n  const offsetRow = row - recordStartRow;\n  const result = [];\n  const {\n    rowCount,\n    recordRowCount\n  } = grid;\n\n  for (let targetRow = grid.frozenRowCount + offsetRow; targetRow < rowCount; targetRow += recordRowCount) {\n    if (grid.getLayoutCellId(col, targetRow) === cellId) {\n      result.push({\n        col,\n        row: targetRow\n      });\n    }\n  }\n\n  return result;\n};\n\nclass RadioEditor extends Editor_1.Editor {\n  constructor(option = {}) {\n    super(option);\n    this._group = option.group || defaultGroupResolver;\n  }\n\n  clone() {\n    return new RadioEditor(this);\n  }\n\n  get group() {\n    return this._group;\n  }\n\n  set group(group) {\n    this._group = group;\n  }\n\n  bindGridEvent(grid, cellId) {\n    let _state = grid[RADIO_COLUMN_STATE_ID];\n\n    if (!_state) {\n      _state = {\n        block: {},\n        elapsed: {}\n      };\n      utils_1.obj.setReadonly(grid, RADIO_COLUMN_STATE_ID, _state);\n    }\n\n    const state = _state;\n\n    const action = cell => {\n      this._action(grid, cell);\n    };\n\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    return [...actionBind_1.bindCellClickAction(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if (action_utils_1.isDisabledRecord(this.disabled, grid, e.row)) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...actionBind_1.bindCellKeyAction(grid, cellId, {\n      action\n    }), // paste value\n    grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, e => {\n      if (e.multi) {\n        // ignore multi cell values\n        return;\n      }\n\n      const selectionRange = grid.selection.range;\n\n      if (!utils_1.cellEquals(selectionRange.start, selectionRange.end)) {\n        // ignore multi paste values\n        return;\n      }\n\n      if (!isTarget(e.col, e.row)) {\n        return;\n      }\n\n      const pasteValue = e.normalizeValue.trim();\n\n      if (!utils_2.toBoolean(pasteValue)) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n      action({\n        col: e.col,\n        row: e.row\n      });\n    })];\n  }\n\n  onPasteCellRangeBox(grid, cell, value) {\n    if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n      return;\n    }\n\n    const pasteValue = value.trim();\n\n    if (!utils_2.toBoolean(pasteValue)) {\n      return;\n    }\n\n    this._action(grid, {\n      col: cell.col,\n      row: cell.row\n    });\n  }\n\n  onDeleteCellRangeBox() {// noop\n  }\n\n  _action(grid, cell) {\n    const state = grid[RADIO_COLUMN_STATE_ID];\n    const range = grid.getCellRange(cell.col, cell.row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n\n    if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row) || state.block[cellKey]) {\n      return;\n    }\n\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      if (utils_2.toBoolean(value)) {\n        return;\n      }\n\n      const targets = this._group({\n        grid,\n        col: cell.col,\n        row: cell.row\n      });\n\n      targets.forEach(({\n        col,\n        row\n      }) => {\n        const range = grid.getCellRange(col, row);\n        const cellKey = `${range.start.col}:${range.start.row}`;\n\n        if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) || action_utils_1.isDisabledRecord(this.disabled, grid, cell.row) || state.block[cellKey]) {\n          return;\n        }\n\n        actionCell(grid, col, row, col === cell.col && row === cell.row);\n      });\n    });\n  }\n\n}\n\nexports.RadioEditor = RadioEditor;\n\nfunction actionCell(grid, col, row, flag) {\n  grid.doGetCellValue(col, row, value => {\n    if (utils_2.toBoolean(value) === flag) {\n      return;\n    }\n\n    const state = grid[RADIO_COLUMN_STATE_ID];\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const ret = grid.doChangeValue(col, row, action_utils_1.toggleValue);\n\n    if (ret) {\n      const onChange = () => {\n        // checkbox animation\n        animate_1.animate(200, point => {\n          if (point === 1) {\n            delete state.elapsed[cellKey];\n          } else {\n            state.elapsed[cellKey] = point;\n          }\n\n          grid.invalidateCellRange(range);\n        });\n      };\n\n      if (utils_1.isPromise(ret)) {\n        state.block[cellKey] = true;\n        ret.then(() => {\n          delete state.block[cellKey];\n          onChange();\n        });\n      } else {\n        onChange();\n      }\n    }\n  });\n}\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseInputEditor_1 = __webpack_require__(42);\n\nconst SmallDialogInputElement_1 = __webpack_require__(103);\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst utils_1 = __webpack_require__(0);\n\nconst _ = symbolManager_1.getSmallDialogInputEditorStateId();\n\nfunction getState(grid) {\n  let state = grid[_];\n\n  if (!state) {\n    state = {};\n    utils_1.obj.setReadonly(grid, _, state);\n  }\n\n  return state;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nlet globalElement = null;\nlet bindGridCount = 0;\n\nfunction attachInput(grid, cell, editor, value) {\n  const state = getState(grid);\n\n  if (!globalElement) {\n    globalElement = new SmallDialogInputElement_1.SmallDialogInputElement();\n  }\n\n  if (!state.element) {\n    state.element = globalElement;\n    bindGridCount++;\n    grid.addDisposable({\n      dispose() {\n        bindGridCount--;\n\n        if (!bindGridCount) {\n          globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n          globalElement = null;\n          state.element = null;\n        }\n      }\n\n    });\n  }\n\n  globalElement.attach(grid, editor, cell.col, cell.row, value);\n}\n\nfunction detachInput(gridFocus) {\n  if (globalElement) {\n    globalElement.detach(gridFocus);\n  }\n}\n\nclass SmallDialogInputEditor extends BaseInputEditor_1.BaseInputEditor {\n  constructor(option = {}) {\n    super(option);\n    this._helperText = option.helperText;\n    this._inputValidator = option.inputValidator;\n    this._validator = option.validator;\n    this._classList = option.classList;\n    this._type = option.type;\n  }\n\n  dispose() {//noop\n  }\n\n  get classList() {\n    if (!this._classList) {\n      return undefined;\n    }\n\n    return Array.isArray(this._classList) ? this._classList : [this._classList];\n  }\n\n  set classList(classList) {\n    this._classList = classList;\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  set type(type) {\n    this._type = type;\n  }\n\n  get helperText() {\n    return this._helperText;\n  }\n\n  get inputValidator() {\n    return this._inputValidator;\n  }\n\n  get validator() {\n    return this._validator;\n  }\n\n  clone() {\n    return new SmallDialogInputEditor(this);\n  }\n\n  onInputCellInternal(grid, cell, inputValue) {\n    attachInput(grid, cell, this, inputValue);\n  }\n\n  onOpenCellInternal(grid, cell) {\n    grid.doGetCellValue(cell.col, cell.row, value => {\n      attachInput(grid, cell, this, value);\n    });\n  }\n\n  onChangeSelectCellInternal(_grid, _cell, _selected) {\n    // cancel input\n    detachInput();\n  }\n\n  onGridScrollInternal(_grid) {\n    // cancel input\n    detachInput(true);\n  }\n\n  onChangeDisabledInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onChangeReadOnlyInternal() {\n    // cancel input\n    detachInput(true);\n  }\n\n  onSetInputAttrsInternal(grid, _cell, input) {\n    SmallDialogInputElement_1.SmallDialogInputElement.setInputAttrs(this, grid, input);\n  }\n\n}\n\nexports.SmallDialogInputEditor = SmallDialogInputEditor;\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst EventHandler_1 = __webpack_require__(2);\n\nconst dom_1 = __webpack_require__(11);\n\nconst input_value_handler_1 = __webpack_require__(43);\n\nconst CLASSNAME = \"cheetah-grid__small-dialog-input\";\nconst INPUT_CLASSNAME = `${CLASSNAME}__input`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\nconst KEY_ENTER = 13;\nconst KEY_ESC = 27;\n\nfunction _focus(input, handler) {\n  const focus = () => {\n    input.focus();\n    const end = input.value.length;\n\n    try {\n      if (typeof input.selectionStart !== \"undefined\") {\n        input.selectionStart = end;\n        input.selectionEnd = end;\n        return;\n      }\n    } catch (e) {} //ignore\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (document.selection) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const range = input.createTextRange();\n      range.collapse();\n      range.moveEnd(\"character\", end);\n      range.moveStart(\"character\", end);\n      range.select();\n    }\n  };\n\n  handler.tryWithOffEvents(input, \"blur\", () => {\n    focus();\n  });\n}\n\nfunction createDialogElement() {\n  __webpack_require__(104);\n\n  const element = dom_1.createElement(\"div\", {\n    classList: [CLASSNAME, HIDDEN_CLASSNAME]\n  });\n  const input = dom_1.createElement(\"input\", {\n    classList: INPUT_CLASSNAME\n  });\n  input.readOnly = true;\n  input.tabIndex = -1;\n  element.appendChild(input);\n  return element;\n}\n\nfunction bindProps(grid, dialog, input, editor) {\n  const {\n    classList,\n    helperText\n  } = editor;\n\n  if (classList) {\n    dialog.classList.add(...classList);\n  }\n\n  if (helperText && typeof helperText !== \"function\") {\n    dialog.dataset.helperText = helperText;\n  }\n\n  setInputAttrs(editor, grid, input);\n}\n\nfunction unbindProps(_grid, dialog, input, editor) {\n  const {\n    classList\n  } = editor;\n\n  if (classList) {\n    dialog.classList.remove(...classList);\n  }\n\n  delete dialog.dataset.helperText;\n  input.type = \"\";\n}\n\nfunction setInputAttrs(editor, _grid, input) {\n  const {\n    type\n  } = editor;\n  input.type = type || \"\";\n}\n\nclass SmallDialogInputElement {\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    this._dialog = createDialogElement();\n    this._input = this._dialog.querySelector(`.${INPUT_CLASSNAME}`);\n\n    this._bindDialogEvents();\n  }\n\n  static setInputAttrs(editor, grid, input) {\n    setInputAttrs(editor, grid, input);\n  }\n\n  dispose() {\n    const dialog = this._dialog;\n    this.detach();\n\n    this._handler.dispose();\n\n    delete this._dialog;\n    delete this._input;\n    this._beforePropEditor = null;\n\n    if (dialog.parentElement) {\n      dialog.parentElement.removeChild(dialog);\n    }\n  }\n\n  attach(grid, editor, col, row, value) {\n    const handler = this._handler;\n    const dialog = this._dialog;\n    const input = this._input;\n\n    if (this._beforePropEditor) {\n      unbindProps(grid, dialog, input, this._beforePropEditor);\n    }\n\n    delete dialog.dataset.errorMessage;\n    dialog.classList.remove(SHOWN_CLASSNAME);\n    dialog.classList.add(HIDDEN_CLASSNAME);\n    input.readOnly = true;\n    input.tabIndex = 0;\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    dialog.style.top = `${rect.top.toFixed()}px`;\n    dialog.style.left = `${rect.left.toFixed()}px`;\n    dialog.style.width = `${rect.width.toFixed()}px`;\n    input.style.height = `${rect.height.toFixed()}px`;\n    element.appendChild(dialog);\n    input_value_handler_1.setInputValue(input, value);\n    input.style.font = grid.font || \"16px sans-serif\";\n    const activeData = {\n      grid,\n      col,\n      row,\n      editor\n    };\n\n    this._onInputValue(input, activeData);\n\n    if (!utils_1.browser.IE) {\n      _focus(input, handler);\n    } else {\n      // On the paste-event on IE, since it may not be focused, it will be delayed and focused.\n      setTimeout(() => _focus(input, handler));\n    }\n\n    dialog.classList.add(SHOWN_CLASSNAME);\n    dialog.classList.remove(HIDDEN_CLASSNAME);\n    input.readOnly = false;\n    bindProps(grid, dialog, input, editor);\n    this._activeData = activeData;\n    this._beforePropEditor = editor;\n    this._attaching = true;\n    setTimeout(() => {\n      delete this._attaching;\n    });\n  }\n\n  detach(gridFocus) {\n    if (this._isActive()) {\n      const dialog = this._dialog;\n      const input = this._input;\n      dialog.classList.remove(SHOWN_CLASSNAME);\n      dialog.classList.add(HIDDEN_CLASSNAME);\n      input.readOnly = true;\n      input.tabIndex = -1;\n      const {\n        grid,\n        col,\n        row\n      } = this._activeData;\n      const range = grid.getCellRange(col, row);\n      grid.invalidateCellRange(range);\n\n      if (gridFocus) {\n        grid.focus();\n      }\n    }\n\n    this._activeData = null;\n    this._beforeValue = null;\n  }\n\n  _doChangeValue() {\n    if (!this._isActive()) {\n      return false;\n    }\n\n    const input = this._input;\n    const {\n      value\n    } = input;\n    return utils_1.then(this._validate(value), res => {\n      if (res && value === input.value) {\n        const {\n          grid,\n          col,\n          row\n        } = this._activeData;\n        grid.doChangeValue(col, row, () => value);\n        return true;\n      }\n\n      return false;\n    });\n  }\n\n  _isActive() {\n    const dialog = this._dialog;\n\n    if (!dialog || !dialog.parentElement) {\n      return false;\n    }\n\n    if (!this._activeData) {\n      return false;\n    }\n\n    return true;\n  }\n\n  _bindDialogEvents() {\n    const handler = this._handler;\n    const dialog = this._dialog;\n    const input = this._input;\n\n    const stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\n    handler.on(dialog, \"click\", stopPropagationOnly);\n    handler.on(dialog, \"dblclick\", stopPropagationOnly);\n    handler.on(dialog, \"mousedown\", stopPropagationOnly);\n    handler.on(dialog, \"touchstart\", stopPropagationOnly);\n    handler.on(input, \"compositionstart\", _e => {\n      input.classList.add(\"composition\");\n    });\n    handler.on(input, \"compositionend\", _e => {\n      input.classList.remove(\"composition\");\n\n      this._onInputValue(input);\n    });\n\n    const onKeyupAndPress = _e => {\n      if (input.classList.contains(\"composition\")) {\n        return;\n      }\n\n      this._onInputValue(input);\n    };\n\n    handler.on(input, \"keyup\", onKeyupAndPress);\n    handler.on(input, \"keypress\", onKeyupAndPress);\n    handler.on(input, \"keydown\", e => {\n      if (input.classList.contains(\"composition\")) {\n        return;\n      }\n\n      const keyCode = utils_1.event.getKeyCode(e);\n\n      if (keyCode === KEY_ESC) {\n        this.detach(true);\n        utils_1.event.cancel(e);\n      } else if (keyCode === KEY_ENTER) {\n        this._onKeydownEnter(e);\n      } else {\n        this._onInputValue(input);\n      }\n    });\n  }\n\n  _onKeydownEnter(e) {\n    if (this._attaching) {\n      return;\n    }\n\n    const input = this._input;\n    const {\n      value\n    } = input;\n    utils_1.then(this._doChangeValue(), r => {\n      var _a;\n\n      if (r && value === input.value) {\n        const grid = this._isActive() ? this._activeData.grid : null;\n        this.detach(true);\n\n        if ((_a = grid === null || grid === void 0 ? void 0 : grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n          grid.onKeyDownMove(e);\n        }\n      }\n    });\n    utils_1.event.cancel(e);\n  }\n\n  _onInputValue(input, activeData) {\n    const before = this._beforeValue;\n    const {\n      value\n    } = input;\n\n    if (before !== value) {\n      this._onInputValueChange(value, activeData);\n    }\n\n    this._beforeValue = value;\n  }\n\n  _onInputValueChange(after, activeData) {\n    activeData = activeData || this._activeData;\n    const dialog = this._dialog;\n    const {\n      grid,\n      col,\n      row,\n      editor\n    } = activeData;\n\n    if (typeof editor.helperText === \"function\") {\n      const helperText = editor.helperText(after, {\n        grid,\n        col,\n        row\n      });\n\n      if (helperText) {\n        dialog.dataset.helperText = helperText;\n      } else {\n        delete dialog.dataset.helperText;\n      }\n    }\n\n    if (\"errorMessage\" in dialog.dataset) {\n      this._validate(after, true);\n    }\n  }\n\n  _validate(value, inputOnly) {\n    const dialog = this._dialog;\n    const input = this._input;\n    const {\n      grid,\n      col,\n      row,\n      editor\n    } = this._activeData;\n    let message = \"\";\n\n    if (editor.inputValidator) {\n      message = editor.inputValidator(value, {\n        grid,\n        col,\n        row\n      });\n    }\n\n    return utils_1.then(message, message => {\n      if (!message && editor.validator && !inputOnly) {\n        message = editor.validator(value, {\n          grid,\n          col,\n          row\n        });\n      }\n\n      return utils_1.then(message, message => {\n        if (message && value === input.value) {\n          dialog.dataset.errorMessage = message;\n        } else {\n          delete dialog.dataset.errorMessage;\n        }\n\n        return !message;\n      });\n    });\n  }\n\n}\n\nexports.SmallDialogInputElement = SmallDialogInputElement;\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(105);\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(5)(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(4)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"/* ms */\\n.cheetah-grid__small-dialog-input__input::-ms-clear {\\n\\tvisibility: hidden;\\n}\\n\\n@keyframes cheetah-grid__small-dialog-input--hidden-animation {\\n\\t0% {\\n\\t\\topacity: 1;\\n\\t}\\n\\t99% {\\n\\t\\topacity: 1;\\n\\t}\\n\\t100% {\\n\\t\\topacity: 0;\\n\\t}\\n}\\n.cheetah-grid__small-dialog-input {\\n\\tposition: absolute;\\n\\tbox-sizing: content-box;\\n\\tmargin: -1px auto auto -1px;\\n\\tborder-radius: 3px;\\n\\tbackground-color: #fafafa;\\n\\ttransition: padding 150ms ease-out, box-shadow 150ms ease-out;\\n}\\n.cheetah-grid__small-dialog-input--hidden {\\n\\tbox-shadow: none;\\n\\tpadding: 0;\\n\\tpointer-events: none;\\n\\tanimation: cheetah-grid__small-dialog-input--hidden-animation  150ms ease-out;\\n\\topacity: 0;\\n}\\n.cheetah-grid__small-dialog-input--shown {\\n\\tbox-shadow: 0 3px 1px -2px rgba(0, 0, 0, .2), 0 2px 2px 0 rgba(0, 0, 0, .14), 0 1px 5px 0 rgba(0, 0, 0, .12);\\n\\tpadding: 8px 24px;\\n}\\n.cheetah-grid__small-dialog-input__input {\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\tbox-sizing: border-box;\\n\\tpadding: 3px 2px 0 4px;\\n\\tborder: none;\\n\\tborder-bottom: solid 1px rgba(0, 0, 0, .87);\\n\\toutline: none;\\n\\tbackground-color: transparent;\\n\\ttransition: all 300ms ease-out;\\n}\\n.cheetah-grid__small-dialog-input__input:focus {\\n\\tborder-bottom: solid 1px #2196f3;\\n\\tbox-shadow: 0 1px 0 0 #2196f3;\\n}\\n.cheetah-grid__small-dialog-input::after {\\n\\tcontent: '';\\n\\tfont-family: Roboto;\\n\\tfont-size: 12px;\\n\\tfont-size: .75rem;\\n\\tmin-height: 1em;\\n\\tline-height: 1;\\n\\tdisplay: block;\\n\\twidth: 100%;\\n\\tpadding-top: 8px;\\n}\\n.cheetah-grid__small-dialog-input.helper-text--right-justified::after {\\n\\ttext-align: right;\\n}\\n.cheetah-grid__small-dialog-input[data-helper-text]::after {\\n\\tcontent: attr(data-helper-text);\\n\\tcolor: rgba(0, 0, 0, .87);\\n}\\n.cheetah-grid__small-dialog-input[data-error-message] input {\\n\\tborder-bottom: solid 1px #ff1744;\\n\\tbox-shadow: 0 1px 0 0 #ff1744;\\n}\\n.cheetah-grid__small-dialog-input[data-error-message]::after {\\n\\tcontent: attr(data-error-message);\\n\\tcolor: #ff1744;\\n\\ttext-align: left;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst DrawGrid_1 = __webpack_require__(56);\n\nexports.DrawGrid = DrawGrid_1.DrawGrid;\n\nconst DG_EVENT_TYPE_1 = __webpack_require__(3);\n\nexports.EVENT_TYPE = DG_EVENT_TYPE_1.DG_EVENT_TYPE;\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst EventHandler_1 = __webpack_require__(2);\n\nconst utils_1 = __webpack_require__(0);\n\nconst handler = new EventHandler_1.EventHandler();\nlet ratio = 1;\n\nfunction setRatio() {\n  if (utils_1.isNode) {\n    ratio = 1;\n  } else {\n    ratio = Math.ceil(window.devicePixelRatio || 1);\n\n    if (ratio > 1 && ratio % 2 !== 0) {\n      ratio += 1;\n    }\n  }\n}\n\nsetRatio();\n\nif (!utils_1.isNode) {\n  handler.on(window, \"resize\", setRatio);\n}\n\nfunction transform(canvas) {\n  const ctx = canvas.getContext(\"2d\");\n  const {\n    getAttribute,\n    setAttribute\n  } = canvas;\n\n  canvas.getAttribute = function (name) {\n    let result = getAttribute.call(this, name);\n\n    if (name === \"width\" || name === \"height\") {\n      result = `${Number(result) / ratio}`;\n    }\n\n    return result;\n  };\n\n  canvas.setAttribute = function (name, val) {\n    const wh = name === \"width\" || name === \"height\";\n\n    if (wh) {\n      val = `${Number(val) * ratio}`;\n    }\n\n    const result = setAttribute.call(this, name, val);\n\n    if (wh) {\n      ctx.scale(ratio, ratio);\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(canvas, \"width\", {\n    get() {\n      return Number(canvas.getAttribute(\"width\"));\n    },\n\n    set: val => {\n      canvas.setAttribute(\"width\", `${Math.floor(val)}`);\n    },\n    configurable: true,\n    enumerable: true\n  });\n  Object.defineProperty(canvas, \"height\", {\n    get() {\n      return Number(canvas.getAttribute(\"height\"));\n    },\n\n    set: val => {\n      canvas.setAttribute(\"height\", `${Math.floor(val)}`);\n    },\n    configurable: true,\n    enumerable: true\n  });\n  const {\n    drawImage\n  } = ctx; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  ctx.drawImage = function (img, ...args) {\n    if (img !== canvas || ratio === 1) {\n      return drawImage.call(this, img, ...args);\n    }\n\n    this.save();\n\n    try {\n      this.scale(1 / ratio, 1 / ratio);\n\n      if (args.length > 4) {\n        args[4] *= ratio;\n        args[5] *= ratio;\n      } else {\n        args[0] *= ratio;\n        args[1] *= ratio;\n      }\n\n      return drawImage.call(this, img, ...args);\n    } finally {\n      this.restore();\n    }\n  };\n\n  return canvas;\n}\n\nexports.transform = transform;\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(109);\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(5)(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(4)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"/**\\n * core styles\\n */\\n.cheetah-grid .grid-scrollable {\\n\\theight: 100%;\\n\\twidth: 100%;\\n\\tposition: absolute;\\n\\toverflow: scroll;\\n}\\n.cheetah-grid .grid-scroll-end-point {\\n\\topacity: 0;\\n\\tposition: relative;\\n}\\n.cheetah-grid {\\n\\tposition: relative;\\n\\twidth: 100%;\\n\\theight: 100%;\\n}\\n.cheetah-grid > canvas {\\n\\tposition: absolute;\\n\\twidth: 0;\\n\\theight: 0;\\n}\\n.cheetah-grid .grid-focus-control {\\n\\tposition: relative !important;\\n\\twidth: 1px;\\n\\theight: 1px;\\n\\topacity: 0;\\n\\tpadding: 0;\\n\\tmargin: 0;\\n\\tbox-sizing: border-box;\\n\\tpointer-events: none;\\n\\tmax-width: 0;\\n\\tmax-height: 0;\\n\\tfloat: none !important;\\n}\\n.cheetah-grid input.grid-focus-control::-ms-clear {\\n\\tvisibility: hidden;\\n}\\n.cheetah-grid input.grid-focus-control.composition {\\n\\topacity: 1;\\n\\tmax-width: none;\\n\\tmax-height: none;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 110 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst indexFirst = (arr, elm) => {\n  let low = 0;\n  let high = arr.length - 1;\n\n  while (low <= high) {\n    const i = Math.floor((low + high) / 2);\n\n    if (arr[i] === elm) {\n      return i;\n    } else if (arr[i] > elm) {\n      high = i - 1;\n    } else {\n      low = i + 1;\n    }\n  }\n\n  return high < 0 ? 0 : high;\n};\n\nclass NumberMap {\n  constructor() {\n    this._keys = [];\n    this._vals = {};\n    this._sorted = false;\n  }\n\n  put(key, value) {\n    if (!(key in this._vals)) {\n      this._keys.push(key);\n\n      this._sorted = false;\n    }\n\n    this._vals[key] = value;\n  }\n\n  get(key) {\n    return this._vals[key];\n  }\n\n  has(key) {\n    return this._vals[key] != null;\n  }\n\n  each(keyFrom, keyTo, fn) {\n    const {\n      _keys: keys\n    } = this;\n    const {\n      length\n    } = keys;\n\n    if (!this._sorted) {\n      keys.sort((a, b) => {\n        if (a < b) {\n          return -1;\n        }\n\n        if (a > b) {\n          return 1;\n        }\n\n        return 0;\n      });\n      this._sorted = true;\n    }\n\n    for (let i = indexFirst(keys, keyFrom); i < length; i++) {\n      const key = keys[i];\n\n      if (keyFrom <= key && key <= keyTo) {\n        fn(this.get(key), key);\n      } else if (keyTo < key) {\n        return;\n      }\n    }\n  }\n\n}\n\nexports.NumberMap = NumberMap;\n\n/***/ }),\n/* 111 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst style = __importStar(__webpack_require__(57));\n\nconst EventHandler_1 = __webpack_require__(2);\n\nconst utils_1 = __webpack_require__(0);\n\nconst MAX_SCROLL = utils_1.browser.heightLimit - 1000;\n\nclass Scrollable {\n  constructor() {\n    this._p = 1;\n    this._handler = new EventHandler_1.EventHandler();\n    this._scrollable = document.createElement(\"div\");\n\n    this._scrollable.classList.add(\"grid-scrollable\");\n\n    this._height = 0;\n    this._width = 0;\n    this._endPointElement = document.createElement(\"div\");\n\n    this._endPointElement.classList.add(\"grid-scroll-end-point\");\n\n    this._update();\n\n    this._scrollable.appendChild(this._endPointElement); // const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\n    // this._handler.on(this._scrollable, mousewheelevt, (evt) => {\n    // const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\n    // const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\n    // this.scrollTop += delta < 0 ? point : -point;\n    // });\n\n  }\n\n  calcTop(top) {\n    const relativeTop = top - this.scrollTop;\n    return this._scrollable.scrollTop + relativeTop;\n  }\n\n  getElement() {\n    return this._scrollable;\n  }\n\n  setScrollSize(width, height) {\n    this._width = width;\n    this._height = height;\n\n    this._update();\n  }\n\n  get scrollWidth() {\n    return this._width;\n  }\n\n  set scrollWidth(width) {\n    this._width = width;\n\n    this._update();\n  }\n\n  get scrollHeight() {\n    return this._height;\n  }\n\n  set scrollHeight(height) {\n    this._height = height;\n\n    this._update();\n  }\n\n  get scrollLeft() {\n    return Math.max(Math.ceil(this._scrollable.scrollLeft), 0);\n  }\n\n  set scrollLeft(scrollLeft) {\n    this._scrollable.scrollLeft = scrollLeft;\n  }\n\n  get scrollTop() {\n    return Math.max(Math.ceil(this._scrollable.scrollTop / this._p), 0);\n  }\n\n  set scrollTop(scrollTop) {\n    this._scrollable.scrollTop = scrollTop * this._p;\n  }\n\n  onScroll(fn) {\n    this._handler.on(this._scrollable, \"scroll\", fn);\n  }\n\n  dispose() {\n    this._handler.dispose();\n  }\n\n  _update() {\n    let domHeight;\n\n    if (this._height > MAX_SCROLL) {\n      const sbSize = style.getScrollBarSize();\n      const {\n        offsetHeight\n      } = this._scrollable;\n      const vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\n      const rScrollRange = this._height - offsetHeight + sbSize;\n      this._p = vScrollRange / rScrollRange;\n      domHeight = MAX_SCROLL;\n    } else {\n      this._p = 1;\n      domHeight = this._height;\n    }\n\n    this._endPointElement.style.top = `${domHeight.toFixed()}px`;\n    this._endPointElement.style.left = `${this._width.toFixed()}px`;\n  }\n\n}\n\nexports.Scrollable = Scrollable;\n\n/***/ }),\n/* 112 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst DataSource_1 = __webpack_require__(30);\n/** @private */\n\n\nfunction _setFieldCache( // eslint-disable-next-line @typescript-eslint/no-explicit-any\nfCache, index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n  const recCache = fCache[index] || (fCache[index] = new Map());\n  recCache.set(field, value);\n}\n/**\n * grid data source for caching Promise data\n *\n * @classdesc cheetahGrid.data.CachedDataSource\n * @memberof cheetahGrid.data\n */\n\n\nclass CachedDataSource extends DataSource_1.DataSource {\n  constructor(opt) {\n    super(opt);\n    this._rCache = {};\n    this._fCache = {};\n  }\n\n  static get EVENT_TYPE() {\n    return DataSource_1.DataSource.EVENT_TYPE;\n  }\n\n  static ofArray(array) {\n    return new CachedDataSource({\n      get: index => array[index],\n      length: array.length,\n      source: array\n    });\n  }\n\n  getOriginal(index) {\n    if (this._rCache && this._rCache[index]) {\n      return this._rCache[index];\n    }\n\n    return super.getOriginal(index);\n  }\n\n  getOriginalField(index, field) {\n    const rowCache = this._fCache && this._fCache[index];\n\n    if (rowCache) {\n      const cache = rowCache.get(field);\n\n      if (cache) {\n        return cache;\n      }\n    }\n\n    return super.getOriginalField(index, field);\n  }\n\n  setOriginalField(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    const fCache = this._fCache;\n\n    if (fCache && fCache[index]) {\n      delete fCache[index]; // clear row cache\n    }\n\n    return super.setOriginalField(index, field, value);\n  }\n\n  clearCache() {\n    if (this._rCache) {\n      this._rCache = {};\n    }\n\n    if (this._fCache) {\n      this._fCache = {};\n    }\n  }\n\n  fieldPromiseCallBackInternal(index, field, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value) {\n    _setFieldCache(this._fCache, index, field, value);\n  }\n\n  recordPromiseCallBackInternal(index, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  record) {\n    this._rCache[index] = record;\n  }\n\n  dispose() {\n    super.dispose();\n  }\n\n}\n\nexports.CachedDataSource = CachedDataSource;\n\n/***/ }),\n/* 113 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst DataSource_1 = __webpack_require__(30);\n\nconst EventHandler_1 = __webpack_require__(2);\n/** @private */\n\n\nclass DataSourceIterator {\n  constructor(dataSource) {\n    this._dataSource = dataSource;\n    this._curIndex = -1;\n    this._data = [];\n  }\n\n  hasNext() {\n    const next = this._curIndex + 1;\n    return this._dataSource.length > next;\n  }\n\n  next() {\n    const next = this._curIndex + 1;\n\n    const data = this._getIndexData(next);\n\n    this._curIndex = next;\n    return data;\n  }\n\n  movePrev() {\n    this._curIndex--;\n  }\n\n  _getIndexData(index, nest) {\n    const dataSource = this._dataSource;\n    const data = this._data;\n\n    if (index < data.length) {\n      return data[index];\n    }\n\n    if (dataSource.length <= index) {\n      return undefined;\n    }\n\n    const record = this._dataSource.get(index);\n\n    data[index] = record;\n\n    if (utils_1.isPromise(record)) {\n      record.then(val => {\n        data[index] = val;\n      });\n\n      if (!nest) {\n        for (let i = 1; i <= 100; i++) {\n          this._getIndexData(index + i, true);\n        }\n      }\n    }\n\n    return record;\n  }\n\n}\n/** @private */\n\n\nclass FilterData {\n  constructor(dc, original, filter) {\n    this._cancel = false;\n    this._owner = dc;\n    this._dataSourceItr = new DataSourceIterator(original);\n    this._filter = filter;\n    this._filterdList = [];\n    this._queues = [];\n  }\n\n  get(index) {\n    if (this._cancel) {\n      return undefined;\n    }\n\n    const filterdList = this._filterdList;\n\n    if (index < filterdList.length) {\n      return filterdList[index];\n    }\n\n    const queues = this._queues;\n    const indexQueue = queues[index];\n\n    if (indexQueue) {\n      return indexQueue;\n    }\n\n    return queues[index] || this._findIndex(index);\n  }\n\n  cancel() {\n    this._cancel = true;\n  }\n\n  _findIndex(index) {\n    if (window.Promise) {\n      const timeout = Date.now() + 100;\n      let count = 0;\n      return this._findIndexWithTimeout(index, () => {\n        count++;\n\n        if (count >= 100) {\n          count = 0;\n          return timeout < Date.now();\n        }\n\n        return false;\n      });\n    }\n\n    return this._findIndexWithTimeout(index, () => false);\n  }\n\n  _findIndexWithTimeout(index, testTimeout) {\n    const filterdList = this._filterdList;\n    const filter = this._filter;\n    const dataSourceItr = this._dataSourceItr;\n    const queues = this._queues;\n\n    while (dataSourceItr.hasNext()) {\n      if (this._cancel) {\n        return undefined;\n      }\n\n      const record = dataSourceItr.next();\n\n      if (utils_1.isPromise(record)) {\n        dataSourceItr.movePrev();\n        const queue = record.then(_value => {\n          queues[index] = null;\n          return this.get(index);\n        });\n        queues[index] = queue;\n        return queue;\n      }\n\n      if (filter(record)) {\n        filterdList.push(record);\n\n        if (index < filterdList.length) {\n          return filterdList[index];\n        }\n      }\n\n      if (testTimeout()) {\n        const promise = new Promise(resolve => {\n          setTimeout(() => {\n            resolve();\n          }, 300);\n        });\n        const queue = promise.then(() => {\n          queues[index] = null;\n          return this.get(index);\n        });\n        queues[index] = queue;\n        return queue;\n      }\n    }\n\n    const dc = this._owner;\n    dc.length = filterdList.length;\n    return undefined;\n  }\n\n}\n/**\n * grid data source for filter\n *\n * @classdesc cheetahGrid.data.FilterDataSource\n * @memberof cheetahGrid.data\n */\n\n\nclass FilterDataSource extends DataSource_1.DataSource {\n  constructor(dataSource, filter) {\n    super(dataSource);\n    this._filterData = null;\n    this._dataSource = dataSource;\n    this.filter = filter;\n    const handler = this._handler = new EventHandler_1.EventHandler();\n    handler.on(dataSource, DataSource_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\n      // reset\n      // eslint-disable-next-line no-self-assign\n      this.filter = this.filter;\n    });\n    utils_1.each(DataSource_1.DataSource.EVENT_TYPE, type => {\n      handler.on(dataSource, type, (...args) => this.fireListeners(type, ...args));\n    });\n  }\n\n  static get EVENT_TYPE() {\n    return DataSource_1.DataSource.EVENT_TYPE;\n  }\n\n  get filter() {\n    var _a;\n\n    return ((_a = this._filterData) === null || _a === void 0 ? void 0 : _a._filter) || null;\n  }\n\n  set filter(filter) {\n    if (this._filterData) {\n      this._filterData.cancel();\n    }\n\n    this._filterData = filter ? new FilterData(this, this._dataSource, filter) : null;\n    this.length = this._dataSource.length;\n  }\n\n  getOriginal(index) {\n    if (!this._filterData) {\n      return super.getOriginal(index);\n    }\n\n    return this._filterData.get(index);\n  }\n\n  sort(field, order) {\n    return this._dataSource.sort(field, order);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  get source() {\n    return this._dataSource.source;\n  }\n\n  get dataSource() {\n    return this._dataSource;\n  }\n\n  dispose() {\n    this._handler.dispose();\n\n    super.dispose();\n  }\n\n}\n\nexports.FilterDataSource = FilterDataSource;\n\n/***/ }),\n/* 114 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst action = __importStar(__webpack_require__(31));\n\nexports.action = action;\n\nconst style = __importStar(__webpack_require__(33));\n\nexports.style = style;\n\nconst type = __importStar(__webpack_require__(23));\n\nexports.type = type;\n\n/***/ }),\n/* 115 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst actionBind_1 = __webpack_require__(61);\n\nconst BaseAction_1 = __webpack_require__(32);\n\nconst animate_1 = __webpack_require__(17);\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst utils_1 = __webpack_require__(0);\n\nconst CHECK_HEADER_STATE_ID = symbolManager_1.getCheckHeaderStateId();\n\nfunction getState(grid) {\n  let state = grid[CHECK_HEADER_STATE_ID];\n\n  if (!state) {\n    state = {\n      elapsed: {},\n      block: {}\n    };\n    utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\n  }\n\n  return state;\n}\n\nclass CheckHeaderAction extends BaseAction_1.BaseAction {\n  clone() {\n    return new CheckHeaderAction(this);\n  }\n\n  bindGridEvent(grid, cellId) {\n    const state = getState(grid);\n\n    const action = ({\n      col,\n      row\n    }) => {\n      const range = grid.getCellRange(col, row);\n      const cellKey = `${range.start.col}:${range.start.row}`;\n\n      if (this.disabled || state.block[cellKey]) {\n        return;\n      }\n\n      const checked = grid.getHeaderValue(range.start.col, range.start.row);\n      grid.setHeaderValue(range.start.col, range.start.row, !checked);\n\n      const onChange = () => {\n        // checkbox animation\n        animate_1.animate(200, point => {\n          if (point === 1) {\n            delete state.elapsed[cellKey];\n          } else {\n            state.elapsed[cellKey] = point;\n          }\n\n          grid.invalidateCellRange(range);\n        });\n      };\n\n      onChange();\n    };\n\n    return [...actionBind_1.bindCellClickAction(grid, cellId, {\n      action,\n      mouseOver: e => {\n        if (this.disabled) {\n          return false;\n        }\n\n        state.mouseActiveCell = {\n          col: e.col,\n          row: e.row\n        };\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n        return true;\n      },\n      mouseOut: e => {\n        delete state.mouseActiveCell;\n        const range = grid.getCellRange(e.col, e.row);\n        grid.invalidateCellRange(range);\n      }\n    }), ...actionBind_1.bindCellKeyAction(grid, cellId, {\n      action\n    })];\n  }\n\n}\n\nexports.CheckHeaderAction = CheckHeaderAction;\n\n/***/ }),\n/* 116 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseAction_1 = __webpack_require__(32);\n\nconst actionBind_1 = __webpack_require__(61);\n\nclass SortHeaderAction extends BaseAction_1.BaseAction {\n  constructor(option = {}) {\n    var _a;\n\n    super(option);\n    this._sort = (_a = option.sort) !== null && _a !== void 0 ? _a : true;\n  }\n\n  get sort() {\n    return this._sort;\n  }\n\n  set sort(sort) {\n    this._sort = sort;\n    this.onChangeDisabledInternal();\n  }\n\n  clone() {\n    return new SortHeaderAction(this);\n  }\n\n  _executeSort(newState, grid) {\n    if (typeof this._sort === \"function\") {\n      this._sort({\n        order: newState.order || \"asc\",\n        col: newState.col,\n        row: newState.row,\n        grid\n      });\n    } else {\n      const fieldRow = Math.min(grid.recordRowCount - 1, newState.row) + grid.frozenRowCount;\n      const field = grid.getField(newState.col, fieldRow);\n\n      if (field == null) {\n        return;\n      }\n\n      grid.dataSource.sort(field, newState.order || \"asc\");\n    }\n  }\n\n  bindGridEvent(grid, cellId) {\n    function isTarget(col, row) {\n      return grid.getLayoutCellId(col, row) === cellId;\n    }\n\n    const action = cell => {\n      if (this.disabled) {\n        return;\n      }\n\n      const state = grid.sortState;\n      let newState;\n      const range = grid.getCellRange(cell.col, cell.row);\n\n      if (isTarget(state.col, cell.row)) {\n        newState = {\n          col: range.start.col,\n          row: range.start.row,\n          order: state.order === \"asc\" ? \"desc\" : \"asc\"\n        };\n      } else {\n        newState = {\n          col: range.start.col,\n          row: range.start.row,\n          order: \"asc\"\n        };\n      }\n\n      grid.sortState = newState;\n\n      this._executeSort(newState, grid);\n\n      grid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\n    };\n\n    return [...actionBind_1.bindCellClickAction(grid, cellId, {\n      action,\n      mouseOver: _e => {\n        if (this.disabled) {\n          return false;\n        }\n\n        return true;\n      }\n    })];\n  }\n\n}\n\nexports.SortHeaderAction = SortHeaderAction;\n\n/***/ }),\n/* 117 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseStyle_1 = __webpack_require__(34);\n\nlet defaultStyle;\n\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\n  constructor(style = {}) {\n    super(style);\n    this._textAlign = style.textAlign || \"left\";\n    this._textBaseline = style.textBaseline || \"middle\";\n  }\n\n  static get DEFAULT() {\n    return defaultStyle ? defaultStyle : defaultStyle = new StdBaseStyle();\n  }\n\n  get textAlign() {\n    return this._textAlign;\n  }\n\n  set textAlign(textAlign) {\n    this._textAlign = textAlign;\n    this.doChangeStyle();\n  }\n\n  get textBaseline() {\n    return this._textBaseline;\n  }\n\n  set textBaseline(textBaseline) {\n    this._textBaseline = textBaseline;\n    this.doChangeStyle();\n  }\n\n  clone() {\n    return new StdBaseStyle(this);\n  }\n\n}\n\nexports.StdBaseStyle = StdBaseStyle;\n\n/***/ }),\n/* 118 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst BaseHeader_1 = __webpack_require__(14);\n\nconst CheckHeaderStyle_1 = __webpack_require__(62);\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst CHECK_HEADER_STATE_ID = symbolManager_1.getCheckHeaderStateId(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction getState(grid) {\n  let state = grid[CHECK_HEADER_STATE_ID];\n\n  if (!state) {\n    state = {\n      elapsed: {},\n      block: {}\n    };\n    utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\n  }\n\n  return state;\n}\n\nclass CheckHeader extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return CheckHeaderStyle_1.CheckHeaderStyle;\n  }\n\n  clone() {\n    return new CheckHeader(this);\n  }\n\n  drawInternal(value, context, style, helper, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  grid, {\n    drawCellBase\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor,\n      bgColor,\n      color,\n      font,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n    const cellKey = `${range.start.col}:${range.start.row}`;\n    const {\n      elapsed: {\n        [cellKey]: elapsed\n      }\n    } = getState(grid);\n    const checked = grid.getHeaderValue(range.start.col, range.start.row);\n    const opt = {\n      textAlign,\n      textBaseline,\n      borderColor,\n      checkBgColor,\n      uncheckBgColor\n    };\n\n    if (utils_1.isDef(elapsed)) {\n      opt.animElapsedTime = elapsed;\n    }\n\n    const inlineCheck = helper.buildCheckBoxInline(!!checked, context, opt);\n    helper.text([inlineCheck, value], context, {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      textOverflow\n    });\n  }\n\n}\n\nexports.CheckHeader = CheckHeader;\n\n/***/ }),\n/* 119 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseHeader_1 = __webpack_require__(14);\n\nconst Style_1 = __webpack_require__(13);\n\nclass Header extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return Style_1.Style;\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    helper.text(value, context, {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      textOverflow\n    });\n  }\n\n}\n\nexports.Header = Header;\n\n/***/ }),\n/* 120 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseHeader_1 = __webpack_require__(14);\n\nconst MultilineTextHeaderStyle_1 = __webpack_require__(63);\n\nclass MultilineTextHeader extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\n  }\n\n  clone() {\n    return new MultilineTextHeader(this);\n  }\n\n  drawInternal(value, context, style, helper, _grid, {\n    drawCellBase\n  }) {\n    const {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      bgColor,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      textOverflow\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const multilines = value.replace(/\\r?\\n/g, \"\\n\").replace(/\\r/g, \"\\n\").split(\"\\n\");\n    helper.testFontLoad(font, value, context);\n    helper.multilineText(multilines, context, {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      lineHeight,\n      autoWrapText,\n      lineClamp,\n      textOverflow\n    });\n  }\n\n}\n\nexports.MultilineTextHeader = MultilineTextHeader;\n\n/***/ }),\n/* 121 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst BaseHeader_1 = __webpack_require__(14);\n\nconst SortHeaderStyle_1 = __webpack_require__(64);\n\nconst canvases_1 = __webpack_require__(8);\n\nclass SortHeader extends BaseHeader_1.BaseHeader {\n  get StyleClass() {\n    return SortHeaderStyle_1.SortHeaderStyle;\n  }\n\n  drawInternal(value, context, style, helper, grid, {\n    drawCellBase\n  }) {\n    const {\n      textAlign,\n      textBaseline = \"middle\",\n      color,\n      bgColor,\n      font,\n      textOverflow,\n      sortArrowColor\n    } = style;\n\n    if (bgColor) {\n      drawCellBase({\n        bgColor\n      });\n    }\n\n    const state = grid.sortState;\n    let order = undefined;\n    const {\n      col,\n      row\n    } = context;\n    const range = grid.getCellRange(col, row);\n\n    if (utils_1.cellInRange(range, state.col, state.row)) {\n      ({\n        order\n      } = state);\n    }\n\n    const ctx = context.getContext();\n    const arrowSize = canvases_1.getFontSize(ctx, font).width * 1.2;\n    helper.text(value, context, {\n      textAlign,\n      textBaseline,\n      color,\n      font,\n      textOverflow,\n      icons: [{\n        name: utils_1.isDef(order) ? order === \"asc\" ? \"arrow_downward\" : \"arrow_upward\" : undefined,\n        width: arrowSize,\n        color: helper.getColor(sortArrowColor || helper.theme.header.sortArrowColor, col, row, ctx) || \"rgba(0, 0, 0, 0.38)\"\n      }]\n    });\n  }\n\n}\n\nexports.SortHeader = SortHeader;\n\n/***/ }),\n/* 122 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\"/></svg>\n\t@ material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\n\t*/\n\td: 'M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n/* 123 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path fill=\"#010101\" d=\"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\"/></svg>\n\t@ material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\n\t*/\n\td: 'M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n/* 124 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\"/></svg>\n\t@ material-design-icons/image/svg/production/ic_edit_48px.svg\n\t*/\n\td: 'M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n/* 125 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\"/></svg>\n\t@ material-design-icons/content/svg/production/ic_add_48px.svg\n\t*/\n\td: 'M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n/* 126 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>\n\t@ material-design-icons/toggle/svg/production/ic_star_24px.svg\n\t*/\n\td: 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z',\n\twidth: 24,\n\theight: 24,\n\t\n};\n\n/***/ }),\n/* 127 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons/toggle/svg/production/ic_star_border_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};\n\n/***/ }),\n/* 128 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons/toggle/svg/production/ic_star_half_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};\n\n/***/ }),\n/* 129 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst icons_1 = __webpack_require__(66);\n\nconst themes_1 = __webpack_require__(67);\n\nfunction register(obj, name, value) {\n  const old = obj[name];\n  obj[name] = value;\n  return old;\n}\n\nfunction registers(obj, values) {\n  for (const k in values) {\n    obj[k] = values[k];\n  }\n}\n\nfunction theme(name, theme) {\n  if (theme != null) {\n    return register(themes_1.themes, name, theme);\n  } else {\n    return themes_1.themes[name];\n  }\n}\n\nexports.theme = theme;\n\nfunction icon(name, icon) {\n  if (icon != null) {\n    return register(icons_1.icons, name, icon);\n  } else {\n    return icons_1.icons[name];\n  }\n}\n\nexports.icon = icon;\n\nfunction icons(icons) {\n  return registers(icons_1.icons, icons);\n}\n\nexports.icons = icons;\n\n/***/ }),\n/* 130 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst symbolManager_1 = __webpack_require__(1); //private symbol\n\n\nconst _ = symbolManager_1.get();\n\nfunction getProp(obj, superObj, names, defNames) {\n  return utils_1.getChainSafe(obj, ...names) || utils_1.getChainSafe(superObj, ...names) || defNames && utils_1.getChainSafe(obj, ...defNames) || defNames && utils_1.getChainSafe(superObj, ...defNames);\n}\n\nclass Theme {\n  constructor(obj, superTheme) {\n    this._checkbox = null;\n    this._radioButton = null;\n    this._button = null;\n    this._header = null;\n    this[_] = {\n      obj,\n      superTheme: superTheme\n    };\n  }\n\n  get font() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"font\"]);\n  }\n\n  get underlayBackgroundColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"underlayBackgroundColor\"]);\n  } // color\n\n\n  get color() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"color\"]);\n  }\n\n  get frozenRowsColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"frozenRowsColor\"], [\"color\"]);\n  } // background\n\n\n  get defaultBgColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"defaultBgColor\"]);\n  }\n\n  get frozenRowsBgColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"frozenRowsBgColor\"], [\"defaultBgColor\"]);\n  }\n\n  get selectionBgColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"selectionBgColor\"], [\"defaultBgColor\"]);\n  }\n\n  get highlightBgColor() {\n    if (this.hasProperty([\"highlightBgColor\"])) {\n      const {\n        obj,\n        superTheme\n      } = this[_];\n      return getProp(obj, superTheme, [\"highlightBgColor\"]);\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    return args => {\n      const color = args.row < args.grid.frozenRowCount ? this.frozenRowsBgColor : this.defaultBgColor;\n\n      if (typeof color === \"function\") {\n        return color(args);\n      }\n\n      return color;\n    };\n  } // border\n\n\n  get borderColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"borderColor\"]);\n  }\n\n  get frozenRowsBorderColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"frozenRowsBorderColor\"], [\"borderColor\"]);\n  }\n\n  get highlightBorderColor() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return getProp(obj, superTheme, [\"highlightBorderColor\"], [\"borderColor\"]);\n  }\n\n  get checkbox() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._checkbox || (this._checkbox = {\n      get uncheckBgColor() {\n        return getProp(obj, superTheme, [\"checkbox\", \"uncheckBgColor\"], [\"defaultBgColor\"]);\n      },\n\n      get checkBgColor() {\n        return getProp(obj, superTheme, [\"checkbox\", \"checkBgColor\"], [\"borderColor\"]);\n      },\n\n      get borderColor() {\n        return getProp(obj, superTheme, [\"checkbox\", \"borderColor\"], [\"borderColor\"]);\n      }\n\n    });\n  }\n\n  get radioButton() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._radioButton || (this._radioButton = {\n      get checkColor() {\n        return getProp(obj, superTheme, [\"radioButton\", \"checkColor\"], [\"color\"]);\n      },\n\n      get uncheckBorderColor() {\n        return getProp(obj, superTheme, [\"radioButton\", \"uncheckBorderColor\"], [\"borderColor\"]);\n      },\n\n      get checkBorderColor() {\n        return getProp(obj, superTheme, [\"radioButton\", \"checkBorderColor\"], [\"borderColor\"]);\n      },\n\n      get uncheckBgColor() {\n        return getProp(obj, superTheme, [\"radioButton\", \"uncheckBgColor\"], [\"defaultBgColor\"]);\n      },\n\n      get checkBgColor() {\n        return getProp(obj, superTheme, [\"radioButton\", \"checkBgColor\"], [\"defaultBgColor\"]);\n      }\n\n    });\n  }\n\n  get button() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._button || (this._button = {\n      get color() {\n        return getProp(obj, superTheme, [\"button\", \"color\"], [\"color\"]);\n      },\n\n      get bgColor() {\n        return getProp(obj, superTheme, [\"button\", \"bgColor\"], [\"defaultBgColor\"]);\n      }\n\n    });\n  }\n\n  get header() {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return this._header || (this._header = {\n      get sortArrowColor() {\n        return getProp(obj, superTheme, [\"header\", \"sortArrowColor\"], [\"color\"]);\n      }\n\n    });\n  }\n\n  hasProperty(names) {\n    const {\n      obj,\n      superTheme\n    } = this[_];\n    return hasThemeProperty(obj, names) || hasThemeProperty(superTheme, names);\n  }\n\n  extends(obj) {\n    return new Theme(obj, this);\n  }\n\n}\n\nexports.Theme = Theme;\n\nfunction hasThemeProperty(obj, names) {\n  if (obj instanceof Theme) {\n    return obj.hasProperty(names);\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let o = obj;\n\n    if (!o) {\n      return false;\n    }\n\n    for (let index = 0; index < names.length; index++) {\n      const name = names[index];\n      o = o[name];\n\n      if (!o) {\n        return false;\n      }\n    }\n\n    return !!o;\n  }\n}\n\n/***/ }),\n/* 131 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*eslint no-bitwise:0*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction DEFAULT_BG_COLOR(args) {\n  const {\n    row,\n    grid\n  } = args;\n\n  if (row < grid.frozenRowCount) {\n    return \"#FFF\";\n  }\n\n  const index = grid.getRecordIndexByRow(row);\n\n  if (!(index & 1)) {\n    return \"#FFF\";\n  } else {\n    return \"#F6F6F6\";\n  }\n}\n\nconst cacheLinearGradient = {};\n\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\n  let stop;\n  const stopsKey = [];\n\n  for (stop in colorStops) {\n    stopsKey.push(`${stop}@${colorStops[stop]}`);\n  }\n\n  const key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(\",\")}`;\n  const ret = cacheLinearGradient[key];\n\n  if (ret) {\n    return ret;\n  }\n\n  const grad = context.createLinearGradient(left, top, left, bottom);\n\n  for (stop in colorStops) {\n    grad.addColorStop(Number(stop), colorStops[stop]);\n  }\n\n  return cacheLinearGradient[key] = grad;\n}\n\nfunction FROZEN_ROWS_BG_COLOR(args) {\n  const {\n    col,\n    grid,\n    grid: {\n      frozenRowCount\n    },\n    context\n  } = args;\n  const {\n    left,\n    top\n  } = grid.getCellRelativeRect(col, 0);\n  const {\n    bottom\n  } = grid.getCellRelativeRect(col, frozenRowCount - 1);\n  return getLinearGradient(context, left, top, left, bottom, {\n    0: \"#FFF\",\n    1: \"#D3D3D3\"\n  });\n}\n/**\n * basic theme\n * @name BASIC\n * @memberof cheetahGrid.themes.choices\n */\n\n\nexports.default = {\n  color: \"#000\",\n  // frozenRowsColor: '#000',\n  defaultBgColor: DEFAULT_BG_COLOR,\n  frozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\n  selectionBgColor: \"#CCE0FF\",\n  borderColor: \"#000\",\n  // frozenRowsBorderColor: '#000',\n  highlightBorderColor: \"#5E9ED6\",\n  checkbox: {\n    uncheckBgColor: \"#FFF\",\n    checkBgColor: \"rgb(76, 73, 72)\",\n    borderColor: \"#000\"\n  },\n  radioButton: {\n    checkColor: \"rgb(76, 73, 72)\",\n    checkBorderColor: \"#000\",\n    uncheckBorderColor: \"#000\",\n    uncheckBgColor: \"#FFF\",\n    checkBgColor: \"#FFF\"\n  },\n  button: {\n    color: \"#FFF\",\n    bgColor: \"#2196F3\"\n  },\n  header: {\n    sortArrowColor: \"rgba(0, 0, 0, 0.38)\"\n  },\n  underlayBackgroundColor: \"#F6F6F6\"\n};\n\n/***/ }),\n/* 132 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/*eslint no-bitwise:0*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\n  const {\n    row,\n    grid: {\n      frozenRowCount\n    }\n  } = args;\n\n  if (frozenRowCount - 1 === row) {\n    return [\"#f2f2f2\", \"#f2f2f2\", \"#ccc7c7\", \"#f2f2f2\"];\n  } else {\n    return [\"#f2f2f2\"];\n  }\n}\n\nfunction BORDER_COLOR(args) {\n  const {\n    col,\n    row,\n    grid\n  } = args;\n  const {\n    colCount,\n    frozenColCount,\n    recordRowCount\n  } = grid;\n  let top = \"#ccc7c7\";\n  let bottom = \"#ccc7c7\";\n\n  if (recordRowCount > 1) {\n    const startRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\n    const endRow = startRow + recordRowCount - 1;\n\n    if (startRow !== row) {\n      top = null;\n    }\n\n    if (endRow !== row) {\n      bottom = null;\n    }\n  }\n\n  if (frozenColCount - 1 === col) {\n    return [top, \"#f2f2f2\", bottom, null];\n  }\n\n  if (colCount - 1 === col) {\n    return [top, \"#f2f2f2\", bottom, null];\n  }\n\n  return [top, null, bottom, null];\n}\n/**\n * material design theme\n * @name MATERIAL_DESIGN\n * @memberof cheetahGrid.themes.choices\n */\n\n\nexports.default = {\n  color: \"rgba(0, 0, 0, 0.87)\",\n  frozenRowsColor: \"rgba(0, 0, 0, 0.54)\",\n  defaultBgColor: \"#FFF\",\n  // frozenRowsBgColor: '#FFF',\n  selectionBgColor: \"#CCE0FF\",\n  borderColor: BORDER_COLOR,\n  frozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\n  highlightBorderColor: \"#5E9ED6\",\n  checkbox: {\n    // uncheckBgColor: '#FFF',\n    checkBgColor: \"rgb(76, 73, 72)\",\n    borderColor: \"rgba(0, 0, 0, 0.26)\"\n  },\n  radioButton: {\n    checkColor: \"rgb(76, 73, 72)\",\n    checkBorderColor: \"rgb(76, 73, 72)\",\n    uncheckBorderColor: \"rgb(189, 189, 189)\"\n  },\n  button: {\n    color: \"#FFF\",\n    bgColor: \"#2196F3\"\n  },\n  header: {\n    sortArrowColor: \"rgba(0, 0, 0, 0.38)\"\n  },\n  underlayBackgroundColor: \"#FFF\"\n};\n\n/***/ }),\n/* 133 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst canvashelper = __importStar(__webpack_require__(68));\n\nexports.canvashelper = canvashelper;\n\n/***/ }),\n/* 134 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst icons = __importStar(__webpack_require__(27));\n\nconst themes = __importStar(__webpack_require__(35));\n\nconst data_1 = __webpack_require__(59);\n\nconst layout_map_1 = __webpack_require__(135);\n\nconst DrawGrid_1 = __webpack_require__(56);\n\nconst utils_1 = __webpack_require__(0);\n\nconst style_1 = __webpack_require__(26);\n\nconst GridCanvasHelper_1 = __webpack_require__(70);\n\nconst style_2 = __webpack_require__(33);\n\nconst LG_EVENT_TYPE_1 = __webpack_require__(37);\n\nconst MessageHandler_1 = __webpack_require__(147);\n\nconst Rect_1 = __webpack_require__(22);\n\nconst TooltipHandler_1 = __webpack_require__(159); //protected symbol\n\n\nconst symbolManager_1 = __webpack_require__(1);\n\nconst paste_utils_1 = __webpack_require__(58);\n/** @private */\n\n\nconst _ = symbolManager_1.getProtectedSymbol(); //private methods\n\n/** @private */\n\n\nfunction _getCellRange(grid, col, row) {\n  return grid[_].layoutMap.getCellRange(col, row);\n}\n/** @private */\n\n\nfunction _updateRect(grid, col, row, context) {\n  context.setRectFilter(rect => {\n    let {\n      left,\n      right,\n      top,\n      bottom\n    } = rect;\n\n    const {\n      start: {\n        col: startCol,\n        row: startRow\n      },\n      end: {\n        col: endCol,\n        row: endRow\n      }\n    } = _getCellRange(grid, col, row);\n\n    for (let c = col - 1; c >= startCol; c--) {\n      left -= grid.getColWidth(c);\n    }\n\n    for (let c = col + 1; c <= endCol; c++) {\n      right += grid.getColWidth(c);\n    }\n\n    for (let r = row - 1; r >= startRow; r--) {\n      top -= grid.getRowHeight(r);\n    }\n\n    for (let r = row + 1; r <= endRow; r++) {\n      bottom += grid.getRowHeight(r);\n    }\n\n    return Rect_1.Rect.bounds(left, top, right, bottom);\n  });\n}\n/** @private */\n\n\nfunction _getCellValue(grid, col, row) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    return grid[_].layoutMap.getHeader(col, row).caption;\n  } else {\n    const {\n      field\n    } = grid[_].layoutMap.getBody(col, row);\n\n    return _getField(grid, field, row);\n  }\n}\n/** @private */\n\n\nfunction _setCellValue(grid, col, row, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    // nop\n    return false;\n  } else {\n    const {\n      field\n    } = grid[_].layoutMap.getBody(col, row);\n\n    if (field == null) {\n      return false;\n    }\n\n    const index = _getRecordIndexByRow(grid, row);\n\n    return grid[_].dataSource.setField(index, field, value);\n  }\n}\n/** @private */\n\n\nfunction _getCellMessage(grid, col, row) {\n  if (row < grid[_].layoutMap.headerRowCount) {\n    return null;\n  } else {\n    const {\n      message\n    } = grid[_].layoutMap.getBody(col, row);\n\n    if (!message) {\n      return null;\n    }\n\n    return _getField(grid, message, row);\n  }\n}\n\nfunction _getCellIcon0(grid, icon, row) {\n  if (Array.isArray(icon)) {\n    return icon.map(i => _getCellIcon0(grid, i, row));\n  }\n\n  if (!utils_1.obj.isObject(icon) || typeof icon === \"function\") {\n    return _getField(grid, icon, row);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  const retIcon = {}; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  const iconOpt = icon;\n  icons.iconPropKeys.forEach(k => {\n    if (iconOpt[k]) {\n      const f = _getField(grid, iconOpt[k], row);\n\n      if (utils_1.isDef(f)) {\n        retIcon[k] = f;\n      } else {\n        if (!_hasField(grid, iconOpt[k], row)) {\n          retIcon[k] = iconOpt[k];\n        }\n      }\n    }\n  });\n  return retIcon;\n}\n/** @private */\n\n\nfunction _getCellIcon(grid, col, row) {\n  const {\n    icon\n  } = grid[_].layoutMap.getBody(col, row);\n\n  if (icon == null) {\n    return null;\n  }\n\n  return _getCellIcon0(grid, icon, row);\n}\n/** @private */\n\n\nfunction _getField(grid, field, row) {\n  if (!utils_1.isDef(field)) {\n    return null;\n  }\n\n  if (row < grid[_].layoutMap.headerRowCount) {\n    return null;\n  } else {\n    const index = _getRecordIndexByRow(grid, row);\n\n    return grid[_].dataSource.getField(index, field);\n  }\n}\n/** @private */\n\n\nfunction _hasField(grid, field, row) {\n  if (!utils_1.isDef(field)) {\n    return false;\n  }\n\n  if (row < grid[_].layoutMap.headerRowCount) {\n    return false;\n  } else {\n    const index = _getRecordIndexByRow(grid, row);\n\n    return grid[_].dataSource.hasField(index, field);\n  }\n}\n/** @private */\n\n\nfunction _onDrawValue(grid, cellValue, context, {\n  col,\n  row\n}, style, // eslint-disable-next-line @typescript-eslint/no-explicit-any\ndraw) {\n  const helper = grid[_].gridCanvasHelper;\n\n  const drawCellBg = ({\n    bgColor\n  } = {}) => {\n    const fillOpt = {\n      fillColor: bgColor\n    }; //cell\n\n    helper.fillCellWithState(context, fillOpt);\n  };\n\n  const drawCellBorder = () => {\n    if (context.col === grid.frozenColCount - 1) {\n      //\n      const rect = context.getRect();\n      helper.drawWithClip(context, ctx => {\n        const borderColor = context.row >= grid.frozenRowCount ? helper.theme.borderColor : helper.theme.frozenRowsBorderColor;\n        const borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\n\n        if (borderColors[1]) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[1];\n          ctx.beginPath();\n          ctx.moveTo(rect.right - 2.5, rect.top);\n          ctx.lineTo(rect.right - 2.5, rect.bottom);\n          ctx.stroke();\n        }\n      });\n    }\n\n    _borderWithState(grid, helper, context);\n  };\n\n  const drawCellBase = ({\n    bgColor\n  } = {}) => {\n    drawCellBg({\n      bgColor\n    });\n    drawCellBorder();\n  };\n\n  const info = {\n    getRecord: () => grid.getRowRecord(row),\n    getIcon: () => _getCellIcon(grid, col, row),\n    getMessage: () => _getCellMessage(grid, col, row),\n    messageHandler: grid[_].messageHandler,\n    style,\n    drawCellBase,\n    drawCellBg,\n    drawCellBorder\n  };\n  return draw(cellValue, info, context, grid);\n}\n/** @private */\n\n\nfunction _borderWithState(grid, helper, context) {\n  const {\n    col,\n    row\n  } = context;\n  const sel = grid.selection.select;\n  const {\n    layoutMap\n  } = grid[_];\n  const rect = context.getRect();\n  const option = {};\n  const selRecordIndex = layoutMap.getRecordIndexByRow(sel.row);\n  const selId = layoutMap.getCellId(sel.col, sel.row);\n\n  function isSelectCell(col, row) {\n    if (col === sel.col && row === sel.row) {\n      return true;\n    }\n\n    return selId != null && layoutMap.getCellId(col, row) === selId && layoutMap.getRecordIndexByRow(row) === selRecordIndex;\n  } //\n\n\n  if (isSelectCell(col, row)) {\n    option.borderColor = helper.theme.highlightBorderColor;\n    option.lineWidth = 2;\n    helper.border(context, option);\n  } else {\n    option.lineWidth = 1; // header color\n\n    const isFrozenCell = grid.isFrozenCell(col, row);\n\n    if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\n      option.borderColor = helper.theme.frozenRowsBorderColor;\n    }\n\n    helper.border(context, option); //\n\n    if (col > 0 && isSelectCell(col - 1, row)) {\n      //\n      helper.drawBorderWithClip(context, ctx => {\n        const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\n\n        if (borderColors[1]) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[1];\n          ctx.beginPath();\n          ctx.moveTo(rect.left - 0.5, rect.top);\n          ctx.lineTo(rect.left - 0.5, rect.bottom);\n          ctx.stroke();\n        }\n      });\n    } else if (row > 0 && isSelectCell(col, row - 1)) {\n      //\n      helper.drawBorderWithClip(context, ctx => {\n        const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\n\n        if (borderColors[0]) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = borderColors[0];\n          ctx.beginPath();\n          ctx.moveTo(rect.left, rect.top - 0.5);\n          ctx.lineTo(rect.right, rect.top - 0.5);\n          ctx.stroke();\n        }\n      });\n    }\n  }\n}\n/** @private */\n\n\nfunction _refreshHeader(grid) {\n  var _a;\n\n  const protectedSpace = grid[_];\n\n  if (protectedSpace.headerEvents) {\n    protectedSpace.headerEvents.forEach(id => grid.unlisten(id));\n  }\n\n  const headerEvents = grid[_].headerEvents = [];\n  headerEvents.forEach(id => grid.unlisten(id));\n  let layoutMap;\n\n  if (protectedSpace.layout && (!Array.isArray(protectedSpace.layout) || protectedSpace.layout.length > 0)) {\n    layoutMap = protectedSpace.layoutMap = new layout_map_1.MultiLayoutMap(protectedSpace.layout);\n  } else {\n    layoutMap = protectedSpace.layoutMap = new layout_map_1.SimpleHeaderLayoutMap((_a = protectedSpace.header) !== null && _a !== void 0 ? _a : []);\n  }\n\n  layoutMap.headerObjects.forEach(cell => {\n    const ids = cell.headerType.bindGridEvent(grid, cell.id);\n    headerEvents.push(...ids);\n\n    if (cell.style) {\n      if (cell.style instanceof style_2.BaseStyle) {\n        const id = cell.style.listen(style_2.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\n          grid.invalidate();\n        });\n        headerEvents.push(id);\n      }\n    }\n\n    if (cell.action) {\n      const ids = cell.action.bindGridEvent(grid, cell.id);\n      headerEvents.push(...ids);\n    }\n  });\n  layoutMap.columnObjects.forEach(col => {\n    if (col.action) {\n      const ids = col.action.bindGridEvent(grid, col.id);\n      headerEvents.push(...ids);\n    }\n\n    if (col.columnType) {\n      const ids = col.columnType.bindGridEvent(grid, col.id);\n      headerEvents.push(...ids);\n    }\n\n    if (col.style) {\n      if (col.style instanceof style_1.BaseStyle) {\n        const id = col.style.listen(style_1.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\n          grid.invalidate();\n        });\n        headerEvents.push(id);\n      }\n    }\n  });\n\n  for (let col = 0; col < layoutMap.columnWidths.length; col++) {\n    const column = layoutMap.columnWidths[col];\n    const {\n      width,\n      minWidth,\n      maxWidth\n    } = column;\n\n    if (width && (width > 0 || typeof width === \"string\")) {\n      grid.setColWidth(col, width);\n    }\n\n    if (minWidth && (minWidth > 0 || typeof minWidth === \"string\")) {\n      grid.setMinColWidth(col, minWidth);\n    }\n\n    if (maxWidth && (maxWidth > 0 || typeof maxWidth === \"string\")) {\n      grid.setMaxColWidth(col, maxWidth);\n    }\n  }\n\n  const {\n    headerRowHeight\n  } = grid[_];\n\n  for (let row = 0; row < layoutMap.headerRowCount; row++) {\n    const height = Array.isArray(headerRowHeight) ? headerRowHeight[row] : headerRowHeight;\n\n    if (height && height > 0) {\n      grid.setRowHeight(row, height);\n    }\n  }\n\n  grid.colCount = layoutMap.colCount;\n\n  _refreshRowCount(grid);\n\n  grid.frozenRowCount = layoutMap.headerRowCount;\n}\n/** @private */\n\n\nfunction _refreshRowCount(grid) {\n  const {\n    layoutMap\n  } = grid[_];\n  grid.rowCount = grid[_].dataSource.length * layoutMap.bodyRowCount + layoutMap.headerRowCount;\n}\n/** @private */\n\n\nfunction _tryWithUpdateDataSource(grid, fn) {\n  const {\n    dataSourceEventIds\n  } = grid[_];\n\n  if (dataSourceEventIds) {\n    dataSourceEventIds.forEach(id => grid[_].handler.off(id));\n  }\n\n  fn(grid);\n  grid[_].dataSourceEventIds = [grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\n    _refreshRowCount(grid);\n\n    grid.invalidate();\n  }), grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\n    grid.invalidate();\n  })];\n}\n/** @private */\n\n\nfunction _setRecords(grid, records = []) {\n  _tryWithUpdateDataSource(grid, () => {\n    grid[_].records = records;\n    const newDataSource = grid[_].dataSource = data_1.CachedDataSource.ofArray(records);\n    grid.addDisposable(newDataSource);\n  });\n}\n/** @private */\n\n\nfunction _setDataSource(grid, dataSource) {\n  _tryWithUpdateDataSource(grid, () => {\n    if (dataSource) {\n      if (dataSource instanceof data_1.DataSource) {\n        grid[_].dataSource = dataSource;\n      } else {\n        const newDataSource = grid[_].dataSource = new data_1.CachedDataSource(dataSource);\n        grid.addDisposable(newDataSource);\n      }\n    } else {\n      grid[_].dataSource = data_1.DataSource.EMPTY;\n    }\n\n    grid[_].records = null;\n  });\n}\n/** @private */\n\n\nfunction _getRecordIndexByRow(grid, row) {\n  const {\n    layoutMap\n  } = grid[_];\n  return layoutMap.getRecordIndexByRow(row);\n}\n/** @private */\n\n\nfunction _onRangePaste(text, test = () => true) {\n  var _a;\n\n  const {\n    layoutMap\n  } = this[_];\n  const selectionRange = this.selection.range;\n  const {\n    start\n  } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\n  const {\n    end\n  } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\n  const values = paste_utils_1.parsePasteRangeBoxValues(text);\n  const pasteRowCount = Math.min(Math.max(end.row - start.row + 1, values.rowCount), this.rowCount - start.row);\n  const pasteColCount = Math.min(Math.max(end.col - start.col + 1, values.colCount), this.colCount - start.col);\n  let hasEditable = false;\n  const actionColumnsBox = [];\n\n  for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\n    const actionColumnsRow = [];\n    actionColumnsBox.push(actionColumnsRow);\n\n    for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\n      const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\n      actionColumnsRow[offsetCol] = body;\n\n      if (!hasEditable && ((_a = body.action) === null || _a === void 0 ? void 0 : _a.editable)) {\n        hasEditable = true;\n      }\n    }\n  }\n\n  if (!hasEditable) {\n    return;\n  }\n\n  const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\n  const startRowOffset = start.row - startRow;\n  let duplicate = {};\n  let actionRow = startRowOffset;\n  let valuesRow = 0;\n\n  for (let offsetRow = 0; offsetRow < pasteRowCount; offsetRow++) {\n    let valuesCol = 0;\n\n    for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\n      const {\n        action,\n        id\n      } = actionColumnsBox[actionRow][offsetCol];\n\n      if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\n        duplicate[id] = true;\n        const col = start.col + offsetCol;\n        const row = start.row + offsetRow;\n        const cellValue = values.getCellValue(valuesCol, valuesRow);\n        utils_1.then(this.getRowRecord(row), record => {\n          utils_1.then(_getCellValue(this, col, row), oldValue => {\n            if (test({\n              grid: this,\n              record: record,\n              col,\n              row,\n              value: cellValue,\n              oldValue\n            })) {\n              action.onPasteCellRangeBox(this, {\n                col,\n                row\n              }, cellValue);\n            }\n          });\n        });\n      }\n\n      valuesCol++;\n\n      if (valuesCol >= values.colCount) {\n        valuesCol = 0;\n      }\n    }\n\n    actionRow++;\n\n    if (actionRow >= layoutMap.bodyRowCount) {\n      actionRow = 0;\n      duplicate = {};\n    }\n\n    valuesRow++;\n\n    if (valuesRow >= values.rowCount) {\n      valuesRow = 0;\n    }\n  }\n\n  const newEnd = {\n    col: start.col + pasteColCount - 1,\n    row: start.row + pasteRowCount - 1\n  };\n  this.selection.range = {\n    start,\n    end: newEnd\n  };\n  this.invalidateCellRange(this.selection.range);\n}\n/** @private */\n\n\nfunction _onRangeDelete() {\n  var _a;\n\n  const {\n    layoutMap\n  } = this[_];\n  const selectionRange = this.selection.range;\n  const {\n    start\n  } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\n  const {\n    end\n  } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\n  const deleteRowCount = Math.min(end.row - start.row + 1, this.rowCount - start.row);\n  const deleteColCount = Math.min(end.col - start.col + 1, this.colCount - start.col);\n  let hasEditable = false;\n  const actionColumnsBox = [];\n\n  for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\n    const actionColumnsRow = [];\n    actionColumnsBox.push(actionColumnsRow);\n\n    for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\n      const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\n      actionColumnsRow[offsetCol] = body;\n\n      if (!hasEditable && ((_a = body.action) === null || _a === void 0 ? void 0 : _a.editable)) {\n        hasEditable = true;\n      }\n    }\n  }\n\n  if (!hasEditable) {\n    return;\n  }\n\n  const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\n  const startRowOffset = start.row - startRow;\n  let duplicate = {};\n  let actionRow = startRowOffset;\n\n  for (let offsetRow = 0; offsetRow < deleteRowCount; offsetRow++) {\n    for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\n      const {\n        action,\n        id\n      } = actionColumnsBox[actionRow][offsetCol];\n\n      if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\n        duplicate[id] = true;\n        const col = start.col + offsetCol;\n        const row = start.row + offsetRow;\n        utils_1.then(this.getRowRecord(row), _record => {\n          utils_1.then(_getCellValue(this, col, row), _oldValue => {\n            action.onDeleteCellRangeBox(this, {\n              col,\n              row\n            });\n          });\n        });\n      }\n    }\n\n    actionRow++;\n\n    if (actionRow >= layoutMap.bodyRowCount) {\n      actionRow = 0;\n      duplicate = {};\n    }\n  }\n\n  this.invalidateCellRange(selectionRange);\n}\n/** @private */\n\n\nfunction adjustListGridOption(options) {\n  delete options.frozenRowCount;\n  delete options.colCount;\n  delete options.rowCount;\n  return options;\n}\n/**\n * ListGrid\n * @classdesc cheetahGrid.ListGrid\n * @memberof cheetahGrid\n */\n\n\nclass ListGrid extends DrawGrid_1.DrawGrid {\n  /**\n   * constructor\n   *\n   * @constructor\n   * @param options Constructor options\n   */\n  constructor(options = {}) {\n    var _a;\n\n    super(adjustListGridOption(options));\n    this.disabled = false;\n    this.readOnly = false;\n    const protectedSpace = this[_];\n    protectedSpace.header = options.header || [];\n    protectedSpace.layout = options.layout || [];\n    protectedSpace.headerRowHeight = options.headerRowHeight || [];\n\n    if (options.dataSource) {\n      _setDataSource(this, options.dataSource);\n    } else {\n      _setRecords(this, options.records);\n    }\n\n    protectedSpace.allowRangePaste = (_a = options.allowRangePaste) !== null && _a !== void 0 ? _a : false;\n\n    _refreshHeader(this);\n\n    protectedSpace.sortState = {\n      col: -1,\n      row: -1,\n      order: undefined\n    };\n    protectedSpace.gridCanvasHelper = new GridCanvasHelper_1.GridCanvasHelper(this);\n    protectedSpace.theme = themes.of(options.theme);\n    protectedSpace.messageHandler = new MessageHandler_1.MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\n    protectedSpace.tooltipHandler = new TooltipHandler_1.TooltipHandler(this);\n    this.invalidate();\n    protectedSpace.handler.on(window, \"resize\", () => {\n      this.updateSize();\n      this.updateScroll();\n      this.invalidate();\n    });\n  }\n\n  static get EVENT_TYPE() {\n    return LG_EVENT_TYPE_1.LG_EVENT_TYPE;\n  }\n  /**\n   * Dispose the grid instance.\n   * @returns {void}\n   */\n\n\n  dispose() {\n    const protectedSpace = this[_];\n    protectedSpace.messageHandler.dispose();\n    protectedSpace.tooltipHandler.dispose();\n    super.dispose();\n  }\n  /**\n   * Gets the define of the header.\n   */\n\n\n  get header() {\n    return this[_].header;\n  }\n  /**\n   * Sets the define of the header with the given data.\n   * <pre>\n   * column options\n   * -----\n   * caption: header caption\n   * field: field name\n   * width: column width\n   * minWidth: column min width\n   * maxWidth: column max width\n   * icon: icon name\n   * message: message key name\n   * columnType: column type\n   * action: column action\n   * style: column style\n   * headerType: header type\n   * headerStyle: header style\n   * headerAction: header action\n   * headerField: header field name\n   * sort: define sort setting\n   * -----\n   *\n   * multiline header\n   * -----\n   * caption: header caption\n   * columns: columns define\n   * -----\n   * </pre>\n   */\n\n\n  set header(header) {\n    this[_].header = header;\n\n    _refreshHeader(this);\n  }\n  /**\n   * Gets the define of the layout.\n   */\n\n\n  get layout() {\n    return this[_].layout;\n  }\n  /**\n   * Sets the define of the layout with the given data.\n   */\n\n\n  set layout(layout) {\n    this[_].layout = layout;\n\n    _refreshHeader(this);\n  }\n  /**\n   * Get the row count per record\n   */\n\n\n  get recordRowCount() {\n    return this[_].layoutMap.bodyRowCount;\n  }\n  /**\n   * Get the records.\n   */\n\n\n  get records() {\n    return this[_].records || null;\n  }\n  /**\n   * Set the records from given\n   */\n\n\n  set records(records) {\n    if (records == null) {\n      return;\n    }\n\n    _setRecords(this, records);\n\n    _refreshRowCount(this);\n\n    this.invalidate();\n  }\n  /**\n   * Get the data source.\n   */\n\n\n  get dataSource() {\n    return this[_].dataSource;\n  }\n  /**\n   * Set the data source from given\n   */\n\n\n  set dataSource(dataSource) {\n    _setDataSource(this, dataSource);\n\n    _refreshRowCount(this);\n\n    this.invalidate();\n  }\n  /**\n   * Get the theme.\n   */\n\n\n  get theme() {\n    return this[_].theme;\n  }\n  /**\n   * Set the theme from given\n   */\n\n\n  set theme(theme) {\n    this[_].theme = themes.of(theme);\n    this.invalidate();\n  }\n  /**\n   * If set to true to allow pasting of ranges.\n   */\n\n\n  get allowRangePaste() {\n    return this[_].allowRangePaste;\n  }\n\n  set allowRangePaste(allowRangePaste) {\n    this[_].allowRangePaste = allowRangePaste;\n  }\n  /**\n   * Get the font definition as a string.\n   * @override\n   */\n\n\n  get font() {\n    return super.font || this[_].gridCanvasHelper.theme.font;\n  }\n  /**\n   * Set the font definition with the given string.\n   * @override\n   */\n\n\n  set font(font) {\n    super.font = font;\n  }\n  /**\n   * Get the background color of the underlay.\n   * @override\n   */\n\n\n  get underlayBackgroundColor() {\n    return super.underlayBackgroundColor || this[_].gridCanvasHelper.theme.underlayBackgroundColor;\n  }\n  /**\n   * Set the background color of the underlay.\n   * @override\n   */\n\n\n  set underlayBackgroundColor(underlayBackgroundColor) {\n    super.underlayBackgroundColor = underlayBackgroundColor;\n  }\n  /**\n   * Get the sort state.\n   */\n\n\n  get sortState() {\n    return this[_].sortState;\n  }\n  /**\n   * Sets the sort state.\n   * If `null` to set, the sort state is initialized.\n   */\n\n\n  set sortState(sortState) {\n    const oldState = this.sortState;\n    let oldField;\n\n    if (oldState.col >= 0 && oldState.row >= 0) {\n      oldField = this.getHeaderField(oldState.col, oldState.row);\n    }\n\n    const newState = this[_].sortState = utils_1.isDef(sortState) ? sortState : {\n      col: -1,\n      row: -1,\n      order: undefined\n    };\n    let newField;\n\n    if (newState.col >= 0 && newState.row >= 0) {\n      newField = this.getHeaderField(newState.col, newState.row);\n    } // bind header value\n\n\n    if (utils_1.isDef(oldField) && oldField !== newField) {\n      this.setHeaderValue(oldState.col, oldState.row, undefined);\n    }\n\n    if (utils_1.isDef(newField)) {\n      this.setHeaderValue(newState.col, newState.row, newState.order);\n    }\n  }\n  /**\n   * Get the header values.\n   */\n\n\n  get headerValues() {\n    return this[_].headerValues || (this[_].headerValues = new Map());\n  }\n  /**\n   * Sets the header values.\n   */\n\n\n  set headerValues(headerValues) {\n    this[_].headerValues = headerValues || new Map();\n  }\n  /**\n   * Get the field of the given column index.\n   * @param  {number} col The column index.\n   * @param  {number} row The row index.\n   * @return {*} The field object.\n   */\n\n\n  getField(col, row) {\n    return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).field;\n  }\n  /**\n   * Get the column define of the given column index.\n   * @param  {number} col The column index.\n   * @param  {number} row The row index.\n   * @return {*} The column define object.\n   */\n\n\n  getColumnDefine(col, row) {\n    return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).define;\n  }\n\n  getColumnType(col, row) {\n    return this[_].layoutMap.getBody(col, row).columnType;\n  }\n  /**\n   * Get the header field of the given header cell.\n   * @param  {number} col The column index.\n   * @param  {number} row The header row index.\n   * @return {*} The field object.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  getHeaderField(col, row) {\n    const hd = this[_].layoutMap.getHeader(col, row);\n\n    return hd.field;\n  }\n  /**\n   * Get the header define of the given header cell.\n   * @param  {number} col The column index.\n   * @param  {number} row The header row index.\n   * @return {*} The header define object.\n   */\n\n\n  getHeaderDefine(col, row) {\n    const hd = this[_].layoutMap.getHeader(col, row);\n\n    return hd.define;\n  }\n  /**\n   * Get the record of the given row index.\n   * @param  {number} row The row index.\n   * @return {object} The record.\n   */\n\n\n  getRowRecord(row) {\n    if (row < this[_].layoutMap.headerRowCount) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      return undefined;\n    } else {\n      return this[_].dataSource.get(_getRecordIndexByRow(this, row));\n    }\n  }\n  /**\n   * Get the record index of the given row index.\n   * @param  {number} row The row index.\n   */\n\n\n  getRecordIndexByRow(row) {\n    return _getRecordIndexByRow(this, row);\n  }\n  /**\n   * Gets the row index starting at the given record index.\n   * @param  {number} index The record index.\n   */\n\n\n  getRecordStartRowByRecordIndex(index) {\n    return this[_].layoutMap.getRecordStartRowByRecordIndex(index);\n  }\n  /**\n   * Get the column index of the given field.\n   * @param  {*} field The field.\n   * @return {number} The column index.\n   * @deprecated use `getCellRangeByField` instead\n   */\n\n\n  getColumnIndexByField(field) {\n    var _a;\n\n    const range = this.getCellRangeByField(field, 0);\n    return (_a = range === null || range === void 0 ? void 0 : range.start.col) !== null && _a !== void 0 ? _a : null;\n  }\n  /**\n   * Get the column index of the given field.\n   * @param  {*} field The field.\n   * @param  {number} index The record index\n   * @return {number} The column index.\n   */\n\n\n  getCellRangeByField(field, index) {\n    const {\n      layoutMap\n    } = this[_];\n    const colObj = layoutMap.columnObjects.find(col => col.field === field);\n\n    if (colObj) {\n      const layoutRange = layoutMap.getBodyLayoutRangeById(colObj.id);\n      const startRow = layoutMap.getRecordStartRowByRecordIndex(index);\n      return {\n        start: {\n          col: layoutRange.start.col,\n          row: startRow + layoutRange.start.row\n        },\n        end: {\n          col: layoutRange.end.col,\n          row: startRow + layoutRange.end.row\n        }\n      };\n    }\n\n    return null;\n  }\n  /**\n   * Focus the cell.\n   * @param  {*} field The field.\n   * @param  {number} index The record index\n   * @return {void}\n   */\n\n\n  focusGridCell(field, index) {\n    var _a;\n\n    const {\n      start: {\n        col: startCol,\n        row: startRow\n      },\n      end: {\n        col: endCol,\n        row: endRow\n      }\n    } = this.selection.range;\n    const newFocus = (_a = this.getCellRangeByField(field, index)) === null || _a === void 0 ? void 0 : _a.start;\n\n    if (newFocus == null) {\n      return;\n    }\n\n    this.focusCell(newFocus.col, newFocus.row);\n    this.selection.select = newFocus;\n    this.invalidateGridRect(startCol, startRow, endCol, endRow);\n    this.invalidateCell(newFocus.col, newFocus.row);\n  }\n  /**\n   * Scroll to where cell is visible.\n   * @param  {*} field The field.\n   * @param  {number} index The record index\n   * @return {void}\n   */\n\n\n  makeVisibleGridCell(field, index) {\n    var _a, _b, _c;\n\n    const cell = (_a = this.getCellRangeByField(field, index)) === null || _a === void 0 ? void 0 : _a.start;\n    this.makeVisibleCell((_b = cell === null || cell === void 0 ? void 0 : cell.col) !== null && _b !== void 0 ? _b : 0, (_c = cell === null || cell === void 0 ? void 0 : cell.row) !== null && _c !== void 0 ? _c : this[_].layoutMap.headerRowCount);\n  }\n\n  getGridCanvasHelper() {\n    return this[_].gridCanvasHelper;\n  }\n  /**\n   * Get cell range information for a given cell.\n   * @param {number} col column index of the cell\n   * @param {number} row row index of the cell\n   * @returns {object} cell range info\n   */\n\n\n  getCellRange(col, row) {\n    return _getCellRange(this, col, row);\n  }\n  /**\n   * Get header range information for a given cell.\n   * @param {number} col column index of the cell\n   * @param {number} row row index of the cell\n   * @returns {object} cell range info\n   * @deprecated use `getCellRange` instead\n   */\n\n\n  getHeaderCellRange(col, row) {\n    return this.getCellRange(col, row);\n  }\n\n  getCopyCellValue(col, row, range) {\n    var _a;\n\n    const cellRange = _getCellRange(this, col, row);\n\n    const startCol = range ? Math.max(range.start.col, cellRange.start.col) : cellRange.start.col;\n    const startRow = range ? Math.max(range.start.row, cellRange.start.row) : cellRange.start.row;\n\n    if (startCol !== col || startRow !== row) {\n      return \"\";\n    }\n\n    const value = _getCellValue(this, col, row);\n\n    if (row < this[_].layoutMap.headerRowCount) {\n      return value;\n    }\n\n    const columnData = this[_].layoutMap.getBody(col, row);\n\n    return (_a = columnData.columnType.getCopyCellValue(value, this, {\n      col,\n      row\n    })) !== null && _a !== void 0 ? _a : value;\n  }\n\n  onDrawCell(col, row, context) {\n    const {\n      layoutMap\n    } = this[_];\n    let draw;\n    let style;\n\n    if (row < layoutMap.headerRowCount) {\n      const hd = layoutMap.getHeader(col, row);\n      draw = hd.headerType.onDrawCell;\n      ({\n        style\n      } = hd);\n\n      _updateRect(this, col, row, context);\n    } else {\n      const column = layoutMap.getBody(col, row);\n      draw = column.columnType.onDrawCell;\n      ({\n        style\n      } = column);\n\n      _updateRect(this, col, row, context);\n    }\n\n    const cellValue = _getCellValue(this, col, row);\n\n    return _onDrawValue(this, cellValue, context, {\n      col,\n      row\n    }, style, draw);\n  }\n\n  doGetCellValue(col, row, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  valueCallback) {\n    if (row < this[_].layoutMap.headerRowCount) {\n      // nop\n      return false;\n    } else {\n      const value = _getCellValue(this, col, row);\n\n      if (utils_1.isPromise(value)) {\n        //\n        return false;\n      }\n\n      valueCallback(value);\n    }\n\n    return true;\n  }\n\n  doChangeValue(col, row, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  changeValueCallback) {\n    if (row < this[_].layoutMap.headerRowCount) {\n      // nop\n      return false;\n    } else {\n      const record = this.getRowRecord(row);\n\n      if (utils_1.isPromise(record)) {\n        //\n        return false;\n      }\n\n      const before = _getCellValue(this, col, row);\n\n      if (utils_1.isPromise(before)) {\n        //\n        return false;\n      }\n\n      const after = changeValueCallback(before);\n\n      if (after === undefined) {\n        return false;\n      }\n\n      return utils_1.then(_setCellValue(this, col, row, after), ret => {\n        if (ret) {\n          const {\n            field\n          } = this[_].layoutMap.getBody(col, row);\n\n          this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, {\n            col,\n            row,\n            record: record,\n            field: field,\n            value: after,\n            oldValue: before\n          });\n        }\n\n        return ret;\n      });\n    }\n  }\n\n  doSetPasteValue(text, test) {\n    _onRangePaste.call(this, text, test);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  getHeaderValue(col, row) {\n    const field = this.getHeaderField(col, row);\n    return this.headerValues.get(field);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  setHeaderValue(col, row, newValue) {\n    const field = this.getHeaderField(col, row);\n    const oldValue = this.headerValues.get(field);\n    this.headerValues.set(field, newValue);\n    this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_HEADER_VALUE, {\n      col,\n      row,\n      field,\n      value: newValue,\n      oldValue\n    });\n  }\n\n  getLayoutCellId(col, row) {\n    return this[_].layoutMap.getCellId(col, row);\n  }\n\n  bindEventsInternal() {\n    const grid = this;\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, e => {\n      const range = _getCellRange(this, e.col, e.row);\n\n      const {\n        start: {\n          col: startCol,\n          row: startRow\n        },\n        end: {\n          col: endCol,\n          row: endRow\n        }\n      } = range;\n\n      if (startCol !== endCol || startRow !== endRow) {\n        this.invalidateCellRange(range);\n      }\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.PASTE_CELL, e => {\n      if (!this[_].allowRangePaste) {\n        return;\n      }\n\n      const {\n        start,\n        end\n      } = this.selection.range;\n\n      if (!e.multi && utils_1.cellEquals(start, end)) {\n        return;\n      }\n\n      const {\n        layoutMap\n      } = this[_];\n\n      if (start.row < layoutMap.headerRowCount) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n\n      _onRangePaste.call(this, e.normalizeValue);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.DELETE_CELL, e => {\n      const {\n        start\n      } = this.selection.range;\n      const {\n        layoutMap\n      } = this[_];\n\n      if (start.row < layoutMap.headerRowCount) {\n        return;\n      }\n\n      utils_1.event.cancel(e.event);\n\n      _onRangeDelete.call(this);\n    });\n  }\n\n  getMoveLeftColByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      start: {\n        col: startCol\n      }\n    } = _getCellRange(this, col, row);\n\n    col = startCol;\n    return super.getMoveLeftColByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getMoveRightColByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      end: {\n        col: endCol\n      }\n    } = _getCellRange(this, col, row);\n\n    col = endCol;\n    return super.getMoveRightColByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getMoveUpRowByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      start: {\n        row: startRow\n      }\n    } = _getCellRange(this, col, row);\n\n    row = startRow;\n    return super.getMoveUpRowByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getMoveDownRowByKeyDownInternal({\n    col,\n    row\n  }) {\n    const {\n      end: {\n        row: endRow\n      }\n    } = _getCellRange(this, col, row);\n\n    row = endRow;\n    return super.getMoveDownRowByKeyDownInternal({\n      col,\n      row\n    });\n  }\n\n  getOffsetInvalidateCells() {\n    return 1;\n  }\n\n  getCopyRangeInternal(range) {\n    const {\n      start\n    } = this.getCellRange(range.start.col, range.start.row);\n    const {\n      end\n    } = this.getCellRange(range.end.col, range.end.row);\n    return {\n      start,\n      end\n    };\n  }\n\n  fireListeners(type, ...event) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return super.fireListeners(type, ...event);\n  }\n\n}\n\nexports.ListGrid = ListGrid;\n\n/***/ }),\n/* 135 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar simple_header_layout_1 = __webpack_require__(136);\n\nexports.SimpleHeaderLayoutMap = simple_header_layout_1.SimpleHeaderLayoutMap;\n\nvar multi_layout_1 = __webpack_require__(137);\n\nexports.MultiLayoutMap = multi_layout_1.MultiLayoutMap;\n\n/***/ }),\n/* 136 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst columns = __importStar(__webpack_require__(16));\n\nconst headerAction = __importStar(__webpack_require__(31));\n\nconst headerType = __importStar(__webpack_require__(23));\n\nconst utils_1 = __webpack_require__(69);\n\nlet seqId = 0;\n\nclass SimpleHeaderLayoutMap {\n  constructor(header) {\n    this.bodyRowCount = 1;\n    this._emptyDataCache = new utils_1.EmptyDataCache();\n    this._columns = [];\n    this._headerCellIds = [];\n    this._headerObjects = this._addHeaders(0, header, []);\n    this._headerObjectMap = this._headerObjects.reduce((o, e) => {\n      o[e.id] = e;\n      return o;\n    }, {});\n  }\n\n  get columnWidths() {\n    return this._columns;\n  }\n\n  get headerRowCount() {\n    return this._headerCellIds.length;\n  }\n\n  get colCount() {\n    return this._columns.length;\n  }\n\n  get headerObjects() {\n    return this._headerObjects;\n  }\n\n  get columnObjects() {\n    return this._columns;\n  }\n\n  getCellId(col, row) {\n    if (this.headerRowCount <= row) {\n      return this._columns[col].id;\n    } //in header\n\n\n    return this._headerCellIds[row][col];\n  }\n\n  getHeader(col, row) {\n    const id = this.getCellId(col, row);\n    return this._headerObjectMap[id] || this._emptyDataCache.getHeader(col, row);\n  }\n\n  getBody(col, _row) {\n    return this._columns[col] || this._emptyDataCache.getBody(col, 0);\n  }\n\n  getBodyLayoutRangeById(id) {\n    for (let col = 0; col < this.colCount; col++) {\n      if (id === this._columns[col].id) {\n        return {\n          start: {\n            col,\n            row: 0\n          },\n          end: {\n            col,\n            row: 0\n          }\n        };\n      }\n    }\n\n    throw new Error(`can not found body layout @id=${id}`);\n  }\n\n  getCellRange(col, row) {\n    const result = {\n      start: {\n        col,\n        row\n      },\n      end: {\n        col,\n        row\n      }\n    };\n\n    if (this.headerRowCount <= row) {\n      return result;\n    } //in header\n\n\n    const id = this.getCellId(col, row);\n\n    for (let c = col - 1; c >= 0; c--) {\n      if (id !== this.getCellId(c, row)) {\n        break;\n      }\n\n      result.start.col = c;\n    }\n\n    for (let c = col + 1; c < this.colCount; c++) {\n      if (id !== this.getCellId(c, row)) {\n        break;\n      }\n\n      result.end.col = c;\n    }\n\n    for (let r = row - 1; r >= 0; r--) {\n      if (id !== this.getCellId(col, r)) {\n        break;\n      }\n\n      result.start.row = r;\n    }\n\n    for (let r = row + 1; r < this.headerRowCount; r++) {\n      if (id !== this.getCellId(col, r)) {\n        break;\n      }\n\n      result.end.row = r;\n    }\n\n    return result;\n  }\n\n  getRecordIndexByRow(row) {\n    if (row < this.headerRowCount) {\n      return -1;\n    } else {\n      return row - this.headerRowCount;\n    }\n  }\n\n  getRecordStartRowByRecordIndex(index) {\n    return this.headerRowCount + index;\n  }\n\n  _addHeaders(row, header, roots) {\n    const results = [];\n\n    const rowCells = this._headerCellIds[row] || this._newRow(row);\n\n    header.forEach(hd => {\n      const col = this._columns.length;\n      const id = seqId++;\n      const cell = {\n        id,\n        caption: hd.caption,\n        field: hd.headerField || hd.field,\n        style: hd.headerStyle,\n        headerType: headerType.ofCell(hd),\n        action: headerAction.ofCell(hd),\n        define: hd\n      };\n      results[id] = cell;\n      rowCells[col] = id;\n\n      for (let r = row - 1; r >= 0; r--) {\n        this._headerCellIds[r][col] = roots[r];\n      }\n\n      if (hd.columns) {\n        this._addHeaders(row + 1, hd.columns, [...roots, id]).forEach(c => results.push(c));\n      } else {\n        const colDef = hd;\n\n        this._columns.push({\n          id: seqId++,\n          field: colDef.field,\n          width: colDef.width,\n          minWidth: colDef.minWidth,\n          maxWidth: colDef.maxWidth,\n          icon: colDef.icon,\n          message: colDef.message,\n          columnType: columns.type.of(colDef.columnType),\n          action: columns.action.of(colDef.action),\n          style: colDef.style,\n          define: colDef\n        });\n\n        for (let r = row + 1; r < this._headerCellIds.length; r++) {\n          this._headerCellIds[r][col] = id;\n        }\n      }\n    });\n    return results;\n  }\n\n  _newRow(row) {\n    const newRow = this._headerCellIds[row] = [];\n\n    if (!this._columns.length) {\n      return newRow;\n    }\n\n    const prev = this._headerCellIds[row - 1];\n\n    for (let col = 0; col < prev.length; col++) {\n      newRow[col] = prev[col];\n    }\n\n    return newRow;\n  }\n\n}\n\nexports.SimpleHeaderLayoutMap = SimpleHeaderLayoutMap;\n\n/***/ }),\n/* 137 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst columns = __importStar(__webpack_require__(16));\n\nconst headerAction = __importStar(__webpack_require__(31));\n\nconst headerType = __importStar(__webpack_require__(23));\n\nconst utils_1 = __webpack_require__(69);\n\nfunction normalizeLayout(layout) {\n  if (Array.isArray(layout)) {\n    return {\n      header: layout,\n      body: layout\n    };\n  }\n\n  return layout;\n}\n\nlet seqId = 0;\n\nclass LayoutObjectGrid {\n  constructor(layout, transform) {\n    this.objects = [];\n    this.objectGrid = [];\n    this.objectMap = {};\n    this.columnCount = 0;\n    this.columnWidths = [];\n    layout.forEach((rowLayout, row) => {\n      let col = 0;\n      rowLayout.forEach(cell => {\n        var _a, _b;\n\n        const id = seqId++;\n        const obj = transform(cell, id);\n        this.objects.push(obj);\n        this.objectMap[id] = obj;\n        col = this._findStartCell(col, row);\n        const rowSpan = Number((_a = cell.rowSpan) !== null && _a !== void 0 ? _a : 1);\n        const colSpan = Number((_b = cell.colSpan) !== null && _b !== void 0 ? _b : 1);\n        const endRow = row + rowSpan;\n        const endCol = col + colSpan;\n\n        for (let rowIndex = row; rowIndex < endRow; rowIndex++) {\n          const objectGridRow = this._getObjectGridRow(rowIndex);\n\n          for (let colIndex = col; colIndex < endCol; colIndex++) {\n            objectGridRow[colIndex] = obj;\n          }\n        }\n\n        if (colSpan === 1) {\n          this._setWidthDataIfAbsent(col, cell);\n        }\n\n        this._useColumnIndex(endCol - 1);\n\n        col = endCol;\n      });\n    });\n  }\n\n  get rowCount() {\n    return this.objectGrid.length;\n  }\n\n  _findStartCell(col, row) {\n    const objectGridRow = this._getObjectGridRow(row);\n\n    for (let index = col; index < objectGridRow.length; index++) {\n      if (!objectGridRow[index]) {\n        return index;\n      }\n    }\n\n    return objectGridRow.length;\n  }\n\n  _getObjectGridRow(row) {\n    return this.objectGrid[row] || (this.objectGrid[row] = []);\n  }\n\n  _useColumnIndex(col) {\n    if (this.columnCount > col) {\n      return;\n    }\n\n    this.columnCount = col + 1;\n  }\n\n  _setWidthDataIfAbsent(col, cell) {\n    if (!this.columnWidths[col]) {\n      if (cell.width != null || cell.maxWidth != null || cell.minWidth != null) {\n        this.columnWidths[col] = {\n          width: cell.width,\n          maxWidth: cell.maxWidth,\n          minWidth: cell.minWidth\n        };\n      }\n    }\n  }\n\n}\n\nclass MultiLayoutMap {\n  constructor(layout) {\n    this._columnWidths = [];\n    this._emptyDataCache = new utils_1.EmptyDataCache();\n    const hbLayouut = normalizeLayout(layout);\n    const header = this._header = new LayoutObjectGrid(hbLayouut.header, (hd, id) => {\n      return {\n        id,\n        caption: hd.caption,\n        field: hd.headerField || hd.field,\n        style: hd.headerStyle,\n        headerType: headerType.ofCell(hd),\n        action: headerAction.ofCell(hd),\n        define: hd\n      };\n    });\n    const body = this._body = new LayoutObjectGrid(hbLayouut.body, (colDef, id) => {\n      return {\n        id,\n        field: colDef.field,\n        width: colDef.width,\n        minWidth: colDef.minWidth,\n        maxWidth: colDef.maxWidth,\n        icon: colDef.icon,\n        message: colDef.message,\n        columnType: columns.type.of(colDef.columnType),\n        action: columns.action.of(colDef.action),\n        style: colDef.style,\n        define: colDef\n      };\n    });\n    const columnCount = this._columnCount = Math.max(header.columnCount, body.columnCount);\n\n    for (let col = 0; col < columnCount; col++) {\n      const widthDef = header.columnWidths[col] || body.columnWidths[col] || {};\n      this._columnWidths[col] = widthDef;\n    }\n  }\n\n  get columnWidths() {\n    return this._columnWidths;\n  }\n\n  get headerRowCount() {\n    return this._header.rowCount;\n  }\n\n  get bodyRowCount() {\n    return this._body.rowCount;\n  }\n\n  get colCount() {\n    return this._columnCount;\n  }\n\n  get headerObjects() {\n    return this._header.objects;\n  }\n\n  get columnObjects() {\n    return this._body.objects;\n  }\n\n  getCellId(col, row) {\n    var _a, _b, _c, _d;\n\n    if (this.headerRowCount <= row) {\n      const bodyRow = row - this.headerRowCount;\n      const bodyLayoutRow = bodyRow % this.bodyRowCount;\n      return (_b = (_a = this._body.objectGrid[bodyLayoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\n    } //in header\n\n\n    return (_d = (_c = this._header.objectGrid[row]) === null || _c === void 0 ? void 0 : _c[col]) === null || _d === void 0 ? void 0 : _d.id;\n  }\n\n  getHeader(col, row) {\n    const id = this.getCellId(col, row);\n    return this._header.objectMap[id] || this._emptyDataCache.getHeader(col, row);\n  }\n\n  getBody(col, row) {\n    const id = this.getCellId(col, row);\n    return this._body.objectMap[id] || this._emptyDataCache.getBody(col, row);\n  }\n\n  getBodyLayoutRangeById(id) {\n    var _a;\n\n    for (let row = 0; row < this.bodyRowCount; row++) {\n      const objectGridRow = this._body.objectGrid[row];\n\n      if (!objectGridRow) {\n        continue;\n      }\n\n      for (let col = 0; col < this.colCount; col++) {\n        if (id === ((_a = objectGridRow[col]) === null || _a === void 0 ? void 0 : _a.id)) {\n          return this._getCellRange(this._body, col, row, 0);\n        }\n      }\n    }\n\n    throw new Error(`can not found body layout @id=${id}`);\n  }\n\n  getCellRange(col, row) {\n    if (this.headerRowCount <= row) {\n      const recordIndex = this.getRecordIndexByRow(row);\n      const startRow = this.getRecordStartRowByRecordIndex(recordIndex);\n      const bodyRow = row - this.headerRowCount;\n      const bodyLayoutRow = bodyRow % this.bodyRowCount;\n      return this._getCellRange(this._body, col, bodyLayoutRow, startRow);\n    } //in header\n\n\n    return this._getCellRange(this._header, col, row, 0);\n  }\n\n  getRecordIndexByRow(row) {\n    if (row < this.headerRowCount) {\n      return -1;\n    } else {\n      const bodyRow = row - this.headerRowCount;\n      return Math.floor(bodyRow / this.bodyRowCount);\n    }\n  }\n\n  getRecordStartRowByRecordIndex(index) {\n    return this.headerRowCount + index * this.bodyRowCount;\n  }\n\n  _getCellRange( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  layout, col, layoutRow, offsetRow) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n\n    const result = {\n      start: {\n        col,\n        row: layoutRow + offsetRow\n      },\n      end: {\n        col,\n        row: layoutRow + offsetRow\n      }\n    };\n    const {\n      objectGrid\n    } = layout;\n    const id = (_b = (_a = objectGrid[layoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\n\n    if (id == null) {\n      return result;\n    }\n\n    for (let c = col - 1; c >= 0; c--) {\n      if (id !== ((_d = (_c = objectGrid[layoutRow]) === null || _c === void 0 ? void 0 : _c[c]) === null || _d === void 0 ? void 0 : _d.id)) {\n        break;\n      }\n\n      result.start.col = c;\n    }\n\n    for (let c = col + 1; c < layout.columnCount; c++) {\n      if (id !== ((_f = (_e = objectGrid[layoutRow]) === null || _e === void 0 ? void 0 : _e[c]) === null || _f === void 0 ? void 0 : _f.id)) {\n        break;\n      }\n\n      result.end.col = c;\n    }\n\n    for (let r = layoutRow - 1; r >= 0; r--) {\n      if (id !== ((_h = (_g = objectGrid[r]) === null || _g === void 0 ? void 0 : _g[col]) === null || _h === void 0 ? void 0 : _h.id)) {\n        break;\n      }\n\n      result.start.row = r + offsetRow;\n    }\n\n    for (let r = layoutRow + 1; r < layout.rowCount; r++) {\n      if (id !== ((_k = (_j = objectGrid[r]) === null || _j === void 0 ? void 0 : _j[col]) === null || _k === void 0 ? void 0 : _k.id)) {\n        break;\n      }\n\n      result.end.row = r + offsetRow;\n    }\n\n    return result;\n  }\n\n}\n\nexports.MultiLayoutMap = MultiLayoutMap;\n\n/***/ }),\n/* 138 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n //see https://github.com/typekit/webfontloader\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\n\nconst FontRuler_1 = __webpack_require__(139);\n\nconst LastResortFonts = {\n  SERIF: \"serif\",\n  SANS_SERIF: \"sans-serif\"\n};\nconst watchRunners = {};\n\nclass FontWatchRunner {\n  constructor(font, testStr) {\n    this.activeCallbacks = [];\n    this.inactiveCallbacks = [];\n    this.status = null;\n    this.lastResortWidths_ = {};\n    this.fontRulerA_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SERIF}`, testStr);\n    this.fontRulerB_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SANS_SERIF}`, testStr);\n    const lastResortRulerA = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SERIF}`, testStr);\n    const lastResortRulerB = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SANS_SERIF}`, testStr); //start\n\n    this.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\n    this.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\n    lastResortRulerA.remove();\n    lastResortRulerB.remove();\n    this.started_ = Date.now();\n    this.check_();\n  }\n\n  static load(font, testStr, activeCallback, inactiveCallback) {\n    const c = watchRunners[font] || (watchRunners[font] = {});\n    testStr += \"\";\n    let runner;\n\n    if (c[testStr]) {\n      runner = c[testStr];\n    } else {\n      runner = c[testStr] = new FontWatchRunner(font, testStr);\n    }\n\n    runner.then(activeCallback, inactiveCallback);\n  }\n\n  then(activeCallback, inactiveCallback) {\n    if (this.status) {\n      if (this.status !== \"ng\") {\n        activeCallback();\n      } else {\n        inactiveCallback();\n      }\n    } else {\n      this.activeCallbacks.push(activeCallback);\n      this.inactiveCallbacks.push(inactiveCallback);\n    }\n  }\n\n  check_() {\n    const widthA = this.fontRulerA_.getWidth();\n    const widthB = this.fontRulerB_.getWidth();\n\n    if (this.isFallbackFont_(widthA, widthB) || this.isLastResortFont_(widthA, widthB)) {\n      if (Date.now() - this.started_ >= 3000) {\n        // timeout\n        if (this.isLastResortFont_(widthA, widthB)) {\n          this.finish_(this.activeCallbacks);\n          this.status = \"ok\";\n        } else {\n          this.finish_(this.inactiveCallbacks);\n          this.status = \"ng\";\n        }\n      } else {\n        setTimeout(() => {\n          this.check_();\n        }, 50);\n      }\n    } else {\n      this.finish_(this.activeCallbacks);\n      this.status = \"ok\";\n    }\n  }\n\n  isFallbackFont_(a, b) {\n    return this.widthMatches_(a, LastResortFonts.SERIF) && this.widthMatches_(b, LastResortFonts.SANS_SERIF);\n  }\n\n  widthsMatchLastResortWidths_(a, b) {\n    for (const font in LastResortFonts) {\n      if (LastResortFonts.hasOwnProperty(font)) {\n        if (this.widthMatches_(a, LastResortFonts[font]) && this.widthMatches_(b, LastResortFonts[font])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  widthMatches_(width, lastResortFont) {\n    return width === this.lastResortWidths_[lastResortFont];\n  }\n\n  isLastResortFont_(a, b) {\n    return hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\n  }\n\n  finish_(callbacks) {\n    setTimeout(() => {\n      this.fontRulerA_.remove();\n      this.fontRulerB_.remove();\n      callbacks.forEach(cb => cb());\n    }, 0);\n  }\n\n}\n\nlet HAS_WEBKIT_FALLBACK_BUG = null;\n\nfunction hasWebKitFallbackBug() {\n  if (HAS_WEBKIT_FALLBACK_BUG === null) {\n    const match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\n    HAS_WEBKIT_FALLBACK_BUG = !!match && (parseInt(match[1], 10) < 536 || parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11);\n  }\n\n  return HAS_WEBKIT_FALLBACK_BUG;\n}\n\nmodule.exports = FontWatchRunner;\n\n/***/ }),\n/* 139 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n //see https://github.com/typekit/webfontloader\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction computeStyle(font) {\n  return [{\n    display: \"block\",\n    position: \"absolute\",\n    top: \"-9999px\",\n    left: \"-9999px\",\n    width: \"auto\",\n    height: \"auto\",\n    margin: \"0\",\n    padding: \"0\",\n    \"white-space\": \"nowrap\",\n    font\n  }, {\n    \"font-variant\": \"normal\",\n    \"font-size\": \"300px\",\n    \"font-style\": \"normal\",\n    \"font-weight\": \"400\",\n    \"line-height\": \"normal\"\n  }];\n}\n\nclass FontRuler {\n  constructor(font, testStr) {\n    const e = document.createElement(\"span\");\n    e.setAttribute(\"aria-hidden\", \"true\");\n    e.textContent = testStr || \"BESbswy\";\n    computeStyle(font).forEach(style => {\n      for (const k in style) {\n        const key = k; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        e.style[key] = style[key];\n      }\n    });\n    document.body.appendChild(e);\n    this.el_ = e;\n  }\n\n  getWidth() {\n    return this.el_.offsetWidth;\n  }\n\n  remove() {\n    document.body.removeChild(this.el_);\n  }\n\n}\n\nexports.FontRuler = FontRuler;\n\n/***/ }),\n/* 140 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst icons = __importStar(__webpack_require__(65));\n\nconst path2DManager = __importStar(__webpack_require__(36));\n\nconst Inline_1 = __webpack_require__(15);\n\nconst canvases_1 = __webpack_require__(8);\n\nconst InlineDrawer_1 = __webpack_require__(72);\n\nconst InlineIcon_1 = __webpack_require__(144);\n\nconst InlineImage_1 = __webpack_require__(73);\n\nconst InlinePath2D_1 = __webpack_require__(145);\n\nconst InlineSvg_1 = __webpack_require__(146);\n\nconst utils_1 = __webpack_require__(0);\n\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, {\n  offset = 2,\n  padding\n} = {}) {\n  const rect = {\n    left,\n    top,\n    width,\n    height,\n    right: left + width,\n    bottom: top + height\n  };\n  ctx.save();\n\n  try {\n    ctx.beginPath();\n    ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n    ctx.clip(); //\n\n    const pos = canvases_1.calcStartPosition(ctx, rect, drawWidth, drawHeight, {\n      offset,\n      padding\n    });\n    path2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\n  } finally {\n    ctx.restore();\n  }\n}\n\nfunction isIconConstructorOption(icon) {\n  if (icon.font && icon.content) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isInlineImageConstructorOption(icon) {\n  if (icon.src) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isInlineSvgConstructorOption(icon) {\n  if (icon.path) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction iconOf(icon) {\n  if (icon instanceof Inline_1.Inline) {\n    return icon;\n  }\n\n  if (!icon) {\n    return null;\n  }\n\n  if (isIconConstructorOption(icon)) {\n    return new InlineIcon_1.InlineIcon(icon);\n  }\n\n  if (isInlineImageConstructorOption(icon)) {\n    return new InlineImage_1.InlineImage({\n      src: icon.src,\n      width: icon.width,\n      height: icon.width\n    });\n  }\n\n  if (icon.svg) {\n    return new InlineSvg_1.InlineSvg({\n      svg: icon.svg,\n      width: icon.width,\n      height: icon.width\n    });\n  }\n\n  if (isInlineSvgConstructorOption(icon)) {\n    return new InlinePath2D_1.InlinePath2D({\n      path: icon.path,\n      width: icon.width,\n      height: icon.width,\n      color: icon.color\n    });\n  }\n\n  const regedIcons = icons.get();\n\n  if (icon.name && regedIcons[icon.name]) {\n    const regedIcon = regedIcons[icon.name];\n    const width = icon.width || Math.max(regedIcon.width, regedIcon.height);\n    return new InlineDrawer_1.InlineDrawer({\n      draw({\n        ctx,\n        rect,\n        offset,\n        offsetLeft,\n        offsetRight,\n        offsetTop,\n        offsetBottom\n      }) {\n        drawRegisteredIcon(ctx, regedIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\n          offset: offset + 1,\n          padding: {\n            left: offsetLeft,\n            right: offsetRight,\n            top: offsetTop,\n            bottom: offsetBottom\n          }\n        });\n      },\n\n      width,\n      height: width,\n      color: icon.color\n    });\n  }\n\n  return new InlineIcon_1.InlineIcon(icon);\n}\n\nexports.iconOf = iconOf;\n\nfunction of(content) {\n  if (!utils_1.isDef(content)) {\n    return null;\n  }\n\n  if (content instanceof Inline_1.Inline) {\n    return content;\n  }\n\n  return new Inline_1.Inline(content);\n}\n\nexports.of = of;\n\nfunction buildInlines(icons, inline) {\n  const result = [];\n\n  if (icons) {\n    result.push(...icons.map(icon => iconOf(icon)).filter(utils_1.isDef));\n  }\n\n  if (Array.isArray(inline) // && inline.filter(il => il instanceof Inline).length <- ?\n  ) {\n      result.push(...inline.map(il => of(il)).filter(utils_1.isDef));\n    } else {\n    const il = of(inline);\n\n    if (il) {\n      result.push(il);\n    }\n  }\n\n  return result;\n}\n\nexports.buildInlines = buildInlines;\n\nfunction string(inline) {\n  return buildInlines(undefined, inline).join(\"\");\n}\n\nexports.string = string;\n\n/***/ }),\n/* 141 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst PathCommandsParser_1 = __webpack_require__(142);\n\nconst parser = new PathCommandsParser_1.PathCommandsParser();\n\nclass Path2DShim {\n  constructor(arg) {\n    this._ops = [];\n\n    if (arg === undefined) {\n      return;\n    }\n\n    if (typeof arg === \"string\") {\n      // try {\n      this._ops = parser.parse(arg); // } catch (e) {\n      // \tthrow e;\n      // }\n    } else if (arg.hasOwnProperty(\"_ops\")) {\n      this._ops = [...arg._ops];\n    } else {\n      throw new Error(`Error: ${typeof arg} is not a valid argument to Path`);\n    }\n  }\n\n  arc(...args) {\n    this._ops.push({\n      op: \"arc\",\n      args\n    });\n  }\n\n  arcTo(...args) {\n    this._ops.push({\n      op: \"arcTo\",\n      args\n    });\n  }\n\n  bezierCurveTo(...args) {\n    this._ops.push({\n      op: \"bezierCurveTo\",\n      args\n    });\n  }\n\n  closePath(...args) {\n    this._ops.push({\n      op: \"closePath\",\n      args\n    });\n  }\n\n  ellipse(...args) {\n    this._ops.push({\n      op: \"ellipse\",\n      args\n    });\n  }\n\n  lineTo(...args) {\n    this._ops.push({\n      op: \"lineTo\",\n      args\n    });\n  }\n\n  moveTo(...args) {\n    this._ops.push({\n      op: \"moveTo\",\n      args\n    });\n  }\n\n  quadraticCurveTo(...args) {\n    this._ops.push({\n      op: \"quadraticCurveTo\",\n      args\n    });\n  }\n\n  rect(...args) {\n    this._ops.push({\n      op: \"rect\",\n      args\n    });\n  }\n\n}\n\nexports.Path2DShim = Path2DShim;\nconst {\n  CanvasRenderingContext2D\n} = window;\nconst originalFill = CanvasRenderingContext2D.prototype.fill; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nCanvasRenderingContext2D.prototype.fill = function (...args) {\n  if (args[0] instanceof Path2DShim) {\n    const path = args[0];\n    this.beginPath();\n\n    path._ops.forEach(op => {\n      const fn = this[op.op];\n      fn.apply(this, op.args);\n    });\n\n    originalFill.apply(this, Array.prototype.slice.call(args, 1));\n  } else {\n    originalFill.apply(this, args);\n  }\n};\n\n/***/ }),\n/* 142 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst PathCommands_1 = __webpack_require__(143);\n\nfunction pathTokens(d) {\n  let idx = 0;\n  return {\n    next() {\n      let s = \"\";\n\n      while (d.length > idx) {\n        const c = d[idx];\n        idx++;\n\n        if (\" ,\\n\\r\\t\".indexOf(c) > -1) {\n          if (s) {\n            return s;\n          }\n        } else {\n          const type = \".+-1234567890\".indexOf(c) > -1 ? \"num\" : \"str\";\n\n          if (type === \"str\") {\n            if (s) {\n              idx--;\n              return s;\n            }\n\n            return c;\n          }\n\n          if (\"-+\".indexOf(c) > -1) {\n            if (s) {\n              idx--;\n              return s;\n            }\n          }\n\n          if (c === \".\") {\n            if (s.indexOf(\".\") > -1) {\n              idx--;\n              return s;\n            }\n          }\n\n          s += c;\n        }\n      }\n\n      return s || null;\n    }\n\n  };\n}\n\nfunction command(builder, cmd, argsProvider) {\n  if (cmd.toUpperCase() === \"M\" || cmd.toUpperCase() === \"L\" || cmd.toUpperCase() === \"T\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next());\n    return cmd === \"M\" ? \"L\" : cmd === \"m\" ? \"l\" : cmd;\n  } else if (cmd.toUpperCase() === \"H\" || cmd.toUpperCase() === \"V\") {\n    builder.command(cmd, argsProvider.next());\n    return cmd;\n  } else if (cmd.toUpperCase() === \"Z\") {\n    builder.command(cmd);\n    return cmd;\n  } else if (cmd.toUpperCase() === \"C\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n    return cmd;\n  } else if (cmd.toUpperCase() === \"S\" || cmd.toUpperCase() === \"Q\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n    return cmd;\n  } else if (cmd.toUpperCase() === \"A\") {\n    builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n    return cmd;\n  } else {\n    // https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\n    console.warn(`unsupported:${cmd}`);\n  }\n\n  return null;\n}\n\nclass PathCommandsParser {\n  constructor() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this._ops = [];\n    this._commands = new PathCommands_1.PathCommands(this); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    const buildPush = op => (...args) => {\n      this._ops.push({\n        op,\n        args\n      });\n    };\n\n    this.moveTo = buildPush(\"moveTo\");\n    this.lineTo = buildPush(\"lineTo\");\n    this.closePath = buildPush(\"closePath\");\n    this.bezierCurveTo = buildPush(\"bezierCurveTo\");\n    this.quadraticCurveTo = buildPush(\"quadraticCurveTo\");\n    this.save = buildPush(\"save\");\n    this.translate = buildPush(\"translate\");\n    this.rotate = buildPush(\"rotate\");\n    this.scale = buildPush(\"scale\");\n    this.arc = buildPush(\"arc\");\n    this.restore = buildPush(\"restore\");\n    this.arcTo = buildPush(\"arcTo\");\n    this.ellipse = buildPush(\"ellipse\");\n    this.rect = buildPush(\"rect\");\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  command(name, ...args) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const numArgs = args || [];\n\n    for (let i = 0; i < args.length; i++) {\n      numArgs[i] -= 0;\n    }\n\n    const command = this._commands[name]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    command.apply(this, numArgs);\n  } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  parse(d) {\n    const ops = this._ops = [];\n    const tokens = pathTokens(d);\n\n    try {\n      let cmd;\n      let subsequentCommand = \"Z\";\n\n      while (cmd = tokens.next()) {\n        if (!isNaN(Number(cmd))) {\n          let fst = true;\n          const argsProvider = {\n            next() {\n              if (fst) {\n                fst = false;\n                return cmd;\n              }\n\n              return tokens.next();\n            }\n\n          };\n          subsequentCommand = command(this, subsequentCommand, argsProvider) || \"Z\";\n        } else {\n          subsequentCommand = command(this, cmd, tokens) || \"Z\";\n        }\n      }\n    } catch (e) {\n      console.log(`Error: ${d}`);\n      throw e;\n    }\n\n    return ops;\n  }\n\n}\n\nexports.PathCommandsParser = PathCommandsParser;\n\n/***/ }),\n/* 143 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/*eslint new-cap: \"off\"*/\n\nfunction mag(v) {\n  return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\n\nfunction dot(u, v) {\n  return u[0] * v[0] + u[1] * v[1];\n}\n\nfunction ratio(u, v) {\n  return dot(u, v) / (mag(u) * mag(v));\n}\n\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\nfunction angle(u, v) {\n  let sign = 1.0;\n\n  if (u[0] * v[1] - u[1] * v[0] < 0) {\n    sign = -1.0;\n  }\n\n  return sign * Math.acos(clamp(ratio(u, v), -1, 1));\n}\n\nfunction rotClockwise(v, angle) {\n  const cost = Math.cos(angle);\n  const sint = Math.sin(angle);\n  return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\n}\n\nfunction rotCounterClockwise(v, angle) {\n  const cost = Math.cos(angle);\n  const sint = Math.sin(angle);\n  return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\n}\n\nfunction midPoint(u, v) {\n  return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\n}\n\nfunction meanVec(u, v) {\n  return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\n}\n\nfunction pointMul(u, v) {\n  return [u[0] * v[0], u[1] * v[1]];\n}\n\nfunction scale(c, v) {\n  return [c * v[0], c * v[1]];\n}\n\nfunction sum(u, v) {\n  return [u[0] + v[0], u[1] + v[1]];\n} // Convert an SVG elliptical arc to a series of canvas commands.\n//\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\n// rx, ry: radii of the ellipse.\n// phi: rotation of the ellipse.\n// fA: large arc flag.\n// fS: sweep flag.\n\n\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\n  // Convert from endpoint to center parametrization, as detailed in:\n  //   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n  if (rx === 0 || ry === 0) {\n    ctx.lineTo(x2, x1);\n    return;\n  }\n\n  phi *= Math.PI / 180.0;\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  const xPrime = rotClockwise(midPoint([x1, y1], [x2, y2]), phi); // F.6.5.1\n\n  const xPrime2 = pointMul(xPrime, xPrime);\n  let rx2 = Math.pow(rx, 2);\n  let ry2 = Math.pow(ry, 2);\n  const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\n\n  if (lambda > 1) {\n    rx *= lambda;\n    ry *= lambda;\n    rx2 = Math.pow(rx, 2);\n    ry2 = Math.pow(ry, 2);\n  }\n\n  let factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) / (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\n\n  if (fA === fS) {\n    factor *= -1.0;\n  }\n\n  const cPrime = scale(factor, [rx * xPrime[1] / ry, -ry * xPrime[0] / rx]); // F.6.5.2\n\n  const c = sum(rotCounterClockwise(cPrime, phi), meanVec([x1, y1], [x2, y2])); // F.6.5.3\n\n  const x1UnitVector = [(xPrime[0] - cPrime[0]) / rx, (xPrime[1] - cPrime[1]) / ry];\n  const x2UnitVector = [(-1.0 * xPrime[0] - cPrime[0]) / rx, (-1.0 * xPrime[1] - cPrime[1]) / ry];\n  const theta = angle([1, 0], x1UnitVector); // F.6.5.5\n\n  const deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\n\n  const start = theta;\n  const end = theta + deltaTheta;\n  ctx.save();\n  ctx.translate(c[0], c[1]);\n  ctx.rotate(phi);\n  ctx.scale(rx, ry);\n  ctx.arc(0, 0, 1, start, end, !fS);\n  ctx.restore();\n}\n\nclass PathCommands {\n  constructor(ctx) {\n    let lMx;\n    let lMy;\n    let lx = 0;\n    let ly = 0;\n    let reflected;\n    let lastCommand = \"\";\n\n    function makeReflected() {\n      if (\"CcSsQqTt\".indexOf(lastCommand) < 0) {\n        return {\n          x: lx,\n          y: ly\n        };\n      }\n\n      return reflected;\n    }\n\n    this.M = (px, py) => {\n      ctx.moveTo(px, py);\n      lMx = px;\n      lMy = py;\n      lx = px;\n      ly = py;\n      lastCommand = \"M\";\n      return this;\n    };\n\n    this.m = (px, py) => this.M(px + lx, py + ly);\n\n    this.L = (px, py) => {\n      ctx.lineTo(px, py);\n      lx = px;\n      ly = py;\n      lastCommand = \"L\";\n      return this;\n    };\n\n    this.l = (px, py) => this.L(px + lx, py + ly);\n\n    this.H = px => this.L(px, ly);\n\n    this.h = px => this.H(px + lx);\n\n    this.V = py => this.L(lx, py);\n\n    this.v = py => this.V(py + ly);\n\n    this.Z = () => {\n      ctx.closePath();\n      lx = lMx;\n      ly = lMy;\n      lastCommand = \"Z\";\n      return this;\n    };\n\n    this.z = () => this.Z(); //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\n\n\n    this.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\n      ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\n      lx = px;\n      ly = py;\n      reflected = {\n        x: 2 * px - cp2x,\n        y: 2 * py - cp2y\n      };\n      lastCommand = \"C\";\n      return this;\n    };\n\n    this.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly); //S x2 y2, x y (or s dx2 dy2, dx dy)\n\n\n    this.S = (cpx, cpy, px, py) => {\n      const {\n        x: cp1x,\n        y: cp1y\n      } = makeReflected();\n      return this.C(cp1x, cp1y, cpx, cpy, px, py);\n    };\n\n    this.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly); //Q x1 y1, x y (or q dx1 dy1, dx dy)\n\n\n    this.Q = (cpx, cpy, px, py) => {\n      ctx.quadraticCurveTo(cpx, cpy, px, py);\n      lx = px;\n      ly = py;\n      reflected = {\n        x: 2 * px - cpx,\n        y: 2 * py - cpy\n      };\n      lastCommand = \"Q\";\n      return this;\n    };\n\n    this.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly); //T x y (or t dx dy)\n\n\n    this.T = (px, py) => {\n      const {\n        x: cpx,\n        y: cpy\n      } = makeReflected();\n      return this.Q(cpx, cpy, px, py);\n    };\n\n    this.t = (px, py) => this.T(px + lx, py + ly); //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\n\n\n    this.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\n      const x1 = lx;\n      const y1 = ly;\n      ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\n      lx = px;\n      ly = py;\n      lastCommand = \"A\";\n      return this;\n    }; //a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\n\n\n    this.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\n  }\n\n}\n\nexports.PathCommands = PathCommands;\n\n/***/ }),\n/* 144 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst fonts = __importStar(__webpack_require__(71));\n\nconst Inline_1 = __webpack_require__(15);\n\nclass InlineIcon extends Inline_1.Inline {\n  constructor(icon) {\n    super();\n    this._icon = icon || {};\n  }\n\n  width({\n    ctx\n  }) {\n    const icon = this._icon;\n\n    if (icon.width) {\n      return icon.width;\n    }\n\n    if (icon.font && fonts.check(icon.font, icon.content || \"\")) {\n      ctx.save();\n      ctx.canvas.style.letterSpacing = \"normal\";\n\n      try {\n        ctx.font = icon.font || ctx.font;\n        return ctx.measureText(icon.content || \"\").width;\n      } finally {\n        ctx.canvas.style.letterSpacing = \"\";\n        ctx.restore();\n      }\n    }\n\n    return 0; //unknown\n  }\n\n  font() {\n    var _a;\n\n    return (_a = this._icon.font) !== null && _a !== void 0 ? _a : null;\n  }\n\n  color() {\n    var _a;\n\n    return (_a = this._icon.color) !== null && _a !== void 0 ? _a : null;\n  }\n\n  canDraw() {\n    const icon = this._icon;\n    return icon.font ? fonts.check(icon.font, icon.content || \"\") : true;\n  }\n\n  onReady(callback) {\n    const icon = this._icon;\n\n    if (icon.font && !fonts.check(icon.font, icon.content || \"\")) {\n      fonts.load(icon.font, icon.content || \"\", callback);\n    }\n  }\n\n  draw({\n    ctx,\n    canvashelper,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    const icon = this._icon;\n\n    if (icon.content) {\n      ctx.canvas.style.letterSpacing = \"normal\";\n\n      try {\n        // eslint-disable-next-line no-self-assign\n        ctx.font = ctx.font; // To apply letterSpacing, we need to reset it.\n\n        canvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\n          offset: offset + 1,\n          padding: {\n            left: offsetLeft,\n            right: offsetRight,\n            top: offsetTop,\n            bottom: offsetBottom\n          }\n        });\n      } finally {\n        ctx.canvas.style.letterSpacing = \"\";\n      }\n    }\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineIcon = InlineIcon;\n\n/***/ }),\n/* 145 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst path2DManager = __importStar(__webpack_require__(36));\n\nconst Inline_1 = __webpack_require__(15);\n\nconst canvases_1 = __webpack_require__(8);\n\nclass InlinePath2D extends Inline_1.Inline {\n  constructor({\n    path,\n    width,\n    height,\n    color\n  }) {\n    super(); // IEPath2Dpolyfill\n\n    const Path2D = path2DManager.getPath2D();\n    this._path = new Path2D(path);\n    this._width = width;\n    this._height = height;\n    this._color = color;\n  }\n\n  width(_arg) {\n    return this._width;\n  }\n\n  font() {\n    return null;\n  }\n\n  color() {\n    var _a;\n\n    return (_a = this._color) !== null && _a !== void 0 ? _a : null;\n  }\n\n  canDraw() {\n    return true;\n  } // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\n  onReady(_callback) {}\n\n  draw({\n    ctx,\n    rect,\n    offset,\n    offsetLeft,\n    offsetRight,\n    offsetTop,\n    offsetBottom\n  }) {\n    offset++;\n    const padding = {\n      left: offsetLeft,\n      right: offsetRight,\n      top: offsetTop,\n      bottom: offsetBottom\n    };\n    ctx.save();\n\n    try {\n      ctx.beginPath();\n      ctx.rect(rect.left, rect.top, rect.width, rect.height); //clip\n\n      ctx.clip(); //\n\n      const pos = canvases_1.calcStartPosition(ctx, rect, this._width, this._height, {\n        offset,\n        padding\n      });\n      ctx.translate(pos.x, pos.y);\n      ctx.fill(this._path);\n    } finally {\n      ctx.restore();\n    }\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlinePath2D = InlinePath2D;\n\n/***/ }),\n/* 146 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils_1 = __webpack_require__(0);\n\nconst InlineImage_1 = __webpack_require__(73);\n\nfunction buildSvgDataUrl(svg) {\n  const data = typeof svg === \"string\" ? svg : new XMLSerializer().serializeToString(svg);\n  const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(data)}`; //svgbase64\n\n  return url;\n}\n\nfunction getSvgElement(svg) {\n  if (typeof svg === \"string\") {\n    const parser = new DOMParser();\n    return parser.parseFromString(svg, \"image/svg+xml\").children[0];\n  } else {\n    return svg;\n  }\n}\n\nclass InlineSvg extends InlineImage_1.InlineImage {\n  constructor({\n    svg,\n    width,\n    height\n  }) {\n    var _a, _b;\n\n    const svgElem = utils_1.then(svg, getSvgElement);\n    const elmWidth = !utils_1.isPromise(svgElem) ? (_a = svgElem.getAttribute(\"width\")) !== null && _a !== void 0 ? _a : undefined : undefined;\n    const elmHeight = !utils_1.isPromise(svgElem) ? (_b = svgElem.getAttribute(\"height\")) !== null && _b !== void 0 ? _b : undefined : undefined;\n    const numElmWidth = elmWidth != null ? Number(elmWidth) : undefined;\n    const numElmHeight = elmHeight != null ? Number(elmHeight) : undefined;\n    super({\n      src: utils_1.then(svg, buildSvgDataUrl),\n      width: width || numElmWidth,\n      height: height || numElmHeight,\n      imageWidth: numElmWidth,\n      imageHeight: numElmHeight\n    });\n  }\n\n  canBreak() {\n    return false;\n  }\n\n  toString() {\n    return \"\";\n  }\n\n}\n\nexports.InlineSvg = InlineSvg;\n\n/***/ }),\n/* 147 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst ErrorMessage_1 = __webpack_require__(148);\n\nconst InfoMessage_1 = __webpack_require__(154);\n\nconst LG_EVENT_TYPE_1 = __webpack_require__(37);\n\nconst WarningMessage_1 = __webpack_require__(155);\n\nconst utils_1 = __webpack_require__(0);\n\nconst EMPTY_MESSAGE = {\n  type: \"error\",\n  message: null\n};\nconst MESSAGE_INSTANCE_FACTORY = {\n  error(grid) {\n    return new ErrorMessage_1.ErrorMessage(grid);\n  },\n\n  info(grid) {\n    return new InfoMessage_1.InfoMessage(grid);\n  },\n\n  warning(grid) {\n    return new WarningMessage_1.WarningMessage(grid);\n  }\n\n};\n\nfunction normalizeMessage(message) {\n  if (!message || utils_1.isPromise(message)) {\n    return EMPTY_MESSAGE;\n  }\n\n  if (typeof message === \"string\") {\n    return {\n      type: \"error\",\n      message,\n      original: message\n    };\n  }\n\n  const type = message.type || \"error\";\n\n  if (type && type in MESSAGE_INSTANCE_FACTORY) {\n    return {\n      type: type.toLowerCase(),\n      message: message.message,\n      original: message\n    };\n  }\n\n  return {\n    type: \"error\",\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n    message: `${message}`,\n    original: message\n  };\n}\n\nfunction hasMessage(message) {\n  return !!normalizeMessage(message).message;\n}\n\nclass MessageHandler {\n  constructor(grid, getMessage) {\n    this._attachInfo = null;\n    this._grid = grid;\n    this._messageInstances = {};\n\n    this._bindGridEvent(grid, getMessage);\n  }\n\n  dispose() {\n    var _a;\n\n    const messageInstances = this._messageInstances;\n\n    for (const k in messageInstances) {\n      (_a = messageInstances[k]) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n\n    delete this._messageInstances;\n    delete this._attachInfo;\n  }\n\n  drawCellMessage(message, context, style, helper, grid, info) {\n    if (!hasMessage(message)) {\n      return;\n    }\n\n    const instance = this._getMessageInstanceOfMessage(message);\n\n    instance.drawCellMessage(normalizeMessage(message), context, style, helper, grid, info);\n  }\n\n  _attach(col, row, message) {\n    const info = this._attachInfo;\n\n    const instance = this._getMessageInstanceOfMessage(message);\n\n    if (info && info.instance !== instance) {\n      info.instance.detachMessageElement();\n    }\n\n    instance.attachMessageElement(col, row, normalizeMessage(message));\n    this._attachInfo = {\n      col,\n      row,\n      instance\n    };\n  }\n\n  _move(col, row) {\n    const info = this._attachInfo;\n\n    if (!info || info.col !== col || info.row !== row) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.moveMessageElement(col, row);\n  }\n\n  _detach() {\n    const info = this._attachInfo;\n\n    if (!info) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.detachMessageElement();\n    this._attachInfo = null;\n  }\n\n  _bindGridEvent(grid, getMessage) {\n    const onSelectMessage = sel => {\n      const message = getMessage(sel.col, sel.row);\n\n      if (!hasMessage(message)) {\n        this._detach();\n      } else {\n        this._attach(sel.col, sel.row, message);\n      }\n    };\n\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, e => {\n      if (!e.selected) {\n        return;\n      }\n\n      if (e.before.col === e.col && e.before.row === e.row) {\n        return;\n      }\n\n      onSelectMessage(e);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\n      const sel = grid.selection.select;\n\n      this._move(sel.col, sel.row);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, e => {\n      const sel = grid.selection.select;\n\n      if (sel.col !== e.col || sel.row !== e.row) {\n        return;\n      }\n\n      onSelectMessage(e);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.FOCUS_GRID, _e => {\n      const sel = grid.selection.select;\n      onSelectMessage(sel);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BLUR_GRID, _e => {\n      this._detach();\n    });\n  }\n\n  _getMessageInstanceOfMessage(message) {\n    const messageInstances = this._messageInstances;\n    const {\n      type\n    } = normalizeMessage(message);\n    return messageInstances[type] || (messageInstances[type] = MESSAGE_INSTANCE_FACTORY[type](this._grid));\n  }\n\n}\n\nexports.MessageHandler = MessageHandler;\n\n/***/ }),\n/* 148 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst messageUtils = __importStar(__webpack_require__(38));\n\nconst BaseMessage_1 = __webpack_require__(39);\n\nconst ErrorMessageElement_1 = __webpack_require__(149);\n\nconst utils_1 = __webpack_require__(0);\n\nconst RED_A100 = \"#ff8a80\";\n\nclass ErrorMessage extends BaseMessage_1.BaseMessage {\n  createMessageElementInternal() {\n    return new ErrorMessageElement_1.ErrorMessageElement();\n  }\n\n  drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n    const {\n      bgColor\n    } = style;\n    const {\n      select\n    } = context.getSelection();\n\n    if (!utils_1.cellInRange(grid.getCellRange(context.col, context.row), select.col, select.row) || !grid.hasFocusGrid()) {\n      helper.drawBorderWithClip(context, _ctx => {\n        messageUtils.drawExclamationMarkBox(context, {\n          bgColor: RED_A100,\n          color: bgColor\n        }, helper);\n      });\n    }\n  }\n\n}\n\nexports.ErrorMessage = ErrorMessage;\n\n/***/ }),\n/* 149 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst MessageElement_1 = __webpack_require__(40);\n\nconst CLASSNAME = \"cheetah-grid__error-message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\n\nclass ErrorMessageElement extends MessageElement_1.MessageElement {\n  constructor() {\n    super();\n\n    __webpack_require__(152);\n\n    this._rootElement.classList.add(CLASSNAME);\n\n    this._messageElement.classList.add(MESSAGE_CLASSNAME);\n  }\n\n}\n\nexports.ErrorMessageElement = ErrorMessageElement;\n\n/***/ }),\n/* 150 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(151);\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(5)(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n/* 151 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(4)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__message-element {\\n\\tposition: absolute;\\n\\tmargin-top: -2px;\\n\\tbox-sizing: border-box;\\n\\tborder-radius: 0 0 3px 3px;\\n\\tbackground-color: rgba(250, 250, 250, .85);\\n\\tpadding: 8px 2px;\\n\\tpointer-events: none;\\n\\tuser-select: none;\\n\\tborder-top: solid 1px rgba(0, 0, 0, .87);\\n\\tcolor: rgba(0, 0, 0, .87);\\n}\\n.cheetah-grid__message-element--hidden {\\n\\tdisplay: none;\\n}\\n.cheetah-grid__message-element--shown {\\n\\tdisplay: block;\\n}\\n.cheetah-grid__message-element__message {\\n\\tfont-family: Roboto;\\n\\tfont-size: 12px;\\n\\tfont-size: .75rem;\\n\\tmin-height: 1em;\\n\\tline-height: 1;\\n\\tdisplay: block;\\n\\twidth: 100%;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 152 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(153);\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(5)(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n/* 153 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(4)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__error-message-element {\\n\\tborder-top: solid 1px #ff1744;\\n\\tcolor: #ff1744;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 154 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst messageUtils = __importStar(__webpack_require__(38));\n\nconst BaseMessage_1 = __webpack_require__(39);\n\nconst MessageElement_1 = __webpack_require__(40);\n\nconst utils_1 = __webpack_require__(0);\n\nconst GREY_L2 = \"#e0e0e0\";\n\nclass InfoMessage extends BaseMessage_1.BaseMessage {\n  createMessageElementInternal() {\n    return new MessageElement_1.MessageElement();\n  }\n\n  drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n    const {\n      bgColor\n    } = style;\n    const {\n      select\n    } = context.getSelection();\n\n    if (!utils_1.cellInRange(grid.getCellRange(context.col, context.row), select.col, select.row) || !grid.hasFocusGrid()) {\n      helper.drawBorderWithClip(context, _ctx => {\n        messageUtils.drawExclamationMarkBox(context, {\n          bgColor: GREY_L2,\n          color: bgColor\n        }, helper);\n      });\n    }\n  }\n\n}\n\nexports.InfoMessage = InfoMessage;\n\n/***/ }),\n/* 155 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst messageUtils = __importStar(__webpack_require__(38));\n\nconst BaseMessage_1 = __webpack_require__(39);\n\nconst WarningMessageElement_1 = __webpack_require__(156);\n\nconst utils_1 = __webpack_require__(0);\n\nconst DEEP_ORANGE_A100 = \"#ff9e80\";\n\nclass WarningMessage extends BaseMessage_1.BaseMessage {\n  createMessageElementInternal() {\n    return new WarningMessageElement_1.WarningMessageElement();\n  }\n\n  drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n    const {\n      bgColor\n    } = style;\n    const {\n      select\n    } = context.getSelection();\n\n    if (!utils_1.cellInRange(grid.getCellRange(context.col, context.row), select.col, select.row) || !grid.hasFocusGrid()) {\n      helper.drawBorderWithClip(context, _ctx => {\n        messageUtils.drawExclamationMarkBox(context, {\n          bgColor: DEEP_ORANGE_A100,\n          color: bgColor\n        }, helper);\n      });\n    }\n  }\n\n}\n\nexports.WarningMessage = WarningMessage;\n\n/***/ }),\n/* 156 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst MessageElement_1 = __webpack_require__(40);\n\nconst CLASSNAME = \"cheetah-grid__warning-message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\n\nclass WarningMessageElement extends MessageElement_1.MessageElement {\n  constructor() {\n    super();\n\n    __webpack_require__(157);\n\n    this._rootElement.classList.add(CLASSNAME);\n\n    this._messageElement.classList.add(MESSAGE_CLASSNAME);\n  }\n\n}\n\nexports.WarningMessageElement = WarningMessageElement;\n\n/***/ }),\n/* 157 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(158);\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(5)(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n/* 158 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(4)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__warning-message-element {\\n\\tborder-top: solid 1px #dd2c00;\\n\\tcolor: #dd2c00;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 159 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst LG_EVENT_TYPE_1 = __webpack_require__(37);\n\nconst Tooltip_1 = __webpack_require__(160);\n\nconst utils_1 = __webpack_require__(0);\n\nconst TOOLTIP_INSTANCE_FACTORY = {\n  \"overflow-text\"(grid) {\n    return new Tooltip_1.Tooltip(grid);\n  }\n\n};\n\nfunction getTooltipInstanceInfo( // eslint-disable-next-line @typescript-eslint/no-explicit-any\ngrid, col, row) {\n  //\n  // overflow text tooltip\n  const overflowText = grid.getCellOverflowText(col, row);\n\n  if (overflowText) {\n    return {\n      type: \"overflow-text\",\n      content: overflowText\n    };\n  }\n\n  return null;\n}\n\nclass TooltipHandler {\n  constructor(grid) {\n    this._grid = grid;\n    this._tooltipInstances = {};\n\n    this._bindGridEvent(grid);\n  }\n\n  dispose() {\n    const tooltipInstances = this._tooltipInstances;\n\n    for (const k in tooltipInstances) {\n      tooltipInstances[k].dispose();\n    }\n\n    delete this._tooltipInstances;\n    this._attachInfo = null;\n  }\n\n  _attach(col, row) {\n    const info = this._attachInfo;\n\n    const instanceInfo = this._getTooltipInstanceInfo(col, row);\n\n    if (info && (!instanceInfo || info.instance !== instanceInfo.instance)) {\n      info.instance.detachTooltipElement();\n      this._attachInfo = null;\n    }\n\n    if (!instanceInfo) {\n      return;\n    }\n\n    const {\n      instance\n    } = instanceInfo;\n    instance.attachTooltipElement(col, row, instanceInfo.content);\n\n    const range = this._grid.getCellRange(col, row);\n\n    this._attachInfo = {\n      range,\n      instance\n    };\n  }\n\n  _move(col, row) {\n    const info = this._attachInfo;\n\n    if (!info || !utils_1.cellInRange(info.range, col, row)) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.moveTooltipElement(col, row);\n  }\n\n  _detach() {\n    const info = this._attachInfo;\n\n    if (!info) {\n      return;\n    }\n\n    const {\n      instance\n    } = info;\n    instance.detachTooltipElement();\n    this._attachInfo = null;\n  }\n\n  _isAttachCell(col, row) {\n    const info = this._attachInfo;\n\n    if (!info) {\n      return false;\n    }\n\n    return utils_1.cellInRange(info.range, col, row);\n  }\n\n  _bindGridEvent(grid) {\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOVER_CELL, e => {\n      if (e.related) {\n        if (this._isAttachCell(e.col, e.row)) {\n          return;\n        }\n      }\n\n      this._attach(e.col, e.row);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOUT_CELL, e => {\n      if (e.related) {\n        if (this._isAttachCell(e.related.col, e.related.row)) {\n          return;\n        }\n      }\n\n      this._detach();\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, e => {\n      if (this._isAttachCell(e.col, e.row)) {\n        this._detach();\n      }\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\n      const info = this._attachInfo;\n\n      if (!info) {\n        return;\n      }\n\n      this._move(info.range.start.col, info.range.start.row);\n    });\n    grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, e => {\n      if (this._isAttachCell(e.col, e.row)) {\n        this._detach();\n\n        this._attach(e.col, e.row);\n      }\n    });\n  }\n\n  _getTooltipInstanceInfo(col, row) {\n    const grid = this._grid;\n    const tooltipInstances = this._tooltipInstances;\n    const info = getTooltipInstanceInfo(grid, col, row);\n\n    if (!info) {\n      return null;\n    }\n\n    const {\n      type\n    } = info;\n    const instance = tooltipInstances[type] || (tooltipInstances[type] = TOOLTIP_INSTANCE_FACTORY[type](grid));\n    return {\n      instance,\n      type,\n      content: info.content\n    };\n  }\n\n}\n\nexports.TooltipHandler = TooltipHandler;\n\n/***/ }),\n/* 160 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst BaseTooltip_1 = __webpack_require__(161);\n\nconst TooltipElement_1 = __webpack_require__(162);\n\nclass Tooltip extends BaseTooltip_1.BaseTooltip {\n  createTooltipElementInternal() {\n    return new TooltipElement_1.TooltipElement();\n  }\n\n}\n\nexports.Tooltip = Tooltip;\n\n/***/ }),\n/* 161 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nclass BaseTooltip {\n  constructor(grid) {\n    this._grid = grid;\n  }\n\n  dispose() {\n    this.detachTooltipElement();\n\n    if (this._tooltipElement) {\n      this._tooltipElement.dispose();\n    }\n\n    this._tooltipElement = undefined;\n  }\n\n  _getTooltipElement() {\n    if (this._tooltipElement) {\n      return this._tooltipElement;\n    }\n\n    return this._tooltipElement = this.createTooltipElementInternal();\n  }\n\n  attachTooltipElement(col, row, content) {\n    const tooltipElement = this._getTooltipElement();\n\n    tooltipElement.attach(this._grid, col, row, content);\n  }\n\n  moveTooltipElement(col, row) {\n    const tooltipElement = this._getTooltipElement();\n\n    tooltipElement.move(this._grid, col, row);\n  }\n\n  detachTooltipElement() {\n    const tooltipElement = this._getTooltipElement();\n\n    tooltipElement._detach();\n  }\n\n}\n\nexports.BaseTooltip = BaseTooltip;\n\n/***/ }),\n/* 162 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst EventHandler_1 = __webpack_require__(2);\n\nconst dom_1 = __webpack_require__(11);\n\nconst CLASSNAME = \"cheetah-grid__tooltip-element\";\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\n\nfunction createTooltipDomElement() {\n  __webpack_require__(163);\n\n  const rootElement = dom_1.createElement(\"div\", {\n    classList: [CLASSNAME, HIDDEN_CLASSNAME]\n  });\n  const messageElement = dom_1.createElement(\"pre\", {\n    classList: [CONTENT_CLASSNAME]\n  });\n  rootElement.appendChild(messageElement);\n  return rootElement;\n}\n\nclass TooltipElement {\n  constructor() {\n    this._handler = new EventHandler_1.EventHandler();\n    const rootElement = this._rootElement = createTooltipDomElement();\n    this._messageElement = rootElement.querySelector(`.${CONTENT_CLASSNAME}`);\n  }\n\n  dispose() {\n    this.detach();\n    const rootElement = this._rootElement;\n\n    if (rootElement.parentElement) {\n      rootElement.parentElement.removeChild(rootElement);\n    }\n\n    this._handler.dispose();\n\n    delete this._rootElement;\n    delete this._messageElement;\n  }\n\n  attach(grid, col, row, content) {\n    const rootElement = this._rootElement;\n    const messageElement = this._messageElement;\n    rootElement.classList.remove(SHOWN_CLASSNAME);\n    rootElement.classList.add(HIDDEN_CLASSNAME);\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n      messageElement.textContent = content;\n    } else {\n      this._detach();\n    }\n  }\n\n  move(grid, col, row) {\n    const rootElement = this._rootElement;\n\n    if (this._attachCell(grid, col, row)) {\n      rootElement.classList.add(SHOWN_CLASSNAME);\n      rootElement.classList.remove(HIDDEN_CLASSNAME);\n    } else {\n      this._detach();\n    }\n  }\n\n  detach() {\n    this._detach();\n  }\n\n  _detach() {\n    const rootElement = this._rootElement;\n\n    if (rootElement.parentElement) {\n      // rootElement.parentElement.removeChild(rootElement);\n      rootElement.classList.remove(SHOWN_CLASSNAME);\n      rootElement.classList.add(HIDDEN_CLASSNAME);\n    }\n  }\n\n  _attachCell(grid, col, row) {\n    const rootElement = this._rootElement;\n    const {\n      element,\n      rect\n    } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    const {\n      bottom: top,\n      left,\n      width\n    } = rect;\n    const {\n      frozenRowCount,\n      frozenColCount\n    } = grid;\n\n    if (row >= frozenRowCount && frozenRowCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\n\n      if (top < frozenRect.bottom) {\n        return false; //\n      }\n    } else {\n      if (top < 0) {\n        return false; //\n      }\n    }\n\n    if (col >= frozenColCount && frozenColCount > 0) {\n      const {\n        rect: frozenRect\n      } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\n\n      if (left < frozenRect.right) {\n        return false; //\n      }\n    } else {\n      if (left < 0) {\n        return false; //\n      }\n    }\n\n    const {\n      offsetHeight,\n      offsetWidth\n    } = element;\n\n    if (offsetHeight < top) {\n      return false; //\n    }\n\n    if (offsetWidth < left) {\n      return false; //\n    }\n\n    rootElement.style.top = `${top.toFixed()}px`;\n    rootElement.style.left = `${(left + width / 2).toFixed()}px`;\n    rootElement.style.minWidth = `${width.toFixed()}px`;\n\n    if (rootElement.parentElement !== element) {\n      element.appendChild(rootElement);\n    }\n\n    return true;\n  }\n\n}\n\nexports.TooltipElement = TooltipElement;\n\n/***/ }),\n/* 163 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(164);\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(5)(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n/* 164 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(4)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"@keyframes cheetah-grid__tooltip-element--shown-animation {\\n\\t0% {\\n\\t\\topacity: 0;\\n\\t\\ttransform: scale(.8) translateX(-60%);\\n\\t}\\n\\t100% {\\n\\t\\topacity: 1;\\n\\t\\ttransform: scale(1) translateX(-50%);\\n\\t}\\n}\\n.cheetah-grid__tooltip-element {\\n\\tposition: absolute;\\n\\tbox-sizing: border-box;\\n\\tborder-radius: 3px;\\n\\tbackground-color: #232f34;\\n\\tpadding: 8px;\\n\\tpointer-events: none;\\n\\tuser-select: none;\\n\\tcolor: #fff;\\n}\\n.cheetah-grid__tooltip-element--hidden {\\n\\topacity: 0;\\n\\ttransform: translateX(-50%);\\n\\ttransition: opacity 75ms linear;\\n}\\n.cheetah-grid__tooltip-element--shown {\\n\\topacity: 1;\\n\\ttransform: translateX(-50%);\\n\\tanimation: cheetah-grid__tooltip-element--shown-animation 150ms ease-out;\\n}\\n.cheetah-grid__tooltip-element__content {\\n\\tfont-family: Roboto;\\n\\tfont-size: 12px;\\n\\tfont-size: .75rem;\\n\\tmin-height: 1em;\\n\\tline-height: 1;\\n\\twidth: 100%;\\n\\tdisplay: block;\\n\\twhite-space: pre-wrap;\\n\\tmargin: 0;\\n\\tbox-sizing: border-box;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 165 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction getInternal() {\n  console.warn(\"use internal!!\");\n  return {\n    color: __webpack_require__(74),\n    sort: __webpack_require__(60),\n    calc: __webpack_require__(29),\n    symbolManager: __webpack_require__(1),\n    path2DManager: __webpack_require__(36)\n  };\n}\n\nexports.getInternal = getInternal;\n\n/***/ })\n/******/ ]);\n});\n}).call(typeof global !== \"undefined\" ? global : window, typeof global !== \"undefined\" ? global : window);","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 75);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst isNode = typeof window === \"undefined\" || typeof window.window === \"undefined\";\nexports.isNode = isNode;\nlet arrayFind;\nlet arrayFindIndex;\nconst array = {\n    get find() {\n        if (arrayFind) {\n            return arrayFind;\n        }\n        if (Array.prototype.find) {\n            arrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\n        }\n        else {\n            arrayFind = (arr, predicate) => {\n                const index = array.findIndex(arr, predicate);\n                return index >= 0 ? arr[index] : undefined;\n            };\n        }\n        return arrayFind;\n    },\n    get findIndex() {\n        if (arrayFindIndex) {\n            return arrayFindIndex;\n        }\n        if (Array.prototype.findIndex) {\n            arrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\n        }\n        else {\n            arrayFindIndex = (arr, predicate) => {\n                const { length } = arr;\n                for (let i = 0; i < length; i++) {\n                    const value = arr[i];\n                    if (predicate(value, i, arr)) {\n                        return i;\n                    }\n                }\n                return -1;\n            };\n        }\n        return arrayFindIndex;\n    },\n};\nexports.array = array;\nfunction isDef(data) {\n    return data !== null && typeof data !== \"undefined\";\n}\nexports.isDef = isDef;\nfunction analyzeUserAgent() {\n    if (isNode) {\n        return {\n            IE: false,\n            Edge: false,\n            Chrome: false,\n            Firefox: false,\n            Safari: false,\n        };\n    }\n    else {\n        const ua = window.navigator.userAgent.toLowerCase();\n        return {\n            IE: !!/(msie|trident)/.exec(ua),\n            Edge: ua.indexOf(\"edge\") > -1,\n            Chrome: ua.indexOf(\"chrome\") > -1 && ua.indexOf(\"edge\") === -1,\n            Firefox: ua.indexOf(\"firefox\") > -1,\n            Safari: ua.indexOf(\"safari\") > -1 && ua.indexOf(\"edge\") === -1,\n        };\n    }\n}\nconst { IE, Chrome, Firefox, Edge, Safari } = analyzeUserAgent();\nfunction setReadonly(obj, name, value) {\n    Object.defineProperty(obj, name, {\n        enumerable: false,\n        configurable: true,\n        value,\n    });\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction each(obj, fn) {\n    for (const key in obj) {\n        fn(obj[key], key, obj);\n    }\n}\nexports.each = each;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isObject(obj) {\n    return obj === Object(obj);\n}\nfunction extend(...args) {\n    const result = {};\n    args.forEach((source) => {\n        for (const key in source) {\n            Object.defineProperty(result, key, {\n                get() {\n                    return source[key];\n                },\n                set(val) {\n                    source[key] = val;\n                },\n                configurable: true,\n                enumerable: true,\n            });\n        }\n    });\n    return result;\n}\nexports.extend = extend;\nfunction isDescendantElement(root, target) {\n    while (target.parentElement) {\n        const p = target.parentElement;\n        if (root === p) {\n            return true;\n        }\n        target = p;\n    }\n    return false;\n}\nexports.isDescendantElement = isDescendantElement;\n/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction applyChainSafe(obj, fn, ...names) {\n    let value = obj;\n    for (let i = 0; i < names.length && isDef(value); i++) {\n        value = fn(value, names[i]);\n    }\n    return value;\n}\nexports.applyChainSafe = applyChainSafe;\nfunction getChainSafe(obj, ...names) {\n    return applyChainSafe(obj, (val, name) => val[name], ...names);\n}\nexports.getChainSafe = getChainSafe;\nfunction getOrApply(value, ...args) {\n    if (typeof value === \"function\") {\n        return value(...args);\n    }\n    else {\n        return value;\n    }\n}\nexports.getOrApply = getOrApply;\n/* eslint-enable @typescript-eslint/no-explicit-any */\nfunction endsWith(str, searchString, position) {\n    const subjectString = str.toString();\n    if (typeof position !== \"number\" ||\n        !isFinite(position) ||\n        Math.floor(position) !== position ||\n        position > subjectString.length) {\n        position = subjectString.length;\n    }\n    position -= searchString.length;\n    const lastIndex = subjectString.lastIndexOf(searchString, position);\n    return lastIndex !== -1 && lastIndex === position;\n}\nfunction genChars(s) {\n    // Surrogate Code Point\n    // [\\uD800-\\uDBFF]\n    // Variation Selectors\n    // FVS [\\u180B-\\u180D]\n    // VS1VS16 [\\uFE00-\\uFE0F]\n    // VS17VS256 \\uDB40[\\uDD00-\\uDDEF]\n    const re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\r\\n|[^\\uD800-\\uDFFF])([\\u180B-\\u180D]|[\\uFE00-\\uFE0F]|\\uDB40[\\uDD00-\\uDDEF])?/g;\n    return {\n        next() {\n            const res = re.exec(s);\n            return res !== null ? res[0] : null;\n        },\n    };\n}\nfunction genWords(s) {\n    const re = /[!-~]+|[^!-~\\s]+|\\s+/g;\n    return {\n        next() {\n            const res = re.exec(s);\n            return res !== null ? res[0] : null;\n        },\n    };\n}\nfunction isPromise(data) {\n    return Boolean(data && typeof data.then === \"function\");\n}\nexports.isPromise = isPromise;\nfunction then(result, callback) {\n    return isPromise(result) ? result.then((r) => callback(r)) : callback(result);\n}\nexports.then = then;\nfunction getMouseButtons(e) {\n    if (isDef(e.buttons)) {\n        return e.buttons;\n    }\n    /*for legacy*/\n    if (isDef(e.which)) {\n        if (e.which === 3) {\n            //right?\n            return 4;\n        }\n        if (e.which === 2) {\n            //middle?\n            return 4;\n        }\n        return e.which; //left or no\n    }\n    if (e.button === 0 || e.button === 1) {\n        return 1; //candidate left\n    }\n    if (e.button === 2) {\n        return 2; // right\n    }\n    return 0; //no or middle?\n}\nfunction getKeyCode(e) {\n    return e.keyCode || e.which;\n}\nfunction isTouchEvent(e) {\n    return !!e.changedTouches;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getIgnoreCase(obj, name) {\n    if (obj[name]) {\n        return obj[name];\n    }\n    const l = name.toLowerCase();\n    if (obj[l]) {\n        return obj[l];\n    }\n    const u = name.toLowerCase();\n    if (obj[u]) {\n        return obj[u];\n    }\n    for (const k in obj) {\n        if (k.toLowerCase() === l) {\n            return obj[k];\n        }\n    }\n    return undefined;\n}\nexports.getIgnoreCase = getIgnoreCase;\nfunction cancel(e) {\n    e.preventDefault();\n    e.stopPropagation();\n}\nfunction toBoxArray(obj) {\n    if (!Array.isArray(obj)) {\n        return [obj /*top*/, obj /*right*/, obj /*bottom*/, obj /*left*/];\n    }\n    if (obj.length === 3) {\n        return [\n            obj[0] /*top*/,\n            obj[1] /*right*/,\n            obj[2] /*bottom*/,\n            obj[1] /*left*/,\n        ];\n    }\n    if (obj.length === 2) {\n        return [\n            obj[0] /*top*/,\n            obj[1] /*right*/,\n            obj[0] /*bottom*/,\n            obj[1] /*left*/,\n        ];\n    }\n    if (obj.length === 1) {\n        return [\n            obj[0] /*top*/,\n            obj[0] /*right*/,\n            obj[0] /*bottom*/,\n            obj[0] /*left*/,\n        ];\n    }\n    return obj;\n}\nfunction cellEquals(a, b) {\n    return a.col === b.col && a.row === b.row;\n}\nexports.cellEquals = cellEquals;\nfunction cellInRange(range, col, row) {\n    return (range.start.col <= col &&\n        col <= range.end.col &&\n        range.start.row <= row &&\n        row <= range.end.row);\n}\nexports.cellInRange = cellInRange;\nexports.browser = {\n    IE,\n    Edge,\n    Chrome,\n    Firefox,\n    Safari,\n    // Chrome 33554431\n    // FireFox 17895588\n    // IE 10737433\n    heightLimit: Chrome ? 33554431 : Firefox ? 17895588 : 10737433,\n};\nexports.obj = {\n    setReadonly,\n    isObject,\n};\nexports.str = {\n    endsWith,\n    genChars,\n    genWords,\n};\nexports.event = {\n    getMouseButtons,\n    getKeyCode,\n    isTouchEvent,\n    cancel,\n};\nexports.style = {\n    toBoxArray,\n};\nexports.emptyFn = Function.prototype;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst utils_1 = require(\"./utils\");\nconst Symbol = utils_1.isNode\n    ? global.Symbol\n    : window.Symbol\n        ? window.Symbol\n        : (() => {\n            function random() {\n                const c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n                const cl = c.length;\n                let r = \"\";\n                for (let i = 0; i < 10; i++) {\n                    r += c[Math.floor(Math.random() * cl)];\n                }\n                return r;\n            }\n            return (name) => {\n                if (name) {\n                    return `#${name}_${random()}`;\n                }\n                else {\n                    return `#_${random()}`;\n                }\n            };\n        })();\nconst mem = {};\nfunction get(name) {\n    if (name) {\n        return (mem[name] ? mem[name] : (mem[name] = Symbol(name)));\n    }\n    else {\n        return Symbol();\n    }\n}\nexports.get = get;\nfunction getProtectedSymbol() {\n    return get(\"protected\");\n}\nexports.getProtectedSymbol = getProtectedSymbol;\nfunction getCheckColumnStateId() {\n    return get(\"chkcol.stateID\");\n}\nexports.getCheckColumnStateId = getCheckColumnStateId;\nfunction getRadioColumnStateId() {\n    return get(\"rdcol.stateID\");\n}\nexports.getRadioColumnStateId = getRadioColumnStateId;\nfunction getButtonColumnStateId() {\n    return get(\"btncol.stateID\");\n}\nexports.getButtonColumnStateId = getButtonColumnStateId;\nfunction getColumnFadeinStateId() {\n    return get(\"col.fadein_stateID\");\n}\nexports.getColumnFadeinStateId = getColumnFadeinStateId;\nfunction getBranchGraphColumnStateId() {\n    return get(\"branch_graph_col.stateID\");\n}\nexports.getBranchGraphColumnStateId = getBranchGraphColumnStateId;\nfunction getSmallDialogInputEditorStateId() {\n    return get(\"small_dialog_input_editor.stateID\");\n}\nexports.getSmallDialogInputEditorStateId = getSmallDialogInputEditorStateId;\nfunction getInlineInputEditorStateId() {\n    return get(\"inline_input_editor.stateID\");\n}\nexports.getInlineInputEditorStateId = getInlineInputEditorStateId;\nfunction getInlineMenuEditorStateId() {\n    return get(\"inline_menu_editor.stateID\");\n}\nexports.getInlineMenuEditorStateId = getInlineMenuEditorStateId;\nfunction getCheckHeaderStateId() {\n    return get(\"check_header.stateID\");\n}\nexports.getCheckHeaderStateId = getCheckHeaderStateId;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./utils\");\n/** @private */\nlet nextId = 1;\nclass EventHandler {\n    constructor() {\n        this._listeners = {};\n    }\n    on(target, type, listener, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ...options) {\n        if (target.addEventListener) {\n            target.addEventListener(type, listener, ...options);\n        }\n        const obj = {\n            target,\n            type,\n            listener,\n            options,\n        };\n        const id = nextId++;\n        this._listeners[id] = obj;\n        return id;\n    }\n    once(target, type, listener, ...options) {\n        const id = this.on(target, type, (...args) => {\n            this.off(id);\n            listener(...args);\n        }, ...options);\n        return id;\n    }\n    tryWithOffEvents(target, type, call) {\n        const list = [];\n        try {\n            utils_1.each(this._listeners, (obj) => {\n                if (obj.target === target && obj.type === type) {\n                    if (obj.target.removeEventListener) {\n                        obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n                    }\n                    list.push(obj);\n                }\n            });\n            call();\n        }\n        finally {\n            list.forEach((obj) => {\n                if (obj.target.addEventListener) {\n                    obj.target.addEventListener(obj.type, obj.listener, ...obj.options);\n                }\n            });\n        }\n    }\n    off(id) {\n        if (id == null) {\n            return;\n        }\n        const obj = this._listeners[id];\n        if (!obj) {\n            return;\n        }\n        delete this._listeners[id];\n        if (obj.target.removeEventListener) {\n            obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    fire(target, type, ...args) {\n        utils_1.each(this._listeners, (obj) => {\n            if (obj.target === target && obj.type === type) {\n                obj.listener.call(obj.target, ...args);\n            }\n        });\n    }\n    hasListener(target, type) {\n        let result = false;\n        utils_1.each(this._listeners, (obj) => {\n            if (obj.target === target && obj.type === type) {\n                result = true;\n            }\n        });\n        return result;\n    }\n    clear() {\n        utils_1.each(this._listeners, (obj) => {\n            if (obj.target.removeEventListener) {\n                obj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n            }\n        });\n        this._listeners = {};\n    }\n    dispose() {\n        this.clear();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this._listeners = null;\n    }\n}\nexports.EventHandler = EventHandler;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * DrawGrid event types\n * @classdesc cheetahGrid.core.EVENT_TYPE\n * @memberof cheetahGrid.core\n */\nexports.DG_EVENT_TYPE = {\n    CLICK_CELL: \"click_cell\",\n    DBLCLICK_CELL: \"dblclick_cell\",\n    DBLTAP_CELL: \"dbltap_cell\",\n    MOUSEDOWN_CELL: \"mousedown_cell\",\n    MOUSEUP_CELL: \"mouseup_cell\",\n    SELECTED_CELL: \"selected_cell\",\n    KEYDOWN: \"keydown\",\n    MOUSEMOVE_CELL: \"mousemove_cell\",\n    MOUSEENTER_CELL: \"mouseenter_cell\",\n    MOUSELEAVE_CELL: \"mouseleave_cell\",\n    MOUSEOVER_CELL: \"mouseover_cell\",\n    MOUSEOUT_CELL: \"mouseout_cell\",\n    CONTEXTMENU_CELL: \"contextmenu_cell\",\n    INPUT_CELL: \"input_cell\",\n    PASTE_CELL: \"paste_cell\",\n    DELETE_CELL: \"delete_cell\",\n    EDITABLEINPUT_CELL: \"editableinput_cell\",\n    MODIFY_STATUS_EDITABLEINPUT_CELL: \"modify_status_editableinput_cell\",\n    RESIZE_COLUMN: \"resize_column\",\n    SCROLL: \"scroll\",\n    FOCUS_GRID: \"focus_grid\",\n    BLUR_GRID: \"blur_grid\",\n};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\nlet defaultStyle;\nclass Style extends StdBaseStyle_1.StdBaseStyle {\n    constructor(style = {}) {\n        super(style);\n        this._color = style.color;\n        this._font = style.font;\n        this._padding = style.padding;\n        this._textOverflow = style.textOverflow || \"clip\";\n    }\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\n    }\n    get color() {\n        return this._color;\n    }\n    set color(color) {\n        this._color = color;\n        this.doChangeStyle();\n    }\n    get font() {\n        return this._font;\n    }\n    set font(font) {\n        this._font = font;\n        this.doChangeStyle();\n    }\n    get padding() {\n        return this._padding;\n    }\n    set padding(padding) {\n        this._padding = padding;\n        this.doChangeStyle();\n    }\n    get textOverflow() {\n        return this._textOverflow;\n    }\n    set textOverflow(textOverflow) {\n        this._textOverflow = textOverflow;\n        this.doChangeStyle();\n    }\n    clone() {\n        return new Style(this);\n    }\n}\nexports.Style = Style;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst styleContents = __importStar(require(\"../style\"));\nconst utils_1 = require(\"../../internal/utils\");\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\nconst animate_1 = require(\"../../internal/animate\");\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\nconst { setReadonly } = utils_1.obj;\nconst COLUMN_FADEIN_STATE_ID = symbolManager_1.getColumnFadeinStateId();\nfunction isFadeinWhenCallbackInPromise(column, grid) {\n    if (utils_1.isDef(column.fadeinWhenCallbackInPromise)) {\n        return column.fadeinWhenCallbackInPromise;\n    }\n    return !!grid.configure(\"fadeinWhenCallbackInPromise\");\n}\nfunction getFadinState(grid) {\n    let state = grid[COLUMN_FADEIN_STATE_ID];\n    if (!state) {\n        state = { cells: {} };\n        setReadonly(grid, COLUMN_FADEIN_STATE_ID, state);\n    }\n    return state;\n}\nfunction _generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\n    return (point) => {\n        const state = getFadinState(grid);\n        const stateKey = `${row}:${col}`;\n        if (point === 1) {\n            delete state.cells[stateKey];\n        }\n        else {\n            state.cells[stateKey] = {\n                opacity: point,\n            };\n        }\n        drawCellBase();\n        drawInternal();\n        const cellState = state.cells[stateKey];\n        if (cellState) {\n            //\n            const ctx = context.getContext();\n            ctx.globalAlpha = 1 - cellState.opacity;\n            try {\n                drawCellBase();\n            }\n            finally {\n                ctx.globalAlpha = 1;\n            }\n        }\n    };\n}\nconst fadinMgr = {\n    animate(grid, col, row, context, drawInternal, drawCellBase) {\n        // fadein animation\n        const state = getFadinState(grid);\n        const activeFadeins = [\n            _generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase),\n        ];\n        state.activeFadeins = activeFadeins;\n        animate_1.animate(500, (point) => {\n            activeFadeins.forEach((f) => f(point));\n            if (point === 1) {\n                delete state.activeFadeins;\n            }\n        });\n    },\n    margeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\n        const state = getFadinState(grid);\n        if (state.activeFadeins) {\n            state.activeFadeins.push(_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase));\n        }\n        else {\n            drawInternal();\n        }\n    },\n};\nclass BaseColumn {\n    constructor(option = {}) {\n        this.onDrawCell = this.onDrawCell.bind(this); //\n        //Promisecallback\n        this._fadeinWhenCallbackInPromise =\n            option.fadeinWhenCallbackInPromise || false;\n    }\n    get fadeinWhenCallbackInPromise() {\n        return this._fadeinWhenCallbackInPromise;\n    }\n    get StyleClass() {\n        return BaseStyle_1.BaseStyle;\n    }\n    onDrawCell(cellValue, info, context, grid) {\n        var _a;\n        const { style, getRecord, drawCellBase } = info;\n        const helper = grid.getGridCanvasHelper();\n        drawCellBase();\n        const record = getRecord();\n        let promise;\n        if (utils_1.isPromise(record)) {\n            promise = record.then(() => cellValue);\n        }\n        else if (utils_1.isPromise(cellValue)) {\n            promise = cellValue;\n        }\n        //\n        if (promise) {\n            const start = Date.now();\n            return promise.then((val) => {\n                const currentContext = context.toCurrentContext();\n                const drawRect = currentContext.getDrawRect();\n                if (!drawRect) {\n                    return;\n                }\n                const time = Date.now() - start;\n                const drawInternal = () => {\n                    const currentContext = context.toCurrentContext();\n                    const drawRect = currentContext.getDrawRect();\n                    if (!drawRect) {\n                        return;\n                    }\n                    const record = getRecord();\n                    if (utils_1.isPromise(record)) {\n                        return;\n                    }\n                    const actStyle = styleContents.of(style, record, this.StyleClass);\n                    this.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\n                    this.drawMessageInternal(info.getMessage(), currentContext, actStyle, helper, grid, info);\n                };\n                if (!isFadeinWhenCallbackInPromise(this, grid)) {\n                    drawInternal(); //\n                }\n                else {\n                    const { col, row } = context;\n                    if (time < 80) {\n                        //80msPromiseCallback\n                        fadinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\n                    }\n                    else {\n                        //\n                        fadinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\n                    }\n                }\n            });\n        }\n        else {\n            const actStyle = styleContents.of(style, record, this.StyleClass);\n            this.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\n            this.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\n            //\n            const { col, row } = context;\n            const stateKey = `${col}:${row}`;\n            const cellState = (_a = grid[COLUMN_FADEIN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.cells[stateKey];\n            if (cellState) {\n                const ctx = context.getContext();\n                ctx.globalAlpha = 1 - cellState.opacity;\n                try {\n                    drawCellBase();\n                }\n                finally {\n                    ctx.globalAlpha = 1;\n                }\n            }\n            return undefined;\n        }\n    }\n    convertInternal(value) {\n        return (utils_1.isDef(value) ? value : \"\");\n    }\n    drawMessageInternal(message, context, style, helper, grid, info) {\n        info.messageHandler.drawCellMessage(message, context, style, helper, grid, info);\n    }\n    bindGridEvent(_grid, _cellId) {\n        return [];\n    }\n    getCopyCellValue(value, _grid, _cell) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return value;\n    }\n}\nexports.BaseColumn = BaseColumn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fontSizeCache = {};\nfunction getFontSize(ctx, font) {\n    const fontName = font || ctx.font;\n    if (fontSizeCache[fontName]) {\n        return fontSizeCache[fontName];\n    }\n    const bk = ctx.font;\n    try {\n        ctx.font = fontName;\n        const em = ctx.measureText(\"\").width;\n        return (fontSizeCache[fontName] = {\n            width: em,\n            height: em,\n        });\n    }\n    finally {\n        ctx.font = bk;\n    }\n}\nexports.getFontSize = getFontSize;\nfunction calcBasePosition(ctx, rect, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\n    return calcStartPosition(ctx, rect, 0, 0, {\n        offset,\n        padding: {\n            left: paddingLeft,\n            right: paddingRight,\n            top: paddingTop,\n            bottom: paddingBottom,\n        },\n    });\n}\nexports.calcBasePosition = calcBasePosition;\nfunction calcStartPosition(ctx, rect, width, height, { offset = 0, padding: { left: paddingLeft = 0, right: paddingRight = 0, top: paddingTop = 0, bottom: paddingBottom = 0, } = {}, } = {}) {\n    const textAlign = ctx.textAlign || \"left\";\n    const textBaseline = ctx.textBaseline || \"middle\";\n    ctx.textAlign = textAlign;\n    ctx.textBaseline = textBaseline;\n    let x = rect.left + offset + paddingLeft;\n    if (textAlign === \"right\" || textAlign === \"end\") {\n        x = rect.right - width - offset - paddingRight;\n    }\n    else if (textAlign === \"center\") {\n        x = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\n    }\n    let y = rect.top + offset + paddingTop;\n    if (textBaseline === \"bottom\" ||\n        textBaseline === \"alphabetic\" ||\n        textBaseline === \"ideographic\") {\n        y = rect.bottom - height - offset - paddingBottom;\n    }\n    else if (textBaseline === \"middle\") {\n        y = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\n    }\n    return { x, y };\n}\nexports.calcStartPosition = calcStartPosition;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../../internal/utils\");\nfunction isDisabledRecord(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\noption, grid, row) {\n    if (grid.disabled) {\n        return true;\n    }\n    return getBooleanOptionOfRecord(option, grid, row);\n}\nexports.isDisabledRecord = isDisabledRecord;\nfunction isReadOnlyRecord(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\noption, grid, row) {\n    if (grid.readOnly) {\n        return true;\n    }\n    return getBooleanOptionOfRecord(option, grid, row);\n}\nexports.isReadOnlyRecord = isReadOnlyRecord;\nfunction toggleValue(val) {\n    if (typeof val === \"number\") {\n        if (val === 0) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    else if (typeof val === \"string\") {\n        if (val === \"false\") {\n            return \"true\";\n        }\n        else if (val === \"off\") {\n            return \"on\";\n        }\n        else if (/^0+$/.exec(val)) {\n            return val.replace(/^(0*)0$/, \"$11\");\n        }\n        else if (val === \"true\") {\n            return \"false\";\n        }\n        else if (val === \"on\") {\n            return \"off\";\n        }\n        else if (/^0*1$/.exec(val)) {\n            return val.replace(/^(0*)1$/, \"$10\");\n        }\n    }\n    return !val;\n}\nexports.toggleValue = toggleValue;\nfunction getBooleanOptionOfRecord(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\noption, grid, row) {\n    if (typeof option === \"function\") {\n        const record = grid.getRowRecord(row);\n        if (utils_1.isPromise(record)) {\n            return true;\n        }\n        return !!option(record);\n    }\n    return !!option;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseAction_1 = require(\"./BaseAction\");\nclass Editor extends BaseAction_1.BaseAction {\n    constructor(option = {}) {\n        super(option);\n        this._readOnly = option.readOnly || false;\n    }\n    get editable() {\n        return true;\n    }\n    get readOnly() {\n        return this._readOnly;\n    }\n    set readOnly(readOnly) {\n        this._readOnly = !!readOnly;\n        this.onChangeReadOnlyInternal();\n    }\n    onChangeReadOnlyInternal() {\n        // abstruct\n    }\n}\nexports.Editor = Editor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./utils\");\nfunction createElement(tagName, { classList, text, html, } = {}) {\n    const element = document.createElement(tagName);\n    if (classList) {\n        if (Array.isArray(classList)) {\n            element.classList.add(...classList);\n        }\n        else {\n            element.classList.add(classList);\n        }\n    }\n    if (text) {\n        element.textContent = text;\n    }\n    else if (html) {\n        element.innerHTML = html;\n    }\n    return element;\n}\nexports.createElement = createElement;\nfunction empty(dom) {\n    let c;\n    while ((c = dom.firstChild)) {\n        dom.removeChild(c);\n    }\n}\nexports.empty = empty;\nfunction isNode(arg) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return !!(arg.nodeType && arg.nodeName);\n}\nfunction toNode(arg) {\n    if (isNode(arg)) {\n        return arg;\n    }\n    const dom = createElement(\"div\", { html: arg });\n    return Array.prototype.slice.call(dom.childNodes);\n}\nfunction toNodeList(arg) {\n    if (Array.isArray(arg)) {\n        const result = [];\n        arg.forEach((e) => {\n            result.push(...toNodeList(e));\n        });\n        return result;\n    }\n    const node = toNode(arg);\n    return Array.isArray(node) ? node : [node];\n}\nexports.toNodeList = toNodeList;\nfunction appendHtml(dom, inner) {\n    toNodeList(inner).forEach((node) => {\n        dom.appendChild(node);\n    });\n}\nexports.appendHtml = appendHtml;\nfunction disableFocus(el) {\n    el.dataset.disableBeforeTabIndex = `${el.tabIndex}`;\n    el.tabIndex = -1;\n    Array.prototype.slice.call(el.children, 0).forEach(disableFocus);\n}\nexports.disableFocus = disableFocus;\nfunction enableFocus(el) {\n    if (\"disableBeforeTabIndex\" in el.dataset) {\n        el.tabIndex = Number(el.dataset.disableBeforeTabIndex);\n    }\n    Array.prototype.slice.call(el.children, 0).forEach(enableFocus);\n}\nexports.enableFocus = enableFocus;\nfunction isFocusable(el) {\n    return (utils_1.isDef(el.tabIndex) && el.tabIndex > -1);\n}\nexports.isFocusable = isFocusable;\nfunction findPrevSiblingFocusable(el) {\n    let n = el.previousSibling;\n    while (n && !isFocusable(n)) {\n        n = n.previousSibling;\n    }\n    return n;\n}\nexports.findPrevSiblingFocusable = findPrevSiblingFocusable;\nfunction findNextSiblingFocusable(el) {\n    let n = el.nextSibling;\n    while (n && !isFocusable(n)) {\n        n = n.nextSibling;\n    }\n    return n;\n}\nexports.findNextSiblingFocusable = findNextSiblingFocusable;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils = __importStar(require(\"./columnUtils\"));\nconst BaseColumn_1 = require(\"./BaseColumn\");\nconst Style_1 = require(\"../style/Style\");\nclass Column extends BaseColumn_1.BaseColumn {\n    get StyleClass() {\n        return Style_1.Style;\n    }\n    clone() {\n        return new Column(this);\n    }\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\n        const { textAlign, textBaseline, color, font, bgColor, padding, textOverflow, } = style;\n        if (bgColor) {\n            drawCellBase({\n                bgColor,\n            });\n        }\n        helper.testFontLoad(font, value, context);\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n            helper.text(value, context, {\n                textAlign,\n                textBaseline,\n                color,\n                font,\n                padding,\n                textOverflow,\n                icons,\n            });\n        });\n    }\n}\nexports.Column = Column;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\nlet defaultStyle;\nclass Style extends StdBaseStyle_1.StdBaseStyle {\n    constructor(style = {}) {\n        super(style);\n        this._color = style.color;\n        this._font = style.font;\n        this._textOverflow = style.textOverflow || \"ellipsis\";\n    }\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new Style());\n    }\n    get color() {\n        return this._color;\n    }\n    set color(color) {\n        this._color = color;\n        this.doChangeStyle();\n    }\n    get font() {\n        return this._font;\n    }\n    set font(font) {\n        this._font = font;\n        this.doChangeStyle();\n    }\n    get textOverflow() {\n        return this._textOverflow;\n    }\n    set textOverflow(textOverflow) {\n        this._textOverflow = textOverflow;\n        this.doChangeStyle();\n    }\n    clone() {\n        return new Style(this);\n    }\n}\nexports.Style = Style;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst styleContents = __importStar(require(\"../style\"));\nconst BaseStyle_1 = require(\"../style/BaseStyle\");\nconst utils_1 = require(\"../../internal/utils\");\nclass BaseHeader {\n    constructor(_options = {}) {\n        this.onDrawCell = this.onDrawCell.bind(this); //\n    }\n    get StyleClass() {\n        return BaseStyle_1.BaseStyle;\n    }\n    onDrawCell(cellValue, info, context, grid) {\n        const { style, drawCellBase } = info;\n        const helper = grid.getGridCanvasHelper();\n        drawCellBase();\n        //\n        this.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, this.StyleClass), helper, grid, info);\n    }\n    convertInternal(value) {\n        if (typeof value === \"function\") {\n            value = value();\n        }\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        return utils_1.isDef(value) ? `${value}` : \"\";\n    }\n    bindGridEvent(_grid, _cellId) {\n        return [];\n    }\n}\nexports.BaseHeader = BaseHeader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../internal/utils\");\nfunction getWidth(ctx, content) {\n    return ctx.measureText(content).width;\n}\nfunction breakWidth(ctx, content, itr, candidateIndex, width) {\n    const chars = [];\n    let ret = itr.next();\n    for (let i = 0; i < candidateIndex && ret !== null; i++, ret = itr.next()) {\n        chars.push(ret);\n    }\n    let beforeWidth = getWidth(ctx, chars.join(\"\"));\n    if (beforeWidth > width) {\n        while (chars.length) {\n            const c = chars.pop();\n            beforeWidth -= getWidth(ctx, c || \"\");\n            if (beforeWidth <= width) {\n                break;\n            }\n        }\n    }\n    else if (beforeWidth < width) {\n        while (ret !== null) {\n            const charWidth = getWidth(ctx, ret);\n            if (beforeWidth + charWidth > width) {\n                break;\n            }\n            chars.push(ret);\n            beforeWidth += charWidth;\n            ret = itr.next();\n        }\n    }\n    const beforeContent = chars.join(\"\").replace(/\\s+$/, \"\");\n    const afterContent = content.slice(beforeContent.length).replace(/^\\s+/, \"\");\n    return {\n        before: beforeContent ? new Inline(beforeContent) : null,\n        after: afterContent ? new Inline(afterContent) : null,\n    };\n}\nclass Inline {\n    constructor(content) {\n        this._content = utils_1.isDef(content) ? content : \"\";\n    }\n    width({ ctx }) {\n        return getWidth(ctx, this._content);\n    }\n    font() {\n        return null;\n    }\n    color() {\n        return null;\n    }\n    canDraw() {\n        return true;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    onReady(_callback) { }\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\n        canvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\n            offset: offset + 1,\n            padding: {\n                left: offsetLeft,\n                right: offsetRight,\n                top: offsetTop,\n                bottom: offsetBottom,\n            },\n        });\n    }\n    canBreak() {\n        return !!this._content;\n    }\n    splitIndex(index) {\n        const content = this._content;\n        const itr = utils_1.str.genChars(content);\n        const chars = [];\n        let ret = itr.next();\n        for (let i = 0; i < index && ret !== null; i++, ret = itr.next()) {\n            chars.push(ret);\n        }\n        const beforeContent = chars.join(\"\");\n        const afterContent = content.slice(beforeContent.length);\n        return {\n            before: beforeContent ? new Inline(beforeContent) : null,\n            after: afterContent ? new Inline(afterContent) : null,\n        };\n    }\n    breakWord(ctx, width) {\n        const content = this._content;\n        const allWidth = this.width({ ctx });\n        const candidate = Math.floor((this._content.length * width) / allWidth);\n        const itr = utils_1.str.genWords(content);\n        return breakWidth(ctx, content, itr, candidate, width);\n    }\n    breakAll(ctx, width) {\n        const content = this._content;\n        const allWidth = this.width({ ctx });\n        const candidate = Math.floor((this._content.length * width) / allWidth);\n        const itr = utils_1.str.genChars(content);\n        return breakWidth(ctx, content, itr, candidate, width);\n    }\n    toString() {\n        return this._content;\n    }\n}\nexports.Inline = Inline;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst action = __importStar(require(\"./columns/action\"));\nexports.action = action;\nconst style = __importStar(require(\"./columns/style\"));\nexports.style = style;\nconst type = __importStar(require(\"./columns/type\"));\nexports.type = type;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./utils\");\nfunction cubicBezier(x2, y2, x3, y3) {\n    let step;\n    const err = 0.0001;\n    x2 *= 3;\n    y2 *= 3;\n    x3 *= 3;\n    y3 *= 3;\n    return function (t) {\n        let p, a, b, c, d, x, s;\n        if (t < 0 || 1 < t) {\n            throw new Error(`${t}`);\n        }\n        p = step || t;\n        do {\n            a = 1 - p;\n            b = a * a;\n            c = p * p;\n            d = c * p;\n            x = x2 * b * p + x3 * a * c + d;\n            s = t - x;\n            p += s * 0.5;\n        } while (err < Math.abs(s));\n        step = p;\n        return y2 * b * p + y3 * a * c + d;\n    };\n}\nconst EASINGS = {\n    linear(p) {\n        return p;\n    },\n    easeIn: cubicBezier(0.42, 0.0, 1.0, 1.0),\n    easeOut: cubicBezier(0.0, 0.0, 0.58, 1.0),\n    easeInOut: cubicBezier(0.42, 0.0, 0.58, 1.0),\n};\nconst raf = (utils_1.isNode\n    ? () => { }\n    : window.requestAnimationFrame ||\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        ((fn) => setTimeout(fn, 1)));\nfunction now() {\n    return Date.now();\n}\n/**\n * <pre>\n * Animates.\n * </pre>\n * @function\n * @param {number} duration animation time.\n * @param {function} step step\n * @param {function|string} easing easing\n * @returns {object} Deferred object.\n */\nfunction animate(duration, step, easing) {\n    const startedAt = now();\n    const easingFn = easing == null\n        ? EASINGS.easeInOut\n        : typeof easing === \"string\"\n            ? EASINGS[easing]\n            : easing;\n    let canceledFlg = false;\n    const createAnim = (resolve, reject) => {\n        const anim = () => {\n            const point = now() - startedAt;\n            if (canceledFlg) {\n                //cancel\n                if (reject) {\n                    reject();\n                }\n            }\n            else if (point >= duration) {\n                //end\n                step(1);\n                if (resolve) {\n                    resolve();\n                }\n            }\n            else {\n                step(easingFn(point / duration));\n                raf(anim);\n            }\n        };\n        return anim;\n    };\n    const cancel = () => {\n        canceledFlg = true;\n    };\n    if (typeof Promise !== \"undefined\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const result = new Promise((resolve, reject) => {\n            const anim = createAnim(resolve, reject);\n            step(0);\n            anim();\n        });\n        result.cancel = cancel;\n        return result;\n    }\n    else {\n        const anim = createAnim(() => { }, () => { });\n        step(0);\n        anim();\n        return {\n            cancel,\n        };\n    }\n}\nexports.animate = animate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EventTarget_1 = require(\"../../core/EventTarget\");\nconst STYLE_EVENT_TYPE = {\n    CHANGE_STYLE: \"change_style\",\n};\nlet defaultStyle;\nclass BaseStyle extends EventTarget_1.EventTarget {\n    constructor({ bgColor } = {}) {\n        super();\n        this._bgColor = bgColor;\n    }\n    static get EVENT_TYPE() {\n        return STYLE_EVENT_TYPE;\n    }\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\n    }\n    get bgColor() {\n        return this._bgColor;\n    }\n    set bgColor(bgColor) {\n        this._bgColor = bgColor;\n        this.doChangeStyle();\n    }\n    doChangeStyle() {\n        this.fireListeners(STYLE_EVENT_TYPE.CHANGE_STYLE);\n    }\n    clone() {\n        return new BaseStyle(this);\n    }\n}\nexports.BaseStyle = BaseStyle;\n","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../internal/utils\");\nconst symbolManager_1 = require(\"../internal/symbolManager\");\n//private symbol\n/** @private */\nconst _ = symbolManager_1.get();\n/** @private */\nlet nextId = 1;\n/**\n * event target.\n */\nclass EventTarget {\n    constructor() {\n        this[_a] = {\n            listeners: {},\n            listenerData: {},\n        };\n    }\n    /**\n     * Adds an event listener.\n     * @param  {string} type The event type id.\n     * @param  {function} listener Callback method.\n     * @return {number} unique id for the listener.\n     */\n    listen(type, listener) {\n        const list = this[_].listeners[type] || (this[_].listeners[type] = []);\n        list.push(listener);\n        const id = nextId++;\n        this[_].listenerData[id] = {\n            type,\n            listener,\n            remove: () => {\n                delete this[_].listenerData[id];\n                const index = list.indexOf(listener);\n                list.splice(index, 1);\n                if (!this[_].listeners[type].length) {\n                    delete this[_].listeners[type];\n                }\n            },\n        };\n        return id;\n    }\n    /**\n     * Removes an event listener which was added with listen() by the id returned by listen().\n     * @param  {number} id the id returned by listen().\n     * @return {void}\n     */\n    unlisten(id) {\n        if (!this[_]) {\n            return;\n        }\n        this[_].listenerData[id].remove();\n    }\n    addEventListener(type, listener) {\n        this.listen(type, listener);\n    }\n    removeEventListener(type, listener) {\n        if (!this[_]) {\n            return;\n        }\n        utils_1.each(this[_].listenerData, (obj, id) => {\n            if (obj.type === type && obj.listener === listener) {\n                this.unlisten(id);\n            }\n        });\n    }\n    hasListeners(type) {\n        return !!this[_].listeners[type];\n    }\n    /**\n     * Fires all registered listeners\n     * @param  {string}    type The type of the listeners to fire.\n     * @param  {...*} args fire arguments\n     * @return {*} the result of the last listener\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    fireListeners(type, ...args) {\n        const list = this[_].listeners[type];\n        if (!list) {\n            return [];\n        }\n        return list.map((listener) => listener.call(this, ...args)).filter(utils_1.isDef);\n    }\n    dispose() {\n        delete this[_];\n    }\n}\nexports.EventTarget = EventTarget;\n_a = _;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseStyle_1 = require(\"./BaseStyle\");\nlet defaultStyle;\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\n    constructor(style = {}) {\n        super(style);\n        this._textAlign = style.textAlign || \"left\";\n        this._textBaseline = style.textBaseline || \"middle\";\n    }\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\n    }\n    get textAlign() {\n        return this._textAlign;\n    }\n    set textAlign(textAlign) {\n        this._textAlign = textAlign;\n        this.doChangeStyle();\n    }\n    get textBaseline() {\n        return this._textBaseline;\n    }\n    set textBaseline(textBaseline) {\n        this._textBaseline = textBaseline;\n        this.doChangeStyle();\n    }\n    clone() {\n        return new StdBaseStyle(this);\n    }\n}\nexports.StdBaseStyle = StdBaseStyle;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst icons = __importStar(require(\"../../internal/icons\"));\nconst utils_1 = require(\"../../internal/utils\");\nfunction loadIcons(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nicon, context, helper, callback) {\n    let argIcon = undefined;\n    if (icon) {\n        if (utils_1.isPromise(icon)) {\n            icon.then((i) => {\n                loadIcons(i, context.toCurrentContext(), helper, callback);\n            });\n        }\n        else {\n            const iconList = icons.toNormarizeArray(icon);\n            iconList.forEach((i) => {\n                if (i.font && i.content) {\n                    helper.testFontLoad(i.font, i.content, context);\n                }\n            });\n            argIcon = iconList;\n        }\n    }\n    callback(argIcon, context);\n}\nexports.loadIcons = loadIcons;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Rect {\n    constructor(left, top, width, height) {\n        this._left = left;\n        this._top = top;\n        this._width = width;\n        this._height = height;\n    }\n    static bounds(left, top, right, bottom) {\n        return new Rect(left, top, right - left, bottom - top);\n    }\n    static max(rect1, rect2) {\n        return Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\n    }\n    get left() {\n        return this._left;\n    }\n    set left(left) {\n        const { right } = this;\n        this._left = left;\n        this.right = right;\n    }\n    get top() {\n        return this._top;\n    }\n    set top(top) {\n        const { bottom } = this;\n        this._top = top;\n        this.bottom = bottom;\n    }\n    get width() {\n        return this._width;\n    }\n    set width(width) {\n        this._width = width;\n        this._right = undefined;\n    }\n    get height() {\n        return this._height;\n    }\n    set height(height) {\n        this._height = height;\n        this._bottom = undefined;\n    }\n    get right() {\n        return this._right !== undefined\n            ? this._right\n            : (this._right = this.left + this.width);\n    }\n    set right(right) {\n        this._right = right;\n        this.width = right - this.left;\n    }\n    get bottom() {\n        return this._bottom !== undefined\n            ? this._bottom\n            : (this._bottom = this.top + this.height);\n    }\n    set bottom(bottom) {\n        this._bottom = bottom;\n        this.height = bottom - this.top;\n    }\n    offsetLeft(offset) {\n        this._left += offset;\n        this._right = undefined;\n    }\n    offsetTop(offset) {\n        this._top += offset;\n        this._bottom = undefined;\n    }\n    copy() {\n        return new Rect(this.left, this.top, this.width, this.height);\n    }\n    intersection(rect) {\n        const x0 = Math.max(this.left, rect.left);\n        const x1 = Math.min(this.left + this.width, rect.left + rect.width);\n        if (x0 <= x1) {\n            const y0 = Math.max(this.top, rect.top);\n            const y1 = Math.min(this.top + this.height, rect.top + rect.height);\n            if (y0 <= y1) {\n                return Rect.bounds(x0, y0, x1, y1);\n            }\n        }\n        return null;\n    }\n    contains(another) {\n        return (this.left <= another.left &&\n            this.left + this.width >= another.left + another.width &&\n            this.top <= another.top &&\n            this.top + this.height >= another.top + another.height);\n    }\n    inPoint(x, y) {\n        return (this.left <= x &&\n            this.left + this.width >= x &&\n            this.top <= y &&\n            this.top + this.height >= y);\n    }\n}\nexports.Rect = Rect;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseHeader_1 = require(\"./type/BaseHeader\");\nexports.BaseHeader = BaseHeader_1.BaseHeader;\nconst CheckHeader_1 = require(\"./type/CheckHeader\");\nexports.CheckHeader = CheckHeader_1.CheckHeader;\nconst Header_1 = require(\"./type/Header\");\nexports.Header = Header_1.Header;\nconst MultilineTextHeader_1 = require(\"./type/MultilineTextHeader\");\nexports.MultilineTextHeader = MultilineTextHeader_1.MultilineTextHeader;\nconst SortHeader_1 = require(\"./type/SortHeader\");\nexports.SortHeader = SortHeader_1.SortHeader;\nconst TYPES = {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DEFAULT: new Header_1.Header(),\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    SORT: new SortHeader_1.SortHeader(),\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    CHECK: new CheckHeader_1.CheckHeader(),\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    MULTILINETEXT: new MultilineTextHeader_1.MultilineTextHeader(),\n};\nfunction of(headerType) {\n    if (!headerType) {\n        return TYPES.DEFAULT;\n    }\n    else if (typeof headerType === \"string\") {\n        const key = headerType.toUpperCase();\n        return TYPES[key] || of(null);\n    }\n    else {\n        return headerType;\n    }\n}\nexports.of = of;\nfunction ofCell(headerCell) {\n    if (headerCell.sort) {\n        return TYPES.SORT;\n    }\n    return of(headerCell.headerType);\n}\nexports.ofCell = ofCell;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../../internal/utils\");\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\nconst KEY_ENTER = 13;\nconst KEY_SPACE = 32;\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\n    function isTarget(col, row) {\n        return grid.getLayoutCellId(col, row) === cellId;\n    }\n    return [\n        // click\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\n            if (!isTarget(e.col, e.row)) {\n                return;\n            }\n            if (utils_1.isPromise(grid.getRowRecord(e.row))) {\n                return;\n            }\n            action({\n                col: e.col,\n                row: e.row,\n            });\n        }),\n        // mouse move\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\n            if (!isTarget(e.col, e.row)) {\n                return;\n            }\n            if (utils_1.isPromise(grid.getRowRecord(e.row))) {\n                return;\n            }\n            if (mouseOver) {\n                if (!mouseOver({\n                    col: e.col,\n                    row: e.row,\n                })) {\n                    return;\n                }\n            }\n            grid.getElement().style.cursor = \"pointer\";\n        }),\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\n            if (!isTarget(e.col, e.row)) {\n                return;\n            }\n            if (mouseOut) {\n                mouseOut({\n                    col: e.col,\n                    row: e.row,\n                });\n            }\n            grid.getElement().style.cursor = \"\";\n        }),\n    ];\n}\nexports.bindCellClickAction = bindCellClickAction;\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\n    function isTarget(col, row) {\n        return grid.getLayoutCellId(col, row) === cellId;\n    }\n    acceptKeys = [...acceptKeys, KEY_ENTER, KEY_SPACE];\n    return [\n        // enter key down\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\n            var _a;\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\n                return;\n            }\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\n                // When moving with the enter key, no action is taken with the enter key.\n                return;\n            }\n            const sel = grid.selection.select;\n            if (!isTarget(sel.col, sel.row)) {\n                return;\n            }\n            if (utils_1.isPromise(grid.getRowRecord(sel.row))) {\n                return;\n            }\n            action({\n                col: sel.col,\n                row: sel.row,\n            });\n            utils_1.event.cancel(e.event);\n        }),\n    ];\n}\nexports.bindCellKeyAction = bindCellKeyAction;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass BaseAction {\n    constructor(option = {}) {\n        this._disabled = option.disabled || false;\n    }\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(disabled) {\n        this._disabled = disabled;\n        this.onChangeDisabledInternal();\n    }\n    onChangeDisabledInternal() {\n        // abstruct\n    }\n}\nexports.BaseAction = BaseAction;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\nexports.BaseStyle = BaseStyle_1.BaseStyle;\nconst ButtonStyle_1 = require(\"./style/ButtonStyle\");\nexports.ButtonStyle = ButtonStyle_1.ButtonStyle;\nconst CheckStyle_1 = require(\"./style/CheckStyle\");\nexports.CheckStyle = CheckStyle_1.CheckStyle;\nconst IconStyle_1 = require(\"./style/IconStyle\");\nexports.IconStyle = IconStyle_1.IconStyle;\nconst ImageStyle_1 = require(\"./style/ImageStyle\");\nexports.ImageStyle = ImageStyle_1.ImageStyle;\nconst MenuStyle_1 = require(\"./style/MenuStyle\");\nexports.MenuStyle = MenuStyle_1.MenuStyle;\nconst MultilineTextStyle_1 = require(\"./style/MultilineTextStyle\");\nexports.MultilineTextStyle = MultilineTextStyle_1.MultilineTextStyle;\nconst NumberStyle_1 = require(\"./style/NumberStyle\");\nexports.NumberStyle = NumberStyle_1.NumberStyle;\nconst PercentCompleteBarStyle_1 = require(\"./style/PercentCompleteBarStyle\");\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle_1.PercentCompleteBarStyle;\nconst RadioStyle_1 = require(\"./style/RadioStyle\");\nexports.RadioStyle = RadioStyle_1.RadioStyle;\nconst Style_1 = require(\"./style/Style\");\nexports.Style = Style_1.Style;\nconst { EVENT_TYPE } = BaseStyle_1.BaseStyle;\nexports.EVENT_TYPE = EVENT_TYPE;\nfunction of(columnStyle, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nrecord, StyleClassDef = Style_1.Style) {\n    if (columnStyle) {\n        if (columnStyle instanceof BaseStyle_1.BaseStyle) {\n            return columnStyle;\n        }\n        else if (typeof columnStyle === \"function\") {\n            return of(columnStyle(record), record, StyleClassDef);\n        }\n        else if (record && columnStyle in record) {\n            return of(record[columnStyle], record, StyleClassDef);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new StyleClassDef(columnStyle);\n    }\n    else {\n        return StyleClassDef.DEFAULT;\n    }\n}\nexports.of = of;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./utils\");\nconst ICON_PROP_KEYS = [\n    \"content\",\n    \"font\",\n    \"color\",\n    \"className\",\n    \"tagName\",\n    \"isLiga\",\n    \"width\",\n    \"src\",\n    \"svg\",\n    \"name\",\n    \"path\",\n];\nfunction quote(name) {\n    const quoted = [];\n    const split = name.split(/,\\s*/);\n    for (let i = 0; i < split.length; i++) {\n        const part = split[i].replace(/['\"]/g, \"\");\n        if (part.indexOf(\" \") === -1 && !/^\\d/.test(part)) {\n            quoted.push(part);\n        }\n        else {\n            quoted.push(`'${part}'`);\n        }\n    }\n    return quoted.join(\",\");\n}\nconst doms = {};\nconst props = {};\nfunction getIconProps(tagName, className) {\n    const tagProps = props[tagName] || (props[tagName] = {});\n    if (tagProps[className]) {\n        return tagProps[className];\n    }\n    const dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\n    dom.className = className;\n    document.body.appendChild(dom);\n    try {\n        const beforeStyle = (document.defaultView || window).getComputedStyle(dom, \"::before\");\n        let content = beforeStyle.getPropertyValue(\"content\");\n        if (content.length >= 3 && (content[0] === '\"' || content[0] === \"'\")) {\n            if (content[0] === content[content.length - 1]) {\n                content = content.substr(1, content.length - 2);\n            }\n        }\n        let font = beforeStyle.getPropertyValue(\"font\");\n        if (!font) {\n            font = `${beforeStyle.getPropertyValue(\"font-style\")} ${beforeStyle.getPropertyValue(\"font-variant\")} ${beforeStyle.getPropertyValue(\"font-weight\")} ${beforeStyle.getPropertyValue(\"font-size\")}/${beforeStyle.getPropertyValue(\"line-height\")} ${quote(beforeStyle.getPropertyValue(\"font-family\"))}`;\n        }\n        const color = beforeStyle.getPropertyValue(\"color\");\n        const width = dom.clientWidth;\n        const isLiga = (beforeStyle.getPropertyValue(\"font-feature-settings\") || \"\").indexOf(\"liga\") > -1;\n        return (tagProps[className] = {\n            content,\n            font,\n            color,\n            width,\n            isLiga,\n        });\n    }\n    finally {\n        document.body.removeChild(dom);\n    }\n}\nexports.getIconProps = getIconProps;\nfunction toPropArray(prop, count) {\n    const result = [];\n    if (Array.isArray(prop)) {\n        result.push(...prop);\n        for (let i = prop.length; i < count; i++) {\n            result.push(null);\n        }\n    }\n    else {\n        for (let i = 0; i < count; i++) {\n            result.push(prop);\n        }\n    }\n    return result;\n}\nfunction toSimpleArray(iconProps) {\n    if (!iconProps) {\n        return iconProps;\n    }\n    else if (Array.isArray(iconProps)) {\n        return iconProps;\n    }\n    const workData = {};\n    let count = 0;\n    ICON_PROP_KEYS.forEach((k) => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const prop = iconProps[k];\n        if (prop) {\n            if (Array.isArray(prop)) {\n                count = Math.max(count, prop.length);\n            }\n            else {\n                count = Math.max(count, 1);\n            }\n        }\n    });\n    ICON_PROP_KEYS.forEach((k) => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const arr = toPropArray(iconProps[k], count);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        workData[k] = arr;\n    });\n    const result = [];\n    for (let i = 0; i < count; i++) {\n        const data = {};\n        ICON_PROP_KEYS.forEach((k) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const val = workData[k][i];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            data[k] = val;\n        });\n        result.push(data);\n    }\n    return result;\n}\nfunction normarize(iconProps) {\n    const data = {};\n    for (const k in iconProps) {\n        if (k === \"className\") {\n            continue;\n        }\n        if (isIconKey(k)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            data[k] = iconProps[k];\n        }\n    }\n    if (iconProps.className) {\n        const prop = getIconProps(iconProps.tagName || \"i\", iconProps.className);\n        for (const k in prop) {\n            if (isIconKey(k)) {\n                if (!utils_1.isDef(iconProps[k])) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    data[k] = prop[k];\n                }\n            }\n        }\n    }\n    return data;\n}\nfunction toNormarizeArray(iconProps) {\n    const icons = toSimpleArray(iconProps);\n    if (!icons) {\n        return icons;\n    }\n    return icons.map((icon) => normarize(icon));\n}\nexports.toNormarizeArray = toNormarizeArray;\nexports.iconPropKeys = ICON_PROP_KEYS;\nfunction isIconKey(k) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return ICON_PROP_KEYS.indexOf(k) >= 0;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction toBoolean(val) {\n    if (typeof val === \"string\") {\n        if (val === \"false\") {\n            return false;\n        }\n        else if (val === \"off\") {\n            return false;\n        }\n        else if (/^0+$/.exec(val)) {\n            return false;\n        }\n    }\n    return Boolean(val);\n}\nexports.toBoolean = toBoolean;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./utils\");\nconst TYPE_PUNCTURE = \"p\";\nconst TYPE_UNIT = \"u\";\nconst TYPE_OPERATOR = \"o\";\nconst TYPE_NUMBER = \"n\";\nconst NODE_TYPE_UNIT = \"u\";\nconst NODE_TYPE_BINARY_EXPRESSION = \"b\";\nconst NODE_TYPE_NUMBER = \"n\";\nfunction createError(calc) {\n    return new Error(`calc parse error: ${calc}`);\n}\n/**\n * tokenize\n * @param {string} calc calc expression\n * @returns {Array} tokens\n * @private\n */\nfunction tokenize(calc) {\n    let exp = calc.replace(/calc\\(/g, \"(\");\n    const reUnit = /^[-+]?(\\d*\\.\\d+|\\d+)[a-z%]+/i;\n    const reNum = /^[-+]?(\\d*\\.\\d+|\\d+)/i;\n    const reOp = /^[-+*/]/;\n    const tokens = [];\n    let re;\n    while ((exp = exp.trim())) {\n        if (exp[0] === \"(\" || exp[0] === \")\") {\n            tokens.push({ value: exp[0], type: TYPE_PUNCTURE });\n            exp = exp.slice(1);\n        }\n        else if ((re = reUnit.exec(exp))) {\n            tokens.push({ value: re[0], type: TYPE_UNIT });\n            exp = exp.slice(re[0].length);\n        }\n        else if ((re = reNum.exec(exp))) {\n            tokens.push({ value: re[0], type: TYPE_NUMBER });\n            exp = exp.slice(re[0].length);\n        }\n        else if ((re = reOp.exec(exp))) {\n            tokens.push({\n                value: re[0],\n                type: TYPE_OPERATOR,\n            });\n            exp = exp.slice(re[0].length);\n        }\n        else {\n            throw createError(calc);\n        }\n    }\n    return tokens;\n}\nconst PRECEDENCE = {\n    \"*\": 3,\n    \"/\": 3,\n    \"+\": 2,\n    \"-\": 2,\n};\nfunction lex(tokens, calc) {\n    var _a;\n    function buildBinaryExpNode(stack) {\n        const right = stack.pop();\n        const op = stack.pop();\n        const left = stack.pop();\n        if (!left ||\n            !left.nodeType ||\n            !op ||\n            op.type !== TYPE_OPERATOR ||\n            !right ||\n            !right.nodeType) {\n            throw createError(calc);\n        }\n        return {\n            nodeType: NODE_TYPE_BINARY_EXPRESSION,\n            left,\n            op,\n            right,\n        };\n    }\n    const stack = [];\n    while (tokens.length) {\n        const token = tokens.shift();\n        if (token.type === TYPE_PUNCTURE && token.value === \"(\") {\n            let deep = 0;\n            const closeIndex = utils_1.array.findIndex(tokens, (t) => {\n                if (t.type === TYPE_PUNCTURE && t.value === \"(\") {\n                    deep++;\n                }\n                else if (t.type === TYPE_PUNCTURE && t.value === \")\") {\n                    if (!deep) {\n                        return true;\n                    }\n                    deep--;\n                }\n                return false;\n            });\n            if (closeIndex === -1) {\n                throw createError(calc);\n            }\n            stack.push(lex(tokens.slice(0, closeIndex), calc));\n            tokens.splice(0, closeIndex + 1);\n        }\n        else if (token.type === TYPE_OPERATOR) {\n            if (stack.length >= 3) {\n                const beforeOp = stack[stack.length - 2].value;\n                if (PRECEDENCE[token.value] <= PRECEDENCE[beforeOp]) {\n                    stack.push(buildBinaryExpNode(stack));\n                }\n            }\n            stack.push(token);\n        }\n        else if (token.type === TYPE_UNIT) {\n            const { value } = token;\n            const num = parseFloat(value);\n            const unit = ((_a = /[a-z%]+/i.exec(value)) === null || _a === void 0 ? void 0 : _a[0]) || \"\";\n            stack.push({\n                nodeType: NODE_TYPE_UNIT,\n                value: num,\n                unit,\n            });\n        }\n        else if (token.type === TYPE_NUMBER) {\n            stack.push({\n                nodeType: NODE_TYPE_NUMBER,\n                value: parseFloat(token.value),\n            });\n        }\n    }\n    while (stack.length > 1) {\n        stack.push(buildBinaryExpNode(stack));\n    }\n    return stack[0];\n}\nfunction parse(calcStr) {\n    const tokens = tokenize(calcStr);\n    return lex(tokens, calcStr);\n}\nfunction calcNode(node, context) {\n    if (node.nodeType === NODE_TYPE_BINARY_EXPRESSION) {\n        const left = calcNode(node.left, context);\n        const right = calcNode(node.right, context);\n        switch (node.op.value) {\n            case \"+\":\n                return left + right;\n            case \"-\":\n                return left - right;\n            case \"*\":\n                return left * right;\n            case \"/\":\n                return left / right;\n            default:\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n                throw new Error(`calc error. unknown operator: ${node.op.value}`);\n        }\n    }\n    else if (node.nodeType === NODE_TYPE_UNIT) {\n        switch (node.unit) {\n            case \"%\":\n                return (node.value * context.full) / 100;\n            case \"em\":\n                return node.value * context.em;\n            case \"px\":\n                return node.value;\n            default:\n                throw new Error(`calc error. unknown unit: ${node.unit}`);\n        }\n    }\n    else if (node.nodeType === NODE_TYPE_NUMBER) {\n        return node.value;\n    }\n    throw new Error(\"calc error.\");\n}\nfunction toPxInternal(value, context) {\n    const ast = parse(value);\n    return calcNode(ast, context);\n}\nfunction toPx(value, context) {\n    if (typeof value === \"string\") {\n        return toPxInternal(value.trim(), context);\n    }\n    return value - 0;\n}\nexports.toPx = toPx;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sort = __importStar(require(\"../internal/sort\"));\nconst utils_1 = require(\"../internal/utils\");\nconst EventTarget_1 = require(\"../core/EventTarget\");\n/** @private */\nfunction isFieldAssessor(field) {\n    if (utils_1.obj.isObject(field)) {\n        const a = field;\n        if (a.get && a.set) {\n            return true;\n        }\n    }\n    return false;\n}\n/** @private */\nconst EVENT_TYPE = {\n    UPDATE_LENGTH: \"update_length\",\n    UPDATED_LENGTH: \"updated_length\",\n    UPDATED_ORDER: \"updated_order\",\n};\n/** @private */\nfunction getValue(value, setPromiseBack) {\n    const maybePromiseValue = utils_1.getOrApply(value);\n    if (utils_1.isPromise(maybePromiseValue)) {\n        const promiseValue = maybePromiseValue.then((r) => {\n            setPromiseBack(r);\n            return r;\n        });\n        //\n        setPromiseBack(promiseValue);\n        return promiseValue;\n    }\n    else {\n        return maybePromiseValue;\n    }\n}\n/** @private */\nfunction getField(record, field, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nsetPromiseBack) {\n    if (!utils_1.isDef(record)) {\n        return undefined;\n    }\n    if (utils_1.isPromise(record)) {\n        return record.then((r) => getField(r, field, setPromiseBack));\n    }\n    const fieldGet = isFieldAssessor(field) ? field.get : field;\n    if (fieldGet in record) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const fieldResult = record[fieldGet];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return getValue(fieldResult, setPromiseBack);\n    }\n    if (typeof fieldGet === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const fieldResult = fieldGet(record);\n        return getValue(fieldResult, setPromiseBack);\n    }\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n    const ss = `${fieldGet}`.split(\".\");\n    if (ss.length <= 1) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const fieldResult = record[fieldGet];\n        return getValue(fieldResult, setPromiseBack);\n    }\n    const fieldResult = utils_1.applyChainSafe(record, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (val, name) => getField(val, name, utils_1.emptyFn), ...ss);\n    return getValue(fieldResult, setPromiseBack);\n}\n/** @private */\nfunction setField(record, field, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n    if (record == null) {\n        return false;\n    }\n    const fieldSet = isFieldAssessor(field) ? field.set : field;\n    if (fieldSet in record) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        record[fieldSet] = value;\n    }\n    else if (typeof fieldSet === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return fieldSet(record, value);\n    }\n    else if (typeof fieldSet === \"string\") {\n        const ss = `${fieldSet}`.split(\".\");\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let obj = record;\n        const { length } = ss;\n        for (let i = 0; i < length; i++) {\n            const f = ss[i];\n            if (i === length - 1) {\n                obj[f] = value;\n            }\n            else {\n                obj = obj[f] || (obj[f] = {});\n            }\n        }\n    }\n    else {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        record[fieldSet] = value;\n    }\n    return true;\n}\n/** @private */\nfunction _getIndex(sortedIndexMap, index) {\n    if (!sortedIndexMap) {\n        return index;\n    }\n    const mapIndex = sortedIndexMap[index];\n    return utils_1.isDef(mapIndex) ? mapIndex : index;\n}\n/**\n * grid data source\n *\n * @classdesc cheetahGrid.data.DataSource\n * @memberof cheetahGrid.data\n */\nclass DataSource extends EventTarget_1.EventTarget {\n    constructor(obj) {\n        var _a;\n        super();\n        this._sortedIndexMap = null;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this._get = (obj === null || obj === void 0 ? void 0 : obj.get.bind(obj)) || undefined;\n        this._length = (obj === null || obj === void 0 ? void 0 : obj.length) || 0;\n        this._source = (_a = obj === null || obj === void 0 ? void 0 : obj.source) !== null && _a !== void 0 ? _a : obj;\n    }\n    static get EVENT_TYPE() {\n        return EVENT_TYPE;\n    }\n    static ofArray(array) {\n        return new DataSource({\n            get: (index) => array[index],\n            length: array.length,\n            source: array,\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    get source() {\n        return this._source;\n    }\n    get(index) {\n        return this.getOriginal(_getIndex(this._sortedIndexMap, index));\n    }\n    getField(index, field) {\n        return this.getOriginalField(_getIndex(this._sortedIndexMap, index), field);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    hasField(index, field) {\n        return this.hasOriginalField(_getIndex(this._sortedIndexMap, index), field);\n    }\n    setField(index, field, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    value) {\n        return this.setOriginalField(_getIndex(this._sortedIndexMap, index), field, value);\n    }\n    sort(field, order) {\n        const sortedIndexMap = new Array(this._length);\n        const orderFn = order !== \"desc\"\n            ? (v1, v2) => (v1 === v2 ? 0 : v1 > v2 ? 1 : -1)\n            : (v1, v2) => (v1 === v2 ? 0 : v1 < v2 ? 1 : -1);\n        return sort\n            .sortPromise((index) => utils_1.isDef(sortedIndexMap[index])\n            ? sortedIndexMap[index]\n            : (sortedIndexMap[index] = index), (index, rel) => {\n            sortedIndexMap[index] = rel;\n        }, this._length, orderFn, (index) => this.getOriginalField(index, field))\n            .then(() => {\n            this._sortedIndexMap = sortedIndexMap;\n            this.fireListeners(EVENT_TYPE.UPDATED_ORDER);\n        });\n    }\n    get length() {\n        return this._length;\n    }\n    set length(length) {\n        if (this._length === length) {\n            return;\n        }\n        const results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\n        if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\n            return;\n        }\n        this._length = length;\n        this.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\n    }\n    get dataSource() {\n        return this;\n    }\n    dispose() {\n        super.dispose();\n    }\n    getOriginal(index) {\n        return getValue(this._get(index), (val) => {\n            this.recordPromiseCallBackInternal(index, val);\n        });\n    }\n    getOriginalField(index, field) {\n        if (!utils_1.isDef(field)) {\n            return undefined;\n        }\n        const record = this.getOriginal(index);\n        return getField(record, field, (val) => {\n            this.fieldPromiseCallBackInternal(index, field, val);\n        });\n    }\n    hasOriginalField(index, field) {\n        if (!utils_1.isDef(field)) {\n            return false;\n        }\n        if (typeof field === \"function\") {\n            return true;\n        }\n        const record = this.getOriginal(index);\n        return Boolean(record && field in record);\n    }\n    setOriginalField(index, field, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    value) {\n        if (!utils_1.isDef(field)) {\n            return false;\n        }\n        const record = this.getOriginal(index);\n        if (utils_1.isPromise(record)) {\n            return record.then((r) => setField(r, field, value));\n        }\n        return setField(record, field, value);\n    }\n    fieldPromiseCallBackInternal(_index, _field, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _value) {\n        //\n    }\n    recordPromiseCallBackInternal(_index, _record) {\n        //\n    }\n}\nexports.DataSource = DataSource;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nDataSource.EMPTY = new DataSource({\n    get() {\n        /*noop */\n    },\n    length: 0,\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseAction_1 = require(\"./action/BaseAction\");\nexports.BaseAction = BaseAction_1.BaseAction;\nconst CheckHeaderAction_1 = require(\"./action/CheckHeaderAction\");\nexports.CheckHeaderAction = CheckHeaderAction_1.CheckHeaderAction;\nconst SortHeaderAction_1 = require(\"./action/SortHeaderAction\");\nexports.SortHeaderAction = SortHeaderAction_1.SortHeaderAction;\nclass ImmutableSortHeaderAction extends SortHeaderAction_1.SortHeaderAction {\n    get disabled() {\n        return this._disabled;\n    }\n}\nclass ImmutableCheckHeaderAction extends CheckHeaderAction_1.CheckHeaderAction {\n    get disabled() {\n        return this._disabled;\n    }\n}\nexports.ACTIONS = {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    SORT: new ImmutableSortHeaderAction(),\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    CHECK: new ImmutableCheckHeaderAction(),\n};\nfunction of(headerAction) {\n    if (!headerAction) {\n        return undefined;\n    }\n    else if (typeof headerAction === \"string\") {\n        const key = headerAction.toUpperCase();\n        return exports.ACTIONS[key] || of(null);\n    }\n    else {\n        return headerAction;\n    }\n}\nexports.of = of;\nfunction ofCell(headerCell) {\n    if (headerCell.sort) {\n        if (typeof headerCell.sort === \"function\") {\n            const sortMethod = headerCell.sort;\n            // 0.9.0 Backward compatibility\n            const sort = ({ order, col, grid }) => sortMethod.call(headerCell, order, col, grid);\n            return new ImmutableSortHeaderAction({ sort });\n        }\n        return exports.ACTIONS.SORT;\n    }\n    return of(headerCell.headerAction);\n}\nexports.ofCell = ofCell;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass BaseAction {\n    constructor(option = {}) {\n        this._disabled = option.disabled || false;\n    }\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(disabled) {\n        this._disabled = disabled;\n        this.onChangeDisabledInternal();\n    }\n    clone() {\n        return new BaseAction(this);\n    }\n    bindGridEvent(_grid, _cellId) {\n        return [];\n    }\n    onChangeDisabledInternal() {\n        // impl\n    }\n}\nexports.BaseAction = BaseAction;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseStyle_1 = require(\"./style/BaseStyle\");\nexports.BaseStyle = BaseStyle_1.BaseStyle;\nconst CheckHeaderStyle_1 = require(\"./style/CheckHeaderStyle\");\nexports.CheckHeaderStyle = CheckHeaderStyle_1.CheckHeaderStyle;\nconst MultilineTextHeaderStyle_1 = require(\"./style/MultilineTextHeaderStyle\");\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\nconst SortHeaderStyle_1 = require(\"./style/SortHeaderStyle\");\nexports.SortHeaderStyle = SortHeaderStyle_1.SortHeaderStyle;\nconst Style_1 = require(\"./style/Style\");\nexports.Style = Style_1.Style;\nfunction of(headerStyle, StyleClass) {\n    if (headerStyle) {\n        if (headerStyle instanceof Style_1.Style) {\n            return headerStyle;\n        }\n        else if (typeof headerStyle === \"function\") {\n            return of(headerStyle(), StyleClass);\n        }\n        return new StyleClass(headerStyle);\n    }\n    else {\n        return StyleClass.DEFAULT;\n    }\n}\nexports.of = of;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EventTarget_1 = require(\"../../core/EventTarget\");\nconst EVENT_TYPE = {\n    CHANGE_STYLE: \"change_style\",\n};\nlet defaultStyle;\nclass BaseStyle extends EventTarget_1.EventTarget {\n    constructor({ bgColor } = {}) {\n        super();\n        this._bgColor = bgColor;\n    }\n    static get EVENT_TYPE() {\n        return EVENT_TYPE;\n    }\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\n    }\n    get bgColor() {\n        return this._bgColor;\n    }\n    set bgColor(bgColor) {\n        this._bgColor = bgColor;\n        this.doChangeStyle();\n    }\n    doChangeStyle() {\n        this.fireListeners(EVENT_TYPE.CHANGE_STYLE);\n    }\n    clone() {\n        return new BaseStyle(this);\n    }\n}\nexports.BaseStyle = BaseStyle;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./internal/utils\");\nconst theme_1 = require(\"./themes/theme\");\nconst BASIC_1 = __importDefault(require(\"./themes/BASIC\"));\nconst MATERIAL_DESIGN_1 = __importDefault(require(\"./themes/MATERIAL_DESIGN\"));\nconst themes_1 = require(\"./plugins/themes\");\nexports.BASIC = new theme_1.Theme(BASIC_1.default);\nexports.MATERIAL_DESIGN = new theme_1.Theme(MATERIAL_DESIGN_1.default);\nconst builtin = {\n    BASIC: exports.BASIC,\n    MATERIAL_DESIGN: exports.MATERIAL_DESIGN,\n};\nlet defTheme = exports.MATERIAL_DESIGN;\nexports.theme = { Theme: theme_1.Theme };\nfunction of(value) {\n    if (!value) {\n        return null;\n    }\n    if (typeof value === \"string\") {\n        const t = utils_1.getIgnoreCase(getChoices(), value);\n        if (t) {\n            return t;\n        }\n        return null;\n    }\n    if (value instanceof theme_1.Theme) {\n        return value;\n    }\n    return new theme_1.Theme(value);\n}\nexports.of = of;\nfunction getDefault() {\n    return defTheme;\n}\nexports.getDefault = getDefault;\nfunction setDefault(defaultTheme) {\n    defTheme = of(defaultTheme) || defTheme;\n}\nexports.setDefault = setDefault;\nfunction getChoices() {\n    return utils_1.extend(builtin, themes_1.themes);\n}\nexports.getChoices = getChoices;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./utils\");\nfunction getPath2D() {\n    if (typeof Path2D !== \"undefined\" && !utils_1.browser.Edge) {\n        return Path2D;\n    }\n    return require(\"./legacy/canvas/Path2DShim\").Path2DShim;\n}\nexports.getPath2D = getPath2D;\nfunction fill(pathModule, ctx, x, y, w, h) {\n    ctx.save();\n    try {\n        const { width, height } = pathModule;\n        const { ud: upsideDown, x: offsetX = 0, y: offsetY = 0 } = pathModule;\n        w = w || width;\n        h = h || height;\n        const xrate = w / width;\n        const yrate = h / (upsideDown ? -height : height);\n        x = x || 0;\n        y = upsideDown ? (y || 0) + -height * yrate : y || 0;\n        ctx.translate(x, y);\n        ctx.scale(xrate, yrate);\n        if (offsetX !== 0 || offsetY !== 0) {\n            ctx.translate(offsetX, offsetY);\n        }\n        const Path2D = getPath2D();\n        const path2d = (pathModule.path2d =\n            pathModule.path2d || new Path2D(pathModule.d));\n        ctx.fill(path2d);\n    }\n    finally {\n        ctx.restore();\n    }\n}\nexports.fill = fill;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DG_EVENT_TYPE_1 = require(\"../core/DG_EVENT_TYPE\");\nconst utils_1 = require(\"../internal/utils\");\nexports.LG_EVENT_TYPE = utils_1.extend(DG_EVENT_TYPE_1.DG_EVENT_TYPE, {\n    CHANGED_VALUE: \"changed_value\",\n    CHANGED_HEADER_VALUE: \"changed_header_value\",\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Rect_1 = require(\"../../internal/Rect\");\nfunction drawExclamationMarkBox(context, style, helper) {\n    const { bgColor, color } = style;\n    const ctx = context.getContext();\n    const rect = context.getRect();\n    // draw box\n    ctx.fillStyle = bgColor;\n    const boxRect = rect.copy();\n    boxRect.left = boxRect.right - 24;\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\n    // draw exclamation mark\n    const fillColor = color;\n    const height = 20;\n    const width = height / 5;\n    const left = boxRect.left + (boxRect.width - width) / 2;\n    const top = boxRect.top + (boxRect.height - height) / 2;\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, (height / 5) * 3), context, { fillColor });\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 4, width, height / 5), context, { fillColor });\n}\nexports.drawExclamationMarkBox = drawExclamationMarkBox;\nfunction drawInfomationMarkBox(context, style, helper) {\n    const { bgColor, color } = style;\n    const ctx = context.getContext();\n    const rect = context.getRect();\n    // draw box\n    ctx.fillStyle = bgColor;\n    const boxRect = rect.copy();\n    boxRect.left = boxRect.right - 24;\n    ctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\n    // draw i mark\n    const fillColor = color;\n    const height = 20;\n    const width = height / 5;\n    const left = boxRect.left + (boxRect.width - width) / 2;\n    const top = boxRect.top + (boxRect.height - height) / 2;\n    helper.fillRectWithState(new Rect_1.Rect(left, top, width, height / 5), context, {\n        fillColor,\n    });\n    helper.fillRectWithState(new Rect_1.Rect(left, top + (height / 5) * 2, width, (height / 5) * 3), context, { fillColor });\n}\nexports.drawInfomationMarkBox = drawInfomationMarkBox;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass BaseMessage {\n    constructor(grid) {\n        this._messageElement = null;\n        this._grid = grid;\n    }\n    dispose() {\n        this.detachMessageElement();\n        if (this._messageElement) {\n            this._messageElement.dispose();\n        }\n        this._messageElement = null;\n    }\n    _getMessageElement() {\n        return (this._messageElement ||\n            (this._messageElement = this.createMessageElementInternal()));\n    }\n    attachMessageElement(col, row, message) {\n        const messageElement = this._getMessageElement();\n        messageElement.attach(this._grid, col, row, message);\n    }\n    moveMessageElement(col, row) {\n        const messageElement = this._getMessageElement();\n        messageElement.move(this._grid, col, row);\n    }\n    detachMessageElement() {\n        const messageElement = this._getMessageElement();\n        messageElement._detach();\n    }\n    drawCellMessage(message, context, style, helper, grid, info) {\n        this.drawCellMessageInternal(message, context, style, helper, grid, info);\n    }\n}\nexports.BaseMessage = BaseMessage;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\nconst dom_1 = require(\"../../../internal/dom\");\nconst CLASSNAME = \"cheetah-grid__message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\nfunction createMessageDomElement() {\n    require(\"@/columns/message/internal/MessageElement.css\");\n    const rootElement = dom_1.createElement(\"div\", {\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\n    });\n    const messageElement = dom_1.createElement(\"span\", {\n        classList: [MESSAGE_CLASSNAME],\n    });\n    rootElement.appendChild(messageElement);\n    return rootElement;\n}\nclass MessageElement {\n    constructor() {\n        this._handler = new EventHandler_1.EventHandler();\n        const rootElement = (this._rootElement = createMessageDomElement());\n        this._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\n    }\n    dispose() {\n        this.detach();\n        this._handler.dispose();\n        delete this._rootElement;\n        delete this._messageElement;\n    }\n    attach(grid, col, row, message) {\n        const rootElement = this._rootElement;\n        const messageElement = this._messageElement;\n        rootElement.classList.remove(SHOWN_CLASSNAME);\n        rootElement.classList.add(HIDDEN_CLASSNAME);\n        if (this._attachCell(grid, col, row)) {\n            rootElement.classList.add(SHOWN_CLASSNAME);\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\n            messageElement.textContent = message.message;\n        }\n        else {\n            this._detach();\n        }\n    }\n    move(grid, col, row) {\n        const rootElement = this._rootElement;\n        if (this._attachCell(grid, col, row)) {\n            rootElement.classList.add(SHOWN_CLASSNAME);\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\n        }\n        else {\n            this._detach();\n        }\n    }\n    detach() {\n        this._detach();\n    }\n    _detach() {\n        const rootElement = this._rootElement;\n        if (rootElement.parentElement) {\n            rootElement.parentElement.removeChild(rootElement);\n            rootElement.classList.remove(SHOWN_CLASSNAME);\n            rootElement.classList.add(HIDDEN_CLASSNAME);\n        }\n    }\n    _attachCell(grid, col, row) {\n        const rootElement = this._rootElement;\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n        const { bottom: top, left, width } = rect;\n        const { frozenRowCount, frozenColCount } = grid;\n        if (row >= frozenRowCount && frozenRowCount > 0) {\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\n            if (top < frozenRect.bottom) {\n                return false; //\n            }\n        }\n        else {\n            if (top < 0) {\n                return false; //\n            }\n        }\n        if (col >= frozenColCount && frozenColCount > 0) {\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\n            if (left < frozenRect.right) {\n                return false; //\n            }\n        }\n        else {\n            if (left < 0) {\n                return false; //\n            }\n        }\n        const { offsetHeight, offsetWidth } = element;\n        if (offsetHeight < top) {\n            return false; //\n        }\n        if (offsetWidth < left) {\n            return false; //\n        }\n        rootElement.style.top = `${top.toFixed()}px`;\n        rootElement.style.left = `${left.toFixed()}px`;\n        rootElement.style.width = `${width.toFixed()}px`;\n        if (rootElement.parentElement !== element) {\n            element.appendChild(rootElement);\n        }\n        return true;\n    }\n}\nexports.MessageElement = MessageElement;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst actionBind_1 = require(\"./actionBind\");\nconst BaseAction_1 = require(\"./BaseAction\");\nconst action_utils_1 = require(\"./action-utils\");\nclass Action extends BaseAction_1.BaseAction {\n    constructor(option = {}) {\n        super(option);\n        this._action = option.action || (() => { });\n    }\n    get editable() {\n        return false;\n    }\n    get action() {\n        return this._action;\n    }\n    set action(action) {\n        this._action = action;\n    }\n    clone() {\n        return new Action(this);\n    }\n    getState(_grid) {\n        return {};\n    }\n    bindGridEvent(grid, cellId) {\n        const state = this.getState(grid);\n        const action = (cell) => {\n            if (action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n                return;\n            }\n            const record = grid.getRowRecord(cell.row);\n            this._action(record, cell);\n        };\n        return [\n            ...actionBind_1.bindCellClickAction(grid, cellId, {\n                action,\n                mouseOver: (e) => {\n                    if (action_utils_1.isDisabledRecord(this.disabled, grid, e.row)) {\n                        return false;\n                    }\n                    state.mouseActiveCell = {\n                        col: e.col,\n                        row: e.row,\n                    };\n                    const range = grid.getCellRange(e.col, e.row);\n                    grid.invalidateCellRange(range);\n                    return true;\n                },\n                mouseOut: (e) => {\n                    delete state.mouseActiveCell;\n                    const range = grid.getCellRange(e.col, e.row);\n                    grid.invalidateCellRange(range);\n                },\n            }),\n            ...actionBind_1.bindCellKeyAction(grid, cellId, {\n                action,\n            }),\n        ];\n    }\n    onPasteCellRangeBox() {\n        // noop\n    }\n    onDeleteCellRangeBox() {\n        // noop\n    }\n}\nexports.Action = Action;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../../internal/utils\");\nconst action_utils_1 = require(\"./action-utils\");\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\nconst Editor_1 = require(\"./Editor\");\nconst KEY_ENTER = 13;\nconst KEY_F2 = 113;\nclass BaseInputEditor extends Editor_1.Editor {\n    constructor(option = {}) {\n        super(option);\n    }\n    bindGridEvent(grid, cellId) {\n        const open = (cell) => {\n            if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n                action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n                return false;\n            }\n            this.onOpenCellInternal(grid, cell);\n            return true;\n        };\n        const input = (cell, value) => {\n            if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n                action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n                return;\n            }\n            this.onInputCellInternal(grid, cell, value);\n        };\n        function isTarget(col, row) {\n            return grid.getLayoutCellId(col, row) === cellId;\n        }\n        return [\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, (e) => {\n                if (!isTarget(e.col, e.row)) {\n                    return;\n                }\n                input({\n                    col: e.col,\n                    row: e.row,\n                }, e.value);\n            }),\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\n                if (e.multi) {\n                    // ignore multi cell values\n                    return;\n                }\n                const selectionRange = grid.selection.range;\n                if (!utils_1.cellEquals(selectionRange.start, selectionRange.end)) {\n                    // ignore multi paste values\n                    return;\n                }\n                if (!isTarget(e.col, e.row)) {\n                    return;\n                }\n                utils_1.event.cancel(e.event);\n                input({\n                    col: e.col,\n                    row: e.row,\n                }, e.normalizeValue);\n            }),\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, (cell) => {\n                if (!isTarget(cell.col, cell.row)) {\n                    return;\n                }\n                open({\n                    col: cell.col,\n                    row: cell.row,\n                });\n            }),\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, (e) => {\n                if (!isTarget(e.col, e.row)) {\n                    return;\n                }\n                open({\n                    col: e.col,\n                    row: e.row,\n                });\n                utils_1.event.cancel(e.event);\n            }),\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\n                    return;\n                }\n                const sel = grid.selection.select;\n                if (!isTarget(sel.col, sel.row)) {\n                    return;\n                }\n                if (open({\n                    col: sel.col,\n                    row: sel.row,\n                })) {\n                    e.stopCellMoving();\n                }\n            }),\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (e) => {\n                this.onChangeSelectCellInternal(grid, { col: e.col, row: e.row }, e.selected);\n            }),\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\n                this.onGridScrollInternal(grid);\n            }),\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, (cell) => {\n                if (!isTarget(cell.col, cell.row)) {\n                    return false;\n                }\n                if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n                    action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n                    return false;\n                }\n                return true;\n            }),\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\n                if (!isTarget(cell.col, cell.row)) {\n                    return;\n                }\n                if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n                    action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n                    return;\n                }\n                const range = grid.getCellRange(cell.col, cell.row);\n                if (range.start.col !== range.end.col ||\n                    range.start.row !== range.end.row) {\n                    const { input } = cell;\n                    const baseRect = grid.getCellRect(cell.col, cell.row);\n                    const rangeRect = grid.getCellRangeRect(range);\n                    input.style.top = `${(parseFloat(input.style.top) +\n                        (rangeRect.top - baseRect.top)).toFixed()}px`;\n                    input.style.left = `${(parseFloat(input.style.left) +\n                        (rangeRect.left - baseRect.left)).toFixed()}px`;\n                    input.style.width = `${rangeRect.width.toFixed()}px`;\n                    input.style.height = `${rangeRect.height.toFixed()}px`;\n                }\n                this.onSetInputAttrsInternal(grid, {\n                    col: cell.col,\n                    row: cell.row,\n                }, cell.input);\n            }),\n        ];\n    }\n    onPasteCellRangeBox(grid, cell, value) {\n        if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n            action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n            return;\n        }\n        grid.doChangeValue(cell.col, cell.row, () => value);\n    }\n    onDeleteCellRangeBox(grid, cell) {\n        if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n            action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n            return;\n        }\n        grid.doChangeValue(cell.col, cell.row, () => \"\");\n    }\n}\nexports.BaseInputEditor = BaseInputEditor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\nfunction setInputValue(input, value) {\n    const sign = input.type === \"number\" && value === \"-\";\n    if (sign) {\n        // When `type=\"number\"`, the minus sign is not accepted, so change it to `type=\"text\"` once.\n        input.type = \"\";\n        let handler = new EventHandler_1.EventHandler();\n        const dispose = () => {\n            if (handler) {\n                handler.dispose();\n                handler = null;\n            }\n        };\n        handler.once(input, \"input\", (_e) => {\n            input.type = \"number\";\n            dispose();\n        });\n        handler.once(input, \"blur\", (_e) => {\n            dispose();\n        });\n    }\n    input.value = value !== null && value !== void 0 ? value : \"\";\n}\nexports.setInputValue = setInputValue;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BranchGraphColumn_1 = require(\"./type/BranchGraphColumn\");\nexports.BranchGraphColumn = BranchGraphColumn_1.BranchGraphColumn;\nconst ButtonColumn_1 = require(\"./type/ButtonColumn\");\nexports.ButtonColumn = ButtonColumn_1.ButtonColumn;\nconst CheckColumn_1 = require(\"./type/CheckColumn\");\nexports.CheckColumn = CheckColumn_1.CheckColumn;\nconst Column_1 = require(\"./type/Column\");\nexports.Column = Column_1.Column;\nconst IconColumn_1 = require(\"./type/IconColumn\");\nexports.IconColumn = IconColumn_1.IconColumn;\nconst ImageColumn_1 = require(\"./type/ImageColumn\");\nexports.ImageColumn = ImageColumn_1.ImageColumn;\nconst MenuColumn_1 = require(\"./type/MenuColumn\");\nexports.MenuColumn = MenuColumn_1.MenuColumn;\nconst MultilineTextColumn_1 = require(\"./type/MultilineTextColumn\");\nexports.MultilineTextColumn = MultilineTextColumn_1.MultilineTextColumn;\nconst NumberColumn_1 = require(\"./type/NumberColumn\");\nexports.NumberColumn = NumberColumn_1.NumberColumn;\nconst PercentCompleteBarColumn_1 = require(\"./type/PercentCompleteBarColumn\");\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn_1.PercentCompleteBarColumn;\nconst RadioColumn_1 = require(\"./type/RadioColumn\");\nexports.RadioColumn = RadioColumn_1.RadioColumn;\nconst TYPES = {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DEFAULT: new Column_1.Column(),\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    NUMBER: new NumberColumn_1.NumberColumn(),\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    CHECK: new CheckColumn_1.CheckColumn(),\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    RADIO: new RadioColumn_1.RadioColumn(),\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    BUTTON: new ButtonColumn_1.ButtonColumn(),\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    IMAGE: new ImageColumn_1.ImageColumn(),\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    MULTILINETEXT: new MultilineTextColumn_1.MultilineTextColumn(),\n};\nfunction of(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ncolumnType\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n    if (!columnType) {\n        return TYPES.DEFAULT;\n    }\n    else if (typeof columnType === \"string\") {\n        const key = columnType.toUpperCase();\n        return TYPES[key] || of(null);\n    }\n    else {\n        return columnType;\n    }\n}\nexports.of = of;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Style_1 = require(\"./Style\");\nfunction adj(style) {\n    const { textAlign = \"center\" } = style;\n    style.textAlign = textAlign;\n    return style;\n}\nlet defaultStyle;\nclass ButtonStyle extends Style_1.Style {\n    constructor(style = {}) {\n        super(adj(style));\n        const { buttonBgColor } = style;\n        this._buttonBgColor = buttonBgColor;\n    }\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\n    }\n    get buttonBgColor() {\n        return this._buttonBgColor;\n    }\n    set buttonBgColor(buttonBgColor) {\n        this._buttonBgColor = buttonBgColor;\n        this.doChangeStyle();\n    }\n    clone() {\n        return new ButtonStyle(this);\n    }\n}\nexports.ButtonStyle = ButtonStyle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\nfunction adj(style) {\n    const { textAlign = \"center\" } = style;\n    style.textAlign = textAlign;\n    return style;\n}\nlet defaultStyle;\nclass CheckStyle extends StdBaseStyle_1.StdBaseStyle {\n    constructor(style = {}) {\n        super(adj(style));\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\n        this._uncheckBgColor = uncheckBgColor;\n        this._checkBgColor = checkBgColor;\n        this._borderColor = borderColor;\n    }\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\n    }\n    get uncheckBgColor() {\n        return this._uncheckBgColor;\n    }\n    set uncheckBgColor(uncheckBgColor) {\n        this._uncheckBgColor = uncheckBgColor;\n        this.doChangeStyle();\n    }\n    get checkBgColor() {\n        return this._checkBgColor;\n    }\n    set checkBgColor(checkBgColor) {\n        this._checkBgColor = checkBgColor;\n        this.doChangeStyle();\n    }\n    get borderColor() {\n        return this._borderColor;\n    }\n    set borderColor(borderColor) {\n        this._borderColor = borderColor;\n        this.doChangeStyle();\n    }\n    clone() {\n        return new CheckStyle(this);\n    }\n}\nexports.CheckStyle = CheckStyle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Style_1 = require(\"./Style\");\nfunction adj(style) {\n    const { textAlign = \"center\" } = style;\n    style.textAlign = textAlign;\n    return style;\n}\nlet defaultStyle;\nclass IconStyle extends Style_1.Style {\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\n    }\n    constructor(style = {}) {\n        super(adj(style));\n    }\n    clone() {\n        return new IconStyle(this);\n    }\n}\nexports.IconStyle = IconStyle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\nlet defaultStyle;\nfunction adj(style) {\n    const { textAlign = \"center\" } = style;\n    style.textAlign = textAlign;\n    return style;\n}\nclass ImageStyle extends StdBaseStyle_1.StdBaseStyle {\n    constructor(style = {}) {\n        super(adj(style));\n        this._imageSizing = style.imageSizing;\n        this._margin = style.margin || 4;\n    }\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\n    }\n    get imageSizing() {\n        return this._imageSizing;\n    }\n    set imageSizing(imageSizing) {\n        this._imageSizing = imageSizing;\n        this.doChangeStyle();\n    }\n    get margin() {\n        return this._margin;\n    }\n    set margin(margin) {\n        this._margin = margin;\n        this.doChangeStyle();\n    }\n    clone() {\n        return new ImageStyle(this);\n    }\n}\nexports.ImageStyle = ImageStyle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Style_1 = require(\"./Style\");\nlet defaultStyle;\nclass MenuStyle extends Style_1.Style {\n    constructor(style = {}) {\n        super(style);\n        const { appearance } = style;\n        this._appearance = appearance;\n    }\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new MenuStyle());\n    }\n    get appearance() {\n        return this._appearance || \"menulist-button\";\n    }\n    set appearance(appearance) {\n        this._appearance = appearance;\n        this.doChangeStyle();\n    }\n    clone() {\n        return new MenuStyle(this);\n    }\n}\nexports.MenuStyle = MenuStyle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Style_1 = require(\"./Style\");\nfunction adj(style) {\n    const { textBaseline = \"top\" } = style;\n    style.textBaseline = textBaseline;\n    return style;\n}\nlet defaultStyle;\nclass MultilineTextStyle extends Style_1.Style {\n    constructor(style = {}) {\n        super(adj(style));\n        this._lineHeight = style.lineHeight || \"1em\";\n        this._autoWrapText = style.autoWrapText || false;\n        this._lineClamp = style.lineClamp;\n    }\n    static get DEFAULT() {\n        return defaultStyle\n            ? defaultStyle\n            : (defaultStyle = new MultilineTextStyle());\n    }\n    clone() {\n        return new MultilineTextStyle(this);\n    }\n    get lineHeight() {\n        return this._lineHeight;\n    }\n    set lineHeight(lineHeight) {\n        this._lineHeight = lineHeight;\n        this.doChangeStyle();\n    }\n    get lineClamp() {\n        return this._lineClamp;\n    }\n    set lineClamp(lineClamp) {\n        this._lineClamp = lineClamp;\n        this.doChangeStyle();\n    }\n    get autoWrapText() {\n        return this._autoWrapText;\n    }\n    set autoWrapText(autoWrapText) {\n        this._autoWrapText = autoWrapText;\n        this.doChangeStyle();\n    }\n}\nexports.MultilineTextStyle = MultilineTextStyle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Style_1 = require(\"./Style\");\nfunction adj(style) {\n    const { textAlign = \"right\" } = style;\n    style.textAlign = textAlign;\n    return style;\n}\nlet defaultStyle;\nclass NumberStyle extends Style_1.Style {\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\n    }\n    constructor(style = {}) {\n        super(adj(style));\n    }\n    clone() {\n        return new NumberStyle(this);\n    }\n}\nexports.NumberStyle = NumberStyle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Style_1 = require(\"./Style\");\nlet defaultStyle;\nconst DEFAULT_BAR_COLOR = (num) => {\n    if (num > 80) {\n        return \"#20a8d8\";\n    }\n    if (num > 50) {\n        return \"#4dbd74\";\n    }\n    if (num > 20) {\n        return \"#ffc107\";\n    }\n    return \"#f86c6b\";\n};\nclass PercentCompleteBarStyle extends Style_1.Style {\n    constructor(style = {}) {\n        super(style);\n        this._barColor = style.barColor || DEFAULT_BAR_COLOR;\n        this._barBgColor = style.barBgColor || \"#f0f3f5\";\n        this._barHeight = style.barHeight || 3;\n    }\n    static get DEFAULT() {\n        return defaultStyle\n            ? defaultStyle\n            : (defaultStyle = new PercentCompleteBarStyle());\n    }\n    get barColor() {\n        return this._barColor;\n    }\n    set barColor(barColor) {\n        this._barColor = barColor;\n        this.doChangeStyle();\n    }\n    get barBgColor() {\n        return this._barBgColor;\n    }\n    set barBgColor(barBgColor) {\n        this._barBgColor = barBgColor;\n        this.doChangeStyle();\n    }\n    get barHeight() {\n        return this._barHeight;\n    }\n    set barHeight(barHeight) {\n        this._barHeight = barHeight;\n        this.doChangeStyle();\n    }\n    clone() {\n        return new PercentCompleteBarStyle(this);\n    }\n}\nexports.PercentCompleteBarStyle = PercentCompleteBarStyle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst StdBaseStyle_1 = require(\"./StdBaseStyle\");\nfunction adj(style) {\n    const { textAlign = \"center\" } = style;\n    style.textAlign = textAlign;\n    return style;\n}\nlet defaultStyle;\nclass RadioStyle extends StdBaseStyle_1.StdBaseStyle {\n    constructor(style = {}) {\n        super(adj(style));\n        const { checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, } = style;\n        this._checkColor = checkColor;\n        this._uncheckBorderColor = uncheckBorderColor;\n        this._checkBorderColor = checkBorderColor;\n        this._uncheckBgColor = uncheckBgColor;\n        this._checkBgColor = checkBgColor;\n    }\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new RadioStyle());\n    }\n    get checkColor() {\n        return this._checkColor;\n    }\n    set checkColor(checkColor) {\n        this._checkColor = checkColor;\n        this.doChangeStyle();\n    }\n    get uncheckBorderColor() {\n        return this._uncheckBorderColor;\n    }\n    set uncheckBorderColor(uncheckBorderColor) {\n        this._uncheckBorderColor = uncheckBorderColor;\n        this.doChangeStyle();\n    }\n    get checkBorderColor() {\n        return this._checkBorderColor;\n    }\n    set checkBorderColor(checkBorderColor) {\n        this._checkBorderColor = checkBorderColor;\n        this.doChangeStyle();\n    }\n    get uncheckBgColor() {\n        return this._uncheckBgColor;\n    }\n    set uncheckBgColor(uncheckBgColor) {\n        this._uncheckBgColor = uncheckBgColor;\n        this.doChangeStyle();\n    }\n    get checkBgColor() {\n        return this._checkBgColor;\n    }\n    set checkBgColor(checkBgColor) {\n        this._checkBgColor = checkBgColor;\n        this.doChangeStyle();\n    }\n    clone() {\n        return new RadioStyle(this);\n    }\n}\nexports.RadioStyle = RadioStyle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst LRUCache_1 = require(\"./LRUCache\");\nconst utils_1 = require(\"./utils\");\nconst allCache = {};\nfunction loadImage(src) {\n    if (typeof Promise === \"undefined\") {\n        console.error(\"Promise is not loaded. load Promise before this process.\");\n        return {\n            then() {\n                return this;\n            },\n        };\n    }\n    const img = new Image();\n    const result = new Promise((resolve) => {\n        img.onload = () => {\n            resolve(img);\n        };\n    });\n    img.onerror = () => {\n        const url = src.length > 200 ? `${src.substr(0, 200)}...` : src;\n        console.warn(`cannot load: ${url}`);\n        throw new Error(`IMAGE LOAD ERROR: ${url}`);\n    };\n    img.src = src;\n    return result;\n}\nexports.loadImage = loadImage;\nfunction getCacheOrLoad0(cache, src) {\n    return utils_1.then(src, (src) => {\n        const c = cache.get(src);\n        if (c) {\n            return c;\n        }\n        const result = loadImage(src).then((img) => {\n            cache.put(src, img);\n            return img;\n        });\n        cache.put(src, result);\n        return result;\n    });\n}\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\n    const cache = allCache[cacheName] ||\n        (allCache[cacheName] = new LRUCache_1.LRUCache(cacheSize));\n    return getCacheOrLoad0(cache, src);\n}\nexports.getCacheOrLoad = getCacheOrLoad;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @private */\nfunction extend(a, b) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const o = {};\n    for (const k in a) {\n        o[k] = a[k];\n    }\n    for (const k in b) {\n        o[k] = b[k];\n    }\n    return o;\n}\n/**\n * Normalize the given menu options.\n * @param {*} options menu options to given\n * @returns {Array} Normalized options\n * @private\n */\nfunction normalize(options) {\n    if (!options) {\n        return [];\n    }\n    if (Array.isArray(options)) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return options.map(\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (e) => extend(e, { label: e.caption || e.label }));\n    }\n    if (typeof options === \"string\") {\n        return normalize(JSON.parse(options));\n    }\n    const result = [];\n    for (const k in options) {\n        result.push({\n            value: k,\n            label: options[k],\n        });\n    }\n    return result;\n}\nexports.normalize = normalize;\n/**\n * Normalize the given menu options.\n * @param {*} options menu options to given\n * @returns {Array} Normalized options\n * @private\n */\nfunction normalizeToFn(options) {\n    if (typeof options === \"function\") {\n        return (record) => normalize(options(record));\n    }\n    return () => normalize(options);\n}\nexports.normalizeToFn = normalizeToFn;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst calc = __importStar(require(\"../internal/calc\"));\nconst hiDPI = __importStar(require(\"../internal/hiDPI\"));\nconst style = __importStar(require(\"../internal/style\"));\nconst utils_1 = require(\"../internal/utils\");\nconst DG_EVENT_TYPE_1 = require(\"./DG_EVENT_TYPE\");\nconst EventHandler_1 = require(\"../internal/EventHandler\");\nconst EventTarget_1 = require(\"./EventTarget\");\nconst NumberMap_1 = require(\"../internal/NumberMap\");\nconst Rect_1 = require(\"../internal/Rect\");\nconst Scrollable_1 = require(\"../internal/Scrollable\");\nconst canvases_1 = require(\"../internal/canvases\");\n//protected symbol\nconst symbolManager_1 = require(\"../internal/symbolManager\");\nconst paste_utils_1 = require(\"../internal/paste-utils\");\nconst { \n/** @private */\nisTouchEvent, \n/** @private */\ngetMouseButtons, \n/** @private */\ngetKeyCode, \n/** @private */\ncancel: cancelEvent, } = utils_1.event;\n/** @private */\nconst _ = symbolManager_1.getProtectedSymbol();\n/** @private */\nfunction createRootElement() {\n    const element = document.createElement(\"div\");\n    element.classList.add(\"cheetah-grid\");\n    return element;\n}\n/** @private */\nconst KEY_BS = 8;\n/** @private */\nconst KEY_TAB = 9;\n/** @private */\nconst KEY_ENTER = 13;\n/** @private */\nconst KEY_END = 35;\n/** @private */\nconst KEY_HOME = 36;\n/** @private */\nconst KEY_LEFT = 37;\n/** @private */\nconst KEY_UP = 38;\n/** @private */\nconst KEY_RIGHT = 39;\n/** @private */\nconst KEY_DOWN = 40;\n/** @private */\nconst KEY_DEL = 46;\n/** @private */\nconst KEY_ALPHA_A = 65;\n/** @private */\nconst KEY_ALPHA_C = 67;\n/** @private */\nconst KEY_ALPHA_V = 86;\n//private methods\n/** @private */\nfunction _vibrate(e) {\n    if (navigator.vibrate && isTouchEvent(e)) {\n        navigator.vibrate(50);\n    }\n}\n/** @private */\nfunction _getTargetRowAt(absoluteY) {\n    const internal = this.getTargetRowAtInternal(absoluteY);\n    if (utils_1.isDef(internal)) {\n        return internal;\n    }\n    const findBefore = (startRow, startBottom) => {\n        let bottom = startBottom;\n        for (let row = startRow; row >= 0; row--) {\n            const height = _getRowHeight.call(this, row);\n            const top = bottom - height;\n            if (top <= absoluteY && absoluteY < bottom) {\n                return {\n                    top,\n                    row,\n                };\n            }\n            bottom = top;\n        }\n        return null;\n    };\n    const findAfter = (startRow, startBottom) => {\n        let top = startBottom - _getRowHeight.call(this, startRow);\n        const { rowCount } = this[_];\n        for (let row = startRow; row < rowCount; row++) {\n            const height = _getRowHeight.call(this, row);\n            const bottom = top + height;\n            if (top <= absoluteY && absoluteY < bottom) {\n                return {\n                    top,\n                    row,\n                };\n            }\n            top = bottom;\n        }\n        return null;\n    };\n    const candRow = Math.min(Math.ceil(absoluteY / this[_].defaultRowHeight), this.rowCount - 1);\n    const bottom = _getRowsHeight.call(this, 0, candRow);\n    if (absoluteY >= bottom) {\n        return findAfter(candRow, bottom);\n    }\n    else {\n        return findBefore(candRow, bottom);\n    }\n}\n/** @private */\nfunction _getTargetColAt(grid, absoluteX) {\n    let left = 0;\n    const { colCount } = grid[_];\n    for (let col = 0; col < colCount; col++) {\n        const width = _getColWidth(grid, col);\n        const right = left + width;\n        if (right > absoluteX) {\n            return {\n                left,\n                col,\n            };\n        }\n        left = right;\n    }\n    return null;\n}\n/** @private */\nfunction _getTargetFrozenRowAt(grid, absoluteY) {\n    if (!grid[_].frozenRowCount) {\n        return null;\n    }\n    let { top } = grid[_].scroll;\n    const rowCount = grid[_].frozenRowCount;\n    for (let row = 0; row < rowCount; row++) {\n        const height = _getRowHeight.call(grid, row);\n        const bottom = top + height;\n        if (bottom > absoluteY) {\n            return {\n                top,\n                row,\n            };\n        }\n        top = bottom;\n    }\n    return null;\n}\n/** @private */\nfunction _getTargetFrozenColAt(grid, absoluteX) {\n    if (!grid[_].frozenColCount) {\n        return null;\n    }\n    let { left } = grid[_].scroll;\n    const colCount = grid[_].frozenColCount;\n    for (let col = 0; col < colCount; col++) {\n        const width = _getColWidth(grid, col);\n        const right = left + width;\n        if (right > absoluteX) {\n            return {\n                left,\n                col,\n            };\n        }\n        left = right;\n    }\n    return null;\n}\n/** @private */\nfunction _getFrozenRowsRect(grid) {\n    if (!grid[_].frozenRowCount) {\n        return null;\n    }\n    const { top } = grid[_].scroll;\n    let height = 0;\n    const rowCount = grid[_].frozenRowCount;\n    for (let row = 0; row < rowCount; row++) {\n        height += _getRowHeight.call(grid, row);\n    }\n    return new Rect_1.Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\n}\n/** @private */\nfunction _getFrozenColsRect(grid) {\n    if (!grid[_].frozenColCount) {\n        return null;\n    }\n    const { left } = grid[_].scroll;\n    let width = 0;\n    const colCount = grid[_].frozenColCount;\n    for (let col = 0; col < colCount; col++) {\n        width += _getColWidth(grid, col);\n    }\n    return new Rect_1.Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\n}\n/** @private */\nfunction _getCellDrawing(grid, col, row) {\n    if (!grid[_].drawCells[row]) {\n        return null;\n    }\n    return grid[_].drawCells[row][col];\n}\n/** @private */\nfunction _putCellDrawing(grid, col, row, context) {\n    if (!grid[_].drawCells[row]) {\n        grid[_].drawCells[row] = {};\n    }\n    grid[_].drawCells[row][col] = context;\n}\n/** @private */\nfunction _removeCellDrawing(grid, col, row) {\n    if (!grid[_].drawCells[row]) {\n        return;\n    }\n    delete grid[_].drawCells[row][col];\n    if (Object.keys(grid[_].drawCells[row]).length === 0) {\n        delete grid[_].drawCells[row];\n    }\n}\n/** @private */\nfunction _drawCell(ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\n    const rect = new Rect_1.Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\n    const drawRect = Rect_1.Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\n    if (drawRect.height > 0 && drawRect.width > 0) {\n        ctx.save();\n        try {\n            const cellDrawing = _getCellDrawing(this, col, row);\n            if (cellDrawing) {\n                cellDrawing.cancel();\n            }\n            const dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, !!cellDrawing, this[_].selection, drawLayers);\n            const p = this.onDrawCell(col, row, dcContext);\n            if (utils_1.isPromise(p)) {\n                //\n                _putCellDrawing(this, col, row, dcContext);\n                const pCol = col;\n                dcContext._delayMode(this, () => {\n                    _removeCellDrawing(this, pCol, row);\n                });\n                p.then(() => {\n                    dcContext.terminate();\n                });\n            }\n        }\n        finally {\n            ctx.restore();\n        }\n    }\n}\n/** @private */\nfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\n    const { colCount } = grid[_];\n    const drawOuter = (col, absoluteLeft) => {\n        //\n        if (col >= colCount - 1 &&\n            grid[_].canvas.width > absoluteLeft - visibleRect.left) {\n            const outerLeft = absoluteLeft - visibleRect.left;\n            ctx.save();\n            ctx.beginPath();\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\n            ctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\n            ctx.fill();\n            ctx.restore();\n        }\n    };\n    let skipAbsoluteLeft = 0;\n    if (initFrozenCol) {\n        let absoluteLeft = initFrozenCol.left;\n        const count = grid[_].frozenColCount;\n        for (let { col } = initFrozenCol; col < count; col++) {\n            const width = _getColWidth(grid, col);\n            _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\n            absoluteLeft += width;\n            if (drawRight <= absoluteLeft) {\n                //\n                drawOuter(col, absoluteLeft);\n                return;\n            }\n        }\n        skipAbsoluteLeft = absoluteLeft;\n    }\n    let absoluteLeft = initCol.left;\n    for (let { col } = initCol; col < colCount; col++) {\n        const width = _getColWidth(grid, col);\n        _drawCell.call(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\n        absoluteLeft += width;\n        if (drawRight <= absoluteLeft) {\n            //\n            drawOuter(col, absoluteLeft);\n            return;\n        }\n    }\n    drawOuter(colCount - 1, absoluteLeft);\n}\n/** @private */\nfunction _getInitContext() {\n    return this._getInitContext();\n}\n/** @private */\nfunction _invalidateRect(grid, drawRect) {\n    const visibleRect = _getVisibleRect(grid);\n    const { rowCount } = grid[_];\n    const ctx = _getInitContext.call(grid);\n    const initRow = _getTargetRowAt.call(grid, Math.max(visibleRect.top, drawRect.top)) || {\n        top: _getRowsHeight.call(grid, 0, rowCount - 1),\n        row: rowCount,\n    };\n    const initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\n        left: _getColsWidth(grid, 0, grid[_].colCount - 1),\n        col: grid[_].colCount,\n    };\n    const drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\n    const drawRight = Math.min(visibleRect.right, drawRect.right);\n    const initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\n    const initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\n    const drawLayers = new DrawLayers();\n    const drawOuter = (row, absoluteTop) => {\n        //\n        if (row >= rowCount - 1 &&\n            grid[_].canvas.height > absoluteTop - visibleRect.top) {\n            const outerTop = absoluteTop - visibleRect.top;\n            ctx.save();\n            ctx.beginPath();\n            ctx.fillStyle = grid.underlayBackgroundColor || \"#F6F6F6\";\n            ctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\n            ctx.fill();\n            ctx.restore();\n        }\n    };\n    let skipAbsoluteTop = 0;\n    if (initFrozenRow) {\n        let absoluteTop = initFrozenRow.top;\n        const count = grid[_].frozenRowCount;\n        for (let { row } = initFrozenRow; row < count; row++) {\n            const height = _getRowHeight.call(grid, row);\n            _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\n            absoluteTop += height;\n            if (drawBottom <= absoluteTop) {\n                //\n                drawOuter(row, absoluteTop);\n                drawLayers.draw(ctx);\n                return;\n            }\n        }\n        skipAbsoluteTop = absoluteTop;\n    }\n    let absoluteTop = initRow.top;\n    for (let { row } = initRow; row < rowCount; row++) {\n        const height = _getRowHeight.call(grid, row);\n        //\n        _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\n        absoluteTop += height;\n        if (drawBottom <= absoluteTop) {\n            //\n            drawOuter(row, absoluteTop);\n            drawLayers.draw(ctx);\n            return;\n        }\n    }\n    drawOuter(rowCount - 1, absoluteTop);\n    drawLayers.draw(ctx);\n}\n/** @private */\nfunction _toPxWidth(grid, width) {\n    return Math.round(calc.toPx(width, grid[_].calcWidthContext));\n}\n/** @private */\nfunction _adjustColWidth(grid, col, orgWidth) {\n    const limits = _getColWidthLimits(grid, col);\n    return Math.max(_applyColWidthLimits(limits, orgWidth), 0);\n}\n/** @private */\nfunction _applyColWidthLimits(limits, orgWidth) {\n    if (!limits) {\n        return orgWidth;\n    }\n    if (limits.min) {\n        if (limits.min > orgWidth) {\n            return limits.min;\n        }\n    }\n    if (limits.max) {\n        if (limits.max < orgWidth) {\n            return limits.max;\n        }\n    }\n    return orgWidth;\n}\n/**\n * Gets the definition of the column width.\n * @param {DrawGrid} grid grid instance\n * @param {number} col number of column\n * @returns {string|number} width definition\n * @private\n */\nfunction _getColWidthDefine(grid, col) {\n    const width = grid[_].colWidthsMap.get(col);\n    if (width) {\n        return width;\n    }\n    return grid.defaultColWidth;\n}\n/**\n * Gets the column width limits.\n * @param {DrawGrid} grid grid instance\n * @param {number} col number of column\n * @returns {object|null} the column width limits\n * @private\n */\nfunction _getColWidthLimits(grid, col) {\n    const limit = grid[_].colWidthsLimit[col];\n    if (!limit) {\n        return null;\n    }\n    const result = {};\n    if (limit.min) {\n        result.min = _toPxWidth(grid, limit.min);\n        result.minDef = limit.min;\n    }\n    if (limit.max) {\n        result.max = _toPxWidth(grid, limit.max);\n        result.maxDef = limit.max;\n    }\n    return result;\n}\n/**\n * Checks if the given width definition is `auto`.\n * @param {string|number} width width definition to check\n * @returns {boolean} `true ` if the given width definition is `auto`\n * @private\n */\nfunction isAutoDefine(width) {\n    return Boolean(width && typeof width === \"string\" && width.toLowerCase() === \"auto\");\n}\n/**\n * Creates a formula to calculate the auto width.\n * @param {DrawGrid} grid grid instance\n * @returns {string} formula\n * @private\n */\nfunction _calcAutoColWidthExpr(grid) {\n    const others = [];\n    let autoCount = 0;\n    const hasLimitsOnAuto = [];\n    for (let col = 0; col < grid[_].colCount; col++) {\n        const def = _getColWidthDefine(grid, col);\n        const limits = _getColWidthLimits(grid, col);\n        if (isAutoDefine(def)) {\n            if (limits) {\n                hasLimitsOnAuto.push(limits);\n            }\n            autoCount++;\n        }\n        else {\n            let expr = typeof def === \"number\" ? `${def}px` : def;\n            if (limits) {\n                const orgWidth = _toPxWidth(grid, expr);\n                const newWidth = _applyColWidthLimits(limits, orgWidth);\n                if (orgWidth !== newWidth) {\n                    expr = `${newWidth}px`;\n                }\n            }\n            others.push(expr);\n        }\n    }\n    if (hasLimitsOnAuto.length && others.length) {\n        const autoPx = _toPxWidth(grid, `calc(100% - (${others.join(\" + \")}))`) / autoCount;\n        for (let index = 0; index < hasLimitsOnAuto.length; index++) {\n            const limits = hasLimitsOnAuto[index];\n            if (limits.min && autoPx < limits.min) {\n                others.push(typeof limits.minDef === \"number\"\n                    ? `${limits.minDef}px`\n                    : limits.minDef);\n                autoCount--;\n            }\n            else if (limits.max && limits.max < autoPx) {\n                others.push(typeof limits.maxDef === \"number\"\n                    ? `${limits.maxDef}px`\n                    : limits.maxDef);\n                autoCount--;\n            }\n        }\n        if (autoCount <= 0) {\n            return `${autoPx}px`;\n        }\n    }\n    if (others.length) {\n        return `calc((100% - (${others.join(\" + \")})) / ${autoCount})`;\n    }\n    else {\n        return `${100 / autoCount}%`;\n    }\n}\n/**\n * Calculate the pixels of width from the definition of width.\n * @param {DrawGrid} grid grid instance\n * @param {string|number} width width definition\n * @returns {number} the pixels of width\n * @private\n */\nfunction _colWidthDefineToPxWidth(grid, width) {\n    if (isAutoDefine(width)) {\n        return _toPxWidth(grid, _calcAutoColWidthExpr(grid));\n    }\n    return _toPxWidth(grid, width);\n}\n/** @private */\nfunction _getColWidth(grid, col) {\n    const width = _getColWidthDefine(grid, col);\n    return _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width));\n}\n/** @private */\nfunction _setColWidth(grid, col, width) {\n    grid[_].colWidthsMap.put(col, width);\n}\n/**\n * Overwrites the definition of a column whose width is set to `auto` with the current auto width formula.\n * @param {DrawGrid} grid grid instance\n * @returns {void}\n * @private\n */\nfunction _storeAutoColWidthExprs(grid) {\n    let expr = null;\n    for (let col = 0; col < grid[_].colCount; col++) {\n        const def = _getColWidthDefine(grid, col);\n        if (isAutoDefine(def)) {\n            _setColWidth(grid, col, expr || (expr = _calcAutoColWidthExpr(grid)));\n        }\n    }\n}\n/** @private */\nfunction _getColsWidth(grid, startCol, endCol) {\n    const defaultColPxWidth = _colWidthDefineToPxWidth(grid, grid.defaultColWidth);\n    const colCount = endCol - startCol + 1;\n    let w = defaultColPxWidth * colCount;\n    grid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\n        w +=\n            _adjustColWidth(grid, col, _colWidthDefineToPxWidth(grid, width)) -\n                defaultColPxWidth;\n    });\n    for (let col = startCol; col <= endCol; col++) {\n        if (grid[_].colWidthsMap.has(col)) {\n            continue;\n        }\n        const adj = _adjustColWidth(grid, col, defaultColPxWidth);\n        if (adj !== defaultColPxWidth) {\n            w += adj - defaultColPxWidth;\n        }\n    }\n    return w;\n}\n/** @private */\nfunction _getRowHeight(row) {\n    const internal = this.getRowHeightInternal(row);\n    if (utils_1.isDef(internal)) {\n        return internal;\n    }\n    const height = this[_].rowHeightsMap.get(row);\n    if (height) {\n        return height;\n    }\n    return this[_].defaultRowHeight;\n}\n/** @private */\nfunction _setRowHeight(grid, row, height) {\n    grid[_].rowHeightsMap.put(row, height);\n}\n/** @private */\nfunction _getRowsHeight(startRow, endRow) {\n    const internal = this.getRowsHeightInternal(startRow, endRow);\n    if (utils_1.isDef(internal)) {\n        return internal;\n    }\n    const rowCount = endRow - startRow + 1;\n    let h = this[_].defaultRowHeight * rowCount;\n    this[_].rowHeightsMap.each(startRow, endRow, (height) => {\n        h += height - this[_].defaultRowHeight;\n    });\n    return h;\n}\n/** @private */\nfunction _getScrollWidth(grid) {\n    return _getColsWidth(grid, 0, grid[_].colCount - 1);\n}\n/** @private */\nfunction _getScrollHeight(row) {\n    const internal = this.getScrollHeightInternal(row);\n    if (utils_1.isDef(internal)) {\n        return internal;\n    }\n    let h = this[_].defaultRowHeight * this[_].rowCount;\n    this[_].rowHeightsMap.each(0, this[_].rowCount - 1, (height) => {\n        h += height - this[_].defaultRowHeight;\n    });\n    return h;\n}\n/** @private */\nfunction _onScroll(grid, _e) {\n    const lastLeft = grid[_].scroll.left;\n    const lastTop = grid[_].scroll.top;\n    const moveX = grid[_].scrollable.scrollLeft - lastLeft;\n    const moveY = grid[_].scrollable.scrollTop - lastTop;\n    //\n    grid[_].scroll = {\n        left: grid[_].scrollable.scrollLeft,\n        top: grid[_].scrollable.scrollTop,\n    };\n    const visibleRect = _getVisibleRect(grid);\n    if (Math.abs(moveX) >= visibleRect.width ||\n        Math.abs(moveY) >= visibleRect.height) {\n        //\n        _invalidateRect(grid, visibleRect);\n    }\n    else {\n        //\n        grid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\n        if (moveX !== 0) {\n            //\n            const redrawRect = visibleRect.copy();\n            if (moveX < 0) {\n                redrawRect.width = -moveX;\n                if (grid[_].frozenColCount > 0) {\n                    //\n                    const frozenRect = _getFrozenColsRect(grid);\n                    redrawRect.width += frozenRect.width;\n                }\n            }\n            else if (moveX > 0) {\n                redrawRect.left = redrawRect.right - moveX;\n            }\n            //\n            _invalidateRect(grid, redrawRect);\n            if (moveX > 0) {\n                if (grid[_].frozenColCount > 0) {\n                    //\n                    _invalidateRect(grid, _getFrozenColsRect(grid));\n                }\n            }\n        }\n        if (moveY !== 0) {\n            //\n            const redrawRect = visibleRect.copy();\n            if (moveY < 0) {\n                redrawRect.height = -moveY;\n                if (grid[_].frozenRowCount > 0) {\n                    //\n                    const frozenRect = _getFrozenRowsRect(grid);\n                    redrawRect.height += frozenRect.height;\n                }\n            }\n            else if (moveY > 0) {\n                redrawRect.top = redrawRect.bottom - moveY;\n            }\n            //\n            _invalidateRect(grid, redrawRect);\n            if (moveY > 0) {\n                if (grid[_].frozenRowCount > 0) {\n                    //\n                    _invalidateRect(grid, _getFrozenRowsRect(grid));\n                }\n            }\n        }\n    }\n}\n/** @private */\n// eslint-disable-next-line complexity\nfunction _onKeyDownMove(e) {\n    var _a, _b, _c;\n    const { shiftKey } = e;\n    const keyCode = getKeyCode(e);\n    const focusCell = shiftKey ? this.selection.focus : this.selection.select;\n    if (keyCode === KEY_LEFT) {\n        if (e.ctrlKey || e.metaKey) {\n            move(this, null, \"W\");\n        }\n        else {\n            if (!hmove.call(this, \"W\")) {\n                return;\n            }\n        }\n        cancelEvent(e);\n    }\n    else if (keyCode === KEY_UP) {\n        if (e.ctrlKey || e.metaKey) {\n            move(this, \"N\", null);\n        }\n        else {\n            if (!vmove.call(this, \"N\")) {\n                return;\n            }\n        }\n        cancelEvent(e);\n    }\n    else if (keyCode === KEY_RIGHT) {\n        if (e.ctrlKey || e.metaKey) {\n            move(this, null, \"E\");\n        }\n        else {\n            if (!hmove.call(this, \"E\")) {\n                return;\n            }\n        }\n        cancelEvent(e);\n    }\n    else if (keyCode === KEY_DOWN) {\n        if (e.ctrlKey || e.metaKey) {\n            move(this, \"S\", null);\n        }\n        else {\n            if (!vmove.call(this, \"S\")) {\n                return;\n            }\n        }\n        cancelEvent(e);\n    }\n    else if (keyCode === KEY_HOME) {\n        if (e.ctrlKey || e.metaKey) {\n            move(this, \"N\", \"W\");\n        }\n        else {\n            move(this, null, \"W\");\n        }\n        cancelEvent(e);\n    }\n    else if (keyCode === KEY_END) {\n        if (e.ctrlKey || e.metaKey) {\n            move(this, \"S\", \"E\");\n        }\n        else {\n            move(this, null, \"E\");\n        }\n        cancelEvent(e);\n    }\n    else if (((_a = this.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) && keyCode === KEY_TAB) {\n        if (shiftKey) {\n            if (!hmove.call(this, \"W\", false)) {\n                const row = this.getMoveUpRowByKeyDownInternal(focusCell);\n                if (0 > row) {\n                    return;\n                }\n                _moveFocusCell.call(this, this.colCount - 1, row, false);\n            }\n        }\n        else {\n            if (!hmove.call(this, \"E\", false)) {\n                const row = this.getMoveDownRowByKeyDownInternal(focusCell);\n                if (this.rowCount <= row) {\n                    return;\n                }\n                _moveFocusCell.call(this, 0, row, false);\n            }\n        }\n        cancelEvent(e);\n    }\n    else if (((_b = this.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) && keyCode === KEY_ENTER) {\n        if (shiftKey) {\n            if (!vmove.call(this, \"N\", false)) {\n                const col = this.getMoveLeftColByKeyDownInternal(focusCell);\n                if (0 > col) {\n                    return;\n                }\n                _moveFocusCell.call(this, col, this.rowCount - 1, false);\n            }\n        }\n        else {\n            if (!vmove.call(this, \"S\", false)) {\n                const col = this.getMoveRightColByKeyDownInternal(focusCell);\n                if (this.colCount <= col) {\n                    return;\n                }\n                _moveFocusCell.call(this, col, Math.min(this.frozenRowCount, this.rowCount - 1), false);\n            }\n        }\n        cancelEvent(e);\n    }\n    else if (((_c = this.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\n        keyCode === KEY_ALPHA_A &&\n        (e.ctrlKey || e.metaKey)) {\n        this.selection.range = {\n            start: { col: 0, row: 0 },\n            end: { col: this.colCount - 1, row: this.rowCount - 1 },\n        };\n        this.invalidate();\n        cancelEvent(e);\n    }\n    function move(grid, vDir, hDir) {\n        const row = vDir === \"S\" ? grid.rowCount - 1 : vDir === \"N\" ? 0 : focusCell.row;\n        const col = hDir === \"E\" ? grid.colCount - 1 : hDir === \"W\" ? 0 : focusCell.col;\n        _moveFocusCell.call(grid, col, row, shiftKey);\n    }\n    function vmove(vDir, shiftKeyFlg = shiftKey) {\n        let row;\n        if (vDir === \"S\") {\n            row = this.getMoveDownRowByKeyDownInternal(focusCell);\n            if (this.rowCount <= row) {\n                return false;\n            }\n        }\n        else {\n            row = this.getMoveUpRowByKeyDownInternal(focusCell);\n            if (row < 0) {\n                return false;\n            }\n        }\n        const { col } = focusCell;\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\n        return true;\n    }\n    function hmove(hDir, shiftKeyFlg = shiftKey) {\n        let col;\n        if (hDir === \"E\") {\n            col = this.getMoveRightColByKeyDownInternal(focusCell);\n            if (this.colCount <= col) {\n                return false;\n            }\n        }\n        else {\n            col = this.getMoveLeftColByKeyDownInternal(focusCell);\n            if (col < 0) {\n                return false;\n            }\n        }\n        const { row } = focusCell;\n        _moveFocusCell.call(this, col, row, shiftKeyFlg);\n        return true;\n    }\n}\n/** @private */\nfunction _moveFocusCell(col, row, shiftKey) {\n    const offset = this.getOffsetInvalidateCells();\n    function extendRange(range) {\n        if (offset > 0) {\n            range.start.col -= offset;\n            range.start.row -= offset;\n            range.end.col += offset;\n            range.end.row += offset;\n        }\n        return range;\n    }\n    const beforeRange = extendRange(this.selection.range);\n    const beforeRect = this.getCellRangeRect(beforeRange);\n    this.selection._setFocusCell(col, row, shiftKey);\n    this.makeVisibleCell(col, row);\n    this.focusCell(col, row);\n    const afterRange = extendRange(this.selection.range);\n    const afterRect = this.getCellRangeRect(afterRange);\n    if (afterRect.intersection(beforeRect)) {\n        const invalidateRect = Rect_1.Rect.max(afterRect, beforeRect);\n        _invalidateRect(this, invalidateRect);\n    }\n    else {\n        _invalidateRect(this, beforeRect);\n        _invalidateRect(this, afterRect);\n    }\n}\n/** @private */\nfunction _updatedSelection() {\n    const { focusControl } = this[_];\n    const { col: selCol, row: selRow } = this[_].selection.select;\n    const results = this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.EDITABLEINPUT_CELL, {\n        col: selCol,\n        row: selRow,\n    });\n    const editMode = utils_1.array.findIndex(results, (v) => !!v) >= 0;\n    focusControl.editMode = editMode;\n    if (editMode) {\n        focusControl.storeInputStatus();\n        focusControl.setDefaultInputStatus();\n        this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, {\n            col: selCol,\n            row: selRow,\n            input: focusControl.input,\n        });\n    }\n}\n/** @private */\nfunction _getMouseAbstractPoint(grid, evt) {\n    let e;\n    if (isTouchEvent(evt)) {\n        e = evt.changedTouches[0];\n    }\n    else {\n        e = evt;\n    }\n    const clientX = e.clientX || e.pageX + window.scrollX;\n    const clientY = e.clientY || e.pageY + window.scrollY;\n    const rect = grid[_].canvas.getBoundingClientRect();\n    if (rect.right <= clientX) {\n        return null;\n    }\n    if (rect.bottom <= clientY) {\n        return null;\n    }\n    const x = clientX - rect.left + grid[_].scroll.left;\n    const y = clientY - rect.top + grid[_].scroll.top;\n    return { x, y };\n}\n/** @private */\nfunction _bindEvents() {\n    // eslint-disable-next-line consistent-this, @typescript-eslint/no-this-alias\n    const grid = this;\n    const { handler, element, scrollable } = grid[_];\n    const getCellEventArgsSet = (e) => {\n        const abstractPos = _getMouseAbstractPoint(grid, e);\n        if (!abstractPos) {\n            return {};\n        }\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\n        if (cell.col < 0 || cell.row < 0) {\n            return {\n                abstractPos,\n                cell,\n            };\n        }\n        const eventArgs = {\n            col: cell.col,\n            row: cell.row,\n            event: e,\n        };\n        return {\n            abstractPos,\n            cell,\n            eventArgs,\n        };\n    };\n    const canResizeColumn = (col) => {\n        if (grid[_].disableColumnResize) {\n            return false;\n        }\n        const limit = grid[_].colWidthsLimit[col];\n        if (!limit || !limit.min || !limit.max) {\n            return true;\n        }\n        return limit.max !== limit.min;\n    };\n    handler.on(element, \"mousedown\", (e) => {\n        const eventArgsSet = getCellEventArgsSet(e);\n        const { abstractPos, eventArgs } = eventArgsSet;\n        if (!abstractPos) {\n            return;\n        }\n        if (eventArgs) {\n            const results = grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\n            if (utils_1.array.findIndex(results, (v) => !v) >= 0) {\n                return;\n            }\n        }\n        if (getMouseButtons(e) !== 1) {\n            return;\n        }\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n            //\n            grid[_].columnResizer.start(resizeCol, e);\n        }\n        else {\n            //\n            grid[_].cellSelector.start(e);\n        }\n    });\n    handler.on(element, \"mouseup\", (e) => {\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL)) {\n            return;\n        }\n        const { eventArgs } = getCellEventArgsSet(e);\n        if (eventArgs) {\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEUP_CELL, eventArgs);\n        }\n    });\n    let doubleTapBefore = null;\n    let longTouchId = null;\n    handler.on(element, \"touchstart\", (e) => {\n        if (!doubleTapBefore) {\n            doubleTapBefore = getCellEventArgsSet(e).eventArgs;\n            setTimeout(() => {\n                doubleTapBefore = null;\n            }, 350);\n        }\n        else {\n            const { eventArgs } = getCellEventArgsSet(e);\n            if (eventArgs &&\n                eventArgs.col === doubleTapBefore.col &&\n                eventArgs.row === doubleTapBefore.row) {\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLTAP_CELL, eventArgs);\n            }\n            doubleTapBefore = null;\n            if (e.defaultPrevented) {\n                return;\n            }\n        }\n        longTouchId = setTimeout(() => {\n            //\n            longTouchId = null;\n            const abstractPos = _getMouseAbstractPoint(grid, e);\n            if (!abstractPos) {\n                return;\n            }\n            const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\n            if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n                //\n                grid[_].columnResizer.start(resizeCol, e);\n            }\n            else {\n                //\n                grid[_].cellSelector.start(e);\n            }\n        }, 500);\n    });\n    function cancel(_e) {\n        if (longTouchId) {\n            clearTimeout(longTouchId);\n            longTouchId = null;\n        }\n    }\n    handler.on(element, \"touchcancel\", cancel);\n    handler.on(element, \"touchmove\", cancel);\n    handler.on(element, \"touchend\", (e) => {\n        if (longTouchId) {\n            clearTimeout(longTouchId);\n            grid[_].cellSelector.select(e);\n            longTouchId = null;\n        }\n    });\n    let isMouseover = false;\n    let mouseEnterCell = null;\n    let mouseOverCell = null;\n    function onMouseenterCell(cell, related) {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEENTER_CELL, {\n            col: cell.col,\n            row: cell.row,\n            related,\n        });\n        mouseEnterCell = cell;\n    }\n    function onMouseleaveCell(related) {\n        const beforeMouseCell = mouseEnterCell;\n        mouseEnterCell = null;\n        if (beforeMouseCell) {\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSELEAVE_CELL, {\n                col: beforeMouseCell.col,\n                row: beforeMouseCell.row,\n                related,\n            });\n        }\n        return beforeMouseCell || undefined;\n    }\n    function onMouseoverCell(cell, related) {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, {\n            col: cell.col,\n            row: cell.row,\n            related,\n        });\n        mouseOverCell = cell;\n    }\n    function onMouseoutCell(related) {\n        const beforeMouseCell = mouseOverCell;\n        mouseOverCell = null;\n        if (beforeMouseCell) {\n            grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, {\n                col: beforeMouseCell.col,\n                row: beforeMouseCell.row,\n                related,\n            });\n        }\n        return beforeMouseCell || undefined;\n    }\n    const scrollElement = scrollable.getElement();\n    handler.on(scrollElement, \"mouseover\", (_e) => {\n        isMouseover = true;\n    });\n    handler.on(scrollElement, \"mouseout\", (_e) => {\n        isMouseover = false;\n        onMouseoutCell();\n    });\n    handler.on(element, \"mouseleave\", (_e) => {\n        onMouseleaveCell();\n    });\n    handler.on(element, \"mousemove\", (e) => {\n        const eventArgsSet = getCellEventArgsSet(e);\n        const { abstractPos, eventArgs } = eventArgsSet;\n        if (eventArgs) {\n            const beforeMouseCell = mouseEnterCell;\n            if (beforeMouseCell) {\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n                if (beforeMouseCell.col !== eventArgs.col ||\n                    beforeMouseCell.row !== eventArgs.row) {\n                    const enterCell = {\n                        col: eventArgs.col,\n                        row: eventArgs.row,\n                    };\n                    const outCell = onMouseoutCell(enterCell);\n                    const leaveCell = onMouseleaveCell(enterCell);\n                    onMouseenterCell(enterCell, leaveCell);\n                    if (isMouseover) {\n                        onMouseoverCell(enterCell, outCell);\n                    }\n                }\n                else if (isMouseover && !mouseOverCell) {\n                    onMouseoverCell({\n                        col: eventArgs.col,\n                        row: eventArgs.row,\n                    });\n                }\n            }\n            else {\n                const enterCell = {\n                    col: eventArgs.col,\n                    row: eventArgs.row,\n                };\n                onMouseenterCell(enterCell);\n                if (isMouseover) {\n                    onMouseoverCell(enterCell);\n                }\n                grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n            }\n        }\n        else {\n            onMouseoutCell();\n            onMouseleaveCell();\n        }\n        if (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\n            return;\n        }\n        const { style } = element;\n        if (!abstractPos) {\n            if (style.cursor === \"col-resize\") {\n                style.cursor = \"\";\n            }\n            return;\n        }\n        const resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n        if (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n            style.cursor = \"col-resize\";\n        }\n        else {\n            if (style.cursor === \"col-resize\") {\n                style.cursor = \"\";\n            }\n        }\n    });\n    handler.on(element, \"click\", (e) => {\n        if (grid[_].columnResizer.lastMoving(e) ||\n            grid[_].cellSelector.lastMoving(e)) {\n            return;\n        }\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL)) {\n            return;\n        }\n        const { eventArgs } = getCellEventArgsSet(e);\n        if (!eventArgs) {\n            return;\n        }\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, eventArgs);\n    });\n    handler.on(element, \"contextmenu\", (e) => {\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL)) {\n            return;\n        }\n        const { eventArgs } = getCellEventArgsSet(e);\n        if (!eventArgs) {\n            return;\n        }\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CONTEXTMENU_CELL, eventArgs);\n    });\n    handler.on(element, \"dblclick\", (e) => {\n        if (!grid.hasListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL)) {\n            return;\n        }\n        const { eventArgs } = getCellEventArgsSet(e);\n        if (!eventArgs) {\n            return;\n        }\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DBLCLICK_CELL, eventArgs);\n    });\n    grid[_].focusControl.onKeyDown((evt) => {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, evt);\n    });\n    grid[_].selection.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (data) => {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, data, data.selected);\n    });\n    scrollable.onScroll((e) => {\n        _onScroll(grid, e);\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, { event: e });\n    });\n    grid[_].focusControl.onKeyDownMove((e) => {\n        _onKeyDownMove.call(grid, e);\n    });\n    grid.listen(\"copydata\", (range) => {\n        const copyRange = grid.getCopyRangeInternal(range);\n        let copyValue = \"\";\n        for (let { row } = copyRange.start; row <= copyRange.end.row; row++) {\n            for (let { col } = copyRange.start; col <= copyRange.end.col; col++) {\n                const copyCellValue = grid.getCopyCellValue(col, row, copyRange);\n                if (typeof Promise !== \"undefined\" &&\n                    copyCellValue instanceof Promise) {\n                    //\n                }\n                else {\n                    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n                    const strCellValue = `${copyCellValue}`;\n                    if (/^\\[object .*\\]$/.exec(strCellValue)) {\n                        //object \n                    }\n                    else {\n                        copyValue += strCellValue;\n                    }\n                }\n                if (col < copyRange.end.col) {\n                    copyValue += \"\\t\";\n                }\n            }\n            copyValue += \"\\n\";\n        }\n        return copyValue;\n    });\n    grid[_].focusControl.onCopy((_e) => utils_1.array.find(grid.fireListeners(\"copydata\", grid[_].selection.range), utils_1.isDef));\n    grid[_].focusControl.onPaste(({ value, event }) => {\n        const normalizeValue = value.replace(/\\r?\\n$/, \"\");\n        const { col, row } = grid[_].selection.select;\n        const multi = /[\\r\\n\\u2028\\u2029\\t]/.test(normalizeValue); // is multi cell values\n        let rangeBoxValues = null;\n        const pasteCellEvent = {\n            col,\n            row,\n            value,\n            normalizeValue,\n            multi,\n            get rangeBoxValues() {\n                return (rangeBoxValues !== null && rangeBoxValues !== void 0 ? rangeBoxValues : (rangeBoxValues = paste_utils_1.parsePasteRangeBoxValues(normalizeValue)));\n            },\n            event,\n        };\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, pasteCellEvent);\n    });\n    grid[_].focusControl.onInput((value) => {\n        const { col, row } = grid[_].selection.select;\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.INPUT_CELL, { col, row, value });\n    });\n    grid[_].focusControl.onDelete((event) => {\n        const { col, row } = grid[_].selection.select;\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.DELETE_CELL, { col, row, event });\n    });\n    grid[_].focusControl.onFocus((e) => {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.FOCUS_GRID, e);\n        grid[_].focusedGrid = true;\n        const { col, row } = grid[_].selection.select;\n        grid.invalidateCell(col, row);\n    });\n    grid[_].focusControl.onBlur((e) => {\n        grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.BLUR_GRID, e);\n        grid[_].focusedGrid = false;\n        const { col, row } = grid[_].selection.select;\n        grid.invalidateCell(col, row);\n    });\n}\n/** @private */\nfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\n    if (grid[_].frozenRowCount <= 0) {\n        return -1;\n    }\n    const frozenRect = _getFrozenRowsRect(grid);\n    if (!frozenRect.inPoint(abstractX, abstractY)) {\n        return -1;\n    }\n    const cell = grid.getCellAt(abstractX, abstractY);\n    const cellRect = grid.getCellRect(cell.col, cell.row);\n    if (abstractX < cellRect.left + offset) {\n        return cell.col - 1;\n    }\n    if (cellRect.right - offset < abstractX) {\n        return cell.col;\n    }\n    return -1;\n}\n/** @private */\nfunction _getVisibleRect(grid) {\n    const { scroll: { left, top }, canvas: { width, height }, } = grid[_];\n    return new Rect_1.Rect(left, top, width, height);\n}\n/** @private */\nfunction _getScrollableVisibleRect(grid) {\n    let frozenColsWidth = 0;\n    if (grid[_].frozenColCount > 0) {\n        //\n        const frozenRect = _getFrozenColsRect(grid);\n        frozenColsWidth = frozenRect.width;\n    }\n    let frozenRowsHeight = 0;\n    if (grid[_].frozenRowCount > 0) {\n        //\n        const frozenRect = _getFrozenRowsRect(grid);\n        frozenRowsHeight = frozenRect.height;\n    }\n    return new Rect_1.Rect(grid[_].scrollable.scrollLeft + frozenColsWidth, grid[_].scrollable.scrollTop + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\n}\n/** @private */\nfunction _toRelativeRect(grid, absoluteRect) {\n    const rect = absoluteRect.copy();\n    const visibleRect = _getVisibleRect(grid);\n    rect.offsetLeft(-visibleRect.left);\n    rect.offsetTop(-visibleRect.top);\n    return rect;\n}\n//end private methods\n//\n//\n//\n//\n/**\n * managing mouse down moving\n * @private\n */\nclass BaseMouseDownMover {\n    constructor(grid) {\n        this._grid = grid;\n        this._handler = new EventHandler_1.EventHandler();\n        this._events = {};\n        this._started = false;\n        this._moved = false;\n    }\n    moving(_e) {\n        return !!this._started;\n    }\n    lastMoving(e) {\n        // mouseupclick\n        if (this.moving(e)) {\n            return true;\n        }\n        const last = this._mouseEndPoint;\n        if (!last) {\n            return false;\n        }\n        const pt = _getMouseAbstractPoint(this._grid, e);\n        return pt != null && pt.x === last.x && pt.y === last.y;\n    }\n    _bindMoveAndUp(e) {\n        const events = this._events;\n        const handler = this._handler;\n        if (!isTouchEvent(e)) {\n            events.mousemove = handler.on(document.body, \"mousemove\", (e) => this._mouseMove(e));\n            events.mouseup = handler.on(document.body, \"mouseup\", (e) => this._mouseUp(e));\n        }\n        else {\n            events.touchmove = handler.on(document.body, \"touchmove\", (e) => this._mouseMove(e), { passive: false });\n            events.touchend = handler.on(document.body, \"touchend\", (e) => this._mouseUp(e));\n            events.touchcancel = handler.on(document.body, \"touchcancel\", (e) => this._mouseUp(e));\n        }\n        this._started = true;\n        this._moved = false;\n    }\n    _mouseMove(e) {\n        if (!isTouchEvent(e)) {\n            if (getMouseButtons(e) !== 1) {\n                this._mouseUp(e);\n                return;\n            }\n        }\n        this._moved = this._moveInternal(e) || this._moved /*calculation on after*/;\n        cancelEvent(e);\n    }\n    _moveInternal(_e) {\n        //protected\n        return false;\n    }\n    _mouseUp(e) {\n        const events = this._events;\n        const handler = this._handler;\n        handler.off(events.mousemove);\n        handler.off(events.touchmove);\n        handler.off(events.mouseup);\n        handler.off(events.touchend);\n        // handler.off(this._events.mouseleave);\n        handler.off(events.touchcancel);\n        this._started = false;\n        this._upInternal(e);\n        // mouseupclick\n        if (this._moved) {\n            //\n            this._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\n            setTimeout(() => {\n                this._mouseEndPoint = null;\n            }, 10);\n        }\n    }\n    _upInternal(_e) {\n        //protected\n    }\n    dispose() {\n        this._handler.dispose();\n    }\n}\n/**\n * managing cell selection operation with mouse\n * @private\n */\nclass CellSelector extends BaseMouseDownMover {\n    start(e) {\n        const cell = this._getTargetCell(e);\n        if (!cell) {\n            return;\n        }\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\n        this._bindMoveAndUp(e);\n        this._cell = cell;\n        cancelEvent(e);\n        _vibrate(e);\n    }\n    select(e) {\n        const cell = this._getTargetCell(e);\n        if (!cell) {\n            return;\n        }\n        _moveFocusCell.call(this._grid, cell.col, cell.row, e.shiftKey);\n        this._cell = cell;\n    }\n    _moveInternal(e) {\n        const cell = this._getTargetCell(e);\n        if (!cell) {\n            return false;\n        }\n        const { col: oldCol, row: oldRow } = this._cell;\n        const { col: newCol, row: newRow } = cell;\n        if (oldCol === newCol && oldRow === newRow) {\n            return false;\n        }\n        const grid = this._grid;\n        _moveFocusCell.call(grid, newCol, newRow, true);\n        //make visible\n        const makeVisibleCol = (() => {\n            if (newCol < oldCol && 0 < newCol) {\n                // move left\n                return newCol - 1;\n            }\n            else if (oldCol < newCol && newCol + 1 < grid.colCount) {\n                // move right\n                return newCol + 1;\n            }\n            return newCol;\n        })();\n        const makeVisibleRow = (() => {\n            if (newRow < oldRow && 0 < newRow) {\n                // move up\n                return newRow - 1;\n            }\n            else if (oldRow < newRow && newRow + 1 < grid.rowCount) {\n                // move down\n                return newRow + 1;\n            }\n            return newRow;\n        })();\n        if (makeVisibleCol !== newCol || makeVisibleRow !== newRow) {\n            grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\n        }\n        this._cell = cell;\n        return true;\n    }\n    _getTargetCell(e) {\n        const grid = this._grid;\n        const abstractPos = _getMouseAbstractPoint(grid, e);\n        if (!abstractPos) {\n            return null;\n        }\n        const cell = grid.getCellAt(abstractPos.x, abstractPos.y);\n        if (cell.col < 0 || cell.row < 0) {\n            return null;\n        }\n        return cell;\n    }\n}\n/**\n * managing row width changing operation with mouse\n * @private\n */\nclass ColumnResizer extends BaseMouseDownMover {\n    constructor(grid) {\n        super(grid);\n        this._x = -1;\n        this._preX = -1;\n        this._invalidateAbsoluteLeft = -1;\n        this._targetCol = -1;\n    }\n    start(col, e) {\n        let pageX;\n        if (!isTouchEvent(e)) {\n            ({ pageX } = e);\n        }\n        else {\n            ({ pageX } = e.changedTouches[0]);\n        }\n        this._x = pageX;\n        this._preX = 0;\n        this._bindMoveAndUp(e);\n        this._targetCol = col;\n        this._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\n        cancelEvent(e);\n        _vibrate(e);\n    }\n    _moveInternal(e) {\n        const pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\n        const x = pageX - this._x;\n        const moveX = x - this._preX;\n        this._preX = x;\n        const pre = this._grid.getColWidth(this._targetCol);\n        let afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\n        if (afterSize < 10 && moveX < 0) {\n            afterSize = 10;\n        }\n        _storeAutoColWidthExprs(this._grid);\n        _setColWidth(this._grid, this._targetCol, afterSize);\n        const rect = _getVisibleRect(this._grid);\n        rect.left = this._invalidateAbsoluteLeft;\n        _invalidateRect(this._grid, rect);\n        this._grid.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.RESIZE_COLUMN, {\n            col: this._targetCol,\n        });\n        return true;\n    }\n    _upInternal(_e) {\n        const grid = this._grid;\n        if (grid.updateScroll()) {\n            grid.invalidate();\n        }\n    }\n}\n/** @private */\nfunction setSafeInputValue(input, value) {\n    const { type } = input;\n    input.type = \"\";\n    input.value = value;\n    if (type) {\n        input.type = type;\n    }\n}\n/**\n * Manage focus\n * @private\n */\nclass FocusControl extends EventTarget_1.EventTarget {\n    constructor(grid, parentElement, scrollable) {\n        super();\n        this._grid = grid;\n        this._scrollable = scrollable;\n        const handler = (this._handler = new EventHandler_1.EventHandler());\n        const input = (this._input = document.createElement(\"input\"));\n        input.classList.add(\"grid-focus-control\");\n        input.readOnly = true;\n        parentElement.appendChild(input);\n        handler.on(input, \"compositionstart\", (_e) => {\n            input.classList.add(\"composition\");\n            input.style.font = grid.font || \"16px sans-serif\";\n            this._isComposition = true;\n            if (this._compositionEnd) {\n                clearTimeout(this._compositionEnd);\n                delete this._compositionEnd;\n            }\n            grid.focus();\n        });\n        let lastInputValue;\n        const inputClear = () => {\n            lastInputValue = input.value;\n            if (this._isComposition) {\n                return;\n            }\n            if (lastInputValue !== \"\") {\n                setSafeInputValue(input, \"\");\n            }\n        };\n        const handleCompositionEnd = () => {\n            this._isComposition = false;\n            input.classList.remove(\"composition\");\n            input.style.font = \"\";\n            const { value } = input;\n            inputClear();\n            if (!input.readOnly) {\n                this.fireListeners(\"input\", value);\n            }\n            if (this._compositionEnd) {\n                clearTimeout(this._compositionEnd);\n                delete this._compositionEnd;\n            }\n        };\n        handler.on(input, \"compositionend\", (_e) => {\n            this._compositionEnd = setTimeout(handleCompositionEnd, 1);\n        });\n        handler.on(input, \"keypress\", (e) => {\n            if (this._isComposition) {\n                return;\n            }\n            if (!input.readOnly && e.key && e.key.length === 1) {\n                if (e.ctrlKey || e.metaKey) {\n                    if (e.key === \"c\") {\n                        //copy! for Firefox & Safari\n                    }\n                    else if (e.key === \"v\") {\n                        //paste! for Firefox & Safari\n                    }\n                }\n                else {\n                    if (e.key === \" \") {\n                        // Since the full-width space cannot be determined, it is processed by \"input\".\n                        return;\n                    }\n                    this.fireListeners(\"input\", e.key);\n                    cancelEvent(e);\n                }\n            }\n            inputClear();\n        });\n        handler.on(input, \"keydown\", (e) => {\n            var _a;\n            if (this._isComposition) {\n                if (this._compositionEnd) {\n                    handleCompositionEnd();\n                    cancelEvent(e);\n                }\n                return;\n            }\n            const keyCode = getKeyCode(e);\n            let stopCellMove = false;\n            const evt = {\n                keyCode,\n                event: e,\n                stopCellMoving() {\n                    stopCellMove = true;\n                },\n            };\n            this.fireListeners(\"keydown\", evt);\n            if (!input.readOnly && lastInputValue) {\n                // for Safari\n                this.fireListeners(\"input\", lastInputValue);\n            }\n            if (!stopCellMove)\n                this.fireKeyDownMove(keyCode, e);\n            if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.deleteCellValueOnDel) &&\n                (keyCode === KEY_DEL || keyCode === KEY_BS)) {\n                this.fireListeners(\"delete\", e);\n            }\n            inputClear();\n        });\n        handler.on(input, \"keyup\", (_e) => {\n            if (this._isComposition) {\n                if (this._compositionEnd) {\n                    handleCompositionEnd();\n                }\n            }\n            inputClear();\n        });\n        handler.on(input, \"input\", (e) => {\n            if (e.data === \" \" || e.data === \"\") {\n                // Since the full-width space cannot be determined on \"keypress\", it is processed by \"input\".\n                this.fireListeners(\"input\", e.data);\n            }\n            inputClear();\n        });\n        if (utils_1.browser.IE) {\n            handler.on(document, \"keydown\", (e) => {\n                if (e.target !== input) {\n                    return;\n                }\n                const keyCode = getKeyCode(e);\n                if (keyCode === KEY_ALPHA_C && e.ctrlKey) {\n                    // When text is not selected copy-event is not emit, on IE.\n                    setSafeInputValue(input, \"dummy\");\n                    input.select();\n                    setTimeout(() => {\n                        setSafeInputValue(input, \"\");\n                    }, 100);\n                }\n                else if (keyCode === KEY_ALPHA_V && e.ctrlKey) {\n                    // When input is read-only paste-event is not emit, on IE.\n                    if (input.readOnly) {\n                        input.readOnly = false;\n                        setTimeout(() => {\n                            input.readOnly = true;\n                            setSafeInputValue(input, \"\");\n                        }, 10);\n                    }\n                }\n            });\n        }\n        if (utils_1.browser.Edge) {\n            handler.once(document, \"keydown\", (e) => {\n                var _a;\n                if (!utils_1.isDescendantElement(parentElement, e.target)) {\n                    return;\n                }\n                // When the input has focus on the first page opening, the paste-event and copy-event is not emit, on Edge.\n                const dummyInput = document.createElement(\"input\");\n                grid.getElement().appendChild(dummyInput);\n                dummyInput.focus();\n                input.focus();\n                (_a = dummyInput.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(dummyInput);\n            });\n        }\n        handler.on(document, \"paste\", (e) => {\n            if (!utils_1.isDescendantElement(parentElement, e.target)) {\n                return;\n            }\n            let pasteText = undefined;\n            if (utils_1.browser.IE) {\n                // IE\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                pasteText = window.clipboardData.getData(\"Text\");\n            }\n            else {\n                const { clipboardData } = e;\n                if (clipboardData.items) {\n                    // Chrome & Firefox & Edge\n                    pasteText = clipboardData.getData(\"text/plain\");\n                }\n                else {\n                    // Safari\n                    if (-1 !==\n                        Array.prototype.indexOf.call(clipboardData.types, \"text/plain\")) {\n                        pasteText = clipboardData.getData(\"Text\");\n                    }\n                }\n            }\n            if (utils_1.isDef(pasteText) && pasteText.length) {\n                this.fireListeners(\"paste\", { value: pasteText, event: e });\n            }\n        });\n        handler.on(document, \"copy\", (e) => {\n            if (this._isComposition) {\n                return;\n            }\n            if (!utils_1.isDescendantElement(parentElement, e.target)) {\n                return;\n            }\n            setSafeInputValue(input, \"\");\n            const data = utils_1.array.find(this.fireListeners(\"copy\"), utils_1.isDef);\n            if (utils_1.isDef(data)) {\n                cancelEvent(e);\n                if (utils_1.browser.IE) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    window.clipboardData.setData(\"Text\", data); // IE\n                }\n                else {\n                    e.clipboardData.setData(\"text/plain\", data); // Chrome, Firefox\n                }\n            }\n        });\n        handler.on(input, \"focus\", (e) => {\n            this.fireListeners(\"focus\", e);\n        });\n        handler.on(input, \"blur\", (e) => {\n            this.fireListeners(\"blur\", e);\n        });\n    }\n    fireKeyDownMove(keyCode, e) {\n        var _a, _b, _c;\n        const fn = this._keyDownMoveCallback;\n        if (!fn) {\n            return;\n        }\n        if (this._isComposition) {\n            return;\n        }\n        if (keyCode === KEY_LEFT ||\n            keyCode === KEY_UP ||\n            keyCode === KEY_RIGHT ||\n            keyCode === KEY_DOWN ||\n            keyCode === KEY_HOME ||\n            keyCode === KEY_END) {\n            fn(e);\n        }\n        else if (((_a = this._grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) &&\n            keyCode === KEY_TAB) {\n            fn(e);\n        }\n        else if (((_b = this._grid.keyboardOptions) === null || _b === void 0 ? void 0 : _b.moveCellOnEnter) &&\n            keyCode === KEY_ENTER) {\n            fn(e);\n        }\n        else if (((_c = this._grid.keyboardOptions) === null || _c === void 0 ? void 0 : _c.selectAllOnCtrlA) &&\n            keyCode === KEY_ALPHA_A &&\n            (e.ctrlKey || e.metaKey)) {\n            fn(e);\n        }\n    }\n    onKeyDownMove(fn) {\n        this._keyDownMoveCallback = fn;\n    }\n    onKeyDown(fn) {\n        return this.listen(\"keydown\", fn);\n    }\n    onInput(fn) {\n        return this.listen(\"input\", fn);\n    }\n    onDelete(fn) {\n        return this.listen(\"delete\", fn);\n    }\n    onCopy(fn) {\n        return this.listen(\"copy\", fn);\n    }\n    onPaste(fn) {\n        return this.listen(\"paste\", fn);\n    }\n    onFocus(fn) {\n        return this.listen(\"focus\", fn);\n    }\n    onBlur(fn) {\n        return this.listen(\"blur\", fn);\n    }\n    focus() {\n        // this._input.value = '';\n        this._input.focus();\n    }\n    setFocusRect(rect) {\n        const input = this._input;\n        const top = this._scrollable.calcTop(rect.top);\n        input.style.top = `${(top - style.getScrollBarSize()).toFixed()}px`; //position:relative IE position:relative\n        input.style.left = `${rect.left.toFixed()}px`;\n        input.style.width = `${rect.width.toFixed()}px`;\n        input.style.height = `${rect.height.toFixed()}px`;\n    }\n    get editMode() {\n        return !this._input.readOnly;\n    }\n    set editMode(editMode) {\n        this._input.readOnly = !editMode;\n    }\n    resetInputStatus() {\n        var _a;\n        const el = this._input;\n        if (!el.classList.contains(\"grid-focus-control--stored-status\")) {\n            return;\n        }\n        const composition = el.classList.contains(\"composition\");\n        const atts = el.attributes;\n        const removeNames = [];\n        for (let i = 0, n = atts.length; i < n; i++) {\n            const att = atts[i];\n            if (!((_a = this._inputStatus) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(att.nodeName))) {\n                removeNames.push(att.name);\n            }\n        }\n        removeNames.forEach((removeName) => {\n            el.removeAttribute(removeName);\n        });\n        for (const name in this._inputStatus) {\n            el.setAttribute(name, this._inputStatus[name]);\n        }\n        if (composition) {\n            el.classList.add(\"composition\");\n            el.style.font = this._grid.font || \"16px sans-serif\";\n        }\n        else {\n            el.classList.remove(\"composition\");\n        }\n        el.classList.remove(\"grid-focus-control--stored-status\");\n    }\n    storeInputStatus() {\n        const el = this._input;\n        if (el.classList.contains(\"grid-focus-control--stored-status\")) {\n            return;\n        }\n        const inputStatus = (this._inputStatus = {});\n        const atts = el.attributes;\n        for (let i = 0, n = atts.length; i < n; i++) {\n            const att = atts[i];\n            inputStatus[att.name] = att.value;\n        }\n        el.classList.add(\"grid-focus-control--stored-status\");\n    }\n    setDefaultInputStatus() {\n        // \n        // this._input.style.font = this._grid.font || '16px sans-serif';\n    }\n    get input() {\n        return this._input;\n    }\n    dispose() {\n        super.dispose();\n        this._handler.dispose();\n    }\n}\n/**\n * Selected area management\n */\nclass Selection extends EventTarget_1.EventTarget {\n    constructor(grid) {\n        super();\n        this._grid = grid;\n        this._sel = { col: 0, row: 0 };\n        this._focus = { col: 0, row: 0 };\n        this._start = { col: 0, row: 0 };\n        this._end = { col: 0, row: 0 };\n    }\n    get range() {\n        const start = this._start;\n        const end = this._end;\n        const startCol = Math.min(start.col, end.col);\n        const startRow = Math.min(start.row, end.row);\n        const endCol = Math.max(start.col, end.col);\n        const endRow = Math.max(start.row, end.row);\n        return {\n            start: {\n                col: startCol,\n                row: startRow,\n            },\n            end: {\n                col: endCol,\n                row: endRow,\n            },\n        };\n    }\n    set range(range) {\n        const startCol = Math.min(range.start.col, range.end.col);\n        const startRow = Math.min(range.start.row, range.end.row);\n        const endCol = Math.max(range.start.col, range.end.col);\n        const endRow = Math.max(range.start.row, range.end.row);\n        this._wrapFireSelectedEvent(() => {\n            this._sel = {\n                col: startCol,\n                row: startRow,\n            };\n            this._focus = {\n                col: startCol,\n                row: startRow,\n            };\n            this._start = {\n                col: startCol,\n                row: startRow,\n            };\n            this._end = {\n                col: endCol,\n                row: endRow,\n            };\n            _updatedSelection.call(this._grid);\n        });\n    }\n    get focus() {\n        const { col, row } = this._focus;\n        return { col, row };\n    }\n    get select() {\n        const { col, row } = this._sel;\n        return { col, row };\n    }\n    set select(cell) {\n        this._wrapFireSelectedEvent(() => {\n            const { col = 0, row = 0 } = cell;\n            this._setSelectCell(col, row);\n            this._setFocusCell(col, row, true);\n            _updatedSelection.call(this._grid);\n        });\n    }\n    _setSelectCell(col, row) {\n        this._wrapFireSelectedEvent(() => {\n            this._sel = { col, row };\n            this._start = { col, row };\n        });\n    }\n    _setFocusCell(col, row, keepSelect) {\n        this._wrapFireSelectedEvent(() => {\n            if (!keepSelect) {\n                this._setSelectCell(col, row);\n            }\n            this._focus = { col, row };\n            this._end = { col, row };\n        });\n    }\n    _wrapFireSelectedEvent(callback) {\n        if (this._isWraped) {\n            callback();\n        }\n        else {\n            this._isWraped = true;\n            try {\n                const before = {\n                    col: this._sel.col,\n                    row: this._sel.row,\n                    selected: false,\n                };\n                callback();\n                const after = {\n                    col: this._sel.col,\n                    row: this._sel.row,\n                    selected: true,\n                    before: {\n                        col: before.col,\n                        row: before.row,\n                    },\n                };\n                before.after = {\n                    col: after.col,\n                    row: after.row,\n                };\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, before);\n                this.fireListeners(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, after);\n            }\n            finally {\n                this._isWraped = false;\n            }\n        }\n    }\n    _updateGridRange() {\n        const { rowCount, colCount } = this._grid;\n        const points = [this._sel, this._focus, this._start, this._end];\n        let needChange = false;\n        for (let i = 0; i < points.length; i++) {\n            if (colCount <= points[i].col || rowCount <= points[i].row) {\n                needChange = true;\n                break;\n            }\n        }\n        if (!needChange) {\n            return false;\n        }\n        this._wrapFireSelectedEvent(() => {\n            points.forEach((p) => {\n                p.col = Math.min(colCount - 1, p.col);\n                p.row = Math.min(rowCount - 1, p.row);\n            });\n        });\n        return true;\n    }\n}\n/**\n * This class manages the drawing process for each layer\n */\n/** @private */\nclass DrawLayers {\n    constructor() {\n        this._layers = {};\n    }\n    addDraw(level, fn) {\n        const l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\n        l.addDraw(fn);\n    }\n    draw(ctx) {\n        const list = [];\n        for (const k in this._layers) {\n            list.push(this._layers[k]);\n        }\n        list.sort((a, b) => a.level - b.level);\n        list.forEach((l) => l.draw(ctx));\n    }\n}\n/** @private */\nclass DrawLayer {\n    constructor(level) {\n        this._level = level;\n        this._list = [];\n    }\n    get level() {\n        return this._level;\n    }\n    addDraw(fn) {\n        this._list.push(fn);\n    }\n    draw(ctx) {\n        this._list.forEach((fn) => {\n            ctx.save();\n            try {\n                fn(ctx);\n            }\n            finally {\n                ctx.restore();\n            }\n        });\n    }\n}\n/**\n * Context of cell drawing\n * @private\n */\nclass DrawCellContext {\n    //  private _grid: any;\n    //  private _onTerminate: any;\n    /**\n     * constructor\n     * @param {number} col index of column\n     * @param {number} row index of row\n     * @param {CanvasRenderingContext2D} ctx context\n     * @param {Rect} rect rect of cell area\n     * @param {Rect} drawRect rect of drawing area\n     * @param {boolean} drawing `true` if drawing is in progress\n     * @param {object} selection the selection\n     * @param {Array} drawLayers array of draw layers\n     * @private\n     */\n    constructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\n        this._rectFilter = null;\n        this._col = col;\n        this._row = row;\n        this._mode = 0;\n        this._ctx = ctx;\n        this._rect = rect;\n        this._drawRect = drawRect;\n        this._drawing = drawing;\n        this._selection = selection;\n        this._drawLayers = drawLayers;\n        this._childContexts = [];\n    }\n    get drawing() {\n        if (this._mode === 0) {\n            return this._drawing;\n        }\n        else {\n            return true;\n        }\n    }\n    get row() {\n        return this._row;\n    }\n    get col() {\n        return this._col;\n    }\n    cancel() {\n        this._cancel = true;\n        this._childContexts.forEach((ctx) => {\n            ctx.cancel();\n        });\n    }\n    /**\n     * select status.\n     * @return {object} select status\n     */\n    getSelection() {\n        return {\n            select: this._selection.select,\n            range: this._selection.range,\n        };\n    }\n    /**\n     * Canvas context.\n     * @return {CanvasRenderingContext2D} Canvas context.\n     */\n    getContext() {\n        if (this._mode === 0) {\n            return this._ctx;\n        }\n        else {\n            return _getInitContext.call(this._grid);\n        }\n    }\n    /**\n     * Rectangle of cell.\n     * @return {Rect} rect Rectangle of cell.\n     */\n    getRect() {\n        const rectFilter = this._rectFilter;\n        return rectFilter\n            ? rectFilter(this._getRectInternal())\n            : this._getRectInternal();\n    }\n    setRectFilter(rectFilter) {\n        this._rectFilter = rectFilter;\n    }\n    /**\n     * Rectangle of Drawing range.\n     * @return {Rect} Rectangle of Drawing range.\n     */\n    getDrawRect() {\n        if (this._cancel) {\n            return null;\n        }\n        if (this._mode === 0) {\n            return this._drawRect;\n        }\n        else {\n            if (this._isOutOfRange()) {\n                return null;\n            }\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\n            return this._toRelativeDrawRect(absoluteRect);\n        }\n    }\n    _isOutOfRange() {\n        const { colCount, rowCount } = this._grid;\n        return colCount <= this._col || rowCount <= this._row;\n    }\n    /**\n     * get Context of current state\n     * @return {DrawCellContext} current DrawCellContext.\n     */\n    toCurrentContext() {\n        if (this._mode === 0) {\n            return this;\n        }\n        else {\n            const absoluteRect = this._grid.getCellRect(this._col, this._row);\n            const rect = _toRelativeRect(this._grid, absoluteRect);\n            const drawRect = this._isOutOfRange()\n                ? null\n                : this._toRelativeDrawRect(absoluteRect);\n            const context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers);\n            // toCurrentContext  toCurrentContext\n            context.toCurrentContext = this.toCurrentContext.bind(this);\n            this._childContexts.push(context);\n            if (this._cancel) {\n                context.cancel();\n            }\n            context._rectFilter = this._rectFilter;\n            return context;\n        }\n    }\n    addLayerDraw(level, fn) {\n        this._drawLayers.addDraw(level, fn);\n    }\n    _toRelativeDrawRect(absoluteRect) {\n        const visibleRect = _getVisibleRect(this._grid);\n        let rect = absoluteRect.copy();\n        if (!rect.intersection(visibleRect)) {\n            return null;\n        }\n        const grid = this._grid;\n        const isFrozenCell = grid.isFrozenCell(this._col, this._row);\n        if (grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\n            const fRect = grid.getCellRect(grid.frozenColCount - 1, this._row);\n            rect = Rect_1.Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\n        }\n        if (grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\n            const fRect = grid.getCellRect(this._col, grid.frozenRowCount - 1);\n            rect = Rect_1.Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\n        }\n        if (!rect.intersection(visibleRect)) {\n            return null;\n        }\n        rect.offsetLeft(-visibleRect.left);\n        rect.offsetTop(-visibleRect.top);\n        return rect;\n    }\n    _delayMode(grid, onTerminate) {\n        this._mode = 1;\n        this._ctx = null;\n        this._rect = null;\n        this._drawRect = null;\n        this._grid = grid;\n        this._onTerminate = onTerminate;\n    }\n    /**\n     * terminate\n     * @return {void}\n     */\n    terminate() {\n        var _a;\n        if (this._mode !== 0) {\n            (_a = this._onTerminate) === null || _a === void 0 ? void 0 : _a.call(this);\n        }\n    }\n    _getRectInternal() {\n        if (this._mode === 0) {\n            return this._rect;\n        }\n        else {\n            if (this._rect) {\n                return this._rect;\n            }\n            return this._grid.getCellRelativeRect(this._col, this._row);\n        }\n    }\n}\n/** @private */\nconst protectedKey = _;\n/**\n * DrawGrid\n * @classdesc cheetahGrid.core.DrawGrid\n * @memberof cheetahGrid.core\n */\nclass DrawGrid extends EventTarget_1.EventTarget {\n    constructor(options = {}) {\n        super();\n        const { rowCount = 10, colCount = 10, frozenColCount = 0, frozenRowCount = 0, defaultRowHeight = 40, defaultColWidth = 80, font, underlayBackgroundColor, keyboardOptions, parentElement, disableColumnResize, } = options;\n        const protectedSpace = (this[_] = {});\n        style.initDocument();\n        protectedSpace.element = createRootElement();\n        protectedSpace.scrollable = new Scrollable_1.Scrollable();\n        protectedSpace.handler = new EventHandler_1.EventHandler();\n        protectedSpace.selection = new Selection(this);\n        protectedSpace.focusControl = new FocusControl(this, protectedSpace.scrollable.getElement(), protectedSpace.scrollable);\n        protectedSpace.canvas = hiDPI.transform(document.createElement(\"canvas\"));\n        protectedSpace.context = protectedSpace.canvas.getContext(\"2d\", {\n            alpha: false,\n        });\n        protectedSpace.rowCount = rowCount;\n        protectedSpace.colCount = colCount;\n        protectedSpace.frozenColCount = frozenColCount;\n        protectedSpace.frozenRowCount = frozenRowCount;\n        protectedSpace.defaultRowHeight = defaultRowHeight;\n        protectedSpace.defaultColWidth = defaultColWidth;\n        protectedSpace.font = font;\n        protectedSpace.underlayBackgroundColor = underlayBackgroundColor;\n        protectedSpace.keyboardOptions = keyboardOptions;\n        protectedSpace.disableColumnResize = disableColumnResize;\n        /////\n        protectedSpace.rowHeightsMap = new NumberMap_1.NumberMap();\n        protectedSpace.colWidthsMap = new NumberMap_1.NumberMap();\n        protectedSpace.colWidthsLimit = {};\n        protectedSpace.calcWidthContext = {\n            _: protectedSpace,\n            get full() {\n                return this._.canvas.width;\n            },\n            get em() {\n                return canvases_1.getFontSize(this._.context, this._.font).width;\n            },\n        };\n        protectedSpace.columnResizer = new ColumnResizer(this);\n        protectedSpace.cellSelector = new CellSelector(this);\n        protectedSpace.drawCells = {};\n        protectedSpace.cellTextOverflows = {};\n        protectedSpace.focusedGrid = false;\n        protectedSpace.element.appendChild(protectedSpace.canvas);\n        protectedSpace.element.appendChild(protectedSpace.scrollable.getElement());\n        protectedSpace.scroll = {\n            left: 0,\n            top: 0,\n        };\n        this.updateScroll();\n        if (parentElement) {\n            parentElement.appendChild(protectedSpace.element);\n            this.updateSize();\n        }\n        else {\n            this.updateSize();\n        }\n        _bindEvents.call(this);\n        this.bindEventsInternal();\n    }\n    static get EVENT_TYPE() {\n        return DG_EVENT_TYPE_1.DG_EVENT_TYPE;\n    }\n    /**\n     * Get root element.\n     * @returns {HTMLElement} root element\n     */\n    getElement() {\n        return this[_].element;\n    }\n    /**\n     * Get canvas element.\n     */\n    get canvas() {\n        return this[_].canvas;\n    }\n    /**\n     * Focus the grid.\n     * @return {void}\n     */\n    focus() {\n        const { col, row } = this[_].selection.select;\n        this.focusCell(col, row);\n    }\n    hasFocusGrid() {\n        return this[_].focusedGrid;\n    }\n    /**\n     * Get the selection instance.\n     */\n    get selection() {\n        return this[_].selection;\n    }\n    /**\n     * Get the number of rows.\n     */\n    get rowCount() {\n        return this[_].rowCount;\n    }\n    /**\n     * Set the number of rows.\n     */\n    set rowCount(rowCount) {\n        this[_].rowCount = rowCount;\n        this.updateScroll();\n        if (this[_].selection._updateGridRange()) {\n            const { col, row } = this[_].selection.focus;\n            this.makeVisibleCell(col, row);\n            this.setFocusCursor(col, row);\n        }\n    }\n    /**\n     * Get the number of columns.\n     */\n    get colCount() {\n        return this[_].colCount;\n    }\n    /**\n     * Set the number of columns.\n     */\n    set colCount(colCount) {\n        this[_].colCount = colCount;\n        this.updateScroll();\n        if (this[_].selection._updateGridRange()) {\n            const { col, row } = this[_].selection.focus;\n            this.makeVisibleCell(col, row);\n            this.setFocusCursor(col, row);\n        }\n    }\n    /**\n     * Get the number of frozen columns.\n     */\n    get frozenColCount() {\n        return this[_].frozenColCount;\n    }\n    /**\n     * Set the number of frozen columns.\n     */\n    set frozenColCount(frozenColCount) {\n        this[_].frozenColCount = frozenColCount;\n    }\n    /**\n     * Get the number of frozen rows.\n     */\n    get frozenRowCount() {\n        return this[_].frozenRowCount;\n    }\n    /**\n     * Set the number of frozen rows.\n     */\n    set frozenRowCount(frozenRowCount) {\n        this[_].frozenRowCount = frozenRowCount;\n    }\n    /**\n     * Get the default row height.\n     *\n     */\n    get defaultRowHeight() {\n        return this[_].defaultRowHeight;\n    }\n    /**\n     * Set the default row height.\n     */\n    set defaultRowHeight(defaultRowHeight) {\n        this[_].defaultRowHeight = defaultRowHeight;\n    }\n    /**\n     * Get the default column width.\n     */\n    get defaultColWidth() {\n        return this[_].defaultColWidth;\n    }\n    /**\n     * Set the default column width.\n     */\n    set defaultColWidth(defaultColWidth) {\n        this[_].defaultColWidth = defaultColWidth;\n    }\n    /**\n     * Get the font definition as a string.\n     */\n    get font() {\n        return this[_].font;\n    }\n    /**\n     * Set the font definition with the given string.\n     */\n    set font(font) {\n        this[_].font = font;\n    }\n    /**\n     * Get the background color of the underlay.\n     */\n    get underlayBackgroundColor() {\n        return this[_].underlayBackgroundColor;\n    }\n    /**\n     * Set the background color of the underlay.\n     */\n    set underlayBackgroundColor(underlayBackgroundColor) {\n        this[_].underlayBackgroundColor = underlayBackgroundColor;\n    }\n    get keyboardOptions() {\n        var _a;\n        return (_a = this[_].keyboardOptions) !== null && _a !== void 0 ? _a : null;\n    }\n    set keyboardOptions(keyboardOptions) {\n        this[_].keyboardOptions = keyboardOptions !== null && keyboardOptions !== void 0 ? keyboardOptions : undefined;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    configure(name, value) {\n        const cfg = this[_].config || (this[_].config = {});\n        if (utils_1.isDef(value)) {\n            cfg[name] = value;\n        }\n        return cfg[name];\n    }\n    /**\n     * Apply the changed size.\n     * @return {void}\n     */\n    updateSize() {\n        //\n        const { canvas } = this[_];\n        canvas.style.width = \"\";\n        canvas.style.height = \"\";\n        const width = Math.floor(canvas.offsetWidth ||\n            canvas.parentElement.offsetWidth -\n                style.getScrollBarSize() /*for legacy*/);\n        const height = Math.floor(canvas.offsetHeight ||\n            canvas.parentElement.offsetHeight -\n                style.getScrollBarSize() /*for legacy*/);\n        canvas.width = width;\n        canvas.height = height;\n        //style\n        canvas.style.width = `${width}px`;\n        canvas.style.height = `${height}px`;\n        const sel = this[_].selection.select;\n        this[_].focusControl.setFocusRect(this.getCellRect(sel.col, sel.row));\n    }\n    /**\n     * Apply the changed scroll size.\n     * @return {boolean} `true` if there was a change in the scroll size\n     */\n    updateScroll() {\n        const { scrollable } = this[_];\n        const newHeight = _getScrollHeight.call(this);\n        const newWidth = _getScrollWidth(this);\n        if (newHeight === scrollable.scrollHeight &&\n            newWidth === scrollable.scrollWidth) {\n            return false;\n        }\n        scrollable.setScrollSize(newWidth, newHeight);\n        this[_].scroll = {\n            left: scrollable.scrollLeft,\n            top: scrollable.scrollTop,\n        };\n        return true;\n    }\n    /**\n     * Get the row height of the given the row index.\n     * @param  {number} row The row index\n     * @return {number} The row height\n     */\n    getRowHeight(row) {\n        return _getRowHeight.call(this, row);\n    }\n    /**\n     * Set the row height of the given the row index.\n     * @param  {number} row The row index\n     * @param  {number} height The row height\n     * @return {void}\n     */\n    setRowHeight(row, height) {\n        _setRowHeight(this, row, height);\n    }\n    /**\n     * Get the column width of the given the column index.\n     * @param  {number} col The column index\n     * @return {number} The column width\n     */\n    getColWidth(col) {\n        return _getColWidth(this, col);\n    }\n    /**\n     * Set the column widtht of the given the column index.\n     * @param  {number} col The column index\n     * @param  {number} width The column width\n     * @return {void}\n     */\n    setColWidth(col, width) {\n        _setColWidth(this, col, width);\n    }\n    /**\n     * Get the column max width of the given the column index.\n     * @param  {number} col The column index\n     * @return {number} The column max width\n     */\n    getMaxColWidth(col) {\n        const obj = this[_].colWidthsLimit[col];\n        return (obj && obj.max) || undefined;\n    }\n    /**\n     * Set the column max widtht of the given the column index.\n     * @param  {number} col The column index\n     * @param  {number} maxwidth The column max width\n     * @return {void}\n     */\n    setMaxColWidth(col, maxwidth) {\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n        obj.max = maxwidth;\n    }\n    /**\n     * Get the column min width of the given the column index.\n     * @param  {number} col The column index\n     * @return {number} The column min width\n     */\n    getMinColWidth(col) {\n        const obj = this[_].colWidthsLimit[col];\n        return (obj && obj.min) || undefined;\n    }\n    /**\n     * Set the column min widtht of the given the column index.\n     * @param  {number} col The column index\n     * @param  {number} minwidth The column min width\n     * @return {void}\n     */\n    setMinColWidth(col, minwidth) {\n        const obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n        obj.min = minwidth;\n    }\n    /**\n     * Get the rect of the cell.\n     * @param {number} col index of column, of the cell\n     * @param {number} row index of row, of the cell\n     * @returns {Rect} the rect of the cell.\n     */\n    getCellRect(col, row) {\n        const isFrozenCell = this.isFrozenCell(col, row);\n        let absoluteLeft = _getColsWidth(this, 0, col - 1);\n        const width = _getColWidth(this, col);\n        if (isFrozenCell && isFrozenCell.col) {\n            absoluteLeft += this[_].scroll.left;\n        }\n        let absoluteTop = _getRowsHeight.call(this, 0, row - 1);\n        const height = _getRowHeight.call(this, row);\n        if (isFrozenCell && isFrozenCell.row) {\n            absoluteTop += this[_].scroll.top;\n        }\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\n    }\n    /**\n     * Get the relative rectangle of the cell.\n     * @param {number} col index of column, of the cell\n     * @param {number} row index of row, of the cell\n     * @returns {Rect} the rect of the cell.\n     */\n    getCellRelativeRect(col, row) {\n        return _toRelativeRect(this, this.getCellRect(col, row));\n    }\n    /**\n     * Get the rectangle of the cells area.\n     * @param {number} startCol index of the starting column, of the cell\n     * @param {number} startRow index of the starting row, of the cell\n     * @param {number} endCol index of the ending column, of the cell\n     * @param {number} endRow index of the ending row, of the cell\n     * @returns {Rect} the rect of the cells.\n     */\n    getCellsRect(startCol, startRow, endCol, endRow) {\n        const isFrozenStartCell = this.isFrozenCell(startCol, startRow);\n        const isFrozenEndCell = this.isFrozenCell(endCol, endRow);\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\n        let width = _getColsWidth(this, startCol, endCol);\n        if (isFrozenStartCell && isFrozenStartCell.col) {\n            const scrollLeft = this[_].scroll.left;\n            absoluteLeft += scrollLeft;\n            if (!isFrozenEndCell || !isFrozenEndCell.col) {\n                width -= scrollLeft;\n                width = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\n            }\n        }\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\n        let height = _getRowsHeight.call(this, startRow, endRow);\n        if (isFrozenStartCell && isFrozenStartCell.row) {\n            const scrollTop = this[_].scroll.top;\n            absoluteTop += scrollTop;\n            if (!isFrozenEndCell || !isFrozenEndCell.row) {\n                height -= scrollTop;\n                height = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\n            }\n        }\n        return new Rect_1.Rect(absoluteLeft, absoluteTop, width, height);\n    }\n    getCellRangeRect(range) {\n        return this.getCellsRect(range.start.col, range.start.row, range.end.col, range.end.row);\n    }\n    isFrozenCell(col, row) {\n        const { frozenRowCount, frozenColCount } = this[_];\n        const isFrozenRow = frozenRowCount > 0 && row < frozenRowCount;\n        const isFrozenCol = frozenColCount > 0 && col < frozenColCount;\n        if (isFrozenRow || isFrozenCol) {\n            return {\n                row: isFrozenRow,\n                col: isFrozenCol,\n            };\n        }\n        else {\n            return null;\n        }\n    }\n    getRowAt(absoluteY) {\n        const frozen = _getTargetFrozenRowAt(this, absoluteY);\n        if (frozen) {\n            return frozen.row;\n        }\n        const row = _getTargetRowAt.call(this, absoluteY);\n        return row ? row.row : -1;\n    }\n    getColAt(absoluteX) {\n        const frozen = _getTargetFrozenColAt(this, absoluteX);\n        if (frozen) {\n            return frozen.col;\n        }\n        const col = _getTargetColAt(this, absoluteX);\n        return col ? col.col : -1;\n    }\n    getCellAt(absoluteX, absoluteY) {\n        return {\n            row: this.getRowAt(absoluteY),\n            col: this.getColAt(absoluteX),\n        };\n    }\n    /**\n     * Scroll to where cell is visible.\n     * @param  {number} col The column index.\n     * @param  {number} row The row index\n     * @return {void}\n     */\n    makeVisibleCell(col, row) {\n        const isFrozenCell = this.isFrozenCell(col, row);\n        if (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\n            return;\n        }\n        const rect = this.getCellRect(col, row);\n        const visibleRect = _getScrollableVisibleRect(this);\n        if (visibleRect.contains(rect)) {\n            return;\n        }\n        const { scrollable } = this[_];\n        if (!isFrozenCell || !isFrozenCell.col) {\n            if (rect.left < visibleRect.left) {\n                scrollable.scrollLeft -= visibleRect.left - rect.left;\n            }\n            else if (visibleRect.right < rect.right) {\n                scrollable.scrollLeft -= visibleRect.right - rect.right;\n            }\n        }\n        if (!isFrozenCell || !isFrozenCell.row) {\n            if (rect.top < visibleRect.top) {\n                scrollable.scrollTop -= visibleRect.top - rect.top;\n            }\n            else if (visibleRect.bottom < rect.bottom) {\n                scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\n            }\n        }\n    }\n    /**\n     * Moves the focus cursor to the given cell.\n     * @param  {number} col The column index.\n     * @param  {number} row The row index\n     * @return {void}\n     */\n    setFocusCursor(col, row) {\n        const { focusControl } = this[_];\n        const oldEditMode = focusControl.editMode;\n        focusControl.setFocusRect(this.getCellRect(col, row));\n        _updatedSelection.call(this);\n        if (oldEditMode && !focusControl.editMode) {\n            focusControl.resetInputStatus();\n        }\n    }\n    /**\n     * Focus the cell.\n     * @param  {number} col The column index.\n     * @param  {number} row The row index\n     * @return {void}\n     */\n    focusCell(col, row) {\n        this.setFocusCursor(col, row);\n        // Failure occurs in IE if focus is not last\n        this[_].focusControl.focus();\n    }\n    /**\n     * Redraws the range of the given cell.\n     * @param  {number} col The column index of cell.\n     * @param  {number} row The row index of cell.\n     * @return {void}\n     */\n    invalidateCell(col, row) {\n        this.invalidateGridRect(col, row);\n    }\n    /**\n     * Redraws the range of the given cells.\n     * @param {number} startCol index of the starting column, of the cell\n     * @param {number} startRow index of the starting row, of the cell\n     * @param {number} endCol index of the ending column, of the cell\n     * @param {number} endRow index of the ending row, of the cell\n     * @return {void}\n     */\n    invalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\n        const offset = this.getOffsetInvalidateCells();\n        if (offset > 0) {\n            startCol -= offset;\n            startRow -= offset;\n            endCol += offset;\n            endRow += offset;\n        }\n        const visibleRect = _getVisibleRect(this);\n        const cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\n        const invalidateTarget = visibleRect.intersection(cellsRect);\n        if (invalidateTarget) {\n            const { frozenColCount, frozenRowCount } = this[_];\n            if (frozenColCount > 0 && endCol >= frozenColCount) {\n                const frozenRect = _getFrozenColsRect(this);\n                if (frozenRect.intersection(invalidateTarget)) {\n                    invalidateTarget.left = Math.min(frozenRect.right - 1, invalidateTarget.left);\n                }\n            }\n            if (frozenRowCount > 0 && endRow >= frozenRowCount) {\n                const frozenRect = _getFrozenRowsRect(this);\n                if (frozenRect.intersection(invalidateTarget)) {\n                    invalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\n                }\n            }\n            _invalidateRect(this, invalidateTarget);\n        }\n    }\n    invalidateCellRange(range) {\n        this.invalidateGridRect(range.start.col, range.start.row, range.end.col, range.end.row);\n    }\n    /**\n     * Redraws the whole grid.\n     * @return {void}\n     */\n    invalidate() {\n        const visibleRect = _getVisibleRect(this);\n        _invalidateRect(this, visibleRect);\n    }\n    /**\n     * Get the number of scrollable rows fully visible in the grid. visibleRowCount does not include the frozen rows counted by the frozenRowCount property. It does not include any partially visible rows on the bottom of the grid.\n     * @returns {number}\n     */\n    get visibleRowCount() {\n        const { frozenRowCount } = this;\n        const visibleRect = _getVisibleRect(this);\n        const visibleTop = frozenRowCount > 0\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\n            : visibleRect.top;\n        const initRow = _getTargetRowAt.call(this, visibleTop);\n        if (!initRow) {\n            return 0;\n        }\n        const startRow = Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\n        let absoluteTop = _getRowsHeight.call(this, 0, startRow - 1);\n        let count = 0;\n        const { rowCount } = this;\n        for (let row = startRow; row < rowCount; row++) {\n            const height = _getRowHeight.call(this, row);\n            const bottom = absoluteTop + height;\n            if (visibleRect.bottom < bottom) {\n                break;\n            }\n            count++;\n            absoluteTop = bottom;\n        }\n        return count;\n    }\n    /**\n     * Get the number of scrollable columns fully visible in the grid. visibleColCount does not include the frozen columns counted by the frozenColCount property. It does not include any partially visible columns on the right of the grid.\n     * @returns {number}\n     */\n    get visibleColCount() {\n        const { frozenColCount } = this;\n        const visibleRect = _getVisibleRect(this);\n        const visibleLeft = frozenColCount > 0\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\n            : visibleRect.left;\n        const initCol = _getTargetColAt(this, visibleLeft);\n        if (!initCol) {\n            return 0;\n        }\n        const startCol = Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\n        let absoluteLeft = _getColsWidth(this, 0, startCol - 1);\n        let count = 0;\n        const { colCount } = this;\n        for (let col = startCol; col < colCount; col++) {\n            const width = _getColWidth(this, col);\n            const right = absoluteLeft + width;\n            if (visibleRect.right < right) {\n                break;\n            }\n            count++;\n            absoluteLeft = right;\n        }\n        return count;\n    }\n    /**\n     * Get the index of the first row in the scrollable region that is visible.\n     * @returns {number}\n     */\n    get topRow() {\n        const { frozenRowCount } = this;\n        const visibleRect = _getVisibleRect(this);\n        const visibleTop = frozenRowCount > 0\n            ? visibleRect.top + _getRowsHeight.call(this, 0, frozenRowCount - 1)\n            : visibleRect.top;\n        const initRow = _getTargetRowAt.call(this, visibleTop);\n        if (!initRow) {\n            return 0;\n        }\n        return Math.max(initRow.top >= visibleTop ? initRow.row : initRow.row + 1, frozenRowCount);\n    }\n    /**\n     * Get the index of the first column in the scrollable region that is visible.\n     * @returns {number}\n     */\n    get leftCol() {\n        const { frozenColCount } = this;\n        const visibleRect = _getVisibleRect(this);\n        const visibleLeft = frozenColCount > 0\n            ? visibleRect.left + _getColsWidth(this, 0, frozenColCount - 1)\n            : visibleRect.left;\n        const initCol = _getTargetColAt(this, visibleLeft);\n        if (!initCol) {\n            return 0;\n        }\n        return Math.max(initCol.left >= visibleLeft ? initCol.col : initCol.col + 1, frozenColCount);\n    }\n    /**\n     * gets or sets the number of pixels that an element's content is scrolled vertically\n     */\n    get scrollTop() {\n        return this[_].scrollable.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this[_].scrollable.scrollTop = scrollTop;\n    }\n    /**\n     * gets or sets the number of pixels that an element's content is scrolled from its left edge\n     */\n    get scrollLeft() {\n        return this[_].scrollable.scrollLeft;\n    }\n    set scrollLeft(scrollLeft) {\n        this[_].scrollable.scrollLeft = scrollLeft;\n    }\n    /**\n     * Get the value of cell with the copy action.\n     * <p>\n     * Please implement\n     * </p>\n     *\n     * @protected\n     * @param col Column index of cell.\n     * @param row Row index of cell.\n     * @param range Copy range.\n     * @return {string} the value of cell\n     */\n    getCopyCellValue(_col, _row, _range) {\n        //Please implement get cell value!!\n    }\n    /**\n     * Get the overflowed text in the cell rectangle, from the given cell.\n     * @param  {number} col The column index.\n     * @param  {number} row The row index\n     * @return {string | null} The text overflowing the cell rect.\n     */\n    getCellOverflowText(col, row) {\n        const key = `${col}:${row}`;\n        return this[_].cellTextOverflows[key] || null;\n    }\n    /**\n     * Set the overflowed text in the cell rectangle, to the given cell.\n     * @param  {number} col The column index.\n     * @param  {number} row The row index\n     * @param  {string} overflowText The overflowed text in the cell rectangle.\n     * @return {void}\n     */\n    setCellOverflowText(col, row, overflowText) {\n        const key = `${col}:${row}`;\n        if (overflowText) {\n            this[_].cellTextOverflows[key] =\n                typeof overflowText === \"string\" ? overflowText.trim() : overflowText;\n        }\n        else {\n            delete this[_].cellTextOverflows[key];\n        }\n    }\n    addDisposable(disposable) {\n        if (!disposable ||\n            !disposable.dispose ||\n            typeof disposable.dispose !== \"function\") {\n            throw new Error(\"not disposable!\");\n        }\n        const disposables = (this[_].disposables = this[_].disposables || []);\n        disposables.push(disposable);\n    }\n    /**\n     * Dispose the grid instance.\n     * @returns {void}\n     */\n    dispose() {\n        super.dispose();\n        const protectedSpace = this[_];\n        protectedSpace.handler.dispose();\n        protectedSpace.scrollable.dispose();\n        protectedSpace.focusControl.dispose();\n        protectedSpace.columnResizer.dispose();\n        protectedSpace.cellSelector.dispose();\n        if (protectedSpace.disposables) {\n            protectedSpace.disposables.forEach((disposable) => disposable.dispose());\n            protectedSpace.disposables = null;\n        }\n        const { parentElement } = protectedSpace.element;\n        if (parentElement) {\n            parentElement.removeChild(protectedSpace.element);\n        }\n    }\n    getAttachCellsArea(range) {\n        return {\n            element: this.getElement(),\n            rect: _toRelativeRect(this, this.getCellRangeRect(range)),\n        };\n    }\n    onKeyDownMove(evt) {\n        _onKeyDownMove.call(this, evt);\n    }\n    bindEventsInternal() {\n        //nop\n    }\n    getTargetRowAtInternal(_absoluteY) {\n        // \n    }\n    getRowsHeightInternal(_startRow, _endRow) {\n        // \n    }\n    getRowHeightInternal(_row) {\n        // \n    }\n    getScrollHeightInternal(_row) {\n        // \n    }\n    getMoveLeftColByKeyDownInternal({ col }) {\n        return col - 1;\n    }\n    getMoveRightColByKeyDownInternal({ col }) {\n        return col + 1;\n    }\n    getMoveUpRowByKeyDownInternal({ row }) {\n        return row - 1;\n    }\n    getMoveDownRowByKeyDownInternal({ row }) {\n        return row + 1;\n    }\n    getOffsetInvalidateCells() {\n        return 0;\n    }\n    getCopyRangeInternal(range) {\n        return range;\n    }\n    _getInitContext() {\n        const ctx = this[_].context;\n        //\n        ctx.fillStyle = \"white\";\n        ctx.strokeStyle = \"black\";\n        ctx.textAlign = \"left\";\n        ctx.textBaseline = \"top\";\n        ctx.lineWidth = 1;\n        ctx.font = this.font || \"16px sans-serif\";\n        return ctx;\n    }\n    fireListeners(type, ...event) {\n        return super.fireListeners(type, ...event);\n    }\n}\nexports.DrawGrid = DrawGrid;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getScrollBarWidth() {\n    const dummy = document.createElement(\"div\");\n    const { style } = dummy;\n    style.position = \"absolute\";\n    style.height = \"9999px\";\n    style.width = \"calc(100vw - 100%)\";\n    style.opacity = \"0\";\n    dummy.textContent = \"x\";\n    document.body.appendChild(dummy);\n    const { width } = (document.defaultView || window).getComputedStyle(dummy, \"\");\n    document.body.removeChild(dummy);\n    return parseInt(width, 10);\n}\nlet SCROLLBAR_SIZE;\nfunction initDocumentInternal() {\n    require(\"@/internal/style.css\");\n    SCROLLBAR_SIZE = getScrollBarWidth() || 10;\n    const style = document.createElement(\"style\");\n    style.setAttribute(\"type\", \"text/css\");\n    style.setAttribute(\"data-name\", \"cheetah-grid\");\n    style.innerHTML = `\n.cheetah-grid .grid-scroll-end-point {\n\twidth: ${SCROLLBAR_SIZE}px;\n\theight: ${SCROLLBAR_SIZE}px;\n}\n.cheetah-grid > canvas {\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\n}\n\t\t`;\n    document.head.appendChild(style);\n}\nlet initDocumentVar = initDocumentInternal;\nfunction initDocument() {\n    initDocumentVar();\n    initDocumentVar = Function.prototype;\n}\nexports.initDocument = initDocument;\nfunction getScrollBarSize() {\n    return SCROLLBAR_SIZE;\n}\nexports.getScrollBarSize = getScrollBarSize;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction parsePasteRangeBoxValues(value) {\n    const normalizeValue = value.replace(/\\r?\\n$/, \"\");\n    const lines = normalizeValue.split(/(?:\\r?\\n)|[\\u2028\\u2029]/g);\n    const values = lines.map((line) => line.split(/\\t/g));\n    const colCount = values.reduce((n, cells) => Math.max(n, cells.length), 0);\n    return {\n        colCount,\n        rowCount: values.length,\n        getCellValue(offsetCol, offsetRow) {\n            var _a;\n            return ((_a = values[offsetRow]) === null || _a === void 0 ? void 0 : _a[offsetCol]) || \"\";\n        },\n    };\n}\nexports.parsePasteRangeBoxValues = parsePasteRangeBoxValues;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DataSource_1 = require(\"./data/DataSource\");\nexports.DataSource = DataSource_1.DataSource;\nconst CachedDataSource_1 = require(\"./data/CachedDataSource\");\nexports.CachedDataSource = CachedDataSource_1.CachedDataSource;\nconst FilterDataSource_1 = require(\"./data/FilterDataSource\");\nexports.FilterDataSource = FilterDataSource_1.FilterDataSource;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./utils\");\nfunction createArray(get, length) {\n    const array = new Array(length);\n    for (let i = 0; i < length; i++) {\n        array[i] = get(i);\n    }\n    return array;\n}\nfunction createArrayPromise(get, getField, length\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n    return new Promise((resolve) => {\n        const plist = [];\n        const array = new Array(length);\n        for (let i = 0; i < length; i++) {\n            const data = get(i);\n            const record = {\n                v: data,\n                f: data,\n            };\n            array[i] = record;\n            if (utils_1.isPromise(data)) {\n                plist.push(data.then((v) => {\n                    record.v = v;\n                    record.f = v;\n                }));\n            }\n        }\n        Promise.all(plist)\n            .then(() => getField == null\n            ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                array\n            : // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                setArrayField(array, getField))\n            .then(resolve);\n    });\n}\nfunction setArrayField(array, getField) {\n    return new Promise((resolve) => {\n        const { length } = array;\n        const plist = [];\n        for (let i = 0; i < length; i++) {\n            const record = array[i];\n            const f = getField(record.v);\n            if (utils_1.isPromise(f)) {\n                plist.push(f.then((v) => {\n                    record.f = v;\n                }));\n            }\n            else {\n                record.f = f;\n            }\n        }\n        Promise.all(plist).then(() => resolve(array));\n    });\n}\nfunction sortArray(array, compare) {\n    Array.prototype.sort.call(array, compare);\n}\nexports.sortArray = sortArray;\nfunction sort(get, set, length, compare, getField) {\n    const old = createArray(get, length);\n    if (getField != null) {\n        old.sort((r1, r2) => compare(getField(r1), getField(r2)));\n    }\n    else {\n        old.sort(compare);\n    }\n    for (let i = 0; i < length; i++) {\n        set(i, old[i]);\n    }\n}\nexports.sort = sort;\nfunction sortPromise(get, set, length, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ncompare, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ngetField) {\n    if (typeof Promise !== \"undefined\") {\n        return createArrayPromise(get, getField, length).then((array) => {\n            array.sort((r1, r2) => compare(r1.f, r2.f));\n            for (let i = 0; i < length; i++) {\n                set(i, array[i].v);\n            }\n        });\n    }\n    else {\n        sort(get, set, length, compare, getField);\n        const dummyPromise = {\n            then(fn) {\n                fn();\n                return dummyPromise;\n            },\n            catch() {\n                return dummyPromise;\n            },\n        };\n        return dummyPromise;\n    }\n}\nexports.sortPromise = sortPromise;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\nconst utils_1 = require(\"../../internal/utils\");\nconst KEY_ENTER = 13;\nfunction bindCellClickAction(grid, cellId, { action, mouseOver, mouseOut, }) {\n    function isTarget(col, row) {\n        return grid.getLayoutCellId(col, row) === cellId;\n    }\n    let inMouse;\n    return [\n        // click\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (e) => {\n            if (!isTarget(e.col, e.row)) {\n                return;\n            }\n            action({\n                col: e.col,\n                row: e.row,\n            });\n        }),\n        // mouse move\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\n            if (!isTarget(e.col, e.row)) {\n                return;\n            }\n            if (mouseOver) {\n                if (!mouseOver({\n                    col: e.col,\n                    row: e.row,\n                })) {\n                    return;\n                }\n            }\n            grid.getElement().style.cursor = \"pointer\";\n            inMouse = true;\n        }),\n        //MOUSEENTER'col-resize'move\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\n            if (!isTarget(e.col, e.row)) {\n                return;\n            }\n            if (inMouse && !grid.getElement().style.cursor) {\n                grid.getElement().style.cursor = \"pointer\";\n            }\n        }),\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\n            if (!isTarget(e.col, e.row)) {\n                return;\n            }\n            if (mouseOut) {\n                mouseOut({\n                    col: e.col,\n                    row: e.row,\n                });\n            }\n            grid.getElement().style.cursor = \"\";\n            inMouse = false;\n        }),\n    ];\n}\nexports.bindCellClickAction = bindCellClickAction;\nfunction bindCellKeyAction(grid, cellId, { action, acceptKeys = [], }) {\n    acceptKeys = [...acceptKeys, KEY_ENTER];\n    function isTarget(col, row) {\n        return grid.getLayoutCellId(col, row) === cellId;\n    }\n    return [\n        // enter key down\n        grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\n            var _a;\n            if (acceptKeys.indexOf(e.keyCode) === -1) {\n                return;\n            }\n            if (((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) && e.keyCode === KEY_ENTER) {\n                // When moving with the enter key, no action is taken with the enter key.\n                return;\n            }\n            const sel = grid.selection.select;\n            if (!isTarget(sel.col, sel.row)) {\n                return;\n            }\n            action({\n                col: sel.col,\n                row: sel.row,\n            });\n            utils_1.event.cancel(e.event);\n        }),\n    ];\n}\nexports.bindCellKeyAction = bindCellKeyAction;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Style_1 = require(\"./Style\");\nfunction adj(style) {\n    const { textAlign = \"center\" } = style;\n    style.textAlign = textAlign;\n    return style;\n}\nlet defaultStyle;\nclass CheckHeaderStyle extends Style_1.Style {\n    constructor(style = {}) {\n        super(adj(style));\n        const { uncheckBgColor, checkBgColor, borderColor } = style;\n        this._uncheckBgColor = uncheckBgColor;\n        this._checkBgColor = checkBgColor;\n        this._borderColor = borderColor;\n    }\n    static get DEFAULT() {\n        return defaultStyle\n            ? defaultStyle\n            : (defaultStyle = new CheckHeaderStyle());\n    }\n    get uncheckBgColor() {\n        return this._uncheckBgColor;\n    }\n    set uncheckBgColor(uncheckBgColor) {\n        this._uncheckBgColor = uncheckBgColor;\n        this.doChangeStyle();\n    }\n    get checkBgColor() {\n        return this._checkBgColor;\n    }\n    set checkBgColor(checkBgColor) {\n        this._checkBgColor = checkBgColor;\n        this.doChangeStyle();\n    }\n    get borderColor() {\n        return this._borderColor;\n    }\n    set borderColor(borderColor) {\n        this._borderColor = borderColor;\n        this.doChangeStyle();\n    }\n    clone() {\n        return new CheckHeaderStyle(this);\n    }\n}\nexports.CheckHeaderStyle = CheckHeaderStyle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Style_1 = require(\"./Style\");\nlet defaultStyle;\nclass MultilineTextHeaderStyle extends Style_1.Style {\n    constructor(style = {}) {\n        super(style);\n        this._lineHeight = style.lineHeight || \"1em\";\n        this._autoWrapText = style.autoWrapText || false;\n        this._lineClamp = style.lineClamp;\n    }\n    static get DEFAULT() {\n        return defaultStyle\n            ? defaultStyle\n            : (defaultStyle = new MultilineTextHeaderStyle());\n    }\n    clone() {\n        return new MultilineTextHeaderStyle(this);\n    }\n    get lineHeight() {\n        return this._lineHeight;\n    }\n    set lineHeight(lineHeight) {\n        this._lineHeight = lineHeight;\n        this.doChangeStyle();\n    }\n    get lineClamp() {\n        return this._lineClamp;\n    }\n    set lineClamp(lineClamp) {\n        this._lineClamp = lineClamp;\n        this.doChangeStyle();\n    }\n    get autoWrapText() {\n        return this._autoWrapText;\n    }\n    set autoWrapText(autoWrapText) {\n        this._autoWrapText = autoWrapText;\n        this.doChangeStyle();\n    }\n}\nexports.MultilineTextHeaderStyle = MultilineTextHeaderStyle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Style_1 = require(\"./Style\");\nlet defaultStyle;\nclass SortHeaderStyle extends Style_1.Style {\n    constructor(style = {}) {\n        super(style);\n        this._sortArrowColor = style.sortArrowColor;\n    }\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new SortHeaderStyle());\n    }\n    get sortArrowColor() {\n        return this._sortArrowColor;\n    }\n    set sortArrowColor(sortArrowColor) {\n        this._sortArrowColor = sortArrowColor;\n        this.doChangeStyle();\n    }\n    clone() {\n        return new SortHeaderStyle(this);\n    }\n}\nexports.SortHeaderStyle = SortHeaderStyle;\n","\"use strict\";\n/*eslint-disable @typescript-eslint/camelcase*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./internal/utils\");\nconst icons_1 = require(\"./plugins/icons\");\nconst builtins = {\n    get arrow_upward() {\n        return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\n    },\n    get arrow_downward() {\n        return require(\"cheetah-grid-icon-svg-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\n    },\n    get edit() {\n        return require(\"cheetah-grid-icon-svg-loader!material-design-icons/image/svg/production/ic_edit_48px.svg\");\n    },\n    get add() {\n        return require(\"cheetah-grid-icon-svg-loader!material-design-icons/content/svg/production/ic_add_48px.svg\");\n    },\n    get star() {\n        return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg\");\n    },\n    get star_border() {\n        return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\n    },\n    get star_half() {\n        return require(\"cheetah-grid-icon-svg-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\n    },\n};\nfunction get() {\n    return utils_1.extend(builtins, icons_1.icons);\n}\nexports.get = get;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.icons = {};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.themes = {};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst canvases_1 = require(\"../internal/canvases\");\nconst { ceil, PI } = Math;\nfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\n    function strokeRectLines(positions) {\n        for (let i = 0; i < borderColors.length; i++) {\n            const color = borderColors[i];\n            const preColor = borderColors[i - 1];\n            if (color) {\n                if (preColor !== color) {\n                    if (preColor) {\n                        ctx.strokeStyle = preColor;\n                        ctx.stroke();\n                    }\n                    const pos1 = positions[i];\n                    ctx.beginPath();\n                    ctx.moveTo(pos1.x, pos1.y);\n                }\n                const pos2 = positions[i + 1];\n                ctx.lineTo(pos2.x, pos2.y);\n            }\n            else {\n                if (preColor) {\n                    ctx.strokeStyle = preColor;\n                    ctx.stroke();\n                }\n            }\n        }\n        const preColor = borderColors[borderColors.length - 1];\n        if (preColor) {\n            ctx.strokeStyle = preColor;\n            ctx.stroke();\n        }\n    }\n    if (borderColors[0] === borderColors[1] &&\n        borderColors[0] === borderColors[2] &&\n        borderColors[0] === borderColors[3]) {\n        if (borderColors[0]) {\n            ctx.strokeStyle = borderColors[0];\n            ctx.strokeRect(left, top, width, height);\n        }\n    }\n    else {\n        strokeRectLines([\n            { x: left, y: top },\n            { x: left + width, y: top },\n            { x: left + width, y: top + height },\n            { x: left, y: top + height },\n            { x: left, y: top },\n        ]);\n    }\n}\nexports.strokeColorsRect = strokeColorsRect;\nfunction roundRect(ctx, left, top, width, height, radius) {\n    ctx.beginPath();\n    ctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\n    ctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\n    ctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\n    ctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\n    ctx.closePath();\n}\nexports.roundRect = roundRect;\nfunction fillRoundRect(ctx, left, top, width, height, radius) {\n    roundRect(ctx, left, top, width, height, radius);\n    ctx.fill();\n}\nexports.fillRoundRect = fillRoundRect;\nfunction strokeRoundRect(ctx, left, top, width, height, radius) {\n    roundRect(ctx, left, top, width, height, radius);\n    ctx.stroke();\n}\nexports.strokeRoundRect = strokeRoundRect;\nfunction fillCircle(ctx, left, top, width, height) {\n    const min = Math.min(width, height) / 2;\n    ctx.beginPath();\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\n    ctx.closePath();\n    ctx.fill();\n}\nexports.fillCircle = fillCircle;\nfunction strokeCircle(ctx, left, top, width, height) {\n    const min = Math.min(width, height) / 2;\n    ctx.beginPath();\n    ctx.arc(left + min, top + min, min, 0, 2 * Math.PI);\n    ctx.closePath();\n    ctx.stroke();\n}\nexports.strokeCircle = strokeCircle;\nfunction fillTextRect(ctx, text, left, top, width, height, { offset = 2, padding } = {}) {\n    const rect = {\n        left,\n        top,\n        width,\n        height,\n        right: left + width,\n        bottom: top + height,\n    };\n    ctx.save();\n    try {\n        ctx.beginPath();\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\n        //clip\n        ctx.clip();\n        //\n        const pos = canvases_1.calcBasePosition(ctx, rect, {\n            offset,\n            padding,\n        });\n        ctx.fillText(text, pos.x, pos.y);\n    }\n    finally {\n        ctx.restore();\n    }\n}\nexports.fillTextRect = fillTextRect;\nfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, { offset = 2, padding } = {}) {\n    const rect = {\n        left,\n        top,\n        width,\n        height,\n        right: left + width,\n        bottom: top + height,\n    };\n    ctx.save();\n    try {\n        ctx.beginPath();\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\n        //clip\n        ctx.clip();\n        //\n        const pos = canvases_1.calcStartPosition(ctx, rect, destWidth, destHeight, {\n            offset,\n            padding,\n        });\n        ctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\n    }\n    finally {\n        ctx.restore();\n    }\n}\nexports.drawInlineImageRect = drawInlineImageRect;\n/**\n * Returns an object containing the width of the checkbox.\n * @param  {CanvasRenderingContext2D} ctx canvas context\n * @return {Object} Object containing the width of the checkbox\n * @memberof cheetahGrid.tools.canvashelper\n */\nfunction measureCheckbox(ctx) {\n    return {\n        width: canvases_1.getFontSize(ctx, null).width,\n    };\n}\nexports.measureCheckbox = measureCheckbox;\n/**\n * Returns an object containing the width of the radio button.\n * @param  {CanvasRenderingContext2D} ctx canvas context\n * @return {Object} Object containing the width of the radio button\n * @memberof cheetahGrid.tools.canvashelper\n */\nfunction measureRadioButton(ctx) {\n    return {\n        width: canvases_1.getFontSize(ctx, null).width,\n    };\n}\nexports.measureRadioButton = measureRadioButton;\n/**\n * draw Checkbox\n * @param  {CanvasRenderingContext2D} ctx canvas context\n * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\n * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\n * @param  {boolean|number} check checkbox check status\n * @param  {object} option option\n * @return {void}\n * @memberof cheetahGrid.tools.canvashelper\n */\nfunction drawCheckbox(ctx, x, y, check, { uncheckBgColor = \"#FFF\", checkBgColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", boxSize = measureCheckbox(ctx).width, } = {}) {\n    const checkPoint = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\n    ctx.save();\n    try {\n        ctx.fillStyle = check ? checkBgColor : uncheckBgColor;\n        const leftX = ceil(x);\n        const topY = ceil(y);\n        const size = ceil(boxSize);\n        fillRoundRect(ctx, leftX - 1, topY - 1, size + 1, size + 1, boxSize / 5);\n        ctx.lineWidth = 1;\n        ctx.strokeStyle = borderColor;\n        strokeRoundRect(ctx, leftX - 0.5, topY - 0.5, size, size, boxSize / 5);\n        if (check) {\n            ctx.lineWidth = ceil(boxSize / 10);\n            ctx.strokeStyle = uncheckBgColor;\n            let leftWidth = boxSize / 4;\n            let rightWidth = (boxSize / 2) * 0.9;\n            const leftLeftPos = x + boxSize * 0.2;\n            const leftTopPos = y + boxSize / 2;\n            if (checkPoint < 0.5) {\n                leftWidth *= checkPoint * 2;\n            }\n            ctx.beginPath();\n            ctx.moveTo(leftLeftPos, leftTopPos);\n            ctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\n            if (checkPoint > 0.5) {\n                if (checkPoint < 1) {\n                    rightWidth *= (checkPoint - 0.5) * 2;\n                }\n                ctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\n            }\n            ctx.stroke();\n        }\n    }\n    finally {\n        ctx.restore();\n    }\n}\nexports.drawCheckbox = drawCheckbox;\n/**\n * draw Radio button\n * @param  {CanvasRenderingContext2D} ctx canvas context\n * @param  {number} x The x coordinate where to start drawing the radio button (relative to the canvas)\n * @param  {number} y The y coordinate where to start drawing the radio button (relative to the canvas)\n * @param  {boolean|number} check radio button check status\n * @param  {object} option option\n * @return {void}\n * @memberof cheetahGrid.tools.canvashelper\n */\nfunction drawRadioButton(ctx, x, y, check, { checkColor = \"rgb(76, 73, 72)\", borderColor = \"#000\", bgColor = \"#FFF\", boxSize = measureRadioButton(ctx).width, } = {}) {\n    const ratio = typeof check === \"number\" ? (check > 1 ? 1 : check) : 1;\n    ctx.save();\n    try {\n        ctx.fillStyle = bgColor;\n        const leftX = ceil(x);\n        const topY = ceil(y);\n        const size = ceil(boxSize);\n        fillCircle(ctx, leftX - 1, topY - 1, size + 1, size + 1);\n        ctx.lineWidth = 1;\n        ctx.strokeStyle = borderColor;\n        strokeCircle(ctx, leftX - 0.5, topY - 0.5, size, size);\n        if (check) {\n            const checkSize = (size * ratio) / 2;\n            const padding = (size - checkSize) / 2;\n            ctx.fillStyle = checkColor;\n            fillCircle(ctx, ceil((leftX - 0.5 + padding) * 100) / 100, ceil((topY - 0.5 + padding) * 100) / 100, ceil(checkSize * 100) / 100, ceil(checkSize * 100) / 100);\n        }\n    }\n    finally {\n        ctx.restore();\n    }\n}\nexports.drawRadioButton = drawRadioButton;\n/**\n * draw Button\n */\nfunction drawButton(ctx, left, top, width, height, option = {}) {\n    const { backgroundColor = \"#FFF\", bgColor = backgroundColor, radius = 4, shadow = {}, } = option;\n    ctx.save();\n    try {\n        ctx.fillStyle = bgColor;\n        if (shadow) {\n            const { color = \"rgba(0, 0, 0, 0.24)\", blur = 1, offsetX = 0, offsetY = 2, offset: { x: ox = offsetX, y: oy = offsetY } = {}, } = shadow;\n            ctx.shadowColor = color;\n            ctx.shadowBlur = blur; //\n            ctx.shadowOffsetX = ox;\n            ctx.shadowOffsetY = oy;\n        }\n        fillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\n    }\n    finally {\n        ctx.restore();\n    }\n}\nexports.drawButton = drawButton;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst columns = __importStar(require(\"../../../columns\"));\nconst headerType = __importStar(require(\"../../../header/type\"));\nlet seqId = -1;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction newEmptyHeaderData() {\n    return {\n        id: seqId--,\n        define: {},\n        headerType: headerType.of(null),\n    };\n}\nexports.newEmptyHeaderData = newEmptyHeaderData;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction newEmptyColumnData() {\n    return {\n        id: seqId--,\n        define: {},\n        columnType: columns.type.of(null),\n        style: null,\n    };\n}\nexports.newEmptyColumnData = newEmptyColumnData;\nclass EmptyDataCache {\n    constructor() {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.headers = [];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.columns = [];\n    }\n    getHeader(col, row) {\n        const rows = this.headers[row] || (this.headers[row] = []);\n        return rows[col] || (rows[col] = newEmptyHeaderData());\n    }\n    getBody(col, row) {\n        const rows = this.columns[row] || (this.columns[row] = []);\n        return rows[col] || (rows[col] = newEmptyColumnData());\n    }\n}\nexports.EmptyDataCache = EmptyDataCache;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst calc = __importStar(require(\"./internal/calc\"));\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\nconst fonts = __importStar(require(\"./internal/fonts\"));\nconst inlineUtils = __importStar(require(\"./element/inlines\"));\nconst themes = __importStar(require(\"./themes\"));\nconst color_1 = require(\"./internal/color\");\nconst canvases_1 = require(\"./internal/canvases\");\nconst utils_1 = require(\"./internal/utils\");\nconst InlineDrawer_1 = require(\"./element/InlineDrawer\");\nconst Rect_1 = require(\"./internal/Rect\");\nconst { toBoxArray } = utils_1.style;\nconst INLINE_ELLIPSIS = inlineUtils.of(\"\\u2026\");\nfunction invalidateCell(context, grid) {\n    const { col, row } = context;\n    grid.invalidateCell(col, row);\n}\nfunction getColor(color, col, row, grid, context) {\n    return utils_1.getOrApply(color, {\n        col,\n        row,\n        grid,\n        context,\n    });\n}\nfunction getFont(font, col, row, grid, context) {\n    if (font == null) {\n        return undefined;\n    }\n    return utils_1.getOrApply(font, {\n        col,\n        row,\n        grid,\n        context,\n    });\n}\nfunction getThemeColor(grid, ...names) {\n    const gridThemeColor = utils_1.getChainSafe(grid.theme, ...names);\n    if (!utils_1.isDef(gridThemeColor)) {\n        // use default theme\n        return utils_1.getChainSafe(themes.getDefault(), ...names);\n    }\n    if (typeof gridThemeColor !== \"function\") {\n        return gridThemeColor;\n    }\n    let defaultThemeColor;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return ((args) => {\n        const color = gridThemeColor(args);\n        if (utils_1.isDef(color)) {\n            // use grid theme\n            return color;\n        }\n        // use default theme\n        defaultThemeColor =\n            defaultThemeColor || utils_1.getChainSafe(themes.getDefault(), ...names);\n        return utils_1.getOrApply(defaultThemeColor, args);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    });\n}\nfunction testFontLoad(font, value, context, grid) {\n    if (font) {\n        if (!fonts.check(font, value)) {\n            fonts.load(font, value, () => invalidateCell(context, grid));\n            return false;\n        }\n    }\n    return true;\n}\nfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\n    function drawInline(inline, offsetLeft, offsetRight) {\n        if (inline.canDraw()) {\n            ctx.save();\n            try {\n                ctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\n                ctx.font = inline.font() || ctx.font;\n                inline.draw({\n                    ctx,\n                    canvashelper,\n                    rect,\n                    offset,\n                    offsetLeft,\n                    offsetRight,\n                    offsetTop,\n                    offsetBottom,\n                });\n            }\n            finally {\n                ctx.restore();\n            }\n        }\n        else {\n            inline.onReady(() => grid.invalidateCell(col, row));\n            //noop\n        }\n    }\n    if (inlines.length === 1) {\n        //1\n        const inline = inlines[0];\n        drawInline(inline, 0, 0);\n    }\n    else {\n        const inlineWidths = inlines.map((inline) => (inline.width({ ctx }) || 0) - 0);\n        let offsetRight = inlineWidths.reduce((a, b) => a + b);\n        let offsetLeft = 0;\n        inlines.forEach((inline, index) => {\n            const inlineWidth = inlineWidths[index];\n            offsetRight -= inlineWidth;\n            drawInline(inline, offsetLeft, offsetRight);\n            offsetLeft += inlineWidth;\n        });\n    }\n}\nfunction buildInlines(icons, inline) {\n    return inlineUtils.buildInlines(icons, inline || \"\");\n}\nfunction inlineToString(inline) {\n    return inlineUtils.string(inline);\n}\nfunction getOverflowInline(textOverflow) {\n    if (!isAllowOverflow(textOverflow) || textOverflow === \"ellipsis\") {\n        return INLINE_ELLIPSIS;\n    }\n    textOverflow = textOverflow.trim();\n    if (textOverflow.length === 1) {\n        return inlineUtils.of(textOverflow[0]);\n    }\n    return INLINE_ELLIPSIS;\n}\nfunction isAllowOverflow(textOverflow) {\n    return Boolean(textOverflow && textOverflow !== \"clip\" && typeof textOverflow === \"string\");\n}\nfunction getOverflowInlinesIndex(ctx, inlines, width) {\n    const maxWidth = width - 3; /*buffer*/\n    let lineWidth = 0;\n    for (let i = 0; i < inlines.length; i++) {\n        const inline = inlines[i];\n        const inlineWidth = (inline.width({ ctx }) || 0) - 0;\n        if (lineWidth + inlineWidth > maxWidth) {\n            return {\n                index: i,\n                lineWidth,\n                remWidth: maxWidth - lineWidth,\n            };\n        }\n        lineWidth += inlineWidth;\n    }\n    return null;\n}\nfunction isOverflowInlines(ctx, inlines, width) {\n    return !!getOverflowInlinesIndex(ctx, inlines, width);\n}\nfunction breakWidthInlines(ctx, inlines, width) {\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\n    if (!indexData) {\n        return {\n            beforeInlines: inlines,\n            overflow: false,\n            afterInlines: [],\n        };\n    }\n    const { index, remWidth } = indexData;\n    const inline = inlines[index];\n    const beforeInlines = inlines.slice(0, index);\n    const afterInlines = [];\n    if (inline.canBreak()) {\n        let { before, after } = inline.breakWord(ctx, remWidth);\n        if (!before && !beforeInlines.length) {\n            ({ before, after } = inline.breakAll(ctx, remWidth));\n        }\n        if (!before && !beforeInlines.length) {\n            // Always return one char\n            ({ before, after } = inline.splitIndex(1));\n        }\n        if (before) {\n            beforeInlines.push(before);\n        }\n        if (after) {\n            afterInlines.push(after);\n        }\n        afterInlines.push(...inlines.slice(index + 1));\n    }\n    else {\n        if (!beforeInlines.length) {\n            // Always return one char\n            beforeInlines.push(inline);\n        }\n        afterInlines.push(...inlines.slice(beforeInlines.length));\n    }\n    return {\n        beforeInlines,\n        overflow: true,\n        afterInlines,\n    };\n}\nfunction truncateInlines(ctx, inlines, width, option) {\n    const indexData = getOverflowInlinesIndex(ctx, inlines, width);\n    if (!indexData) {\n        return {\n            inlines,\n            overflow: false,\n        };\n    }\n    const { index, lineWidth } = indexData;\n    const inline = inlines[index];\n    const overflowInline = getOverflowInline(option);\n    const ellipsisWidth = overflowInline.width({ ctx });\n    const remWidth = width - lineWidth - ellipsisWidth;\n    const result = inlines.slice(0, index);\n    if (inline.canBreak()) {\n        const { before } = inline.breakAll(ctx, remWidth);\n        if (before) {\n            result.push(before);\n        }\n    }\n    result.push(overflowInline);\n    return {\n        inlines: result,\n        overflow: true,\n    };\n}\nfunction _inlineRect(grid, ctx, inline, rect, col, row, { offset, color, textAlign, textBaseline, font, textOverflow, icons, }) {\n    //style\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\n    ctx.textAlign = textAlign;\n    ctx.textBaseline = textBaseline;\n    ctx.font = font || ctx.font;\n    let inlines = buildInlines(icons, inline);\n    if (isAllowOverflow(textOverflow) &&\n        isOverflowInlines(ctx, inlines, rect.width)) {\n        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, rect.width, textOverflow);\n        inlines = truncInlines;\n        grid.setCellOverflowText(col, row, overflow && inlineToString(inline));\n    }\n    else {\n        grid.setCellOverflowText(col, row, false);\n    }\n    drawInlines(ctx, inlines, rect, offset, 0, 0, col, row, grid);\n}\n// eslint-disable-next-line complexity\nfunction _multiInlineRect(grid, ctx, multiInlines, rect, col, row, { offset, color, textAlign, textBaseline, font, lineHeight, autoWrapText, lineClamp, textOverflow, icons, }) {\n    //style\n    ctx.fillStyle = getColor(color || ctx.fillStyle, col, row, grid, ctx);\n    ctx.textAlign = textAlign;\n    ctx.textBaseline = textBaseline;\n    ctx.font = font || ctx.font;\n    if (lineClamp === \"auto\") {\n        const rectHeight = rect.height - offset * 2 - 2; /*offset added by Inline#draw*/\n        lineClamp = Math.max(Math.floor(rectHeight / lineHeight), 1);\n    }\n    let buildedMultiInlines;\n    if (autoWrapText || lineClamp > 0 || isAllowOverflow(textOverflow)) {\n        const { width } = rect;\n        buildedMultiInlines = [];\n        const procLineClamp = lineClamp > 0\n            ? (inlines, hasNext) => {\n                if (buildedMultiInlines.length + 1 >= lineClamp) {\n                    if (inlines.length === 0 && hasNext) {\n                        buildedMultiInlines.push([getOverflowInline(textOverflow)]);\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n                    }\n                    else {\n                        const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\n                        buildedMultiInlines.push(hasNext && !overflow\n                            ? truncInlines.concat([getOverflowInline(textOverflow)])\n                            : truncInlines);\n                        if (overflow || hasNext) {\n                            grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n                        }\n                    }\n                    return false;\n                }\n                return true;\n            }\n            : () => true;\n        const procLine = autoWrapText\n            ? (inlines, hasNext) => {\n                if (!procLineClamp(inlines, hasNext)) {\n                    return false;\n                }\n                while (inlines.length) {\n                    if (!procLineClamp(inlines, hasNext)) {\n                        return false;\n                    }\n                    const { beforeInlines, afterInlines } = breakWidthInlines(ctx, inlines, width);\n                    buildedMultiInlines.push(beforeInlines);\n                    inlines = afterInlines;\n                }\n                return true;\n            }\n            : isAllowOverflow(textOverflow)\n                ? (inlines, hasNext) => {\n                    if (!procLineClamp(inlines, hasNext)) {\n                        return false;\n                    }\n                    const { inlines: truncInlines, overflow } = truncateInlines(ctx, inlines, width, textOverflow);\n                    buildedMultiInlines.push(truncInlines);\n                    if (overflow) {\n                        grid.setCellOverflowText(col, row, multiInlines.map(inlineToString).join(\"\\n\"));\n                    }\n                    return true;\n                }\n                : (inlines, hasNext) => {\n                    if (!procLineClamp(inlines, hasNext)) {\n                        return false;\n                    }\n                    buildedMultiInlines.push(inlines);\n                    return true;\n                };\n        grid.setCellOverflowText(col, row, false);\n        for (let lineRow = 0; lineRow < multiInlines.length; lineRow++) {\n            const inline = multiInlines[lineRow];\n            const buildedInline = buildInlines(lineRow === 0 ? icons : undefined, inline);\n            if (!procLine(buildedInline, lineRow + 1 < multiInlines.length)) {\n                break;\n            }\n        }\n    }\n    else {\n        grid.setCellOverflowText(col, row, false);\n        buildedMultiInlines = multiInlines.map((inline, lineRow) => buildInlines(lineRow === 0 ? icons : undefined, inline));\n    }\n    let paddingTop = 0;\n    let paddingBottom = lineHeight * (buildedMultiInlines.length - 1);\n    if (ctx.textBaseline === \"top\" || ctx.textBaseline === \"hanging\") {\n        const em = canvases_1.getFontSize(ctx, ctx.font).height;\n        const pad = (lineHeight - em) / 2;\n        paddingTop += pad;\n        paddingBottom -= pad;\n    }\n    else if (ctx.textBaseline === \"bottom\" ||\n        ctx.textBaseline === \"alphabetic\" ||\n        ctx.textBaseline === \"ideographic\") {\n        const em = canvases_1.getFontSize(ctx, ctx.font).height;\n        const pad = (lineHeight - em) / 2;\n        paddingTop -= pad;\n        paddingBottom += pad;\n    }\n    buildedMultiInlines.forEach((buildedInline) => {\n        drawInlines(ctx, buildedInline, rect, offset, paddingTop, paddingBottom, col, row, grid);\n        paddingTop += lineHeight;\n        paddingBottom -= lineHeight;\n    });\n}\nfunction calcElapsedColor(startColor, endColor, elapsedTime) {\n    const startColorRGB = color_1.colorToRGB(startColor);\n    const endColorRGB = color_1.colorToRGB(endColor);\n    const getRGB = (colorName) => {\n        const start = startColorRGB[colorName];\n        const end = endColorRGB[colorName];\n        if (elapsedTime >= 1) {\n            return end;\n        }\n        if (elapsedTime <= 0) {\n            return start;\n        }\n        const diff = start - end;\n        return Math.ceil(start - diff * elapsedTime);\n    };\n    return `rgb(${getRGB(\"r\")}, ${getRGB(\"g\")}, ${getRGB(\"b\")})`;\n}\nfunction drawCheckbox(ctx, rect, col, row, check, helper, { animElapsedTime = 1, uncheckBgColor = helper.theme.checkbox.uncheckBgColor, checkBgColor = helper.theme.checkbox.checkBgColor, borderColor = helper.theme.checkbox.borderColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\n    const boxWidth = canvashelper.measureCheckbox(ctx).width;\n    ctx.textAlign = textAlign;\n    ctx.textBaseline = textBaseline;\n    const pos = canvases_1.calcStartPosition(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\n    borderColor = helper.getColor(borderColor, col, row, ctx);\n    if (0 < animElapsedTime && animElapsedTime < 1) {\n        uncheckBgColor = check\n            ? uncheckBgColor\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\n        checkBgColor = check\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\n            : checkBgColor;\n    }\n    canvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\n        uncheckBgColor,\n        checkBgColor,\n        borderColor,\n    });\n}\nfunction drawRadioButton(ctx, rect, col, row, check, helper, { animElapsedTime = 1, checkColor = helper.theme.radioButton.checkColor, uncheckBorderColor = helper.theme.radioButton.uncheckBorderColor, checkBorderColor = helper.theme.radioButton.checkBorderColor, uncheckBgColor = helper.theme.radioButton.uncheckBgColor, checkBgColor = helper.theme.radioButton.checkBgColor, textAlign = \"center\", textBaseline = \"middle\", }, positionOpt = {}) {\n    const boxWidth = canvashelper.measureRadioButton(ctx).width;\n    ctx.textAlign = textAlign;\n    ctx.textBaseline = textBaseline;\n    const pos = canvases_1.calcStartPosition(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/, positionOpt);\n    checkColor = helper.getColor(checkColor, col, row, ctx);\n    uncheckBorderColor = helper.getColor(uncheckBorderColor, col, row, ctx);\n    checkBorderColor = helper.getColor(checkBorderColor, col, row, ctx);\n    uncheckBgColor = helper.getColor(uncheckBgColor, col, row, ctx);\n    checkBgColor = helper.getColor(checkBgColor, col, row, ctx);\n    let borderColor = check ? checkBorderColor : uncheckBorderColor;\n    let bgColor = check ? checkBgColor : uncheckBgColor;\n    if (0 < animElapsedTime && animElapsedTime < 1) {\n        borderColor = check\n            ? calcElapsedColor(uncheckBorderColor, checkBorderColor, animElapsedTime)\n            : calcElapsedColor(checkBorderColor, uncheckBorderColor, animElapsedTime);\n        bgColor = check\n            ? calcElapsedColor(uncheckBgColor, checkBgColor, animElapsedTime)\n            : calcElapsedColor(checkBgColor, uncheckBgColor, animElapsedTime);\n    }\n    canvashelper.drawRadioButton(ctx, pos.x, pos.y, check ? animElapsedTime : 1 - animElapsedTime, {\n        checkColor,\n        borderColor,\n        bgColor,\n    });\n}\nclass ThemeResolver {\n    constructor(grid) {\n        this._checkbox = null;\n        this._radioButton = null;\n        this._button = null;\n        this._header = null;\n        this._grid = grid;\n    }\n    getThemeColor(...name) {\n        return getThemeColor(this._grid, ...name);\n    }\n    get font() {\n        return getThemeColor(this._grid, \"font\");\n    }\n    get underlayBackgroundColor() {\n        return getThemeColor(this._grid, \"underlayBackgroundColor\");\n    }\n    // color\n    get color() {\n        return getThemeColor(this._grid, \"color\");\n    }\n    get frozenRowsColor() {\n        return getThemeColor(this._grid, \"frozenRowsColor\");\n    }\n    // background\n    get defaultBgColor() {\n        return getThemeColor(this._grid, \"defaultBgColor\");\n    }\n    get frozenRowsBgColor() {\n        return getThemeColor(this._grid, \"frozenRowsBgColor\");\n    }\n    get selectionBgColor() {\n        return getThemeColor(this._grid, \"selectionBgColor\");\n    }\n    get highlightBgColor() {\n        return getThemeColor(this._grid, \"highlightBgColor\");\n    }\n    // border\n    get borderColor() {\n        return getThemeColor(this._grid, \"borderColor\");\n    }\n    get frozenRowsBorderColor() {\n        return getThemeColor(this._grid, \"frozenRowsBorderColor\");\n    }\n    get highlightBorderColor() {\n        return getThemeColor(this._grid, \"highlightBorderColor\");\n    }\n    get checkbox() {\n        const grid = this._grid;\n        return (this._checkbox ||\n            (this._checkbox = {\n                get uncheckBgColor() {\n                    return getThemeColor(grid, \"checkbox\", \"uncheckBgColor\");\n                },\n                get checkBgColor() {\n                    return getThemeColor(grid, \"checkbox\", \"checkBgColor\");\n                },\n                get borderColor() {\n                    return getThemeColor(grid, \"checkbox\", \"borderColor\");\n                },\n            }));\n    }\n    get radioButton() {\n        const grid = this._grid;\n        return (this._radioButton ||\n            (this._radioButton = {\n                get checkColor() {\n                    return getThemeColor(grid, \"radioButton\", \"checkColor\");\n                },\n                get uncheckBorderColor() {\n                    return getThemeColor(grid, \"radioButton\", \"uncheckBorderColor\");\n                },\n                get checkBorderColor() {\n                    return getThemeColor(grid, \"radioButton\", \"checkBorderColor\");\n                },\n                get uncheckBgColor() {\n                    return getThemeColor(grid, \"radioButton\", \"uncheckBgColor\");\n                },\n                get checkBgColor() {\n                    return getThemeColor(grid, \"radioButton\", \"checkBgColor\");\n                },\n            }));\n    }\n    get button() {\n        const grid = this._grid;\n        return (this._button ||\n            (this._button = {\n                get color() {\n                    return getThemeColor(grid, \"button\", \"color\");\n                },\n                get bgColor() {\n                    return getThemeColor(grid, \"button\", \"bgColor\");\n                },\n            }));\n    }\n    get header() {\n        const grid = this._grid;\n        return (this._header ||\n            (this._header = {\n                get sortArrowColor() {\n                    return getThemeColor(grid, \"header\", \"sortArrowColor\");\n                },\n            }));\n    }\n}\nfunction strokeRect(ctx, color, left, top, width, height) {\n    if (!Array.isArray(color)) {\n        if (color) {\n            ctx.strokeStyle = color;\n            ctx.strokeRect(left, top, width, height);\n        }\n    }\n    else {\n        const borderColors = toBoxArray(color);\n        canvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\n    }\n}\nclass GridCanvasHelper {\n    constructor(grid) {\n        this._grid = grid;\n        this._theme = new ThemeResolver(grid);\n    }\n    createCalculator(context, font) {\n        return {\n            calcWidth(width) {\n                return calc.toPx(width, {\n                    get full() {\n                        const rect = context.getRect();\n                        return rect.width;\n                    },\n                    get em() {\n                        return canvases_1.getFontSize(context.getContext(), font).width;\n                    },\n                });\n            },\n            calcHeight(height) {\n                return calc.toPx(height, {\n                    get full() {\n                        const rect = context.getRect();\n                        return rect.height;\n                    },\n                    get em() {\n                        return canvases_1.getFontSize(context.getContext(), font).height;\n                    },\n                });\n            },\n        };\n    }\n    getColor(color, col, row, ctx) {\n        return getColor(color, col, row, this._grid, ctx);\n    }\n    toBoxArray(obj) {\n        return toBoxArray(obj);\n    }\n    toBoxPixelArray(value, context, font) {\n        if (typeof value === \"string\" || Array.isArray(value)) {\n            const calculator = this.createCalculator(context, font);\n            const box = toBoxArray(value);\n            return [\n                calculator.calcHeight(box[0]),\n                calculator.calcWidth(box[1]),\n                calculator.calcHeight(box[2]),\n                calculator.calcWidth(box[3]),\n            ];\n        }\n        return toBoxArray(value);\n    }\n    get theme() {\n        return this._theme;\n    }\n    drawWithClip(context, draw) {\n        const drawRect = context.getDrawRect();\n        if (!drawRect) {\n            return;\n        }\n        const ctx = context.getContext();\n        ctx.save();\n        try {\n            ctx.beginPath();\n            ctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\n            //clip\n            ctx.clip();\n            draw(ctx);\n        }\n        finally {\n            ctx.restore();\n        }\n    }\n    drawBorderWithClip(context, draw) {\n        const drawRect = context.getDrawRect();\n        if (!drawRect) {\n            return;\n        }\n        const rect = context.getRect();\n        const ctx = context.getContext();\n        ctx.save();\n        try {\n            //clip\n            ctx.beginPath();\n            let clipLeft = drawRect.left;\n            let clipWidth = drawRect.width;\n            if (drawRect.left === rect.left) {\n                clipLeft += -1;\n                clipWidth += 1;\n            }\n            let clipTop = drawRect.top;\n            let clipHeight = drawRect.height;\n            if (drawRect.top === rect.top) {\n                clipTop += -1;\n                clipHeight += 1;\n            }\n            ctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\n            ctx.clip();\n            draw(ctx);\n        }\n        finally {\n            ctx.restore();\n        }\n    }\n    text(text, context, { padding, offset = 2, color, textAlign = \"left\", textBaseline = \"middle\", font, textOverflow = \"clip\", icons, } = {}) {\n        let rect = context.getRect();\n        const { col, row } = context;\n        if (!color) {\n            ({ color } = this.theme);\n            // header color\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\n            if (isFrozenCell && isFrozenCell.row) {\n                color = this.theme.frozenRowsColor;\n            }\n        }\n        this.drawWithClip(context, (ctx) => {\n            font = getFont(font, context.col, context.row, this._grid, ctx);\n            if (padding) {\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\n                const left = rect.left + paddingNums[3];\n                const top = rect.top + paddingNums[0];\n                const width = rect.width - paddingNums[1] - paddingNums[3];\n                const height = rect.height - paddingNums[0] - paddingNums[2];\n                rect = new Rect_1.Rect(left, top, width, height);\n            }\n            _inlineRect(this._grid, ctx, text, rect, col, row, {\n                offset,\n                color,\n                textAlign,\n                textBaseline,\n                font,\n                textOverflow,\n                icons,\n            });\n        });\n    }\n    multilineText(multilines, context, { padding, offset = 2, color, textAlign = \"left\", textBaseline = \"middle\", font, lineHeight = \"1em\", autoWrapText = false, lineClamp = 0, textOverflow = \"clip\", icons, } = {}) {\n        let rect = context.getRect();\n        const { col, row } = context;\n        if (!color) {\n            ({ color } = this.theme);\n            // header color\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\n            if (isFrozenCell && isFrozenCell.row) {\n                color = this.theme.frozenRowsColor;\n            }\n        }\n        this.drawWithClip(context, (ctx) => {\n            font = getFont(font, context.col, context.row, this._grid, ctx);\n            if (padding) {\n                const paddingNums = this.toBoxPixelArray(padding, context, font);\n                const left = rect.left + paddingNums[3];\n                const top = rect.top + paddingNums[0];\n                const width = rect.width - paddingNums[1] - paddingNums[3];\n                const height = rect.height - paddingNums[0] - paddingNums[2];\n                rect = new Rect_1.Rect(left, top, width, height);\n            }\n            const calculator = this.createCalculator(context, font);\n            lineHeight = calculator.calcHeight(lineHeight);\n            _multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\n                offset,\n                color,\n                textAlign,\n                textBaseline,\n                font,\n                lineHeight,\n                autoWrapText,\n                lineClamp,\n                textOverflow,\n                icons,\n            });\n        });\n    }\n    fillText(text, x, y, context, { color, textAlign = \"left\", textBaseline = \"top\", font, } = {}) {\n        const { col, row } = context;\n        if (!color) {\n            ({ color } = this.theme);\n            // header color\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\n            if (isFrozenCell && isFrozenCell.row) {\n                color = this.theme.frozenRowsColor;\n            }\n        }\n        const ctx = context.getContext();\n        ctx.save();\n        try {\n            font = getFont(font, context.col, context.row, this._grid, ctx);\n            ctx.fillStyle = getColor(color, col, row, this._grid, ctx);\n            ctx.textAlign = textAlign;\n            ctx.textBaseline = textBaseline;\n            ctx.font = font || ctx.font;\n            ctx.fillText(text, x, y);\n        }\n        finally {\n            ctx.restore();\n        }\n    }\n    fillCell(context, { fillColor = this.theme.defaultBgColor, } = {}) {\n        const rect = context.getRect();\n        this.drawWithClip(context, (ctx) => {\n            const { col, row } = context;\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n            ctx.beginPath();\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\n            ctx.fill();\n        });\n    }\n    fillCellWithState(context, option = {}) {\n        option.fillColor = this.getFillColorState(context, option);\n        this.fillCell(context, option);\n    }\n    fillRect(rect, context, { fillColor = this.theme.defaultBgColor, } = {}) {\n        const ctx = context.getContext();\n        ctx.save();\n        try {\n            const { col, row } = context;\n            ctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n            ctx.beginPath();\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\n            ctx.fill();\n        }\n        finally {\n            ctx.restore();\n        }\n    }\n    fillRectWithState(rect, context, option = {}) {\n        option.fillColor = this.getFillColorState(context, option);\n        this.fillRect(rect, context, option);\n    }\n    getFillColorState(context, option = {}) {\n        const sel = context.getSelection();\n        const { col, row } = context;\n        if (!utils_1.cellEquals(sel.select, context) && utils_1.cellInRange(sel.range, col, row)) {\n            return this.theme.selectionBgColor;\n        }\n        if (option.fillColor) {\n            return option.fillColor;\n        }\n        if (utils_1.cellEquals(sel.select, context)) {\n            return this.theme.highlightBgColor;\n        }\n        const isFrozenCell = this._grid.isFrozenCell(col, row);\n        if (isFrozenCell && isFrozenCell.row) {\n            return this.theme.frozenRowsBgColor;\n        }\n        return this.theme.defaultBgColor;\n    }\n    border(context, { borderColor = this.theme.borderColor, lineWidth = 1, } = {}) {\n        const rect = context.getRect();\n        this.drawBorderWithClip(context, (ctx) => {\n            const { col, row } = context;\n            const borderColors = getColor(borderColor, col, row, this._grid, ctx);\n            if (lineWidth === 1) {\n                ctx.lineWidth = 1;\n                strokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\n            }\n            else if (lineWidth === 2) {\n                ctx.lineWidth = 2;\n                strokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\n            }\n            else {\n                ctx.lineWidth = lineWidth;\n                const startOffset = lineWidth / 2 - 1;\n                strokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\n            }\n        });\n    }\n    // Unused in main\n    borderWithState(context, option = {}) {\n        const rect = context.getRect();\n        const sel = context.getSelection();\n        const { col, row } = context;\n        //\n        if (utils_1.cellEquals(sel.select, context)) {\n            option.borderColor = this.theme.highlightBorderColor;\n            option.lineWidth = 2;\n            this.border(context, option);\n        }\n        else {\n            // header color\n            const isFrozenCell = this._grid.isFrozenCell(col, row);\n            if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\n                option.borderColor = this.theme.frozenRowsBorderColor;\n            }\n            option.lineWidth = 1;\n            this.border(context, option);\n            //\n            const sel = this._grid.selection.select;\n            if (sel.col + 1 === col && sel.row === row) {\n                //\n                this.drawBorderWithClip(context, (ctx) => {\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\n                    ctx.lineWidth = 1;\n                    ctx.strokeStyle = borderColors[1] || ctx.strokeStyle;\n                    ctx.beginPath();\n                    ctx.moveTo(rect.left - 0.5, rect.top);\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\n                    ctx.stroke();\n                });\n            }\n            else if (sel.col === col && sel.row + 1 === row) {\n                //\n                this.drawBorderWithClip(context, (ctx) => {\n                    const borderColors = toBoxArray(getColor(this.theme.highlightBorderColor, sel.col, sel.row, this._grid, ctx));\n                    ctx.lineWidth = 1;\n                    ctx.strokeStyle = borderColors[0] || ctx.strokeStyle;\n                    ctx.beginPath();\n                    ctx.moveTo(rect.left, rect.top - 0.5);\n                    ctx.lineTo(rect.right, rect.top - 0.5);\n                    ctx.stroke();\n                });\n            }\n        }\n    }\n    buildCheckBoxInline(check, context, option = {}) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const self = this;\n        const ctx = context.getContext();\n        const boxWidth = canvashelper.measureCheckbox(ctx).width;\n        return new InlineDrawer_1.InlineDrawer({\n            draw,\n            width: boxWidth + 3,\n            height: boxWidth + 1,\n            color: undefined,\n        });\n        function draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\n            const { col, row } = context;\n            drawCheckbox(ctx, rect, col, row, check, self, option, {\n                offset: offset + 1,\n                padding: {\n                    left: offsetLeft + 1,\n                    right: offsetRight,\n                    top: offsetTop,\n                    bottom: offsetBottom,\n                },\n            });\n        }\n    }\n    checkbox(check, context, option = {}) {\n        this.drawWithClip(context, (ctx) => {\n            const { col, row } = context;\n            drawCheckbox(ctx, context.getRect(), col, row, check, this, option);\n        });\n    }\n    radioButton(check, context, option = {}) {\n        this.drawWithClip(context, (ctx) => {\n            const { col, row } = context;\n            drawRadioButton(ctx, context.getRect(), col, row, check, this, option);\n        });\n    }\n    button(caption, context, { bgColor = this.theme.button.bgColor, padding, offset = 2, color = this.theme.button.color, textAlign = \"center\", textBaseline = \"middle\", shadow, font, textOverflow = \"clip\", icons, } = {}) {\n        const rect = context.getRect();\n        this.drawWithClip(context, (ctx) => {\n            font = getFont(font, context.col, context.row, this._grid, ctx);\n            const { col, row } = context;\n            const paddingNums = this.toBoxPixelArray(padding || rect.height / 8, context, font);\n            const left = rect.left + paddingNums[3];\n            const top = rect.top + paddingNums[0];\n            const width = rect.width - paddingNums[1] - paddingNums[3];\n            const height = rect.height - paddingNums[0] - paddingNums[2];\n            bgColor = getColor(bgColor, context.col, context.row, this._grid, ctx);\n            canvashelper.drawButton(ctx, left, top, width, height, {\n                bgColor,\n                radius: rect.height / 8,\n                // offset,\n                shadow,\n            });\n            _inlineRect(this._grid, ctx, caption, new Rect_1.Rect(left, top, width, height), col, row, {\n                offset,\n                color,\n                textAlign,\n                textBaseline,\n                font,\n                textOverflow,\n                icons,\n            });\n        });\n    }\n    testFontLoad(font, value, context) {\n        return testFontLoad(font, value, context, this._grid);\n    }\n}\nexports.GridCanvasHelper = GridCanvasHelper;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./utils\");\nconst loads = {};\nlet load;\nexports.load = load;\nlet check;\nexports.check = check;\nif (utils_1.isNode) {\n    exports.load = load = function (_font, _testStr, callback) {\n        callback();\n    };\n    exports.check = check = function () {\n        return false;\n    };\n}\nelse {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const fontFaceSet = document.fonts;\n    const legacy = !fontFaceSet;\n    exports.load = load = legacy\n        ? function (font, testStr, callback) {\n            //for legacy(IE)\n            if (loads[`${font} @ ${testStr}`]) {\n                callback();\n                return;\n            }\n            require(\"./legacy/fontwatch/FontWatchRunner\").load(font, testStr, () => {\n                loads[`${font} @ ${testStr}`] = true;\n                callback();\n            }, () => {\n                loads[`${font} @ ${testStr}`] = true;\n                callback();\n            });\n        }\n        : function (font, _testStr, callback) {\n            if (loads.all || loads[font]) {\n                callback();\n                return;\n            }\n            fontFaceSet.ready.then(() => {\n                loads.all = true;\n            });\n            fontFaceSet.load(font).then(() => {\n                loads[font] = true;\n                callback();\n            });\n        };\n    exports.check = check = legacy\n        ? function (font, testStr) {\n            //for legacy(IE)\n            if (loads[`${font} @ ${testStr}`]) {\n                return true;\n            }\n            load(font, testStr, () => { });\n            return false;\n        }\n        : function (font, testStr) {\n            if (loads.all || loads[font]) {\n                return true;\n            }\n            if (!fontFaceSet.check(font)) {\n                load(font, testStr, () => { });\n                return false;\n            }\n            return true;\n        };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Inline_1 = require(\"./Inline\");\nclass InlineDrawer extends Inline_1.Inline {\n    constructor({ draw, width, \n    // height,\n    color, }) {\n        super();\n        this._draw = draw;\n        this._width = width;\n        // this._height = height;\n        this._color = color;\n    }\n    width(_arg) {\n        return this._width;\n    }\n    font() {\n        return null;\n    }\n    color() {\n        var _a;\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\n    }\n    canDraw() {\n        return true;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    onReady(_callback) { }\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\n        this._draw({\n            ctx,\n            canvashelper,\n            rect,\n            offset,\n            offsetLeft,\n            offsetRight,\n            offsetTop,\n            offsetBottom,\n        });\n    }\n    canBreak() {\n        return false;\n    }\n    toString() {\n        return \"\";\n    }\n}\nexports.InlineDrawer = InlineDrawer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Inline_1 = require(\"./Inline\");\nconst imgs_1 = require(\"../internal/imgs\");\nconst utils_1 = require(\"../internal/utils\");\nclass InlineImage extends Inline_1.Inline {\n    constructor({ src, width, height, imageLeft, imageTop, imageWidth, imageHeight, }) {\n        super();\n        this._inlineImgPromise = null;\n        this._inlineImg = null;\n        this._src = src;\n        this._width = width;\n        this._height = height;\n        this._imageLeft = imageLeft;\n        this._imageTop = imageTop;\n        this._imageWidth = imageWidth;\n        this._imageHeight = imageHeight;\n        this._onloaded = [];\n        if (utils_1.isPromise(src)) {\n            src.then((s) => {\n                this._src = s;\n                this._loadImage(s);\n            });\n        }\n        else {\n            this._loadImage(src);\n        }\n    }\n    _loadImage(src) {\n        const img = (this._inlineImgPromise = imgs_1.getCacheOrLoad(\"InlineImage\", 50, src));\n        if (utils_1.isPromise(img)) {\n            img.then((i) => {\n                this._inlineImg = i;\n                this._onloaded.forEach((fn) => fn());\n            });\n        }\n        else {\n            this._inlineImg = img;\n        }\n    }\n    width(_arg) {\n        var _a, _b;\n        return this._width || ((_b = (_a = this._inlineImg) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\n    }\n    font() {\n        return null;\n    }\n    color() {\n        return null;\n    }\n    canDraw() {\n        return !!this._inlineImg;\n    }\n    onReady(callback) {\n        if (utils_1.isPromise(this._src) || utils_1.isPromise(this._inlineImgPromise)) {\n            this._onloaded.push(() => callback());\n        }\n    }\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\n        const img = this._inlineImg;\n        canvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\n            offset: offset + 1,\n            padding: {\n                left: offsetLeft,\n                right: offsetRight,\n                top: offsetTop,\n                bottom: offsetBottom,\n            },\n        });\n    }\n    canBreak() {\n        return false;\n    }\n    toString() {\n        return \"\";\n    }\n}\nexports.InlineImage = InlineImage;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst rgbMap = {};\nfunction styleColorToRGB(color) {\n    const dummy = document.createElement(\"div\");\n    const { style } = dummy;\n    style.color = color;\n    style.position = \"fixed\";\n    style.height = \"1px\";\n    style.width = \"1px\";\n    style.opacity = \"0\";\n    document.body.appendChild(dummy);\n    const { color: styleColor } = (document.defaultView || window).getComputedStyle(dummy, \"\");\n    document.body.removeChild(dummy);\n    return colorToRGB0(styleColor || \"\");\n}\nfunction hexToNum(hex) {\n    return parseInt(hex, 16);\n}\nfunction createRGB(r, g, b, a = 1) {\n    return { r, g, b, a };\n}\nfunction tripleHexToRGB({ 1: r, 2: g, 3: b }) {\n    return createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\n}\nfunction sextupleHexToRGB({ 1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2, }) {\n    return createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\n}\nfunction testRGB({ r, g, b, a }) {\n    return (0 <= r &&\n        r <= 255 &&\n        0 <= g &&\n        g <= 255 &&\n        0 <= b &&\n        b <= 255 &&\n        0 <= a &&\n        a <= 1);\n}\nfunction rateToByte(r) {\n    return Math.ceil((r * 255) / 100);\n}\nfunction colorToRGB0(color) {\n    if (/^#[0-9a-f]{3}$/i.exec(color)) {\n        return tripleHexToRGB(color);\n    }\n    if (/^#[0-9a-f]{6}$/i.exec(color)) {\n        return sextupleHexToRGB(color);\n    }\n    let ret = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/i.exec(color);\n    if (ret) {\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]));\n        if (testRGB(rgb)) {\n            return rgb;\n        }\n    }\n    ret = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i.exec(color);\n    if (ret) {\n        const rgb = createRGB(Number(ret[1]), Number(ret[2]), Number(ret[3]), Number(ret[4]));\n        if (testRGB(rgb)) {\n            return rgb;\n        }\n    }\n    ret = /^rgb\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*\\)$/i.exec(color);\n    if (ret) {\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[3])), rateToByte(Number(ret[5])));\n        if (testRGB(rgb)) {\n            return rgb;\n        }\n    }\n    ret = /^rgba\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i.exec(color);\n    if (ret) {\n        const rgb = createRGB(rateToByte(Number(ret[1])), rateToByte(Number(ret[3])), rateToByte(Number(ret[5])), Number(ret[7]));\n        if (testRGB(rgb)) {\n            return rgb;\n        }\n    }\n    return null;\n}\nfunction colorToRGB(color) {\n    if (typeof color !== \"string\") {\n        return createRGB(0, 0, 0, 0);\n    }\n    color = color.toLowerCase().trim();\n    if (rgbMap[color]) {\n        return rgbMap[color];\n    }\n    return colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\n}\nexports.colorToRGB = colorToRGB;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst columns = __importStar(require(\"./columns\"));\nexports.columns = columns;\nconst core = __importStar(require(\"./core\"));\nexports.core = core;\nconst data = __importStar(require(\"./data\"));\nexports.data = data;\nconst headers = __importStar(require(\"./headers\"));\nexports.headers = headers;\nconst icons = __importStar(require(\"./icons\"));\nconst register = __importStar(require(\"./register\"));\nexports.register = register;\nconst themes = __importStar(require(\"./themes\"));\nexports.themes = themes;\nconst tools = __importStar(require(\"./tools\"));\nexports.tools = tools;\nconst ListGrid_1 = require(\"./ListGrid\");\nexports.ListGrid = ListGrid_1.ListGrid;\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\nexports.GridCanvasHelper = GridCanvasHelper_1.GridCanvasHelper;\nvar get_internal_1 = require(\"./get-internal\");\nexports._getInternal = get_internal_1.getInternal;\n/** @private */\nfunction getIcons() {\n    return icons.get();\n}\nexports.getIcons = getIcons;\n// backward compatibility\nexports.default = {\n    core,\n    tools,\n    // impl Grids\n    ListGrid: ListGrid_1.ListGrid,\n    // objects\n    columns,\n    headers,\n    themes,\n    data,\n    // helper\n    GridCanvasHelper: GridCanvasHelper_1.GridCanvasHelper,\n    //plugin registers\n    register,\n    get icons() {\n        return getIcons();\n    },\n};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nObject.defineProperty(themes, \"default\", {\n    enumerable: false,\n    configurable: true,\n    get() {\n        return themes.getDefault();\n    },\n    set(defaultTheme) {\n        themes.setDefault(defaultTheme);\n    },\n});\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nObject.defineProperty(themes, \"choices\", {\n    enumerable: false,\n    configurable: true,\n    get() {\n        return themes.getChoices();\n    },\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Action_1 = require(\"./action/Action\");\nexports.Action = Action_1.Action;\nconst BaseAction_1 = require(\"./action/BaseAction\");\nexports.BaseAction = BaseAction_1.BaseAction;\nconst ButtonAction_1 = require(\"./action/ButtonAction\");\nexports.ButtonAction = ButtonAction_1.ButtonAction;\nconst CheckEditor_1 = require(\"./action/CheckEditor\");\nexports.CheckEditor = CheckEditor_1.CheckEditor;\nconst Editor_1 = require(\"./action/Editor\");\nexports.Editor = Editor_1.Editor;\nconst InlineInputEditor_1 = require(\"./action/InlineInputEditor\");\nexports.InlineInputEditor = InlineInputEditor_1.InlineInputEditor;\nconst InlineMenuEditor_1 = require(\"./action/InlineMenuEditor\");\nexports.InlineMenuEditor = InlineMenuEditor_1.InlineMenuEditor;\nconst RadioEditor_1 = require(\"./action/RadioEditor\");\nexports.RadioEditor = RadioEditor_1.RadioEditor;\nconst SmallDialogInputEditor_1 = require(\"./action/SmallDialogInputEditor\");\nexports.SmallDialogInputEditor = SmallDialogInputEditor_1.SmallDialogInputEditor;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass ImmutableCheckEditor extends CheckEditor_1.CheckEditor {\n    get disabled() {\n        return this._disabled;\n    }\n    get readOnly() {\n        return this._readOnly;\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass ImmutableRadioEditor extends RadioEditor_1.RadioEditor {\n    get disabled() {\n        return this._disabled;\n    }\n    get readOnly() {\n        return this._readOnly;\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass ImmutableInputEditor extends SmallDialogInputEditor_1.SmallDialogInputEditor {\n    get disabled() {\n        return this._disabled;\n    }\n    get readOnly() {\n        return this._readOnly;\n    }\n}\nexports.ACTIONS = {\n    CHECK: new ImmutableCheckEditor(),\n    INPUT: new ImmutableInputEditor(),\n    RADIO: new ImmutableRadioEditor(),\n};\nfunction of(columnAction) {\n    if (!columnAction) {\n        return undefined;\n    }\n    else if (typeof columnAction === \"string\") {\n        const key = columnAction.toUpperCase();\n        return exports.ACTIONS[key] || of(null);\n    }\n    else {\n        return columnAction;\n    }\n}\nexports.of = of;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Action_1 = require(\"./Action\");\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\nconst utils_1 = require(\"../../internal/utils\");\nconst BUTTON_COLUMN_STATE_ID = symbolManager_1.getButtonColumnStateId();\nclass ButtonAction extends Action_1.Action {\n    getState(grid) {\n        let state = grid[BUTTON_COLUMN_STATE_ID];\n        if (!state) {\n            state = {};\n            utils_1.obj.setReadonly(grid, BUTTON_COLUMN_STATE_ID, state);\n        }\n        return state;\n    }\n}\nexports.ButtonAction = ButtonAction;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst actionBind_1 = require(\"./actionBind\");\nconst utils_1 = require(\"../../internal/utils\");\nconst action_utils_1 = require(\"./action-utils\");\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\nconst Editor_1 = require(\"./Editor\");\nconst animate_1 = require(\"../../internal/animate\");\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\nconst CHECK_COLUMN_STATE_ID = symbolManager_1.getCheckColumnStateId();\nclass CheckEditor extends Editor_1.Editor {\n    clone() {\n        return new CheckEditor(this);\n    }\n    bindGridEvent(grid, cellId) {\n        let _state = grid[CHECK_COLUMN_STATE_ID];\n        if (!_state) {\n            _state = { block: {}, elapsed: {} };\n            utils_1.obj.setReadonly(grid, CHECK_COLUMN_STATE_ID, _state);\n        }\n        const state = _state;\n        const action = (cell) => {\n            const range = grid.getCellRange(cell.col, cell.row);\n            const cellKey = `${range.start.col}:${range.start.row}`;\n            if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n                action_utils_1.isDisabledRecord(this.disabled, grid, cell.row) ||\n                state.block[cellKey]) {\n                return;\n            }\n            const ret = grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\n            if (ret) {\n                const onChange = () => {\n                    // checkbox animation\n                    animate_1.animate(200, (point) => {\n                        if (point === 1) {\n                            delete state.elapsed[cellKey];\n                        }\n                        else {\n                            state.elapsed[cellKey] = point;\n                        }\n                        grid.invalidateCellRange(range);\n                    });\n                };\n                if (utils_1.isPromise(ret)) {\n                    state.block[cellKey] = true;\n                    ret.then(() => {\n                        delete state.block[cellKey];\n                        onChange();\n                    });\n                }\n                else {\n                    onChange();\n                }\n            }\n        };\n        function isTarget(col, row) {\n            return grid.getLayoutCellId(col, row) === cellId;\n        }\n        return [\n            ...actionBind_1.bindCellClickAction(grid, cellId, {\n                action,\n                mouseOver: (e) => {\n                    if (action_utils_1.isDisabledRecord(this.disabled, grid, e.row)) {\n                        return false;\n                    }\n                    state.mouseActiveCell = {\n                        col: e.col,\n                        row: e.row,\n                    };\n                    const range = grid.getCellRange(e.col, e.row);\n                    grid.invalidateCellRange(range);\n                    return true;\n                },\n                mouseOut: (e) => {\n                    delete state.mouseActiveCell;\n                    const range = grid.getCellRange(e.col, e.row);\n                    grid.invalidateCellRange(range);\n                },\n            }),\n            ...actionBind_1.bindCellKeyAction(grid, cellId, {\n                action: (_e) => {\n                    const selrange = grid.selection.range;\n                    const { col } = grid.selection.select;\n                    for (let { row } = selrange.start; row <= selrange.end.row; row++) {\n                        if (!isTarget(col, row)) {\n                            continue;\n                        }\n                        action({\n                            col,\n                            row,\n                        });\n                    }\n                },\n            }),\n            // paste value\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\n                if (e.multi) {\n                    // ignore multi cell values\n                    return;\n                }\n                const selectionRange = grid.selection.range;\n                if (!utils_1.cellEquals(selectionRange.start, selectionRange.end)) {\n                    // ignore multi paste values\n                    return;\n                }\n                if (!isTarget(e.col, e.row)) {\n                    return;\n                }\n                const pasteValue = e.normalizeValue.trim();\n                grid.doGetCellValue(e.col, e.row, (value) => {\n                    const newValue = action_utils_1.toggleValue(value);\n                    if (`${newValue}`.trim() === pasteValue) {\n                        utils_1.event.cancel(e.event);\n                        action({\n                            col: e.col,\n                            row: e.row,\n                        });\n                    }\n                });\n            }),\n        ];\n    }\n    onPasteCellRangeBox(grid, cell, value) {\n        if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n            action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n            return;\n        }\n        const pasteValue = value.trim();\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\n            const newValue = action_utils_1.toggleValue(value);\n            if (`${newValue}`.trim() === pasteValue) {\n                grid.doChangeValue(cell.col, cell.row, action_utils_1.toggleValue);\n            }\n        });\n    }\n    onDeleteCellRangeBox() {\n        // noop\n    }\n}\nexports.CheckEditor = CheckEditor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\nconst InlineInputElement_1 = require(\"./internal/InlineInputElement\");\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\nconst utils_1 = require(\"../../internal/utils\");\nconst _ = symbolManager_1.getInlineInputEditorStateId();\nfunction getState(grid) {\n    let state = grid[_];\n    if (!state) {\n        state = {};\n        utils_1.obj.setReadonly(grid, _, state);\n    }\n    return state;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nlet globalElement = null;\nlet bindGridCount = 0;\nfunction attachInput(grid, cell, editor, value) {\n    const state = getState(grid);\n    if (!globalElement) {\n        globalElement = new InlineInputElement_1.InlineInputElement();\n    }\n    if (!state.element) {\n        state.element = globalElement;\n        bindGridCount++;\n        grid.addDisposable({\n            dispose() {\n                bindGridCount--;\n                if (!bindGridCount) {\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n                    globalElement = null;\n                    state.element = null;\n                }\n            },\n        });\n    }\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\n}\nfunction detachInput(gridFocus) {\n    if (globalElement) {\n        globalElement.detach(gridFocus);\n    }\n}\nfunction doChangeValue(_grid) {\n    if (globalElement) {\n        globalElement.doChangeValue();\n    }\n}\nclass InlineInputEditor extends BaseInputEditor_1.BaseInputEditor {\n    constructor(option = {}) {\n        super(option);\n        this._classList = option.classList;\n        this._type = option.type;\n    }\n    get classList() {\n        if (!this._classList) {\n            return undefined;\n        }\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\n    }\n    set classList(classList) {\n        this._classList = classList;\n    }\n    get type() {\n        return this._type;\n    }\n    set type(type) {\n        this._type = type;\n    }\n    clone() {\n        return new InlineInputEditor(this);\n    }\n    onInputCellInternal(grid, cell, inputValue) {\n        attachInput(grid, cell, this, inputValue);\n    }\n    onOpenCellInternal(grid, cell) {\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\n            attachInput(grid, cell, this, value);\n        });\n    }\n    onChangeSelectCellInternal(grid, _cell, _selected) {\n        doChangeValue(grid);\n        detachInput();\n    }\n    onGridScrollInternal(grid) {\n        doChangeValue(grid);\n        detachInput(true);\n    }\n    onChangeDisabledInternal() {\n        // cancel input\n        detachInput(true);\n    }\n    onChangeReadOnlyInternal() {\n        // cancel input\n        detachInput(true);\n    }\n    onSetInputAttrsInternal(grid, _cell, input) {\n        InlineInputElement_1.InlineInputElement.setInputAttrs(this, grid, input);\n    }\n}\nexports.InlineInputEditor = InlineInputEditor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\nconst dom_1 = require(\"../../../internal/dom\");\nconst utils_1 = require(\"../../../internal/utils\");\nconst input_value_handler_1 = require(\"./input-value-handler\");\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst CLASSNAME = \"cheetah-grid__inline-input\";\nfunction createInputElement() {\n    require(\"@/columns/action/internal/InlineInputElement.css\");\n    return dom_1.createElement(\"input\", { classList: CLASSNAME });\n}\nfunction setInputAttrs(editor, _grid, input) {\n    const { classList, type } = editor;\n    if (classList) {\n        input.classList.add(...classList);\n    }\n    input.type = type || \"\";\n}\nclass InlineInputElement {\n    constructor() {\n        this._handler = new EventHandler_1.EventHandler();\n        this._input = createInputElement();\n        this._bindInputEvents();\n    }\n    static setInputAttrs(editor, grid, input) {\n        setInputAttrs(editor, grid, input);\n    }\n    dispose() {\n        var _a;\n        const input = this._input;\n        this.detach();\n        this._handler.dispose();\n        delete this._input;\n        this._beforePropEditor = null;\n        (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n    }\n    attach(grid, editor, col, row, value) {\n        const input = this._input;\n        const handler = this._handler;\n        if (this._beforePropEditor) {\n            const { classList } = this._beforePropEditor;\n            if (classList) {\n                input.classList.remove(...classList);\n            }\n        }\n        input.style.font = grid.font || \"16px sans-serif\";\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n        input.style.top = `${rect.top.toFixed()}px`;\n        input.style.left = `${rect.left.toFixed()}px`;\n        input.style.width = `${rect.width.toFixed()}px`;\n        input.style.height = `${rect.height.toFixed()}px`;\n        element.appendChild(input);\n        setInputAttrs(editor, grid, input);\n        input_value_handler_1.setInputValue(input, value);\n        this._activeData = { grid, col, row, editor };\n        this._beforePropEditor = editor;\n        const focus = () => {\n            input.focus();\n            const end = input.value.length;\n            try {\n                if (typeof input.selectionStart !== \"undefined\") {\n                    input.selectionStart = end;\n                    input.selectionEnd = end;\n                    return;\n                }\n            }\n            catch (e) {\n                //ignore\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (document.selection) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                const range = input.createTextRange();\n                range.collapse();\n                range.moveEnd(\"character\", end);\n                range.moveStart(\"character\", end);\n                range.select();\n            }\n        };\n        handler.tryWithOffEvents(input, \"blur\", () => {\n            focus();\n        });\n        this._attaching = true;\n        setTimeout(() => {\n            delete this._attaching;\n        });\n    }\n    detach(gridFocus) {\n        if (this._isActive()) {\n            const { grid, col, row } = this._activeData;\n            const input = this._input;\n            this._handler.tryWithOffEvents(input, \"blur\", () => {\n                var _a;\n                (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n            });\n            const range = grid.getCellRange(col, row);\n            grid.invalidateCellRange(range);\n            if (gridFocus) {\n                grid.focus();\n            }\n        }\n        this._activeData = null;\n    }\n    doChangeValue() {\n        if (!this._isActive()) {\n            return;\n        }\n        const input = this._input;\n        const { value } = input;\n        const { grid, col, row } = this._activeData;\n        grid.doChangeValue(col, row, () => value);\n    }\n    _isActive() {\n        const input = this._input;\n        if (!input || !input.parentElement) {\n            return false;\n        }\n        if (!this._activeData) {\n            return false;\n        }\n        return true;\n    }\n    _bindInputEvents() {\n        const handler = this._handler;\n        const input = this._input;\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\n        handler.on(input, \"click\", stopPropagationOnly);\n        handler.on(input, \"mousedown\", stopPropagationOnly);\n        handler.on(input, \"touchstart\", stopPropagationOnly);\n        handler.on(input, \"dblclick\", stopPropagationOnly);\n        handler.on(input, \"compositionstart\", (_e) => {\n            input.classList.add(\"composition\");\n        });\n        handler.on(input, \"compositionend\", (_e) => {\n            input.classList.remove(\"composition\");\n        });\n        handler.on(input, \"keydown\", (e) => {\n            if (input.classList.contains(\"composition\")) {\n                return;\n            }\n            const keyCode = utils_1.event.getKeyCode(e);\n            if (keyCode === KEY_ENTER) {\n                this._onKeydownEnter(e);\n            }\n            else if (keyCode === KEY_TAB) {\n                this._onKeydownTab(e);\n            }\n        });\n        handler.on(input, \"blur\", (_e) => {\n            this.doChangeValue();\n            this.detach();\n        });\n    }\n    _onKeydownEnter(e) {\n        var _a;\n        if (!this._isActive() || this._attaching) {\n            return;\n        }\n        const { grid } = this._activeData;\n        this.doChangeValue();\n        this.detach(true);\n        utils_1.event.cancel(e);\n        if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n            grid.onKeyDownMove(e);\n        }\n    }\n    _onKeydownTab(e) {\n        var _a;\n        if (!this._isActive()) {\n            return;\n        }\n        const { grid } = this._activeData;\n        if (!((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab)) {\n            return;\n        }\n        this.doChangeValue();\n        this.detach(true);\n        grid.onKeyDownMove(e);\n    }\n}\nexports.InlineInputElement = InlineInputElement;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/* ms */\\n.cheetah-grid__inline-input::-ms-clear {\\n\\tvisibility: hidden;\\n}\\n.cheetah-grid__inline-input {\\n\\tposition: absolute;\\n\\tbox-sizing: border-box;\\n}\\n\", \"\"]);\n\n// exports\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../../internal/utils\");\nconst action_utils_1 = require(\"./action-utils\");\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\nconst Editor_1 = require(\"./Editor\");\nconst InlineMenuElement_1 = require(\"./internal/InlineMenuElement\");\nconst type_1 = require(\"../type\");\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\nconst menu_items_1 = require(\"../../internal/menu-items\");\nconst _ = symbolManager_1.getInlineMenuEditorStateId();\nfunction getState(grid) {\n    let state = grid[_];\n    if (!state) {\n        state = {};\n        utils_1.obj.setReadonly(grid, _, state);\n    }\n    return state;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nlet globalElement = null;\nlet bindGridCount = 0;\nfunction attachMenu(grid, cell, editor, value, record) {\n    const state = getState(grid);\n    if (!globalElement) {\n        globalElement = new InlineMenuElement_1.InlineMenuElement();\n    }\n    if (!state.element) {\n        state.element = globalElement;\n        bindGridCount++;\n        grid.addDisposable({\n            dispose() {\n                bindGridCount--;\n                if (!bindGridCount) {\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n                    globalElement = null;\n                    state.element = null;\n                }\n            },\n        });\n    }\n    globalElement.attach(grid, editor, cell.col, cell.row, value, record);\n}\nfunction detachMenu(gridFocus) {\n    if (globalElement) {\n        globalElement.detach(gridFocus);\n    }\n}\nconst KEY_ENTER = 13;\nconst KEY_F2 = 113;\nclass InlineMenuEditor extends Editor_1.Editor {\n    constructor(option = {}) {\n        super(option);\n        this._classList = option.classList;\n        this._options = menu_items_1.normalizeToFn(option.options);\n    }\n    dispose() {\n        // noop\n    }\n    get classList() {\n        if (!this._classList) {\n            return undefined;\n        }\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\n    }\n    set classList(classList) {\n        this._classList = classList;\n    }\n    get options() {\n        return this._options;\n    }\n    set options(options) {\n        this._options = menu_items_1.normalizeToFn(options);\n    }\n    clone() {\n        return new InlineMenuEditor(this);\n    }\n    onChangeDisabledInternal() {\n        // cancel input\n        detachMenu(true);\n    }\n    onChangeReadOnlyInternal() {\n        // cancel input\n        detachMenu(true);\n    }\n    bindGridEvent(grid, cellId) {\n        const open = (cell) => {\n            if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n                action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n                return false;\n            }\n            grid.doGetCellValue(cell.col, cell.row, (value) => {\n                const record = grid.getRowRecord(cell.row);\n                if (utils_1.isPromise(record)) {\n                    return;\n                }\n                attachMenu(grid, cell, this, value, record);\n            });\n            return true;\n        };\n        function isTarget(col, row) {\n            return grid.getLayoutCellId(col, row) === cellId;\n        }\n        return [\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.CLICK_CELL, (cell) => {\n                if (!isTarget(cell.col, cell.row)) {\n                    return;\n                }\n                open({\n                    col: cell.col,\n                    row: cell.row,\n                });\n            }),\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.KEYDOWN, (e) => {\n                if (e.keyCode !== KEY_F2 && e.keyCode !== KEY_ENTER) {\n                    return;\n                }\n                const sel = grid.selection.select;\n                if (!isTarget(sel.col, sel.row)) {\n                    return;\n                }\n                if (open({\n                    col: sel.col,\n                    row: sel.row,\n                })) {\n                    e.stopCellMoving();\n                }\n            }),\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SELECTED_CELL, (_e) => {\n                detachMenu();\n            }),\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.SCROLL, () => {\n                detachMenu(true);\n            }),\n            // mouse move\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\n                if (!isTarget(e.col, e.row)) {\n                    return;\n                }\n                if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, e.row) ||\n                    action_utils_1.isDisabledRecord(this.disabled, grid, e.row)) {\n                    return;\n                }\n                grid.getElement().style.cursor = \"pointer\";\n            }),\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEMOVE_CELL, (e) => {\n                if (!isTarget(e.col, e.row)) {\n                    return;\n                }\n                if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, e.row) ||\n                    action_utils_1.isDisabledRecord(this.disabled, grid, e.row)) {\n                    return;\n                }\n                if (!grid.getElement().style.cursor) {\n                    grid.getElement().style.cursor = \"pointer\";\n                }\n            }),\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\n                if (!isTarget(e.col, e.row)) {\n                    return;\n                }\n                grid.getElement().style.cursor = \"\";\n            }),\n            // paste value\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\n                if (e.multi) {\n                    // ignore multi cell values\n                    return;\n                }\n                const selectionRange = grid.selection.range;\n                if (!utils_1.cellEquals(selectionRange.start, selectionRange.end)) {\n                    // ignore multi paste values\n                    return;\n                }\n                if (!isTarget(e.col, e.row)) {\n                    return;\n                }\n                if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, e.row) ||\n                    action_utils_1.isDisabledRecord(this.disabled, grid, e.row)) {\n                    return;\n                }\n                const record = grid.getRowRecord(e.row);\n                if (utils_1.isPromise(record)) {\n                    return;\n                }\n                const pasteOpt = this._pasteDataToOptionValue(e.normalizeValue, grid, e, record);\n                if (pasteOpt) {\n                    utils_1.event.cancel(e.event);\n                    utils_1.then(grid.doChangeValue(e.col, e.row, () => pasteOpt.value), () => {\n                        const range = grid.getCellRange(e.col, e.row);\n                        grid.invalidateCellRange(range);\n                    });\n                }\n            }),\n        ];\n    }\n    onPasteCellRangeBox(grid, cell, value) {\n        if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n            action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n            return;\n        }\n        const record = grid.getRowRecord(cell.row);\n        if (utils_1.isPromise(record)) {\n            return;\n        }\n        const pasteOpt = this._pasteDataToOptionValue(value, grid, cell, record);\n        if (pasteOpt) {\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\n        }\n    }\n    onDeleteCellRangeBox(grid, cell) {\n        if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n            action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n            return;\n        }\n        const record = grid.getRowRecord(cell.row);\n        if (utils_1.isPromise(record)) {\n            return;\n        }\n        const pasteOpt = this._pasteDataToOptionValue(\"\", grid, cell, record);\n        if (pasteOpt) {\n            grid.doChangeValue(cell.col, cell.row, () => pasteOpt.value);\n        }\n    }\n    _pasteDataToOptionValue(value, grid, cell, record) {\n        const options = this._options(record);\n        const pasteOpt = _textToOptionValue(value, options);\n        if (pasteOpt) {\n            return pasteOpt;\n        }\n        const columnType = grid.getColumnType(cell.col, cell.row);\n        if (hasOptions(columnType)) {\n            // Find with caption.\n            const pasteValue = normalizePasteValueStr(value);\n            const captionOpt = utils_1.array.find(columnType.options, (opt) => normalizePasteValueStr(opt.label) === pasteValue);\n            if (captionOpt) {\n                return _textToOptionValue(captionOpt.value, options);\n            }\n        }\n        return undefined;\n    }\n}\nexports.InlineMenuEditor = InlineMenuEditor;\nfunction _textToOptionValue(value, options) {\n    const pasteValue = normalizePasteValueStr(value);\n    const pasteOpt = utils_1.array.find(options, (opt) => normalizePasteValueStr(opt.value) === pasteValue);\n    if (pasteOpt) {\n        return pasteOpt;\n    }\n    return undefined;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction normalizePasteValueStr(value) {\n    if (value == null) {\n        return \"\";\n    }\n    return `${value}`.trim();\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction hasOptions(columnType) {\n    if (columnType instanceof type_1.MenuColumn) {\n        return true;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (Array.isArray(columnType.options)) {\n        return true;\n    }\n    return false;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dom_1 = require(\"../../../internal/dom\");\nconst utils_1 = require(\"../../../internal/utils\");\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst KEY_UP = 38;\nconst KEY_DOWN = 40;\nconst KEY_ESC = 27;\nconst CLASSNAME = \"cheetah-grid__inline-menu\";\nconst ITEM_CLASSNAME = `${CLASSNAME}__menu-item`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\nconst EMPTY_ITEM_CLASSNAME = `${ITEM_CLASSNAME}--empty`;\nfunction findItemParents(target) {\n    let el = target;\n    while (el && !el.classList.contains(ITEM_CLASSNAME)) {\n        el = el.parentElement;\n        if (!el || el.classList.contains(CLASSNAME)) {\n            return null;\n        }\n    }\n    return el;\n}\nfunction createMenuElement() {\n    require(\"@/columns/action/internal/InlineMenuElement.css\");\n    return dom_1.createElement(\"ul\", { classList: CLASSNAME });\n}\nfunction attachElement(element, rect, menu) {\n    menu.style.top = `${rect.top.toFixed()}px`;\n    menu.style.left = `${rect.left.toFixed()}px`;\n    menu.style.width = `${rect.width.toFixed()}px`;\n    menu.style.lineHeight = `${rect.height.toFixed()}px`;\n    element.appendChild(menu);\n}\nfunction optionToLi({ classList, label, value, html }, index) {\n    const item = dom_1.createElement(\"li\", { classList: ITEM_CLASSNAME });\n    item.tabIndex = 0;\n    item.dataset.valueindex = `${index}`;\n    if (classList) {\n        item.classList.add(...(Array.isArray(classList) ? classList : [classList]));\n    }\n    if (label) {\n        const span = dom_1.createElement(\"span\", { text: label });\n        item.appendChild(span);\n    }\n    else if (html) {\n        dom_1.appendHtml(item, html);\n    }\n    if (value === \"\" || !utils_1.isDef(value)) {\n        item.classList.add(EMPTY_ITEM_CLASSNAME);\n    }\n    return item;\n}\nfunction openMenu(grid, editor, col, row, value, options, menu) {\n    const { classList } = editor;\n    menu.classList.remove(SHOWN_CLASSNAME);\n    menu.classList.add(HIDDEN_CLASSNAME);\n    dom_1.empty(menu);\n    menu.style.font = grid.font || \"16px sans-serif\";\n    let emptyItemEl = null;\n    let valueItemEl = null;\n    options.forEach((option, i) => {\n        const item = optionToLi(option, i);\n        menu.appendChild(item);\n        if (option.value === value) {\n            valueItemEl = item;\n            item.dataset.select = \"select\";\n        }\n        if (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\n            emptyItemEl = item;\n        }\n    });\n    const focusEl = valueItemEl || emptyItemEl || menu.children[0];\n    if (classList) {\n        menu.classList.add(...classList);\n    }\n    const children = Array.prototype.slice.call(menu.children, 0);\n    const focusIndex = children.indexOf(focusEl);\n    const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n    // Cover the right line\n    rect.width++;\n    // append for calculation\n    attachElement(element, rect, menu);\n    // Make the selection item at the middle\n    let offset = 0;\n    let allHeight = 0;\n    for (let i = 0; i < children.length; i++) {\n        const { offsetHeight } = children[i];\n        if (i < focusIndex) {\n            offset += offsetHeight;\n        }\n        allHeight += offsetHeight;\n    }\n    rect.offsetTop(-offset);\n    menu.style.transformOrigin = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\n    attachElement(element, rect, menu);\n    // Control not to overflow the screen range\n    const menuClientRect = menu.getBoundingClientRect();\n    const scaleDiff = (allHeight - menuClientRect.height) / 2;\n    const orgMenuTop = menuClientRect.top - scaleDiff;\n    let menuTop = orgMenuTop;\n    const menuBottom = menuTop + allHeight;\n    const winBottom = window.innerHeight;\n    const winMargin = 20;\n    if (menuBottom > winBottom - winMargin) {\n        const diff = menuBottom - winBottom + winMargin;\n        menuTop -= diff;\n    }\n    if (menuTop < 0 /*winTop*/ + winMargin) {\n        menuTop = winMargin;\n    }\n    if (menuTop !== orgMenuTop) {\n        rect.offsetTop(-(orgMenuTop - menuTop));\n        // re update\n        attachElement(element, rect, menu);\n    }\n    if (focusEl) {\n        focusEl.focus();\n    }\n    menu.classList.remove(HIDDEN_CLASSNAME);\n    menu.classList.add(SHOWN_CLASSNAME);\n}\nfunction closeMenu(_grid, _col, _row, menu) {\n    menu.classList.remove(SHOWN_CLASSNAME);\n    menu.classList.add(HIDDEN_CLASSNAME);\n    dom_1.disableFocus(menu);\n}\nclass InlineMenuElement {\n    constructor() {\n        this._handler = new EventHandler_1.EventHandler();\n        this._menu = createMenuElement();\n        this._bindMenuEvents();\n    }\n    dispose() {\n        var _a;\n        const menu = this._menu;\n        this.detach();\n        this._handler.dispose();\n        delete this._menu;\n        this._beforePropEditor = null;\n        (_a = menu.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(menu);\n    }\n    attach(grid, editor, col, row, value, record) {\n        const menu = this._menu;\n        if (this._beforePropEditor) {\n            const { classList } = this._beforePropEditor;\n            if (classList) {\n                menu.classList.remove(...classList);\n            }\n        }\n        const options = editor.options(record);\n        openMenu(grid, editor, col, row, value, options, menu);\n        this._activeData = { grid, col, row, editor, options };\n        this._beforePropEditor = editor;\n    }\n    detach(gridFocus) {\n        if (this._isActive()) {\n            const { grid, col, row } = this._activeData;\n            const menu = this._menu;\n            closeMenu(grid, col, row, menu);\n            const range = grid.getCellRange(col, row);\n            grid.invalidateCellRange(range);\n            if (gridFocus) {\n                grid.focus();\n            }\n        }\n        this._activeData = null;\n    }\n    _doChangeValue(valueindex) {\n        if (!this._isActive()) {\n            return;\n        }\n        const { grid, col, row, options } = this._activeData;\n        const option = options[Number(valueindex)];\n        if (option) {\n            const { value } = option;\n            grid.doChangeValue(col, row, () => value);\n        }\n    }\n    _isActive() {\n        const menu = this._menu;\n        if (!menu || !menu.parentElement) {\n            return false;\n        }\n        if (!this._activeData) {\n            return false;\n        }\n        return true;\n    }\n    _bindMenuEvents() {\n        const handler = this._handler;\n        const menu = this._menu;\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\n        handler.on(menu, \"mousedown\", stopPropagationOnly);\n        handler.on(menu, \"touchstart\", stopPropagationOnly);\n        handler.on(menu, \"dblclick\", stopPropagationOnly);\n        handler.on(menu, \"click\", (e) => {\n            e.stopPropagation();\n            const item = findItemParents(e.target);\n            if (!item) {\n                return;\n            }\n            const { valueindex } = item.dataset;\n            this._doChangeValue(valueindex || \"\");\n            this.detach(true);\n        });\n        handler.on(menu, \"keydown\", (e) => {\n            const item = findItemParents(e.target);\n            if (!item) {\n                return;\n            }\n            const keyCode = utils_1.event.getKeyCode(e);\n            if (keyCode === KEY_ENTER) {\n                this._onKeydownEnter(menu, item, e);\n            }\n            else if (keyCode === KEY_ESC) {\n                this.detach(true);\n                utils_1.event.cancel(e);\n            }\n            else if (keyCode === KEY_UP) {\n                const n = dom_1.findPrevSiblingFocusable(item);\n                if (n) {\n                    n.focus();\n                    utils_1.event.cancel(e);\n                }\n            }\n            else if (keyCode === KEY_DOWN) {\n                const n = dom_1.findNextSiblingFocusable(item);\n                if (n) {\n                    n.focus();\n                    utils_1.event.cancel(e);\n                }\n            }\n            else if (keyCode === KEY_TAB) {\n                this._onKeydownTab(menu, item, e);\n            }\n        });\n    }\n    _onKeydownEnter(_menu, item, e) {\n        var _a;\n        const grid = this._isActive() ? this._activeData.grid : null;\n        const { valueindex } = item.dataset;\n        this._doChangeValue(valueindex || \"\");\n        this.detach(true);\n        utils_1.event.cancel(e);\n        if (grid) {\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n                grid.onKeyDownMove(e);\n            }\n        }\n    }\n    _onKeydownTab(menu, item, e) {\n        var _a;\n        if (this._isActive()) {\n            const { grid } = this._activeData;\n            if ((_a = grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnTab) {\n                const { valueindex } = item.dataset;\n                this._doChangeValue(valueindex || \"\");\n                this.detach(true);\n                grid.onKeyDownMove(e);\n                return;\n            }\n        }\n        if (!e.shiftKey) {\n            if (!dom_1.findNextSiblingFocusable(item)) {\n                let n = menu.querySelector(`.${ITEM_CLASSNAME}`);\n                if (!dom_1.isFocusable(n)) {\n                    n = dom_1.findNextSiblingFocusable(n);\n                }\n                if (n) {\n                    n.focus();\n                    utils_1.event.cancel(e);\n                }\n            }\n        }\n        else {\n            if (!dom_1.findPrevSiblingFocusable(item)) {\n                const items = menu.querySelectorAll(`.${ITEM_CLASSNAME}`);\n                let n = items[items.length - 1];\n                if (!dom_1.isFocusable(n)) {\n                    n = dom_1.findPrevSiblingFocusable(n);\n                }\n                if (n) {\n                    n.focus();\n                    utils_1.event.cancel(e);\n                }\n            }\n        }\n    }\n}\nexports.InlineMenuElement = InlineMenuElement;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__inline-menu {\\n\\tposition: absolute;\\n\\tcolor: rgba(0, 0, 0, .87);\\n\\tbox-sizing: content-box;\\n\\tmargin: -1px auto auto -1px;\\n\\tpadding: 8px 0;\\n\\tbackground-color: #fafafa;\\n\\tlist-style-type: none;\\n\\tborder-radius: 2px;\\n\\tmax-height: calc(100vh - 40px);\\n\\toverflow-y: auto;\\n}\\n.cheetah-grid__inline-menu--hidden {\\n\\ttransform: scale(.9);\\n\\tbox-shadow: none;\\n\\topacity: 0;\\n\\tpointer-events: none;\\n\\ttransition: all 50ms ease-out;\\n}\\n.cheetah-grid__inline-menu--hidden * {\\n\\tpointer-events: none;\\n}\\n.cheetah-grid__inline-menu--shown {\\n\\ttransform: translateY(-7px);\\n\\tbox-shadow: 0 3px 1px -2px rgba(0, 0, 0, .2), 0 2px 2px 0 rgba(0, 0, 0, .14), 0 1px 5px 0 rgba(0, 0, 0, .12);\\n\\topacity: 1;\\n\\ttransition: all 150ms ease-out;\\n}\\n.cheetah-grid__inline-menu__menu-item {\\n\\theight: 100%;\\n\\tbox-sizing: border-box;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: flex-start;\\n\\toutline: none;\\n\\tcursor: pointer;\\n\\tposition: relative;\\n\\toverflow: hidden;\\n\\tpadding: 0 16px;\\n}\\n.cheetah-grid__inline-menu__menu-item--empty {\\n\\tcolor: rgba(0, 0, 0, .38);\\n}\\n.cheetah-grid__inline-menu__menu-item::before {\\n\\tcontent: \\\"\\\";\\n\\tposition: absolute;\\n\\ttop: -50%;\\n\\tleft: -50%;\\n\\twidth: 200%;\\n\\theight: 200%;\\n\\tbackground-color: #000;\\n\\topacity: 0;\\n\\tpointer-events: none;\\n\\ttransition: opacity 15ms linear;\\n}\\n.cheetah-grid__inline-menu__menu-item:hover::before {\\n\\topacity: .04;\\n}\\n.cheetah-grid__inline-menu__menu-item[data-select]::before {\\n\\topacity: .04;\\n}\\n.cheetah-grid__inline-menu__menu-item:focus::before {\\n\\topacity: .12;\\n}\\n\", \"\"]);\n\n// exports\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../../internal/utils\");\nconst BaseColumn_1 = require(\"./BaseColumn\");\nconst BranchGraphStyle_1 = require(\"../style/BranchGraphStyle\");\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\nconst _ = symbolManager_1.getBranchGraphColumnStateId();\nfunction getAllColumnData(grid, field, callback) {\n    const { dataSource } = grid;\n    const allData = [];\n    let promise;\n    for (let index = 0; index < dataSource.length; index++) {\n        const data = dataSource.getField(index, field);\n        if (utils_1.isPromise(data)) {\n            const dataIndex = allData.length;\n            allData.push(undefined);\n            if (!promise) {\n                promise = data.then((d) => {\n                    allData[dataIndex] = d;\n                });\n            }\n            else {\n                promise = promise\n                    .then(() => data)\n                    .then((d) => {\n                    allData[dataIndex] = d;\n                });\n            }\n        }\n        else {\n            allData.push(data);\n        }\n    }\n    if (promise) {\n        promise.then(() => callback(allData));\n    }\n    else {\n        callback(allData);\n    }\n}\nclass BranchLine {\n    constructor({ fromIndex, toIndex, colorIndex, point, }) {\n        this.fromIndex = fromIndex;\n        this.toIndex = toIndex;\n        this.colorIndex = colorIndex;\n        this.point = point;\n    }\n}\nclass BranchPoint {\n    constructor({ index, commit = false, lines = [], tag, }) {\n        this.index = index;\n        this.commit = commit;\n        this.lines = lines;\n        this.tag = tag;\n    }\n    static mergeLines(lines) {\n        const result = lines.filter((l) => utils_1.isDef(l.fromIndex) && utils_1.isDef(l.toIndex));\n        const froms = lines.filter((l) => utils_1.isDef(l.fromIndex) && !utils_1.isDef(l.toIndex));\n        const tos = lines.filter((l) => !utils_1.isDef(l.fromIndex) && utils_1.isDef(l.toIndex));\n        froms.forEach((f) => {\n            for (let i = 0; i < tos.length; i++) {\n                const t = tos[i];\n                if (t.point) {\n                    continue;\n                }\n                if (f.colorIndex === t.colorIndex) {\n                    f.toIndex = t.toIndex;\n                    tos.splice(i, 1);\n                    break;\n                }\n            }\n            result.push(f);\n        });\n        return result.concat(tos);\n    }\n    static merge(a, b) {\n        if (!a) {\n            return b;\n        }\n        return new BranchPoint({\n            index: a.index,\n            commit: a.commit || b.commit,\n            lines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\n            tag: a.tag || b.tag,\n        });\n    }\n}\nfunction joinLine(timeline, branchIndex) {\n    const reverse = [...timeline].reverse();\n    for (let i = 0; i < reverse.length; i++) {\n        const f = reverse[i][branchIndex];\n        if (f) {\n            f.lines = BranchPoint.mergeLines(f.lines.concat([\n                new BranchLine({\n                    toIndex: branchIndex,\n                    colorIndex: branchIndex,\n                }),\n            ]));\n            for (let j = 0; j < i; j++) {\n                const tl = reverse[j];\n                tl[branchIndex] = new BranchPoint({\n                    index: branchIndex,\n                    lines: [\n                        new BranchLine({\n                            fromIndex: branchIndex,\n                            toIndex: branchIndex,\n                            colorIndex: branchIndex,\n                        }),\n                    ],\n                });\n            }\n            return true;\n        }\n    }\n    return false;\n}\nfunction branch({ timeline, branches }, from, to) {\n    const fromIndex = from != null ? branches.indexOf(from) : -1;\n    let toIndex = branches.indexOf(to);\n    if (toIndex < 0) {\n        toIndex = branches.length;\n        branches.push(to);\n    }\n    function findBranchRootIndex() {\n        for (let index = timeline.length - 1; index >= 0; index--) {\n            const tl = timeline[index];\n            const from = tl[fromIndex];\n            if (from && from.commit) {\n                return index;\n            }\n        }\n        return -1;\n    }\n    if (fromIndex < 0) {\n        return new BranchPoint({\n            index: toIndex,\n        });\n    }\n    else {\n        const fromTargetIndex = findBranchRootIndex();\n        if (fromTargetIndex === -1) {\n            return null;\n        }\n        const branchTargetFromIndex = fromTargetIndex + 1;\n        const branchPoint = new BranchPoint({\n            index: toIndex,\n            lines: [\n                new BranchLine({\n                    fromIndex,\n                    colorIndex: toIndex,\n                }),\n            ],\n        });\n        let point;\n        let result = null;\n        if (branchTargetFromIndex < timeline.length) {\n            const targetLine = timeline[branchTargetFromIndex];\n            point = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\n        }\n        else {\n            point = branchPoint;\n            result = branchPoint;\n        }\n        const from = timeline[fromTargetIndex][fromIndex];\n        from.lines = BranchPoint.mergeLines(from.lines.concat([\n            new BranchLine({\n                toIndex,\n                colorIndex: toIndex,\n                point,\n            }),\n        ]));\n        return result;\n    }\n}\nfunction commit({ timeline, branches }, name) {\n    const index = branches.indexOf(name);\n    if (index < 0) {\n        return null;\n    }\n    const result = new BranchPoint({\n        index,\n        commit: true,\n    });\n    if (joinLine(timeline, index)) {\n        result.lines = BranchPoint.mergeLines(result.lines.concat([\n            new BranchLine({\n                fromIndex: index,\n                colorIndex: index,\n            }),\n        ]));\n    }\n    return result;\n}\nfunction commitTag({ branches }, name, tag) {\n    let index = branches.indexOf(name);\n    if (index < 0) {\n        index = branches.length;\n        branches.push(name);\n    }\n    return new BranchPoint({\n        index,\n        tag,\n    });\n}\nfunction commitMerge({ timeline, branches }, from, to) {\n    const fromIndex = branches.indexOf(from);\n    const toIndex = branches.indexOf(to);\n    if (toIndex < 0 || fromIndex < 0) {\n        return new BranchPoint({\n            index: toIndex,\n            commit: true,\n        });\n    }\n    const result = new BranchPoint({\n        index: toIndex,\n        commit: true,\n        lines: [\n            new BranchLine({\n                fromIndex,\n                colorIndex: fromIndex,\n            }),\n            new BranchLine({\n                fromIndex: toIndex,\n                colorIndex: toIndex,\n            }),\n        ],\n    });\n    const froms = [...timeline];\n    const fromTargetLine = froms.pop();\n    if (fromTargetLine) {\n        fromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\n            index: toIndex,\n            lines: [\n                new BranchLine({\n                    toIndex,\n                    colorIndex: fromIndex,\n                }),\n            ],\n        }));\n    }\n    if (joinLine(froms, fromIndex) && fromTargetLine) {\n        fromTargetLine[fromIndex].lines = BranchPoint.mergeLines(fromTargetLine[fromIndex].lines.concat([\n            new BranchLine({\n                fromIndex,\n                colorIndex: fromIndex,\n            }),\n        ]));\n    }\n    joinLine(timeline, toIndex);\n    return result;\n}\nfunction calcCommand(info, command) {\n    const { timeline } = info;\n    const timelineData = [];\n    // const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\n    const commands = Array.isArray(command) ? command : [command];\n    commands.forEach((cmd) => {\n        if (!cmd) {\n            return;\n        }\n        let point;\n        if (cmd.command === \"branch\") {\n            const from = utils_1.obj.isObject(cmd.branch) ? cmd.branch.from : null;\n            const to = utils_1.obj.isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\n            point = branch(info, from, to);\n        }\n        else if (cmd.command === \"commit\") {\n            const { branch } = cmd;\n            point = commit(info, branch);\n        }\n        else if (cmd.command === \"merge\") {\n            const { from, to } = cmd.branch;\n            point = commitMerge(info, from, to);\n        }\n        else if (cmd.command === \"tag\") {\n            const { branch, tag } = cmd;\n            point = commitTag(info, branch, tag);\n        }\n        if (point && point.index > -1) {\n            timelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\n        }\n    });\n    timeline.push(timelineData);\n}\nfunction calcBranchesInfo(start, grid, field) {\n    const result = {\n        branches: [],\n        timeline: [],\n    };\n    getAllColumnData(grid, field, (data) => {\n        if (start !== \"top\") {\n            data = [...data].reverse();\n        }\n        data.forEach((command) => {\n            calcCommand(result, command);\n        });\n    });\n    return result;\n}\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\n    let w = Math.max(width / branches.length + 1, 5);\n    timeline.forEach((tl) => {\n        tl.forEach((p, index) => {\n            if (index <= 0) {\n                // \n                return;\n            }\n            if (p.tag) {\n                const textWidth = ctx.measureText(p.tag).width;\n                if (w * index + radius * 2 + 4 + textWidth > width) {\n                    w = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\n                }\n            }\n        });\n    });\n    const result = [];\n    let x = left;\n    branches.forEach(() => {\n        result.push(Math.ceil(x + radius));\n        x += w;\n    });\n    return result;\n}\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, { branchXPoints, \n// margin,\nbranchColors, branchLineWidth, mergeStyle, }, { \n// width,\ncol, row, branches, }) {\n    if (utils_1.isDef(upLineIndex) || utils_1.isDef(downLineIndex)) {\n        ctx.strokeStyle = utils_1.getOrApply(branchColors, branches[colorIndex], colorIndex);\n        ctx.lineWidth = branchLineWidth;\n        ctx.lineCap = \"round\";\n        ctx.beginPath();\n        if (utils_1.isDef(upLineIndex)) {\n            const upX = branchXPoints[upLineIndex];\n            const upRect = grid.getCellRelativeRect(col, row - 1);\n            const upY = upRect.top + upRect.height / 2;\n            ctx.moveTo(upX, upY);\n            if (mergeStyle === \"bezier\") {\n                ctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\n            }\n            else {\n                ctx.lineTo(x, y);\n            }\n        }\n        else {\n            ctx.moveTo(x, y);\n        }\n        if (utils_1.isDef(downLineIndex)) {\n            const downX = branchXPoints[downLineIndex];\n            const downRect = grid.getCellRelativeRect(col, row + 1);\n            const downY = downRect.top + downRect.height / 2;\n            if (mergeStyle === \"bezier\") {\n                ctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\n            }\n            else {\n                ctx.lineTo(downX, downY);\n            }\n        }\n        ctx.stroke();\n    }\n}\n/**\n * BranchGraphColumn\n *\n * Data commands\n * - mastar branch or orphan branch\n *\n * ```js\n * {\n * \tcommand: 'branch',\n * \tbranch: 'branch name A',\n * }\n * ```\n *\n * - commit\n *\n * ```js\n * {\n * \tcommand: 'commit',\n * \tbranch: 'branch name A'\n * }\n * ```\n *\n * - branch\n *\n * ```js\n * {\n * \tcommand: 'branch',\n * \tbranch: {\n * \t\tfrom: 'branch name A',\n * \t\tto: 'branch name B'\n * \t}\n * }\n * ```\n *\n * - merge\n *\n * ```js\n * {\n * \tcommand: 'merge',\n * \tbranch: {\n * \t\tfrom: 'branch name B',\n * \t\tto: 'branch name A'\n * \t}\n * }\n * ```\n *\n * - tag\n *\n * ```js\n * {\n * \tcommand: 'tag',\n * \tbranch: 'branch name A',\n * \ttag: 'tag name'\n * }\n * ```\n *\n * @memberof cheetahGrid.columns.type\n */\nclass BranchGraphColumn extends BaseColumn_1.BaseColumn {\n    constructor(option = {}) {\n        super(option);\n        this._start = option.start || \"bottom\";\n        this._cache = utils_1.isDef(option.cache) ? option.cache : false;\n    }\n    get StyleClass() {\n        return BranchGraphStyle_1.BranchGraphStyle;\n    }\n    clearCache(grid) {\n        delete grid[_];\n    }\n    onDrawCell(cellValue, info, context, grid) {\n        if (this._cache) {\n            const state = grid[_] || (grid[_] = new Map());\n            const { col, row } = context;\n            const field = grid.getField(col, row);\n            if (!state.has(field)) {\n                state.set(field, calcBranchesInfo(this._start, grid, field));\n            }\n        }\n        return super.onDrawCell(cellValue, info, context, grid);\n    }\n    clone() {\n        return new BranchGraphColumn(this);\n    }\n    drawInternal(_value, context, style, helper, grid, { drawCellBase }) {\n        var _a, _b;\n        const { col, row } = context;\n        const field = grid.getField(col, row);\n        const { timeline, branches } = (_b = (this._cache ? (_a = grid[_]) === null || _a === void 0 ? void 0 : _a.get(field) : null)) !== null && _b !== void 0 ? _b : calcBranchesInfo(this._start, grid, field);\n        const { upLineIndexKey, downLineIndexKey, } = this._start !== \"top\"\n            ? { upLineIndexKey: \"toIndex\", downLineIndexKey: \"fromIndex\" }\n            : { upLineIndexKey: \"fromIndex\", downLineIndexKey: \"toIndex\" };\n        const data = this._start !== \"top\"\n            ? timeline[timeline.length - (row - grid.frozenRowCount) - 1]\n            : timeline[row - grid.frozenRowCount];\n        const { branchColors, branchLineWidth, circleSize, mergeStyle, margin, bgColor, } = style;\n        if (bgColor) {\n            drawCellBase({\n                bgColor,\n            });\n        }\n        const rect = context.getRect();\n        const radius = circleSize / 2;\n        const width = rect.width - margin * 2;\n        helper.drawWithClip(context, (ctx) => {\n            ctx.textAlign = \"left\";\n            ctx.textBaseline = \"middle\";\n            const branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\n            const y = rect.top + rect.height / 2;\n            // draw join lines\n            data\n                .map((point, index) => point\n                ? point.lines.map((line) => ({\n                    colorIndex: line.colorIndex,\n                    upLineIndex: line[upLineIndexKey],\n                    downLineIndex: line[downLineIndexKey],\n                    pointIndex: index,\n                }))\n                : [])\n                .reduce((p, c) => p.concat(c), []) // flatMap\n                // order of overlap\n                .sort((a, b) => b.colorIndex - a.colorIndex)\n                .forEach((line) => {\n                const x = branchXPoints[line.pointIndex];\n                renderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\n                    margin,\n                    branchXPoints,\n                    branchLineWidth,\n                    branchColors,\n                    mergeStyle,\n                }, {\n                    width,\n                    col,\n                    row,\n                    branches,\n                });\n            });\n            // draw commit points\n            data.forEach((p, index) => {\n                if (p && p.commit) {\n                    const x = branchXPoints[index];\n                    ctx.fillStyle = utils_1.getOrApply(branchColors, branches[index], index);\n                    ctx.beginPath();\n                    ctx.arc(x, y, radius, 0, Math.PI * 2, true);\n                    ctx.fill();\n                    ctx.closePath();\n                }\n            });\n            // draw tags\n            data.forEach((p, index) => {\n                if (p && p.tag) {\n                    ctx.fillStyle = utils_1.getOrApply(branchColors, branches[index], index);\n                    ctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\n                }\n            });\n        });\n    }\n}\nexports.BranchGraphColumn = BranchGraphColumn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseStyle_1 = require(\"./BaseStyle\");\nlet defaultStyle;\nconst DEFAULT_BRANCH_COLORS = (_name, index) => {\n    switch (index % 3) {\n        case 0:\n            return \"#979797\";\n        case 1:\n            return \"#008fb5\";\n        case 2:\n            return \"#f1c109\";\n        default:\n    }\n    return \"#979797\";\n};\nclass BranchGraphStyle extends BaseStyle_1.BaseStyle {\n    constructor(style = {}) {\n        super(style);\n        this._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\n        this._margin = style.margin || 4;\n        this._circleSize = style.circleSize || 16;\n        this._branchLineWidth = style.branchLineWidth || 4;\n        this._mergeStyle = style.mergeStyle === \"straight\" ? \"straight\" : \"bezier\";\n    }\n    static get DEFAULT() {\n        return defaultStyle\n            ? defaultStyle\n            : (defaultStyle = new BranchGraphStyle());\n    }\n    get branchColors() {\n        return this._branchColors;\n    }\n    set branchColors(branchColors) {\n        this._branchColors = branchColors;\n        this.doChangeStyle();\n    }\n    get margin() {\n        return this._margin;\n    }\n    set margin(margin) {\n        this._margin = margin;\n        this.doChangeStyle();\n    }\n    get circleSize() {\n        return this._circleSize;\n    }\n    set circleSize(circleSize) {\n        this._circleSize = circleSize;\n        this.doChangeStyle();\n    }\n    get branchLineWidth() {\n        return this._branchLineWidth;\n    }\n    set branchLineWidth(branchLineWidth) {\n        this._branchLineWidth = branchLineWidth;\n        this.doChangeStyle();\n    }\n    get mergeStyle() {\n        return this._mergeStyle;\n    }\n    set mergeStyle(mergeStyle) {\n        this._mergeStyle = mergeStyle;\n        this.doChangeStyle();\n    }\n    clone() {\n        return new BranchGraphStyle(this);\n    }\n}\nexports.BranchGraphStyle = BranchGraphStyle;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils = __importStar(require(\"./columnUtils\"));\nconst ButtonStyle_1 = require(\"../style/ButtonStyle\");\nconst Column_1 = require(\"./Column\");\nconst utils_1 = require(\"../../internal/utils\");\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\nconst BUTTON_COLUMN_STATE_ID = symbolManager_1.getButtonColumnStateId();\nclass ButtonColumn extends Column_1.Column {\n    constructor(option = {}) {\n        super(option);\n        this._caption = option.caption;\n    }\n    get StyleClass() {\n        return ButtonStyle_1.ButtonStyle;\n    }\n    get caption() {\n        return this._caption;\n    }\n    withCaption(caption) {\n        const c = this.clone();\n        c._caption = caption;\n        return c;\n    }\n    clone() {\n        return new ButtonColumn(this);\n    }\n    convertInternal(value) {\n        return this._caption || super.convertInternal(value);\n    }\n    drawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\n        const { textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding, textOverflow, } = style;\n        if (bgColor) {\n            drawCellBase({\n                bgColor,\n            });\n        }\n        helper.testFontLoad(font, value, context);\n        const { col, row } = context;\n        const range = grid.getCellRange(col, row);\n        let active = false;\n        const state = grid[BUTTON_COLUMN_STATE_ID];\n        if (state) {\n            if (state.mouseActiveCell &&\n                utils_1.cellInRange(range, state.mouseActiveCell.col, state.mouseActiveCell.row)) {\n                active = true;\n            }\n            else {\n                const { select } = context.getSelection();\n                if (utils_1.cellInRange(range, select.col, select.row)) {\n                    active = true;\n                }\n            }\n        }\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n            helper.button(value, context, {\n                textAlign,\n                textBaseline,\n                bgColor: buttonBgColor,\n                color,\n                font,\n                padding,\n                shadow: active\n                    ? {\n                        color: \"rgba(0, 0, 0, 0.48)\",\n                        blur: 6,\n                        offsetY: 3,\n                    }\n                    : {},\n                textOverflow,\n                icons,\n            });\n        });\n    }\n}\nexports.ButtonColumn = ButtonColumn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseColumn_1 = require(\"./BaseColumn\");\nconst CheckStyle_1 = require(\"../style/CheckStyle\");\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\nconst utils_1 = require(\"../../internal/utils\");\nconst utils_2 = require(\"../utils\");\nconst CHECK_COLUMN_STATE_ID = symbolManager_1.getCheckColumnStateId();\nclass CheckColumn extends BaseColumn_1.BaseColumn {\n    get StyleClass() {\n        return CheckStyle_1.CheckStyle;\n    }\n    clone() {\n        return new CheckColumn(this);\n    }\n    convertInternal(value) {\n        return utils_2.toBoolean(value);\n    }\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\n        var _a;\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, } = style;\n        if (bgColor) {\n            drawCellBase({\n                bgColor,\n            });\n        }\n        const { col, row } = context;\n        const range = grid.getCellRange(col, row);\n        const cellKey = `${range.start.col}:${range.start.row}`;\n        const elapsed = (_a = grid[CHECK_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\n        const opt = {\n            textAlign,\n            textBaseline,\n            borderColor,\n            checkBgColor,\n            uncheckBgColor,\n        };\n        if (utils_1.isDef(elapsed)) {\n            opt.animElapsedTime = elapsed;\n        }\n        helper.checkbox(value, context, opt);\n    }\n}\nexports.CheckColumn = CheckColumn;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst icons = __importStar(require(\"../../internal/icons\"));\nconst Column_1 = require(\"./Column\");\nconst IconStyle_1 = require(\"../style/IconStyle\");\nfunction repeatArray(val, count) {\n    if (count === Infinity) {\n        count = 0;\n    }\n    const a = [];\n    for (let i = 0; i < count; i++) {\n        a.push(val);\n    }\n    return a;\n}\nclass IconColumn extends Column_1.Column {\n    constructor(option = {}) {\n        super(option);\n        this._tagName = option.tagName || \"i\";\n        this._className = option.className;\n        this._content = option.content;\n        this._name = option.name;\n        this._iconWidth = option.iconWidth;\n    }\n    get StyleClass() {\n        return IconStyle_1.IconStyle;\n    }\n    clone() {\n        return new IconColumn(this);\n    }\n    drawInternal(value, context, style, helper, grid, info) {\n        const num = Number(value);\n        if (!isNaN(num)) {\n            const icon = {};\n            icons.iconPropKeys.forEach((k) => {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                icon[k] = style[k];\n            });\n            icon.className = this._className;\n            icon.tagName = this._tagName;\n            if (this._content) {\n                icon.content = this._content;\n            }\n            icon.name = this._name;\n            if (this._iconWidth) {\n                icon.width = this._iconWidth;\n            }\n            info.getIcon = () => repeatArray(icon, num);\n        }\n        else {\n            info.getIcon = () => null;\n        }\n        super.drawInternal(\"\", context, style, helper, grid, info);\n    }\n}\nexports.IconColumn = IconColumn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseColumn_1 = require(\"./BaseColumn\");\nconst ImageStyle_1 = require(\"../style/ImageStyle\");\nconst canvases_1 = require(\"../../internal/canvases\");\nconst imgs_1 = require(\"../../internal/imgs\");\nconst MAX_LRU_CACHE_SIZE = 50;\nfunction getImage(url) {\n    return imgs_1.getCacheOrLoad(\"ImageColumn\", MAX_LRU_CACHE_SIZE, url);\n}\nfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\n    let newWidth = width;\n    let newHeight = height;\n    if (newWidth > maxWidth) {\n        newWidth = maxWidth;\n        newHeight = (newWidth * height) / width;\n    }\n    if (newHeight > maxHeight) {\n        newHeight = maxHeight;\n        newWidth = (newHeight * width) / height;\n    }\n    return {\n        width: newWidth,\n        height: newHeight,\n    };\n}\nclass ImageColumn extends BaseColumn_1.BaseColumn {\n    get StyleClass() {\n        return ImageStyle_1.ImageStyle;\n    }\n    onDrawCell(cellValue, info, context, grid) {\n        return super.onDrawCell(getImage(cellValue), info, context, grid);\n    }\n    clone() {\n        return new ImageColumn(this);\n    }\n    drawInternal(value, context, style, helper, _grid, { drawCellBase }) {\n        if (value) {\n            const { textAlign, textBaseline, margin, bgColor } = style;\n            if (bgColor) {\n                drawCellBase({\n                    bgColor,\n                });\n            }\n            helper.drawWithClip(context, (ctx) => {\n                ctx.textAlign = textAlign;\n                ctx.textBaseline = textBaseline;\n                const rect = context.getRect();\n                if (style.imageSizing === \"keep-aspect-ratio\") {\n                    const { width, height } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\n                    const pos = canvases_1.calcStartPosition(ctx, rect, width, height, {\n                        offset: margin,\n                    });\n                    ctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\n                }\n                else {\n                    ctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\n                }\n            });\n        }\n    }\n}\nexports.ImageColumn = ImageColumn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass LRUCache {\n    constructor(cacheSize) {\n        this._list = [];\n        this._map = {};\n        this._cacheSize = cacheSize || 50;\n    }\n    get(key) {\n        const val = this._map[key];\n        if (val) {\n            const list = this._list;\n            const idx = list.indexOf(key);\n            list.splice(idx, 1);\n            list.push(key);\n        }\n        return val;\n    }\n    put(key, value) {\n        const list = this._list;\n        const map = this._map;\n        if (map[key]) {\n            const idx = list.indexOf(key);\n            list.splice(idx, 1);\n        }\n        map[key] = value;\n        list.push(key);\n        if (list.length > this._cacheSize) {\n            const remKey = list.shift() || \"\";\n            delete map[remKey];\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils = __importStar(require(\"./columnUtils\"));\nconst BaseColumn_1 = require(\"./BaseColumn\");\nconst MenuStyle_1 = require(\"../style/MenuStyle\");\nconst utils_1 = require(\"../../internal/utils\");\nconst menu_items_1 = require(\"../../internal/menu-items\");\nclass MenuColumn extends BaseColumn_1.BaseColumn {\n    constructor(option = {}) {\n        super(option);\n        this._options = menu_items_1.normalize(option.options);\n    }\n    get StyleClass() {\n        return MenuStyle_1.MenuStyle;\n    }\n    clone() {\n        return new MenuColumn(this);\n    }\n    get options() {\n        return this._options;\n    }\n    withOptions(options) {\n        const c = this.clone();\n        c._options = menu_items_1.normalize(options);\n        return c;\n    }\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\n        const { textAlign, textBaseline, font, bgColor, padding, textOverflow, appearance, } = style;\n        let { color } = style;\n        if (bgColor) {\n            drawCellBase({\n                bgColor,\n            });\n        }\n        const text = this._convertInternal(value);\n        helper.testFontLoad(font, text, context);\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n            const basePadding = helper.toBoxPixelArray(padding || 0, context, font);\n            const textPadding = basePadding.slice(0);\n            textPadding[1] += 26; // icon padding\n            const iconPadding = basePadding.slice(0);\n            iconPadding[1] += 8;\n            if (!utils_1.isDef(color) && (!utils_1.isDef(value) || value === \"\")) {\n                color = \"rgba(0, 0, 0, .38)\";\n            }\n            helper.text(text, context, {\n                textAlign,\n                textBaseline,\n                color,\n                font,\n                padding: textPadding,\n                textOverflow,\n                icons,\n            });\n            if (appearance === \"menulist-button\") {\n                // draw dropdown arrow icon\n                helper.text(\"\", context, {\n                    textAlign: \"right\",\n                    textBaseline,\n                    color,\n                    font,\n                    icons: [\n                        {\n                            path: \"M0 2 5 7 10 2z\",\n                            width: 10,\n                            color: \"rgba(0, 0, 0, .54)\",\n                        },\n                    ],\n                    padding: iconPadding,\n                });\n            }\n            else if (appearance !== \"none\") {\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n                console.warn(`unsupported appearance:${appearance}`);\n            }\n        });\n    }\n    convertInternal(value) {\n        return value;\n    }\n    _convertInternal(value) {\n        const options = this._options;\n        for (let i = 0; i < options.length; i++) {\n            const option = options[i];\n            if (option.value === value) {\n                value = option.label;\n                break;\n            }\n        }\n        return super.convertInternal(value);\n    }\n    getCopyCellValue(value) {\n        return this._convertInternal(value);\n    }\n}\nexports.MenuColumn = MenuColumn;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils = __importStar(require(\"./columnUtils\"));\nconst BaseColumn_1 = require(\"./BaseColumn\");\nconst MultilineTextStyle_1 = require(\"../style/MultilineTextStyle\");\nclass MultilineTextColumn extends BaseColumn_1.BaseColumn {\n    constructor(option = {}) {\n        super(option);\n    }\n    get StyleClass() {\n        return MultilineTextStyle_1.MultilineTextStyle;\n    }\n    clone() {\n        return new MultilineTextColumn(this);\n    }\n    drawInternal(value, context, style, helper, _grid, { drawCellBase, getIcon }) {\n        const { textAlign, textBaseline, color, font, bgColor, padding, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\n        if (bgColor) {\n            drawCellBase({\n                bgColor,\n            });\n        }\n        const multilines = value\n            .replace(/\\r?\\n/g, \"\\n\")\n            .replace(/\\r/g, \"\\n\")\n            .split(\"\\n\");\n        helper.testFontLoad(font, value, context);\n        utils.loadIcons(getIcon(), context, helper, (icons, context) => {\n            helper.multilineText(multilines, context, {\n                textAlign,\n                textBaseline,\n                color,\n                font,\n                padding,\n                lineHeight,\n                autoWrapText,\n                lineClamp,\n                textOverflow,\n                icons,\n            });\n        });\n    }\n}\nexports.MultilineTextColumn = MultilineTextColumn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Column_1 = require(\"./Column\");\nconst NumberStyle_1 = require(\"../style/NumberStyle\");\nlet defaultFotmat;\nclass NumberColumn extends Column_1.Column {\n    constructor(option = {}) {\n        super(option);\n        this._format = option.format;\n    }\n    static get defaultFotmat() {\n        return defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\n    }\n    static set defaultFotmat(fmt) {\n        defaultFotmat = fmt;\n    }\n    get StyleClass() {\n        return NumberStyle_1.NumberStyle;\n    }\n    clone() {\n        return new NumberColumn(this);\n    }\n    get format() {\n        return this._format;\n    }\n    withFormat(format) {\n        const c = this.clone();\n        c._format = format;\n        return c;\n    }\n    convertInternal(value) {\n        const num = Number(value);\n        if (isNaN(num)) {\n            return super.convertInternal(value);\n        }\n        const format = this._format || NumberColumn.defaultFotmat;\n        return format.format(num);\n    }\n}\nexports.NumberColumn = NumberColumn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../../internal/utils\");\nconst Column_1 = require(\"./Column\");\nconst PercentCompleteBarStyle_1 = require(\"../style/PercentCompleteBarStyle\");\nconst MARGIN = 2;\nclass PercentCompleteBarColumn extends Column_1.Column {\n    constructor(option = {}) {\n        super(option);\n        this._min = option.min || 0;\n        this._max = option.max || this._min + 100;\n        this._formatter = option.formatter || ((v) => v);\n    }\n    get StyleClass() {\n        return PercentCompleteBarStyle_1.PercentCompleteBarStyle;\n    }\n    clone() {\n        return new PercentCompleteBarColumn(this);\n    }\n    drawInternal(value, context, style, helper, grid, info) {\n        super.drawInternal(this._formatter(value), context, style, helper, grid, info);\n        const { barColor, barBgColor, barHeight } = style;\n        let svalue = `${value}`;\n        if (utils_1.str.endsWith(svalue, \"%\")) {\n            svalue = svalue.substr(0, svalue.length - 1);\n        }\n        const num = Number(svalue);\n        if (isNaN(num)) {\n            return;\n        }\n        const rate = num < this._min\n            ? 0\n            : num > this._max\n                ? 1\n                : (num - this._min) / (this._max - this._min);\n        helper.drawWithClip(context, (ctx) => {\n            const rect = context.getRect();\n            const barMaxWidth = rect.width - MARGIN * 2 - 1; /**/\n            const barTop = rect.bottom - MARGIN - barHeight - 1; /**/\n            const barLeft = rect.left + MARGIN;\n            ctx.fillStyle = utils_1.getOrApply(barBgColor, rate * 100) || \"#f0f3f5\";\n            ctx.beginPath();\n            ctx.rect(barLeft, barTop, barMaxWidth, barHeight);\n            ctx.fill();\n            const barSize = Math.min(barMaxWidth * rate, barMaxWidth);\n            ctx.fillStyle = utils_1.getOrApply(barColor, rate * 100) || \"#20a8d8\";\n            ctx.beginPath();\n            ctx.rect(barLeft, barTop, barSize, barHeight);\n            ctx.fill();\n        });\n    }\n}\nexports.PercentCompleteBarColumn = PercentCompleteBarColumn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseColumn_1 = require(\"./BaseColumn\");\nconst RadioStyle_1 = require(\"../style/RadioStyle\");\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\nconst utils_1 = require(\"../../internal/utils\");\nconst utils_2 = require(\"../utils\");\nconst RADIO_COLUMN_STATE_ID = symbolManager_1.getRadioColumnStateId();\nclass RadioColumn extends BaseColumn_1.BaseColumn {\n    get StyleClass() {\n        return RadioStyle_1.RadioStyle;\n    }\n    clone() {\n        return new RadioColumn(this);\n    }\n    convertInternal(value) {\n        return utils_2.toBoolean(value);\n    }\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\n        var _a;\n        const { textAlign, textBaseline, checkColor, uncheckBorderColor, checkBorderColor, uncheckBgColor, checkBgColor, bgColor, } = style;\n        if (bgColor) {\n            drawCellBase({\n                bgColor,\n            });\n        }\n        const { col, row } = context;\n        const range = grid.getCellRange(col, row);\n        const cellKey = `${range.start.col}:${range.start.row}`;\n        const elapsed = (_a = grid[RADIO_COLUMN_STATE_ID]) === null || _a === void 0 ? void 0 : _a.elapsed[cellKey];\n        const opt = {\n            textAlign,\n            textBaseline,\n            checkColor,\n            uncheckBorderColor,\n            checkBorderColor,\n            uncheckBgColor,\n            checkBgColor,\n        };\n        if (utils_1.isDef(elapsed)) {\n            opt.animElapsedTime = elapsed;\n        }\n        helper.radioButton(value, context, opt);\n    }\n}\nexports.RadioColumn = RadioColumn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst actionBind_1 = require(\"./actionBind\");\nconst utils_1 = require(\"../../internal/utils\");\nconst action_utils_1 = require(\"./action-utils\");\nconst DG_EVENT_TYPE_1 = require(\"../../core/DG_EVENT_TYPE\");\nconst Editor_1 = require(\"./Editor\");\nconst animate_1 = require(\"../../internal/animate\");\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\nconst utils_2 = require(\"../utils\");\nconst RADIO_COLUMN_STATE_ID = symbolManager_1.getRadioColumnStateId();\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst defaultGroupResolver = ({ grid, col, row }) => {\n    const cellId = grid.getLayoutCellId(col, row);\n    const recordStartRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\n    const offsetRow = row - recordStartRow;\n    const result = [];\n    const { rowCount, recordRowCount } = grid;\n    for (let targetRow = grid.frozenRowCount + offsetRow; targetRow < rowCount; targetRow += recordRowCount) {\n        if (grid.getLayoutCellId(col, targetRow) === cellId) {\n            result.push({ col, row: targetRow });\n        }\n    }\n    return result;\n};\nclass RadioEditor extends Editor_1.Editor {\n    constructor(option = {}) {\n        super(option);\n        this._group = option.group || defaultGroupResolver;\n    }\n    clone() {\n        return new RadioEditor(this);\n    }\n    get group() {\n        return this._group;\n    }\n    set group(group) {\n        this._group = group;\n    }\n    bindGridEvent(grid, cellId) {\n        let _state = grid[RADIO_COLUMN_STATE_ID];\n        if (!_state) {\n            _state = { block: {}, elapsed: {} };\n            utils_1.obj.setReadonly(grid, RADIO_COLUMN_STATE_ID, _state);\n        }\n        const state = _state;\n        const action = (cell) => {\n            this._action(grid, cell);\n        };\n        function isTarget(col, row) {\n            return grid.getLayoutCellId(col, row) === cellId;\n        }\n        return [\n            ...actionBind_1.bindCellClickAction(grid, cellId, {\n                action,\n                mouseOver: (e) => {\n                    if (action_utils_1.isDisabledRecord(this.disabled, grid, e.row)) {\n                        return false;\n                    }\n                    state.mouseActiveCell = {\n                        col: e.col,\n                        row: e.row,\n                    };\n                    const range = grid.getCellRange(e.col, e.row);\n                    grid.invalidateCellRange(range);\n                    return true;\n                },\n                mouseOut: (e) => {\n                    delete state.mouseActiveCell;\n                    const range = grid.getCellRange(e.col, e.row);\n                    grid.invalidateCellRange(range);\n                },\n            }),\n            ...actionBind_1.bindCellKeyAction(grid, cellId, {\n                action,\n            }),\n            // paste value\n            grid.listen(DG_EVENT_TYPE_1.DG_EVENT_TYPE.PASTE_CELL, (e) => {\n                if (e.multi) {\n                    // ignore multi cell values\n                    return;\n                }\n                const selectionRange = grid.selection.range;\n                if (!utils_1.cellEquals(selectionRange.start, selectionRange.end)) {\n                    // ignore multi paste values\n                    return;\n                }\n                if (!isTarget(e.col, e.row)) {\n                    return;\n                }\n                const pasteValue = e.normalizeValue.trim();\n                if (!utils_2.toBoolean(pasteValue)) {\n                    return;\n                }\n                utils_1.event.cancel(e.event);\n                action({\n                    col: e.col,\n                    row: e.row,\n                });\n            }),\n        ];\n    }\n    onPasteCellRangeBox(grid, cell, value) {\n        if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n            action_utils_1.isDisabledRecord(this.disabled, grid, cell.row)) {\n            return;\n        }\n        const pasteValue = value.trim();\n        if (!utils_2.toBoolean(pasteValue)) {\n            return;\n        }\n        this._action(grid, {\n            col: cell.col,\n            row: cell.row,\n        });\n    }\n    onDeleteCellRangeBox() {\n        // noop\n    }\n    _action(grid, cell) {\n        const state = grid[RADIO_COLUMN_STATE_ID];\n        const range = grid.getCellRange(cell.col, cell.row);\n        const cellKey = `${range.start.col}:${range.start.row}`;\n        if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n            action_utils_1.isDisabledRecord(this.disabled, grid, cell.row) ||\n            state.block[cellKey]) {\n            return;\n        }\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\n            if (utils_2.toBoolean(value)) {\n                return;\n            }\n            const targets = this._group({ grid, col: cell.col, row: cell.row });\n            targets.forEach(({ col, row }) => {\n                const range = grid.getCellRange(col, row);\n                const cellKey = `${range.start.col}:${range.start.row}`;\n                if (action_utils_1.isReadOnlyRecord(this.readOnly, grid, cell.row) ||\n                    action_utils_1.isDisabledRecord(this.disabled, grid, cell.row) ||\n                    state.block[cellKey]) {\n                    return;\n                }\n                actionCell(grid, col, row, col === cell.col && row === cell.row);\n            });\n        });\n    }\n}\nexports.RadioEditor = RadioEditor;\nfunction actionCell(grid, col, row, flag) {\n    grid.doGetCellValue(col, row, (value) => {\n        if (utils_2.toBoolean(value) === flag) {\n            return;\n        }\n        const state = grid[RADIO_COLUMN_STATE_ID];\n        const range = grid.getCellRange(col, row);\n        const cellKey = `${range.start.col}:${range.start.row}`;\n        const ret = grid.doChangeValue(col, row, action_utils_1.toggleValue);\n        if (ret) {\n            const onChange = () => {\n                // checkbox animation\n                animate_1.animate(200, (point) => {\n                    if (point === 1) {\n                        delete state.elapsed[cellKey];\n                    }\n                    else {\n                        state.elapsed[cellKey] = point;\n                    }\n                    grid.invalidateCellRange(range);\n                });\n            };\n            if (utils_1.isPromise(ret)) {\n                state.block[cellKey] = true;\n                ret.then(() => {\n                    delete state.block[cellKey];\n                    onChange();\n                });\n            }\n            else {\n                onChange();\n            }\n        }\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseInputEditor_1 = require(\"./BaseInputEditor\");\nconst SmallDialogInputElement_1 = require(\"./internal/SmallDialogInputElement\");\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\nconst utils_1 = require(\"../../internal/utils\");\nconst _ = symbolManager_1.getSmallDialogInputEditorStateId();\nfunction getState(grid) {\n    let state = grid[_];\n    if (!state) {\n        state = {};\n        utils_1.obj.setReadonly(grid, _, state);\n    }\n    return state;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nlet globalElement = null;\nlet bindGridCount = 0;\nfunction attachInput(grid, cell, editor, value) {\n    const state = getState(grid);\n    if (!globalElement) {\n        globalElement = new SmallDialogInputElement_1.SmallDialogInputElement();\n    }\n    if (!state.element) {\n        state.element = globalElement;\n        bindGridCount++;\n        grid.addDisposable({\n            dispose() {\n                bindGridCount--;\n                if (!bindGridCount) {\n                    globalElement === null || globalElement === void 0 ? void 0 : globalElement.dispose();\n                    globalElement = null;\n                    state.element = null;\n                }\n            },\n        });\n    }\n    globalElement.attach(grid, editor, cell.col, cell.row, value);\n}\nfunction detachInput(gridFocus) {\n    if (globalElement) {\n        globalElement.detach(gridFocus);\n    }\n}\nclass SmallDialogInputEditor extends BaseInputEditor_1.BaseInputEditor {\n    constructor(option = {}) {\n        super(option);\n        this._helperText = option.helperText;\n        this._inputValidator = option.inputValidator;\n        this._validator = option.validator;\n        this._classList = option.classList;\n        this._type = option.type;\n    }\n    dispose() {\n        //noop\n    }\n    get classList() {\n        if (!this._classList) {\n            return undefined;\n        }\n        return Array.isArray(this._classList) ? this._classList : [this._classList];\n    }\n    set classList(classList) {\n        this._classList = classList;\n    }\n    get type() {\n        return this._type;\n    }\n    set type(type) {\n        this._type = type;\n    }\n    get helperText() {\n        return this._helperText;\n    }\n    get inputValidator() {\n        return this._inputValidator;\n    }\n    get validator() {\n        return this._validator;\n    }\n    clone() {\n        return new SmallDialogInputEditor(this);\n    }\n    onInputCellInternal(grid, cell, inputValue) {\n        attachInput(grid, cell, this, inputValue);\n    }\n    onOpenCellInternal(grid, cell) {\n        grid.doGetCellValue(cell.col, cell.row, (value) => {\n            attachInput(grid, cell, this, value);\n        });\n    }\n    onChangeSelectCellInternal(_grid, _cell, _selected) {\n        // cancel input\n        detachInput();\n    }\n    onGridScrollInternal(_grid) {\n        // cancel input\n        detachInput(true);\n    }\n    onChangeDisabledInternal() {\n        // cancel input\n        detachInput(true);\n    }\n    onChangeReadOnlyInternal() {\n        // cancel input\n        detachInput(true);\n    }\n    onSetInputAttrsInternal(grid, _cell, input) {\n        SmallDialogInputElement_1.SmallDialogInputElement.setInputAttrs(this, grid, input);\n    }\n}\nexports.SmallDialogInputEditor = SmallDialogInputEditor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../../../internal/utils\");\nconst EventHandler_1 = require(\"../../../internal/EventHandler\");\nconst dom_1 = require(\"../../../internal/dom\");\nconst input_value_handler_1 = require(\"./input-value-handler\");\nconst CLASSNAME = \"cheetah-grid__small-dialog-input\";\nconst INPUT_CLASSNAME = `${CLASSNAME}__input`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\nconst KEY_ENTER = 13;\nconst KEY_ESC = 27;\nfunction _focus(input, handler) {\n    const focus = () => {\n        input.focus();\n        const end = input.value.length;\n        try {\n            if (typeof input.selectionStart !== \"undefined\") {\n                input.selectionStart = end;\n                input.selectionEnd = end;\n                return;\n            }\n        }\n        catch (e) {\n            //ignore\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (document.selection) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const range = input.createTextRange();\n            range.collapse();\n            range.moveEnd(\"character\", end);\n            range.moveStart(\"character\", end);\n            range.select();\n        }\n    };\n    handler.tryWithOffEvents(input, \"blur\", () => {\n        focus();\n    });\n}\nfunction createDialogElement() {\n    require(\"@/columns/action/internal/SmallDialogInputElement.css\");\n    const element = dom_1.createElement(\"div\", {\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\n    });\n    const input = dom_1.createElement(\"input\", { classList: INPUT_CLASSNAME });\n    input.readOnly = true;\n    input.tabIndex = -1;\n    element.appendChild(input);\n    return element;\n}\nfunction bindProps(grid, dialog, input, editor) {\n    const { classList, helperText } = editor;\n    if (classList) {\n        dialog.classList.add(...classList);\n    }\n    if (helperText && typeof helperText !== \"function\") {\n        dialog.dataset.helperText = helperText;\n    }\n    setInputAttrs(editor, grid, input);\n}\nfunction unbindProps(_grid, dialog, input, editor) {\n    const { classList } = editor;\n    if (classList) {\n        dialog.classList.remove(...classList);\n    }\n    delete dialog.dataset.helperText;\n    input.type = \"\";\n}\nfunction setInputAttrs(editor, _grid, input) {\n    const { type } = editor;\n    input.type = type || \"\";\n}\nclass SmallDialogInputElement {\n    constructor() {\n        this._handler = new EventHandler_1.EventHandler();\n        this._dialog = createDialogElement();\n        this._input = this._dialog.querySelector(`.${INPUT_CLASSNAME}`);\n        this._bindDialogEvents();\n    }\n    static setInputAttrs(editor, grid, input) {\n        setInputAttrs(editor, grid, input);\n    }\n    dispose() {\n        const dialog = this._dialog;\n        this.detach();\n        this._handler.dispose();\n        delete this._dialog;\n        delete this._input;\n        this._beforePropEditor = null;\n        if (dialog.parentElement) {\n            dialog.parentElement.removeChild(dialog);\n        }\n    }\n    attach(grid, editor, col, row, value) {\n        const handler = this._handler;\n        const dialog = this._dialog;\n        const input = this._input;\n        if (this._beforePropEditor) {\n            unbindProps(grid, dialog, input, this._beforePropEditor);\n        }\n        delete dialog.dataset.errorMessage;\n        dialog.classList.remove(SHOWN_CLASSNAME);\n        dialog.classList.add(HIDDEN_CLASSNAME);\n        input.readOnly = true;\n        input.tabIndex = 0;\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n        dialog.style.top = `${rect.top.toFixed()}px`;\n        dialog.style.left = `${rect.left.toFixed()}px`;\n        dialog.style.width = `${rect.width.toFixed()}px`;\n        input.style.height = `${rect.height.toFixed()}px`;\n        element.appendChild(dialog);\n        input_value_handler_1.setInputValue(input, value);\n        input.style.font = grid.font || \"16px sans-serif\";\n        const activeData = { grid, col, row, editor };\n        this._onInputValue(input, activeData);\n        if (!utils_1.browser.IE) {\n            _focus(input, handler);\n        }\n        else {\n            // On the paste-event on IE, since it may not be focused, it will be delayed and focused.\n            setTimeout(() => _focus(input, handler));\n        }\n        dialog.classList.add(SHOWN_CLASSNAME);\n        dialog.classList.remove(HIDDEN_CLASSNAME);\n        input.readOnly = false;\n        bindProps(grid, dialog, input, editor);\n        this._activeData = activeData;\n        this._beforePropEditor = editor;\n        this._attaching = true;\n        setTimeout(() => {\n            delete this._attaching;\n        });\n    }\n    detach(gridFocus) {\n        if (this._isActive()) {\n            const dialog = this._dialog;\n            const input = this._input;\n            dialog.classList.remove(SHOWN_CLASSNAME);\n            dialog.classList.add(HIDDEN_CLASSNAME);\n            input.readOnly = true;\n            input.tabIndex = -1;\n            const { grid, col, row } = this._activeData;\n            const range = grid.getCellRange(col, row);\n            grid.invalidateCellRange(range);\n            if (gridFocus) {\n                grid.focus();\n            }\n        }\n        this._activeData = null;\n        this._beforeValue = null;\n    }\n    _doChangeValue() {\n        if (!this._isActive()) {\n            return false;\n        }\n        const input = this._input;\n        const { value } = input;\n        return utils_1.then(this._validate(value), (res) => {\n            if (res && value === input.value) {\n                const { grid, col, row } = this._activeData;\n                grid.doChangeValue(col, row, () => value);\n                return true;\n            }\n            return false;\n        });\n    }\n    _isActive() {\n        const dialog = this._dialog;\n        if (!dialog || !dialog.parentElement) {\n            return false;\n        }\n        if (!this._activeData) {\n            return false;\n        }\n        return true;\n    }\n    _bindDialogEvents() {\n        const handler = this._handler;\n        const dialog = this._dialog;\n        const input = this._input;\n        const stopPropagationOnly = (e) => e.stopPropagation(); // grid\n        handler.on(dialog, \"click\", stopPropagationOnly);\n        handler.on(dialog, \"dblclick\", stopPropagationOnly);\n        handler.on(dialog, \"mousedown\", stopPropagationOnly);\n        handler.on(dialog, \"touchstart\", stopPropagationOnly);\n        handler.on(input, \"compositionstart\", (_e) => {\n            input.classList.add(\"composition\");\n        });\n        handler.on(input, \"compositionend\", (_e) => {\n            input.classList.remove(\"composition\");\n            this._onInputValue(input);\n        });\n        const onKeyupAndPress = (_e) => {\n            if (input.classList.contains(\"composition\")) {\n                return;\n            }\n            this._onInputValue(input);\n        };\n        handler.on(input, \"keyup\", onKeyupAndPress);\n        handler.on(input, \"keypress\", onKeyupAndPress);\n        handler.on(input, \"keydown\", (e) => {\n            if (input.classList.contains(\"composition\")) {\n                return;\n            }\n            const keyCode = utils_1.event.getKeyCode(e);\n            if (keyCode === KEY_ESC) {\n                this.detach(true);\n                utils_1.event.cancel(e);\n            }\n            else if (keyCode === KEY_ENTER) {\n                this._onKeydownEnter(e);\n            }\n            else {\n                this._onInputValue(input);\n            }\n        });\n    }\n    _onKeydownEnter(e) {\n        if (this._attaching) {\n            return;\n        }\n        const input = this._input;\n        const { value } = input;\n        utils_1.then(this._doChangeValue(), (r) => {\n            var _a;\n            if (r && value === input.value) {\n                const grid = this._isActive() ? this._activeData.grid : null;\n                this.detach(true);\n                if ((_a = grid === null || grid === void 0 ? void 0 : grid.keyboardOptions) === null || _a === void 0 ? void 0 : _a.moveCellOnEnter) {\n                    grid.onKeyDownMove(e);\n                }\n            }\n        });\n        utils_1.event.cancel(e);\n    }\n    _onInputValue(input, activeData) {\n        const before = this._beforeValue;\n        const { value } = input;\n        if (before !== value) {\n            this._onInputValueChange(value, activeData);\n        }\n        this._beforeValue = value;\n    }\n    _onInputValueChange(after, activeData) {\n        activeData = (activeData || this._activeData);\n        const dialog = this._dialog;\n        const { grid, col, row, editor } = activeData;\n        if (typeof editor.helperText === \"function\") {\n            const helperText = editor.helperText(after, { grid, col, row });\n            if (helperText) {\n                dialog.dataset.helperText = helperText;\n            }\n            else {\n                delete dialog.dataset.helperText;\n            }\n        }\n        if (\"errorMessage\" in dialog.dataset) {\n            this._validate(after, true);\n        }\n    }\n    _validate(value, inputOnly) {\n        const dialog = this._dialog;\n        const input = this._input;\n        const { grid, col, row, editor } = this._activeData;\n        let message = \"\";\n        if (editor.inputValidator) {\n            message = editor.inputValidator(value, { grid, col, row });\n        }\n        return utils_1.then(message, (message) => {\n            if (!message && editor.validator && !inputOnly) {\n                message = editor.validator(value, { grid, col, row });\n            }\n            return utils_1.then(message, (message) => {\n                if (message && value === input.value) {\n                    dialog.dataset.errorMessage = message;\n                }\n                else {\n                    delete dialog.dataset.errorMessage;\n                }\n                return !message;\n            });\n        });\n    }\n}\nexports.SmallDialogInputElement = SmallDialogInputElement;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/* ms */\\n.cheetah-grid__small-dialog-input__input::-ms-clear {\\n\\tvisibility: hidden;\\n}\\n\\n@keyframes cheetah-grid__small-dialog-input--hidden-animation {\\n\\t0% {\\n\\t\\topacity: 1;\\n\\t}\\n\\t99% {\\n\\t\\topacity: 1;\\n\\t}\\n\\t100% {\\n\\t\\topacity: 0;\\n\\t}\\n}\\n.cheetah-grid__small-dialog-input {\\n\\tposition: absolute;\\n\\tbox-sizing: content-box;\\n\\tmargin: -1px auto auto -1px;\\n\\tborder-radius: 3px;\\n\\tbackground-color: #fafafa;\\n\\ttransition: padding 150ms ease-out, box-shadow 150ms ease-out;\\n}\\n.cheetah-grid__small-dialog-input--hidden {\\n\\tbox-shadow: none;\\n\\tpadding: 0;\\n\\tpointer-events: none;\\n\\tanimation: cheetah-grid__small-dialog-input--hidden-animation  150ms ease-out;\\n\\topacity: 0;\\n}\\n.cheetah-grid__small-dialog-input--shown {\\n\\tbox-shadow: 0 3px 1px -2px rgba(0, 0, 0, .2), 0 2px 2px 0 rgba(0, 0, 0, .14), 0 1px 5px 0 rgba(0, 0, 0, .12);\\n\\tpadding: 8px 24px;\\n}\\n.cheetah-grid__small-dialog-input__input {\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\tbox-sizing: border-box;\\n\\tpadding: 3px 2px 0 4px;\\n\\tborder: none;\\n\\tborder-bottom: solid 1px rgba(0, 0, 0, .87);\\n\\toutline: none;\\n\\tbackground-color: transparent;\\n\\ttransition: all 300ms ease-out;\\n}\\n.cheetah-grid__small-dialog-input__input:focus {\\n\\tborder-bottom: solid 1px #2196f3;\\n\\tbox-shadow: 0 1px 0 0 #2196f3;\\n}\\n.cheetah-grid__small-dialog-input::after {\\n\\tcontent: '';\\n\\tfont-family: Roboto;\\n\\tfont-size: 12px;\\n\\tfont-size: .75rem;\\n\\tmin-height: 1em;\\n\\tline-height: 1;\\n\\tdisplay: block;\\n\\twidth: 100%;\\n\\tpadding-top: 8px;\\n}\\n.cheetah-grid__small-dialog-input.helper-text--right-justified::after {\\n\\ttext-align: right;\\n}\\n.cheetah-grid__small-dialog-input[data-helper-text]::after {\\n\\tcontent: attr(data-helper-text);\\n\\tcolor: rgba(0, 0, 0, .87);\\n}\\n.cheetah-grid__small-dialog-input[data-error-message] input {\\n\\tborder-bottom: solid 1px #ff1744;\\n\\tbox-shadow: 0 1px 0 0 #ff1744;\\n}\\n.cheetah-grid__small-dialog-input[data-error-message]::after {\\n\\tcontent: attr(data-error-message);\\n\\tcolor: #ff1744;\\n\\ttext-align: left;\\n}\\n\", \"\"]);\n\n// exports\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\nexports.DrawGrid = DrawGrid_1.DrawGrid;\nconst DG_EVENT_TYPE_1 = require(\"./core/DG_EVENT_TYPE\");\nexports.EVENT_TYPE = DG_EVENT_TYPE_1.DG_EVENT_TYPE;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EventHandler_1 = require(\"./EventHandler\");\nconst utils_1 = require(\"./utils\");\nconst handler = new EventHandler_1.EventHandler();\nlet ratio = 1;\nfunction setRatio() {\n    if (utils_1.isNode) {\n        ratio = 1;\n    }\n    else {\n        ratio = Math.ceil(window.devicePixelRatio || 1);\n        if (ratio > 1 && ratio % 2 !== 0) {\n            ratio += 1;\n        }\n    }\n}\nsetRatio();\nif (!utils_1.isNode) {\n    handler.on(window, \"resize\", setRatio);\n}\nfunction transform(canvas) {\n    const ctx = canvas.getContext(\"2d\");\n    const { getAttribute, setAttribute } = canvas;\n    canvas.getAttribute = function (name) {\n        let result = getAttribute.call(this, name);\n        if (name === \"width\" || name === \"height\") {\n            result = `${Number(result) / ratio}`;\n        }\n        return result;\n    };\n    canvas.setAttribute = function (name, val) {\n        const wh = name === \"width\" || name === \"height\";\n        if (wh) {\n            val = `${Number(val) * ratio}`;\n        }\n        const result = setAttribute.call(this, name, val);\n        if (wh) {\n            ctx.scale(ratio, ratio);\n        }\n        return result;\n    };\n    Object.defineProperty(canvas, \"width\", {\n        get() {\n            return Number(canvas.getAttribute(\"width\"));\n        },\n        set: (val) => {\n            canvas.setAttribute(\"width\", `${Math.floor(val)}`);\n        },\n        configurable: true,\n        enumerable: true,\n    });\n    Object.defineProperty(canvas, \"height\", {\n        get() {\n            return Number(canvas.getAttribute(\"height\"));\n        },\n        set: (val) => {\n            canvas.setAttribute(\"height\", `${Math.floor(val)}`);\n        },\n        configurable: true,\n        enumerable: true,\n    });\n    const { drawImage } = ctx;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ctx.drawImage = function (img, ...args) {\n        if (img !== canvas || ratio === 1) {\n            return drawImage.call(this, img, ...args);\n        }\n        this.save();\n        try {\n            this.scale(1 / ratio, 1 / ratio);\n            if (args.length > 4) {\n                args[4] *= ratio;\n                args[5] *= ratio;\n            }\n            else {\n                args[0] *= ratio;\n                args[1] *= ratio;\n            }\n            return drawImage.call(this, img, ...args);\n        }\n        finally {\n            this.restore();\n        }\n    };\n    return canvas;\n}\nexports.transform = transform;\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/**\\n * core styles\\n */\\n.cheetah-grid .grid-scrollable {\\n\\theight: 100%;\\n\\twidth: 100%;\\n\\tposition: absolute;\\n\\toverflow: scroll;\\n}\\n.cheetah-grid .grid-scroll-end-point {\\n\\topacity: 0;\\n\\tposition: relative;\\n}\\n.cheetah-grid {\\n\\tposition: relative;\\n\\twidth: 100%;\\n\\theight: 100%;\\n}\\n.cheetah-grid > canvas {\\n\\tposition: absolute;\\n\\twidth: 0;\\n\\theight: 0;\\n}\\n.cheetah-grid .grid-focus-control {\\n\\tposition: relative !important;\\n\\twidth: 1px;\\n\\theight: 1px;\\n\\topacity: 0;\\n\\tpadding: 0;\\n\\tmargin: 0;\\n\\tbox-sizing: border-box;\\n\\tpointer-events: none;\\n\\tmax-width: 0;\\n\\tmax-height: 0;\\n\\tfloat: none !important;\\n}\\n.cheetah-grid input.grid-focus-control::-ms-clear {\\n\\tvisibility: hidden;\\n}\\n.cheetah-grid input.grid-focus-control.composition {\\n\\topacity: 1;\\n\\tmax-width: none;\\n\\tmax-height: none;\\n}\\n\", \"\"]);\n\n// exports\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst indexFirst = (arr, elm) => {\n    let low = 0;\n    let high = arr.length - 1;\n    while (low <= high) {\n        const i = Math.floor((low + high) / 2);\n        if (arr[i] === elm) {\n            return i;\n        }\n        else if (arr[i] > elm) {\n            high = i - 1;\n        }\n        else {\n            low = i + 1;\n        }\n    }\n    return high < 0 ? 0 : high;\n};\nclass NumberMap {\n    constructor() {\n        this._keys = [];\n        this._vals = {};\n        this._sorted = false;\n    }\n    put(key, value) {\n        if (!(key in this._vals)) {\n            this._keys.push(key);\n            this._sorted = false;\n        }\n        this._vals[key] = value;\n    }\n    get(key) {\n        return this._vals[key];\n    }\n    has(key) {\n        return this._vals[key] != null;\n    }\n    each(keyFrom, keyTo, fn) {\n        const { _keys: keys } = this;\n        const { length } = keys;\n        if (!this._sorted) {\n            keys.sort((a, b) => {\n                if (a < b) {\n                    return -1;\n                }\n                if (a > b) {\n                    return 1;\n                }\n                return 0;\n            });\n            this._sorted = true;\n        }\n        for (let i = indexFirst(keys, keyFrom); i < length; i++) {\n            const key = keys[i];\n            if (keyFrom <= key && key <= keyTo) {\n                fn(this.get(key), key);\n            }\n            else if (keyTo < key) {\n                return;\n            }\n        }\n    }\n}\nexports.NumberMap = NumberMap;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst style = __importStar(require(\"./style\"));\nconst EventHandler_1 = require(\"./EventHandler\");\nconst utils_1 = require(\"./utils\");\nconst MAX_SCROLL = utils_1.browser.heightLimit - 1000;\nclass Scrollable {\n    constructor() {\n        this._p = 1;\n        this._handler = new EventHandler_1.EventHandler();\n        this._scrollable = document.createElement(\"div\");\n        this._scrollable.classList.add(\"grid-scrollable\");\n        this._height = 0;\n        this._width = 0;\n        this._endPointElement = document.createElement(\"div\");\n        this._endPointElement.classList.add(\"grid-scroll-end-point\");\n        this._update();\n        this._scrollable.appendChild(this._endPointElement);\n        // const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\n        // this._handler.on(this._scrollable, mousewheelevt, (evt) => {\n        // const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\n        // const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\n        // this.scrollTop += delta < 0 ? point : -point;\n        // });\n    }\n    calcTop(top) {\n        const relativeTop = top - this.scrollTop;\n        return this._scrollable.scrollTop + relativeTop;\n    }\n    getElement() {\n        return this._scrollable;\n    }\n    setScrollSize(width, height) {\n        this._width = width;\n        this._height = height;\n        this._update();\n    }\n    get scrollWidth() {\n        return this._width;\n    }\n    set scrollWidth(width) {\n        this._width = width;\n        this._update();\n    }\n    get scrollHeight() {\n        return this._height;\n    }\n    set scrollHeight(height) {\n        this._height = height;\n        this._update();\n    }\n    get scrollLeft() {\n        return Math.max(Math.ceil(this._scrollable.scrollLeft), 0);\n    }\n    set scrollLeft(scrollLeft) {\n        this._scrollable.scrollLeft = scrollLeft;\n    }\n    get scrollTop() {\n        return Math.max(Math.ceil(this._scrollable.scrollTop / this._p), 0);\n    }\n    set scrollTop(scrollTop) {\n        this._scrollable.scrollTop = scrollTop * this._p;\n    }\n    onScroll(fn) {\n        this._handler.on(this._scrollable, \"scroll\", fn);\n    }\n    dispose() {\n        this._handler.dispose();\n    }\n    _update() {\n        let domHeight;\n        if (this._height > MAX_SCROLL) {\n            const sbSize = style.getScrollBarSize();\n            const { offsetHeight } = this._scrollable;\n            const vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\n            const rScrollRange = this._height - offsetHeight + sbSize;\n            this._p = vScrollRange / rScrollRange;\n            domHeight = MAX_SCROLL;\n        }\n        else {\n            this._p = 1;\n            domHeight = this._height;\n        }\n        this._endPointElement.style.top = `${domHeight.toFixed()}px`;\n        this._endPointElement.style.left = `${this._width.toFixed()}px`;\n    }\n}\nexports.Scrollable = Scrollable;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DataSource_1 = require(\"./DataSource\");\n/** @private */\nfunction _setFieldCache(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfCache, index, field, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n    const recCache = fCache[index] || (fCache[index] = new Map());\n    recCache.set(field, value);\n}\n/**\n * grid data source for caching Promise data\n *\n * @classdesc cheetahGrid.data.CachedDataSource\n * @memberof cheetahGrid.data\n */\nclass CachedDataSource extends DataSource_1.DataSource {\n    constructor(opt) {\n        super(opt);\n        this._rCache = {};\n        this._fCache = {};\n    }\n    static get EVENT_TYPE() {\n        return DataSource_1.DataSource.EVENT_TYPE;\n    }\n    static ofArray(array) {\n        return new CachedDataSource({\n            get: (index) => array[index],\n            length: array.length,\n            source: array,\n        });\n    }\n    getOriginal(index) {\n        if (this._rCache && this._rCache[index]) {\n            return this._rCache[index];\n        }\n        return super.getOriginal(index);\n    }\n    getOriginalField(index, field) {\n        const rowCache = this._fCache && this._fCache[index];\n        if (rowCache) {\n            const cache = rowCache.get(field);\n            if (cache) {\n                return cache;\n            }\n        }\n        return super.getOriginalField(index, field);\n    }\n    setOriginalField(index, field, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    value) {\n        const fCache = this._fCache;\n        if (fCache && fCache[index]) {\n            delete fCache[index]; // clear row cache\n        }\n        return super.setOriginalField(index, field, value);\n    }\n    clearCache() {\n        if (this._rCache) {\n            this._rCache = {};\n        }\n        if (this._fCache) {\n            this._fCache = {};\n        }\n    }\n    fieldPromiseCallBackInternal(index, field, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    value) {\n        _setFieldCache(this._fCache, index, field, value);\n    }\n    recordPromiseCallBackInternal(index, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    record) {\n        this._rCache[index] = record;\n    }\n    dispose() {\n        super.dispose();\n    }\n}\nexports.CachedDataSource = CachedDataSource;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../internal/utils\");\nconst DataSource_1 = require(\"./DataSource\");\nconst EventHandler_1 = require(\"../internal/EventHandler\");\n/** @private */\nclass DataSourceIterator {\n    constructor(dataSource) {\n        this._dataSource = dataSource;\n        this._curIndex = -1;\n        this._data = [];\n    }\n    hasNext() {\n        const next = this._curIndex + 1;\n        return this._dataSource.length > next;\n    }\n    next() {\n        const next = this._curIndex + 1;\n        const data = this._getIndexData(next);\n        this._curIndex = next;\n        return data;\n    }\n    movePrev() {\n        this._curIndex--;\n    }\n    _getIndexData(index, nest) {\n        const dataSource = this._dataSource;\n        const data = this._data;\n        if (index < data.length) {\n            return data[index];\n        }\n        if (dataSource.length <= index) {\n            return undefined;\n        }\n        const record = this._dataSource.get(index);\n        data[index] = record;\n        if (utils_1.isPromise(record)) {\n            record.then((val) => {\n                data[index] = val;\n            });\n            if (!nest) {\n                for (let i = 1; i <= 100; i++) {\n                    this._getIndexData(index + i, true);\n                }\n            }\n        }\n        return record;\n    }\n}\n/** @private */\nclass FilterData {\n    constructor(dc, original, filter) {\n        this._cancel = false;\n        this._owner = dc;\n        this._dataSourceItr = new DataSourceIterator(original);\n        this._filter = filter;\n        this._filterdList = [];\n        this._queues = [];\n    }\n    get(index) {\n        if (this._cancel) {\n            return undefined;\n        }\n        const filterdList = this._filterdList;\n        if (index < filterdList.length) {\n            return filterdList[index];\n        }\n        const queues = this._queues;\n        const indexQueue = queues[index];\n        if (indexQueue) {\n            return indexQueue;\n        }\n        return queues[index] || this._findIndex(index);\n    }\n    cancel() {\n        this._cancel = true;\n    }\n    _findIndex(index) {\n        if (window.Promise) {\n            const timeout = Date.now() + 100;\n            let count = 0;\n            return this._findIndexWithTimeout(index, () => {\n                count++;\n                if (count >= 100) {\n                    count = 0;\n                    return timeout < Date.now();\n                }\n                return false;\n            });\n        }\n        return this._findIndexWithTimeout(index, () => false);\n    }\n    _findIndexWithTimeout(index, testTimeout) {\n        const filterdList = this._filterdList;\n        const filter = this._filter;\n        const dataSourceItr = this._dataSourceItr;\n        const queues = this._queues;\n        while (dataSourceItr.hasNext()) {\n            if (this._cancel) {\n                return undefined;\n            }\n            const record = dataSourceItr.next();\n            if (utils_1.isPromise(record)) {\n                dataSourceItr.movePrev();\n                const queue = record.then((_value) => {\n                    queues[index] = null;\n                    return this.get(index);\n                });\n                queues[index] = queue;\n                return queue;\n            }\n            if (filter(record)) {\n                filterdList.push(record);\n                if (index < filterdList.length) {\n                    return filterdList[index];\n                }\n            }\n            if (testTimeout()) {\n                const promise = new Promise((resolve) => {\n                    setTimeout(() => {\n                        resolve();\n                    }, 300);\n                });\n                const queue = promise.then(() => {\n                    queues[index] = null;\n                    return this.get(index);\n                });\n                queues[index] = queue;\n                return queue;\n            }\n        }\n        const dc = this._owner;\n        dc.length = filterdList.length;\n        return undefined;\n    }\n}\n/**\n * grid data source for filter\n *\n * @classdesc cheetahGrid.data.FilterDataSource\n * @memberof cheetahGrid.data\n */\nclass FilterDataSource extends DataSource_1.DataSource {\n    constructor(dataSource, filter) {\n        super(dataSource);\n        this._filterData = null;\n        this._dataSource = dataSource;\n        this.filter = filter;\n        const handler = (this._handler = new EventHandler_1.EventHandler());\n        handler.on(dataSource, DataSource_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\n            // reset\n            // eslint-disable-next-line no-self-assign\n            this.filter = this.filter;\n        });\n        utils_1.each(DataSource_1.DataSource.EVENT_TYPE, (type) => {\n            handler.on(dataSource, type, (...args) => this.fireListeners(type, ...args));\n        });\n    }\n    static get EVENT_TYPE() {\n        return DataSource_1.DataSource.EVENT_TYPE;\n    }\n    get filter() {\n        var _a;\n        return ((_a = this._filterData) === null || _a === void 0 ? void 0 : _a._filter) || null;\n    }\n    set filter(filter) {\n        if (this._filterData) {\n            this._filterData.cancel();\n        }\n        this._filterData = filter\n            ? new FilterData(this, this._dataSource, filter)\n            : null;\n        this.length = this._dataSource.length;\n    }\n    getOriginal(index) {\n        if (!this._filterData) {\n            return super.getOriginal(index);\n        }\n        return this._filterData.get(index);\n    }\n    sort(field, order) {\n        return this._dataSource.sort(field, order);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    get source() {\n        return this._dataSource.source;\n    }\n    get dataSource() {\n        return this._dataSource;\n    }\n    dispose() {\n        this._handler.dispose();\n        super.dispose();\n    }\n}\nexports.FilterDataSource = FilterDataSource;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst action = __importStar(require(\"./header/action\"));\nexports.action = action;\nconst style = __importStar(require(\"./header/style\"));\nexports.style = style;\nconst type = __importStar(require(\"./header/type\"));\nexports.type = type;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst actionBind_1 = require(\"./actionBind\");\nconst BaseAction_1 = require(\"./BaseAction\");\nconst animate_1 = require(\"../../internal/animate\");\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\nconst utils_1 = require(\"../../internal/utils\");\nconst CHECK_HEADER_STATE_ID = symbolManager_1.getCheckHeaderStateId();\nfunction getState(grid) {\n    let state = grid[CHECK_HEADER_STATE_ID];\n    if (!state) {\n        state = { elapsed: {}, block: {} };\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\n    }\n    return state;\n}\nclass CheckHeaderAction extends BaseAction_1.BaseAction {\n    clone() {\n        return new CheckHeaderAction(this);\n    }\n    bindGridEvent(grid, cellId) {\n        const state = getState(grid);\n        const action = ({ col, row }) => {\n            const range = grid.getCellRange(col, row);\n            const cellKey = `${range.start.col}:${range.start.row}`;\n            if (this.disabled || state.block[cellKey]) {\n                return;\n            }\n            const checked = grid.getHeaderValue(range.start.col, range.start.row);\n            grid.setHeaderValue(range.start.col, range.start.row, !checked);\n            const onChange = () => {\n                // checkbox animation\n                animate_1.animate(200, (point) => {\n                    if (point === 1) {\n                        delete state.elapsed[cellKey];\n                    }\n                    else {\n                        state.elapsed[cellKey] = point;\n                    }\n                    grid.invalidateCellRange(range);\n                });\n            };\n            onChange();\n        };\n        return [\n            ...actionBind_1.bindCellClickAction(grid, cellId, {\n                action,\n                mouseOver: (e) => {\n                    if (this.disabled) {\n                        return false;\n                    }\n                    state.mouseActiveCell = {\n                        col: e.col,\n                        row: e.row,\n                    };\n                    const range = grid.getCellRange(e.col, e.row);\n                    grid.invalidateCellRange(range);\n                    return true;\n                },\n                mouseOut: (e) => {\n                    delete state.mouseActiveCell;\n                    const range = grid.getCellRange(e.col, e.row);\n                    grid.invalidateCellRange(range);\n                },\n            }),\n            ...actionBind_1.bindCellKeyAction(grid, cellId, {\n                action,\n            }),\n        ];\n    }\n}\nexports.CheckHeaderAction = CheckHeaderAction;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseAction_1 = require(\"./BaseAction\");\nconst actionBind_1 = require(\"./actionBind\");\nclass SortHeaderAction extends BaseAction_1.BaseAction {\n    constructor(option = {}) {\n        var _a;\n        super(option);\n        this._sort = (_a = option.sort) !== null && _a !== void 0 ? _a : true;\n    }\n    get sort() {\n        return this._sort;\n    }\n    set sort(sort) {\n        this._sort = sort;\n        this.onChangeDisabledInternal();\n    }\n    clone() {\n        return new SortHeaderAction(this);\n    }\n    _executeSort(newState, grid) {\n        if (typeof this._sort === \"function\") {\n            this._sort({\n                order: newState.order || \"asc\",\n                col: newState.col,\n                row: newState.row,\n                grid,\n            });\n        }\n        else {\n            const fieldRow = Math.min(grid.recordRowCount - 1, newState.row) + grid.frozenRowCount;\n            const field = grid.getField(newState.col, fieldRow);\n            if (field == null) {\n                return;\n            }\n            grid.dataSource.sort(field, newState.order || \"asc\");\n        }\n    }\n    bindGridEvent(grid, cellId) {\n        function isTarget(col, row) {\n            return grid.getLayoutCellId(col, row) === cellId;\n        }\n        const action = (cell) => {\n            if (this.disabled) {\n                return;\n            }\n            const state = grid.sortState;\n            let newState;\n            const range = grid.getCellRange(cell.col, cell.row);\n            if (isTarget(state.col, cell.row)) {\n                newState = {\n                    col: range.start.col,\n                    row: range.start.row,\n                    order: state.order === \"asc\" ? \"desc\" : \"asc\",\n                };\n            }\n            else {\n                newState = {\n                    col: range.start.col,\n                    row: range.start.row,\n                    order: \"asc\",\n                };\n            }\n            grid.sortState = newState;\n            this._executeSort(newState, grid);\n            grid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\n        };\n        return [\n            ...actionBind_1.bindCellClickAction(grid, cellId, {\n                action,\n                mouseOver: (_e) => {\n                    if (this.disabled) {\n                        return false;\n                    }\n                    return true;\n                },\n            }),\n        ];\n    }\n}\nexports.SortHeaderAction = SortHeaderAction;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseStyle_1 = require(\"./BaseStyle\");\nlet defaultStyle;\nclass StdBaseStyle extends BaseStyle_1.BaseStyle {\n    constructor(style = {}) {\n        super(style);\n        this._textAlign = style.textAlign || \"left\";\n        this._textBaseline = style.textBaseline || \"middle\";\n    }\n    static get DEFAULT() {\n        return defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\n    }\n    get textAlign() {\n        return this._textAlign;\n    }\n    set textAlign(textAlign) {\n        this._textAlign = textAlign;\n        this.doChangeStyle();\n    }\n    get textBaseline() {\n        return this._textBaseline;\n    }\n    set textBaseline(textBaseline) {\n        this._textBaseline = textBaseline;\n        this.doChangeStyle();\n    }\n    clone() {\n        return new StdBaseStyle(this);\n    }\n}\nexports.StdBaseStyle = StdBaseStyle;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../../internal/utils\");\nconst BaseHeader_1 = require(\"./BaseHeader\");\nconst CheckHeaderStyle_1 = require(\"../style/CheckHeaderStyle\");\nconst symbolManager_1 = require(\"../../internal/symbolManager\");\nconst CHECK_HEADER_STATE_ID = symbolManager_1.getCheckHeaderStateId();\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getState(grid) {\n    let state = grid[CHECK_HEADER_STATE_ID];\n    if (!state) {\n        state = { elapsed: {}, block: {} };\n        utils_1.obj.setReadonly(grid, CHECK_HEADER_STATE_ID, state);\n    }\n    return state;\n}\nclass CheckHeader extends BaseHeader_1.BaseHeader {\n    get StyleClass() {\n        return CheckHeaderStyle_1.CheckHeaderStyle;\n    }\n    clone() {\n        return new CheckHeader(this);\n    }\n    drawInternal(value, context, style, helper, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    grid, { drawCellBase }) {\n        const { textAlign, textBaseline, borderColor, checkBgColor, uncheckBgColor, bgColor, color, font, textOverflow, } = style;\n        if (bgColor) {\n            drawCellBase({\n                bgColor,\n            });\n        }\n        const { col, row } = context;\n        const range = grid.getCellRange(col, row);\n        const cellKey = `${range.start.col}:${range.start.row}`;\n        const { elapsed: { [cellKey]: elapsed }, } = getState(grid);\n        const checked = grid.getHeaderValue(range.start.col, range.start.row);\n        const opt = {\n            textAlign,\n            textBaseline,\n            borderColor,\n            checkBgColor,\n            uncheckBgColor,\n        };\n        if (utils_1.isDef(elapsed)) {\n            opt.animElapsedTime = elapsed;\n        }\n        const inlineCheck = helper.buildCheckBoxInline(!!checked, context, opt);\n        helper.text([inlineCheck, value], context, {\n            textAlign,\n            textBaseline,\n            color,\n            font,\n            textOverflow,\n        });\n    }\n}\nexports.CheckHeader = CheckHeader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseHeader_1 = require(\"./BaseHeader\");\nconst Style_1 = require(\"../style/Style\");\nclass Header extends BaseHeader_1.BaseHeader {\n    get StyleClass() {\n        return Style_1.Style;\n    }\n    drawInternal(value, context, style, helper, _grid, { drawCellBase }) {\n        const { textAlign, textBaseline, color, font, bgColor, textOverflow, } = style;\n        if (bgColor) {\n            drawCellBase({\n                bgColor,\n            });\n        }\n        helper.text(value, context, {\n            textAlign,\n            textBaseline,\n            color,\n            font,\n            textOverflow,\n        });\n    }\n}\nexports.Header = Header;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseHeader_1 = require(\"./BaseHeader\");\nconst MultilineTextHeaderStyle_1 = require(\"../style/MultilineTextHeaderStyle\");\nclass MultilineTextHeader extends BaseHeader_1.BaseHeader {\n    get StyleClass() {\n        return MultilineTextHeaderStyle_1.MultilineTextHeaderStyle;\n    }\n    clone() {\n        return new MultilineTextHeader(this);\n    }\n    drawInternal(value, context, style, helper, _grid, { drawCellBase }) {\n        const { textAlign, textBaseline, color, font, bgColor, lineHeight, autoWrapText, lineClamp, textOverflow, } = style;\n        if (bgColor) {\n            drawCellBase({\n                bgColor,\n            });\n        }\n        const multilines = value\n            .replace(/\\r?\\n/g, \"\\n\")\n            .replace(/\\r/g, \"\\n\")\n            .split(\"\\n\");\n        helper.testFontLoad(font, value, context);\n        helper.multilineText(multilines, context, {\n            textAlign,\n            textBaseline,\n            color,\n            font,\n            lineHeight,\n            autoWrapText,\n            lineClamp,\n            textOverflow,\n        });\n    }\n}\nexports.MultilineTextHeader = MultilineTextHeader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../../internal/utils\");\nconst BaseHeader_1 = require(\"./BaseHeader\");\nconst SortHeaderStyle_1 = require(\"../style/SortHeaderStyle\");\nconst canvases_1 = require(\"../../internal/canvases\");\nclass SortHeader extends BaseHeader_1.BaseHeader {\n    get StyleClass() {\n        return SortHeaderStyle_1.SortHeaderStyle;\n    }\n    drawInternal(value, context, style, helper, grid, { drawCellBase }) {\n        const { textAlign, textBaseline = \"middle\", color, bgColor, font, textOverflow, sortArrowColor, } = style;\n        if (bgColor) {\n            drawCellBase({\n                bgColor,\n            });\n        }\n        const state = grid.sortState;\n        let order = undefined;\n        const { col, row } = context;\n        const range = grid.getCellRange(col, row);\n        if (utils_1.cellInRange(range, state.col, state.row)) {\n            ({ order } = state);\n        }\n        const ctx = context.getContext();\n        const arrowSize = canvases_1.getFontSize(ctx, font).width * 1.2;\n        helper.text(value, context, {\n            textAlign,\n            textBaseline,\n            color,\n            font,\n            textOverflow,\n            icons: [\n                {\n                    name: utils_1.isDef(order)\n                        ? order === \"asc\"\n                            ? \"arrow_downward\"\n                            : \"arrow_upward\"\n                        : undefined,\n                    width: arrowSize,\n                    color: helper.getColor(sortArrowColor || helper.theme.header.sortArrowColor, col, row, ctx) || \"rgba(0, 0, 0, 0.38)\",\n                },\n            ],\n        });\n    }\n}\nexports.SortHeader = SortHeader;\n","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\"/></svg>\n\t@ material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\n\t*/\n\td: 'M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path fill=\"#010101\" d=\"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\"/></svg>\n\t@ material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\n\t*/\n\td: 'M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\"/></svg>\n\t@ material-design-icons/image/svg/production/ic_edit_48px.svg\n\t*/\n\td: 'M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\"/></svg>\n\t@ material-design-icons/content/svg/production/ic_add_48px.svg\n\t*/\n\td: 'M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>\n\t@ material-design-icons/toggle/svg/production/ic_star_24px.svg\n\t*/\n\td: 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons/toggle/svg/production/ic_star_border_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons/toggle/svg/production/ic_star_half_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst icons_1 = require(\"./plugins/icons\");\nconst themes_1 = require(\"./plugins/themes\");\nfunction register(obj, name, value) {\n    const old = obj[name];\n    obj[name] = value;\n    return old;\n}\nfunction registers(obj, values) {\n    for (const k in values) {\n        obj[k] = values[k];\n    }\n}\nfunction theme(name, theme) {\n    if (theme != null) {\n        return register(themes_1.themes, name, theme);\n    }\n    else {\n        return themes_1.themes[name];\n    }\n}\nexports.theme = theme;\nfunction icon(name, icon) {\n    if (icon != null) {\n        return register(icons_1.icons, name, icon);\n    }\n    else {\n        return icons_1.icons[name];\n    }\n}\nexports.icon = icon;\nfunction icons(icons) {\n    return registers(icons_1.icons, icons);\n}\nexports.icons = icons;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../internal/utils\");\nconst symbolManager_1 = require(\"../internal/symbolManager\");\n//private symbol\nconst _ = symbolManager_1.get();\nfunction getProp(obj, superObj, names, defNames) {\n    return (utils_1.getChainSafe(obj, ...names) ||\n        utils_1.getChainSafe(superObj, ...names) ||\n        (defNames && utils_1.getChainSafe(obj, ...defNames)) ||\n        (defNames && utils_1.getChainSafe(superObj, ...defNames)));\n}\nclass Theme {\n    constructor(obj, superTheme) {\n        this._checkbox = null;\n        this._radioButton = null;\n        this._button = null;\n        this._header = null;\n        this[_] = {\n            obj,\n            superTheme: superTheme,\n        };\n    }\n    get font() {\n        const { obj, superTheme } = this[_];\n        return getProp(obj, superTheme, [\"font\"]);\n    }\n    get underlayBackgroundColor() {\n        const { obj, superTheme } = this[_];\n        return getProp(obj, superTheme, [\"underlayBackgroundColor\"]);\n    }\n    // color\n    get color() {\n        const { obj, superTheme } = this[_];\n        return getProp(obj, superTheme, [\"color\"]);\n    }\n    get frozenRowsColor() {\n        const { obj, superTheme } = this[_];\n        return getProp(obj, superTheme, [\"frozenRowsColor\"], [\"color\"]);\n    }\n    // background\n    get defaultBgColor() {\n        const { obj, superTheme } = this[_];\n        return getProp(obj, superTheme, [\"defaultBgColor\"]);\n    }\n    get frozenRowsBgColor() {\n        const { obj, superTheme } = this[_];\n        return getProp(obj, superTheme, [\"frozenRowsBgColor\"], [\"defaultBgColor\"]);\n    }\n    get selectionBgColor() {\n        const { obj, superTheme } = this[_];\n        return getProp(obj, superTheme, [\"selectionBgColor\"], [\"defaultBgColor\"]);\n    }\n    get highlightBgColor() {\n        if (this.hasProperty([\"highlightBgColor\"])) {\n            const { obj, superTheme } = this[_];\n            return getProp(obj, superTheme, [\"highlightBgColor\"]);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return (args) => {\n            const color = args.row < args.grid.frozenRowCount\n                ? this.frozenRowsBgColor\n                : this.defaultBgColor;\n            if (typeof color === \"function\") {\n                return color(args);\n            }\n            return color;\n        };\n    }\n    // border\n    get borderColor() {\n        const { obj, superTheme } = this[_];\n        return getProp(obj, superTheme, [\"borderColor\"]);\n    }\n    get frozenRowsBorderColor() {\n        const { obj, superTheme } = this[_];\n        return getProp(obj, superTheme, [\"frozenRowsBorderColor\"], [\"borderColor\"]);\n    }\n    get highlightBorderColor() {\n        const { obj, superTheme } = this[_];\n        return getProp(obj, superTheme, [\"highlightBorderColor\"], [\"borderColor\"]);\n    }\n    get checkbox() {\n        const { obj, superTheme } = this[_];\n        return (this._checkbox ||\n            (this._checkbox = {\n                get uncheckBgColor() {\n                    return getProp(obj, superTheme, [\"checkbox\", \"uncheckBgColor\"], [\"defaultBgColor\"]);\n                },\n                get checkBgColor() {\n                    return getProp(obj, superTheme, [\"checkbox\", \"checkBgColor\"], [\"borderColor\"]);\n                },\n                get borderColor() {\n                    return getProp(obj, superTheme, [\"checkbox\", \"borderColor\"], [\"borderColor\"]);\n                },\n            }));\n    }\n    get radioButton() {\n        const { obj, superTheme } = this[_];\n        return (this._radioButton ||\n            (this._radioButton = {\n                get checkColor() {\n                    return getProp(obj, superTheme, [\"radioButton\", \"checkColor\"], [\"color\"]);\n                },\n                get uncheckBorderColor() {\n                    return getProp(obj, superTheme, [\"radioButton\", \"uncheckBorderColor\"], [\"borderColor\"]);\n                },\n                get checkBorderColor() {\n                    return getProp(obj, superTheme, [\"radioButton\", \"checkBorderColor\"], [\"borderColor\"]);\n                },\n                get uncheckBgColor() {\n                    return getProp(obj, superTheme, [\"radioButton\", \"uncheckBgColor\"], [\"defaultBgColor\"]);\n                },\n                get checkBgColor() {\n                    return getProp(obj, superTheme, [\"radioButton\", \"checkBgColor\"], [\"defaultBgColor\"]);\n                },\n            }));\n    }\n    get button() {\n        const { obj, superTheme } = this[_];\n        return (this._button ||\n            (this._button = {\n                get color() {\n                    return getProp(obj, superTheme, [\"button\", \"color\"], [\"color\"]);\n                },\n                get bgColor() {\n                    return getProp(obj, superTheme, [\"button\", \"bgColor\"], [\"defaultBgColor\"]);\n                },\n            }));\n    }\n    get header() {\n        const { obj, superTheme } = this[_];\n        return (this._header ||\n            (this._header = {\n                get sortArrowColor() {\n                    return getProp(obj, superTheme, [\"header\", \"sortArrowColor\"], [\"color\"]);\n                },\n            }));\n    }\n    hasProperty(names) {\n        const { obj, superTheme } = this[_];\n        return hasThemeProperty(obj, names) || hasThemeProperty(superTheme, names);\n    }\n    extends(obj) {\n        return new Theme(obj, this);\n    }\n}\nexports.Theme = Theme;\nfunction hasThemeProperty(obj, names) {\n    if (obj instanceof Theme) {\n        return obj.hasProperty(names);\n    }\n    else {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let o = obj;\n        if (!o) {\n            return false;\n        }\n        for (let index = 0; index < names.length; index++) {\n            const name = names[index];\n            o = o[name];\n            if (!o) {\n                return false;\n            }\n        }\n        return !!o;\n    }\n}\n","\"use strict\";\n/*eslint no-bitwise:0*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction DEFAULT_BG_COLOR(args) {\n    const { row, grid } = args;\n    if (row < grid.frozenRowCount) {\n        return \"#FFF\";\n    }\n    const index = grid.getRecordIndexByRow(row);\n    if (!(index & 1)) {\n        return \"#FFF\";\n    }\n    else {\n        return \"#F6F6F6\";\n    }\n}\nconst cacheLinearGradient = {};\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\n    let stop;\n    const stopsKey = [];\n    for (stop in colorStops) {\n        stopsKey.push(`${stop}@${colorStops[stop]}`);\n    }\n    const key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(\",\")}`;\n    const ret = cacheLinearGradient[key];\n    if (ret) {\n        return ret;\n    }\n    const grad = context.createLinearGradient(left, top, left, bottom);\n    for (stop in colorStops) {\n        grad.addColorStop(Number(stop), colorStops[stop]);\n    }\n    return (cacheLinearGradient[key] = grad);\n}\nfunction FROZEN_ROWS_BG_COLOR(args) {\n    const { col, grid, grid: { frozenRowCount }, context, } = args;\n    const { left, top } = grid.getCellRelativeRect(col, 0);\n    const { bottom } = grid.getCellRelativeRect(col, frozenRowCount - 1);\n    return getLinearGradient(context, left, top, left, bottom, {\n        0: \"#FFF\",\n        1: \"#D3D3D3\",\n    });\n}\n/**\n * basic theme\n * @name BASIC\n * @memberof cheetahGrid.themes.choices\n */\nexports.default = {\n    color: \"#000\",\n    // frozenRowsColor: '#000',\n    defaultBgColor: DEFAULT_BG_COLOR,\n    frozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\n    selectionBgColor: \"#CCE0FF\",\n    borderColor: \"#000\",\n    // frozenRowsBorderColor: '#000',\n    highlightBorderColor: \"#5E9ED6\",\n    checkbox: {\n        uncheckBgColor: \"#FFF\",\n        checkBgColor: \"rgb(76, 73, 72)\",\n        borderColor: \"#000\",\n    },\n    radioButton: {\n        checkColor: \"rgb(76, 73, 72)\",\n        checkBorderColor: \"#000\",\n        uncheckBorderColor: \"#000\",\n        uncheckBgColor: \"#FFF\",\n        checkBgColor: \"#FFF\",\n    },\n    button: {\n        color: \"#FFF\",\n        bgColor: \"#2196F3\",\n    },\n    header: {\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\n    },\n    underlayBackgroundColor: \"#F6F6F6\",\n};\n","\"use strict\";\n/*eslint no-bitwise:0*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\n    const { row, grid: { frozenRowCount }, } = args;\n    if (frozenRowCount - 1 === row) {\n        return [\"#f2f2f2\", \"#f2f2f2\", \"#ccc7c7\", \"#f2f2f2\"];\n    }\n    else {\n        return [\"#f2f2f2\"];\n    }\n}\nfunction BORDER_COLOR(args) {\n    const { col, row, grid } = args;\n    const { colCount, frozenColCount, recordRowCount } = grid;\n    let top = \"#ccc7c7\";\n    let bottom = \"#ccc7c7\";\n    if (recordRowCount > 1) {\n        const startRow = grid.getRecordStartRowByRecordIndex(grid.getRecordIndexByRow(row));\n        const endRow = startRow + recordRowCount - 1;\n        if (startRow !== row) {\n            top = null;\n        }\n        if (endRow !== row) {\n            bottom = null;\n        }\n    }\n    if (frozenColCount - 1 === col) {\n        return [top, \"#f2f2f2\", bottom, null];\n    }\n    if (colCount - 1 === col) {\n        return [top, \"#f2f2f2\", bottom, null];\n    }\n    return [top, null, bottom, null];\n}\n/**\n * material design theme\n * @name MATERIAL_DESIGN\n * @memberof cheetahGrid.themes.choices\n */\nexports.default = {\n    color: \"rgba(0, 0, 0, 0.87)\",\n    frozenRowsColor: \"rgba(0, 0, 0, 0.54)\",\n    defaultBgColor: \"#FFF\",\n    // frozenRowsBgColor: '#FFF',\n    selectionBgColor: \"#CCE0FF\",\n    borderColor: BORDER_COLOR,\n    frozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\n    highlightBorderColor: \"#5E9ED6\",\n    checkbox: {\n        // uncheckBgColor: '#FFF',\n        checkBgColor: \"rgb(76, 73, 72)\",\n        borderColor: \"rgba(0, 0, 0, 0.26)\",\n    },\n    radioButton: {\n        checkColor: \"rgb(76, 73, 72)\",\n        checkBorderColor: \"rgb(76, 73, 72)\",\n        uncheckBorderColor: \"rgb(189, 189, 189)\",\n    },\n    button: {\n        color: \"#FFF\",\n        bgColor: \"#2196F3\",\n    },\n    header: {\n        sortArrowColor: \"rgba(0, 0, 0, 0.38)\",\n    },\n    underlayBackgroundColor: \"#FFF\",\n};\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst canvashelper = __importStar(require(\"./tools/canvashelper\"));\nexports.canvashelper = canvashelper;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst icons = __importStar(require(\"./internal/icons\"));\nconst themes = __importStar(require(\"./themes\"));\nconst data_1 = require(\"./data\");\nconst layout_map_1 = require(\"./list-grid/layout-map\");\nconst DrawGrid_1 = require(\"./core/DrawGrid\");\nconst utils_1 = require(\"./internal/utils\");\nconst style_1 = require(\"./columns/style\");\nconst GridCanvasHelper_1 = require(\"./GridCanvasHelper\");\nconst style_2 = require(\"./header/style\");\nconst LG_EVENT_TYPE_1 = require(\"./list-grid/LG_EVENT_TYPE\");\nconst MessageHandler_1 = require(\"./columns/message/MessageHandler\");\nconst Rect_1 = require(\"./internal/Rect\");\nconst TooltipHandler_1 = require(\"./tooltip/TooltipHandler\");\n//protected symbol\nconst symbolManager_1 = require(\"./internal/symbolManager\");\nconst paste_utils_1 = require(\"./internal/paste-utils\");\n/** @private */\nconst _ = symbolManager_1.getProtectedSymbol();\n//private methods\n/** @private */\nfunction _getCellRange(grid, col, row) {\n    return grid[_].layoutMap.getCellRange(col, row);\n}\n/** @private */\nfunction _updateRect(grid, col, row, context) {\n    context.setRectFilter((rect) => {\n        let { left, right, top, bottom } = rect;\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = _getCellRange(grid, col, row);\n        for (let c = col - 1; c >= startCol; c--) {\n            left -= grid.getColWidth(c);\n        }\n        for (let c = col + 1; c <= endCol; c++) {\n            right += grid.getColWidth(c);\n        }\n        for (let r = row - 1; r >= startRow; r--) {\n            top -= grid.getRowHeight(r);\n        }\n        for (let r = row + 1; r <= endRow; r++) {\n            bottom += grid.getRowHeight(r);\n        }\n        return Rect_1.Rect.bounds(left, top, right, bottom);\n    });\n}\n/** @private */\nfunction _getCellValue(grid, col, row) {\n    if (row < grid[_].layoutMap.headerRowCount) {\n        return grid[_].layoutMap.getHeader(col, row).caption;\n    }\n    else {\n        const { field } = grid[_].layoutMap.getBody(col, row);\n        return _getField(grid, field, row);\n    }\n}\n/** @private */\nfunction _setCellValue(grid, col, row, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) {\n    if (row < grid[_].layoutMap.headerRowCount) {\n        // nop\n        return false;\n    }\n    else {\n        const { field } = grid[_].layoutMap.getBody(col, row);\n        if (field == null) {\n            return false;\n        }\n        const index = _getRecordIndexByRow(grid, row);\n        return grid[_].dataSource.setField(index, field, value);\n    }\n}\n/** @private */\nfunction _getCellMessage(grid, col, row) {\n    if (row < grid[_].layoutMap.headerRowCount) {\n        return null;\n    }\n    else {\n        const { message } = grid[_].layoutMap.getBody(col, row);\n        if (!message) {\n            return null;\n        }\n        return _getField(grid, message, row);\n    }\n}\nfunction _getCellIcon0(grid, icon, row) {\n    if (Array.isArray(icon)) {\n        return icon.map((i) => _getCellIcon0(grid, i, row));\n    }\n    if (!utils_1.obj.isObject(icon) || typeof icon === \"function\") {\n        return _getField(grid, icon, row);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const retIcon = {};\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const iconOpt = icon;\n    icons.iconPropKeys.forEach((k) => {\n        if (iconOpt[k]) {\n            const f = _getField(grid, iconOpt[k], row);\n            if (utils_1.isDef(f)) {\n                retIcon[k] = f;\n            }\n            else {\n                if (!_hasField(grid, iconOpt[k], row)) {\n                    retIcon[k] = iconOpt[k];\n                }\n            }\n        }\n    });\n    return retIcon;\n}\n/** @private */\nfunction _getCellIcon(grid, col, row) {\n    const { icon } = grid[_].layoutMap.getBody(col, row);\n    if (icon == null) {\n        return null;\n    }\n    return _getCellIcon0(grid, icon, row);\n}\n/** @private */\nfunction _getField(grid, field, row) {\n    if (!utils_1.isDef(field)) {\n        return null;\n    }\n    if (row < grid[_].layoutMap.headerRowCount) {\n        return null;\n    }\n    else {\n        const index = _getRecordIndexByRow(grid, row);\n        return grid[_].dataSource.getField(index, field);\n    }\n}\n/** @private */\nfunction _hasField(grid, field, row) {\n    if (!utils_1.isDef(field)) {\n        return false;\n    }\n    if (row < grid[_].layoutMap.headerRowCount) {\n        return false;\n    }\n    else {\n        const index = _getRecordIndexByRow(grid, row);\n        return grid[_].dataSource.hasField(index, field);\n    }\n}\n/** @private */\nfunction _onDrawValue(grid, cellValue, context, { col, row }, style, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ndraw) {\n    const helper = grid[_].gridCanvasHelper;\n    const drawCellBg = ({ bgColor, } = {}) => {\n        const fillOpt = {\n            fillColor: bgColor,\n        };\n        //cell\n        helper.fillCellWithState(context, fillOpt);\n    };\n    const drawCellBorder = () => {\n        if (context.col === grid.frozenColCount - 1) {\n            //\n            const rect = context.getRect();\n            helper.drawWithClip(context, (ctx) => {\n                const borderColor = context.row >= grid.frozenRowCount\n                    ? helper.theme.borderColor\n                    : helper.theme.frozenRowsBorderColor;\n                const borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\n                if (borderColors[1]) {\n                    ctx.lineWidth = 1;\n                    ctx.strokeStyle = borderColors[1];\n                    ctx.beginPath();\n                    ctx.moveTo(rect.right - 2.5, rect.top);\n                    ctx.lineTo(rect.right - 2.5, rect.bottom);\n                    ctx.stroke();\n                }\n            });\n        }\n        _borderWithState(grid, helper, context);\n    };\n    const drawCellBase = ({ bgColor, } = {}) => {\n        drawCellBg({ bgColor });\n        drawCellBorder();\n    };\n    const info = {\n        getRecord: () => grid.getRowRecord(row),\n        getIcon: () => _getCellIcon(grid, col, row),\n        getMessage: () => _getCellMessage(grid, col, row),\n        messageHandler: grid[_].messageHandler,\n        style,\n        drawCellBase,\n        drawCellBg,\n        drawCellBorder,\n    };\n    return draw(cellValue, info, context, grid);\n}\n/** @private */\nfunction _borderWithState(grid, helper, context) {\n    const { col, row } = context;\n    const sel = grid.selection.select;\n    const { layoutMap } = grid[_];\n    const rect = context.getRect();\n    const option = {};\n    const selRecordIndex = layoutMap.getRecordIndexByRow(sel.row);\n    const selId = layoutMap.getCellId(sel.col, sel.row);\n    function isSelectCell(col, row) {\n        if (col === sel.col && row === sel.row) {\n            return true;\n        }\n        return (selId != null &&\n            layoutMap.getCellId(col, row) === selId &&\n            layoutMap.getRecordIndexByRow(row) === selRecordIndex);\n    }\n    //\n    if (isSelectCell(col, row)) {\n        option.borderColor = helper.theme.highlightBorderColor;\n        option.lineWidth = 2;\n        helper.border(context, option);\n    }\n    else {\n        option.lineWidth = 1;\n        // header color\n        const isFrozenCell = grid.isFrozenCell(col, row);\n        if (isFrozenCell === null || isFrozenCell === void 0 ? void 0 : isFrozenCell.row) {\n            option.borderColor = helper.theme.frozenRowsBorderColor;\n        }\n        helper.border(context, option);\n        //\n        if (col > 0 && isSelectCell(col - 1, row)) {\n            //\n            helper.drawBorderWithClip(context, (ctx) => {\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\n                if (borderColors[1]) {\n                    ctx.lineWidth = 1;\n                    ctx.strokeStyle = borderColors[1];\n                    ctx.beginPath();\n                    ctx.moveTo(rect.left - 0.5, rect.top);\n                    ctx.lineTo(rect.left - 0.5, rect.bottom);\n                    ctx.stroke();\n                }\n            });\n        }\n        else if (row > 0 && isSelectCell(col, row - 1)) {\n            //\n            helper.drawBorderWithClip(context, (ctx) => {\n                const borderColors = helper.toBoxArray(helper.getColor(helper.theme.highlightBorderColor, sel.col, sel.row, ctx));\n                if (borderColors[0]) {\n                    ctx.lineWidth = 1;\n                    ctx.strokeStyle = borderColors[0];\n                    ctx.beginPath();\n                    ctx.moveTo(rect.left, rect.top - 0.5);\n                    ctx.lineTo(rect.right, rect.top - 0.5);\n                    ctx.stroke();\n                }\n            });\n        }\n    }\n}\n/** @private */\nfunction _refreshHeader(grid) {\n    var _a;\n    const protectedSpace = grid[_];\n    if (protectedSpace.headerEvents) {\n        protectedSpace.headerEvents.forEach((id) => grid.unlisten(id));\n    }\n    const headerEvents = (grid[_].headerEvents = []);\n    headerEvents.forEach((id) => grid.unlisten(id));\n    let layoutMap;\n    if (protectedSpace.layout &&\n        (!Array.isArray(protectedSpace.layout) || protectedSpace.layout.length > 0)) {\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.MultiLayoutMap(protectedSpace.layout);\n    }\n    else {\n        layoutMap = protectedSpace.layoutMap = new layout_map_1.SimpleHeaderLayoutMap((_a = protectedSpace.header) !== null && _a !== void 0 ? _a : []);\n    }\n    layoutMap.headerObjects.forEach((cell) => {\n        const ids = cell.headerType.bindGridEvent(grid, cell.id);\n        headerEvents.push(...ids);\n        if (cell.style) {\n            if (cell.style instanceof style_2.BaseStyle) {\n                const id = cell.style.listen(style_2.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\n                    grid.invalidate();\n                });\n                headerEvents.push(id);\n            }\n        }\n        if (cell.action) {\n            const ids = cell.action.bindGridEvent(grid, cell.id);\n            headerEvents.push(...ids);\n        }\n    });\n    layoutMap.columnObjects.forEach((col) => {\n        if (col.action) {\n            const ids = col.action.bindGridEvent(grid, col.id);\n            headerEvents.push(...ids);\n        }\n        if (col.columnType) {\n            const ids = col.columnType.bindGridEvent(grid, col.id);\n            headerEvents.push(...ids);\n        }\n        if (col.style) {\n            if (col.style instanceof style_1.BaseStyle) {\n                const id = col.style.listen(style_1.BaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\n                    grid.invalidate();\n                });\n                headerEvents.push(id);\n            }\n        }\n    });\n    for (let col = 0; col < layoutMap.columnWidths.length; col++) {\n        const column = layoutMap.columnWidths[col];\n        const { width, minWidth, maxWidth } = column;\n        if (width && (width > 0 || typeof width === \"string\")) {\n            grid.setColWidth(col, width);\n        }\n        if (minWidth && (minWidth > 0 || typeof minWidth === \"string\")) {\n            grid.setMinColWidth(col, minWidth);\n        }\n        if (maxWidth && (maxWidth > 0 || typeof maxWidth === \"string\")) {\n            grid.setMaxColWidth(col, maxWidth);\n        }\n    }\n    const { headerRowHeight } = grid[_];\n    for (let row = 0; row < layoutMap.headerRowCount; row++) {\n        const height = Array.isArray(headerRowHeight)\n            ? headerRowHeight[row]\n            : headerRowHeight;\n        if (height && height > 0) {\n            grid.setRowHeight(row, height);\n        }\n    }\n    grid.colCount = layoutMap.colCount;\n    _refreshRowCount(grid);\n    grid.frozenRowCount = layoutMap.headerRowCount;\n}\n/** @private */\nfunction _refreshRowCount(grid) {\n    const { layoutMap } = grid[_];\n    grid.rowCount =\n        grid[_].dataSource.length * layoutMap.bodyRowCount +\n            layoutMap.headerRowCount;\n}\n/** @private */\nfunction _tryWithUpdateDataSource(grid, fn) {\n    const { dataSourceEventIds } = grid[_];\n    if (dataSourceEventIds) {\n        dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\n    }\n    fn(grid);\n    grid[_].dataSourceEventIds = [\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\n            _refreshRowCount(grid);\n            grid.invalidate();\n        }),\n        grid[_].handler.on(grid[_].dataSource, data_1.DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\n            grid.invalidate();\n        }),\n    ];\n}\n/** @private */\nfunction _setRecords(grid, records = []) {\n    _tryWithUpdateDataSource(grid, () => {\n        grid[_].records = records;\n        const newDataSource = (grid[_].dataSource = data_1.CachedDataSource.ofArray(records));\n        grid.addDisposable(newDataSource);\n    });\n}\n/** @private */\nfunction _setDataSource(grid, dataSource) {\n    _tryWithUpdateDataSource(grid, () => {\n        if (dataSource) {\n            if (dataSource instanceof data_1.DataSource) {\n                grid[_].dataSource = dataSource;\n            }\n            else {\n                const newDataSource = (grid[_].dataSource = new data_1.CachedDataSource(dataSource));\n                grid.addDisposable(newDataSource);\n            }\n        }\n        else {\n            grid[_].dataSource = data_1.DataSource.EMPTY;\n        }\n        grid[_].records = null;\n    });\n}\n/** @private */\nfunction _getRecordIndexByRow(grid, row) {\n    const { layoutMap } = grid[_];\n    return layoutMap.getRecordIndexByRow(row);\n}\n/** @private */\nfunction _onRangePaste(text, test = () => true) {\n    var _a;\n    const { layoutMap } = this[_];\n    const selectionRange = this.selection.range;\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\n    const values = paste_utils_1.parsePasteRangeBoxValues(text);\n    const pasteRowCount = Math.min(Math.max(end.row - start.row + 1, values.rowCount), this.rowCount - start.row);\n    const pasteColCount = Math.min(Math.max(end.col - start.col + 1, values.colCount), this.colCount - start.col);\n    let hasEditable = false;\n    const actionColumnsBox = [];\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\n        const actionColumnsRow = [];\n        actionColumnsBox.push(actionColumnsRow);\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\n            actionColumnsRow[offsetCol] = body;\n            if (!hasEditable && ((_a = body.action) === null || _a === void 0 ? void 0 : _a.editable)) {\n                hasEditable = true;\n            }\n        }\n    }\n    if (!hasEditable) {\n        return;\n    }\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\n    const startRowOffset = start.row - startRow;\n    let duplicate = {};\n    let actionRow = startRowOffset;\n    let valuesRow = 0;\n    for (let offsetRow = 0; offsetRow < pasteRowCount; offsetRow++) {\n        let valuesCol = 0;\n        for (let offsetCol = 0; offsetCol < pasteColCount; offsetCol++) {\n            const { action, id } = actionColumnsBox[actionRow][offsetCol];\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\n                duplicate[id] = true;\n                const col = start.col + offsetCol;\n                const row = start.row + offsetRow;\n                const cellValue = values.getCellValue(valuesCol, valuesRow);\n                utils_1.then(this.getRowRecord(row), (record) => {\n                    utils_1.then(_getCellValue(this, col, row), (oldValue) => {\n                        if (test({\n                            grid: this,\n                            record: record,\n                            col,\n                            row,\n                            value: cellValue,\n                            oldValue,\n                        })) {\n                            action.onPasteCellRangeBox(this, { col, row }, cellValue);\n                        }\n                    });\n                });\n            }\n            valuesCol++;\n            if (valuesCol >= values.colCount) {\n                valuesCol = 0;\n            }\n        }\n        actionRow++;\n        if (actionRow >= layoutMap.bodyRowCount) {\n            actionRow = 0;\n            duplicate = {};\n        }\n        valuesRow++;\n        if (valuesRow >= values.rowCount) {\n            valuesRow = 0;\n        }\n    }\n    const newEnd = {\n        col: start.col + pasteColCount - 1,\n        row: start.row + pasteRowCount - 1,\n    };\n    this.selection.range = {\n        start,\n        end: newEnd,\n    };\n    this.invalidateCellRange(this.selection.range);\n}\n/** @private */\nfunction _onRangeDelete() {\n    var _a;\n    const { layoutMap } = this[_];\n    const selectionRange = this.selection.range;\n    const { start } = this.getCellRange(selectionRange.start.col, selectionRange.start.row);\n    const { end } = this.getCellRange(selectionRange.end.col, selectionRange.end.row);\n    const deleteRowCount = Math.min(end.row - start.row + 1, this.rowCount - start.row);\n    const deleteColCount = Math.min(end.col - start.col + 1, this.colCount - start.col);\n    let hasEditable = false;\n    const actionColumnsBox = [];\n    for (let bodyRow = 0; bodyRow < layoutMap.bodyRowCount; bodyRow++) {\n        const actionColumnsRow = [];\n        actionColumnsBox.push(actionColumnsRow);\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\n            const body = layoutMap.getBody(start.col + offsetCol, bodyRow + layoutMap.headerRowCount);\n            actionColumnsRow[offsetCol] = body;\n            if (!hasEditable && ((_a = body.action) === null || _a === void 0 ? void 0 : _a.editable)) {\n                hasEditable = true;\n            }\n        }\n    }\n    if (!hasEditable) {\n        return;\n    }\n    const startRow = layoutMap.getRecordStartRowByRecordIndex(layoutMap.getRecordIndexByRow(start.row));\n    const startRowOffset = start.row - startRow;\n    let duplicate = {};\n    let actionRow = startRowOffset;\n    for (let offsetRow = 0; offsetRow < deleteRowCount; offsetRow++) {\n        for (let offsetCol = 0; offsetCol < deleteColCount; offsetCol++) {\n            const { action, id } = actionColumnsBox[actionRow][offsetCol];\n            if (!duplicate[id] && (action === null || action === void 0 ? void 0 : action.editable)) {\n                duplicate[id] = true;\n                const col = start.col + offsetCol;\n                const row = start.row + offsetRow;\n                utils_1.then(this.getRowRecord(row), (_record) => {\n                    utils_1.then(_getCellValue(this, col, row), (_oldValue) => {\n                        action.onDeleteCellRangeBox(this, { col, row });\n                    });\n                });\n            }\n        }\n        actionRow++;\n        if (actionRow >= layoutMap.bodyRowCount) {\n            actionRow = 0;\n            duplicate = {};\n        }\n    }\n    this.invalidateCellRange(selectionRange);\n}\n/** @private */\nfunction adjustListGridOption(options) {\n    delete options.frozenRowCount;\n    delete options.colCount;\n    delete options.rowCount;\n    return options;\n}\n/**\n * ListGrid\n * @classdesc cheetahGrid.ListGrid\n * @memberof cheetahGrid\n */\nclass ListGrid extends DrawGrid_1.DrawGrid {\n    /**\n     * constructor\n     *\n     * @constructor\n     * @param options Constructor options\n     */\n    constructor(options = {}) {\n        var _a;\n        super(adjustListGridOption(options));\n        this.disabled = false;\n        this.readOnly = false;\n        const protectedSpace = this[_];\n        protectedSpace.header = options.header || [];\n        protectedSpace.layout = options.layout || [];\n        protectedSpace.headerRowHeight = options.headerRowHeight || [];\n        if (options.dataSource) {\n            _setDataSource(this, options.dataSource);\n        }\n        else {\n            _setRecords(this, options.records);\n        }\n        protectedSpace.allowRangePaste = (_a = options.allowRangePaste) !== null && _a !== void 0 ? _a : false;\n        _refreshHeader(this);\n        protectedSpace.sortState = {\n            col: -1,\n            row: -1,\n            order: undefined,\n        };\n        protectedSpace.gridCanvasHelper = new GridCanvasHelper_1.GridCanvasHelper(this);\n        protectedSpace.theme = themes.of(options.theme);\n        protectedSpace.messageHandler = new MessageHandler_1.MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\n        protectedSpace.tooltipHandler = new TooltipHandler_1.TooltipHandler(this);\n        this.invalidate();\n        protectedSpace.handler.on(window, \"resize\", () => {\n            this.updateSize();\n            this.updateScroll();\n            this.invalidate();\n        });\n    }\n    static get EVENT_TYPE() {\n        return LG_EVENT_TYPE_1.LG_EVENT_TYPE;\n    }\n    /**\n     * Dispose the grid instance.\n     * @returns {void}\n     */\n    dispose() {\n        const protectedSpace = this[_];\n        protectedSpace.messageHandler.dispose();\n        protectedSpace.tooltipHandler.dispose();\n        super.dispose();\n    }\n    /**\n     * Gets the define of the header.\n     */\n    get header() {\n        return this[_].header;\n    }\n    /**\n     * Sets the define of the header with the given data.\n     * <pre>\n     * column options\n     * -----\n     * caption: header caption\n     * field: field name\n     * width: column width\n     * minWidth: column min width\n     * maxWidth: column max width\n     * icon: icon name\n     * message: message key name\n     * columnType: column type\n     * action: column action\n     * style: column style\n     * headerType: header type\n     * headerStyle: header style\n     * headerAction: header action\n     * headerField: header field name\n     * sort: define sort setting\n     * -----\n     *\n     * multiline header\n     * -----\n     * caption: header caption\n     * columns: columns define\n     * -----\n     * </pre>\n     */\n    set header(header) {\n        this[_].header = header;\n        _refreshHeader(this);\n    }\n    /**\n     * Gets the define of the layout.\n     */\n    get layout() {\n        return this[_].layout;\n    }\n    /**\n     * Sets the define of the layout with the given data.\n     */\n    set layout(layout) {\n        this[_].layout = layout;\n        _refreshHeader(this);\n    }\n    /**\n     * Get the row count per record\n     */\n    get recordRowCount() {\n        return this[_].layoutMap.bodyRowCount;\n    }\n    /**\n     * Get the records.\n     */\n    get records() {\n        return this[_].records || null;\n    }\n    /**\n     * Set the records from given\n     */\n    set records(records) {\n        if (records == null) {\n            return;\n        }\n        _setRecords(this, records);\n        _refreshRowCount(this);\n        this.invalidate();\n    }\n    /**\n     * Get the data source.\n     */\n    get dataSource() {\n        return this[_].dataSource;\n    }\n    /**\n     * Set the data source from given\n     */\n    set dataSource(dataSource) {\n        _setDataSource(this, dataSource);\n        _refreshRowCount(this);\n        this.invalidate();\n    }\n    /**\n     * Get the theme.\n     */\n    get theme() {\n        return this[_].theme;\n    }\n    /**\n     * Set the theme from given\n     */\n    set theme(theme) {\n        this[_].theme = themes.of(theme);\n        this.invalidate();\n    }\n    /**\n     * If set to true to allow pasting of ranges.\n     */\n    get allowRangePaste() {\n        return this[_].allowRangePaste;\n    }\n    set allowRangePaste(allowRangePaste) {\n        this[_].allowRangePaste = allowRangePaste;\n    }\n    /**\n     * Get the font definition as a string.\n     * @override\n     */\n    get font() {\n        return super.font || this[_].gridCanvasHelper.theme.font;\n    }\n    /**\n     * Set the font definition with the given string.\n     * @override\n     */\n    set font(font) {\n        super.font = font;\n    }\n    /**\n     * Get the background color of the underlay.\n     * @override\n     */\n    get underlayBackgroundColor() {\n        return (super.underlayBackgroundColor ||\n            this[_].gridCanvasHelper.theme.underlayBackgroundColor);\n    }\n    /**\n     * Set the background color of the underlay.\n     * @override\n     */\n    set underlayBackgroundColor(underlayBackgroundColor) {\n        super.underlayBackgroundColor = underlayBackgroundColor;\n    }\n    /**\n     * Get the sort state.\n     */\n    get sortState() {\n        return this[_].sortState;\n    }\n    /**\n     * Sets the sort state.\n     * If `null` to set, the sort state is initialized.\n     */\n    set sortState(sortState) {\n        const oldState = this.sortState;\n        let oldField;\n        if (oldState.col >= 0 && oldState.row >= 0) {\n            oldField = this.getHeaderField(oldState.col, oldState.row);\n        }\n        const newState = (this[_].sortState = utils_1.isDef(sortState)\n            ? sortState\n            : {\n                col: -1,\n                row: -1,\n                order: undefined,\n            });\n        let newField;\n        if (newState.col >= 0 && newState.row >= 0) {\n            newField = this.getHeaderField(newState.col, newState.row);\n        }\n        // bind header value\n        if (utils_1.isDef(oldField) && oldField !== newField) {\n            this.setHeaderValue(oldState.col, oldState.row, undefined);\n        }\n        if (utils_1.isDef(newField)) {\n            this.setHeaderValue(newState.col, newState.row, newState.order);\n        }\n    }\n    /**\n     * Get the header values.\n     */\n    get headerValues() {\n        return this[_].headerValues || (this[_].headerValues = new Map());\n    }\n    /**\n     * Sets the header values.\n     */\n    set headerValues(headerValues) {\n        this[_].headerValues = headerValues || new Map();\n    }\n    /**\n     * Get the field of the given column index.\n     * @param  {number} col The column index.\n     * @param  {number} row The row index.\n     * @return {*} The field object.\n     */\n    getField(col, row) {\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).field;\n    }\n    /**\n     * Get the column define of the given column index.\n     * @param  {number} col The column index.\n     * @param  {number} row The row index.\n     * @return {*} The column define object.\n     */\n    getColumnDefine(col, row) {\n        return this[_].layoutMap.getBody(col, row !== null && row !== void 0 ? row : this[_].layoutMap.headerRowCount).define;\n    }\n    getColumnType(col, row) {\n        return this[_].layoutMap.getBody(col, row).columnType;\n    }\n    /**\n     * Get the header field of the given header cell.\n     * @param  {number} col The column index.\n     * @param  {number} row The header row index.\n     * @return {*} The field object.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getHeaderField(col, row) {\n        const hd = this[_].layoutMap.getHeader(col, row);\n        return hd.field;\n    }\n    /**\n     * Get the header define of the given header cell.\n     * @param  {number} col The column index.\n     * @param  {number} row The header row index.\n     * @return {*} The header define object.\n     */\n    getHeaderDefine(col, row) {\n        const hd = this[_].layoutMap.getHeader(col, row);\n        return hd.define;\n    }\n    /**\n     * Get the record of the given row index.\n     * @param  {number} row The row index.\n     * @return {object} The record.\n     */\n    getRowRecord(row) {\n        if (row < this[_].layoutMap.headerRowCount) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return undefined;\n        }\n        else {\n            return this[_].dataSource.get(_getRecordIndexByRow(this, row));\n        }\n    }\n    /**\n     * Get the record index of the given row index.\n     * @param  {number} row The row index.\n     */\n    getRecordIndexByRow(row) {\n        return _getRecordIndexByRow(this, row);\n    }\n    /**\n     * Gets the row index starting at the given record index.\n     * @param  {number} index The record index.\n     */\n    getRecordStartRowByRecordIndex(index) {\n        return this[_].layoutMap.getRecordStartRowByRecordIndex(index);\n    }\n    /**\n     * Get the column index of the given field.\n     * @param  {*} field The field.\n     * @return {number} The column index.\n     * @deprecated use `getCellRangeByField` instead\n     */\n    getColumnIndexByField(field) {\n        var _a;\n        const range = this.getCellRangeByField(field, 0);\n        return (_a = range === null || range === void 0 ? void 0 : range.start.col) !== null && _a !== void 0 ? _a : null;\n    }\n    /**\n     * Get the column index of the given field.\n     * @param  {*} field The field.\n     * @param  {number} index The record index\n     * @return {number} The column index.\n     */\n    getCellRangeByField(field, index) {\n        const { layoutMap } = this[_];\n        const colObj = layoutMap.columnObjects.find((col) => col.field === field);\n        if (colObj) {\n            const layoutRange = layoutMap.getBodyLayoutRangeById(colObj.id);\n            const startRow = layoutMap.getRecordStartRowByRecordIndex(index);\n            return {\n                start: {\n                    col: layoutRange.start.col,\n                    row: startRow + layoutRange.start.row,\n                },\n                end: {\n                    col: layoutRange.end.col,\n                    row: startRow + layoutRange.end.row,\n                },\n            };\n        }\n        return null;\n    }\n    /**\n     * Focus the cell.\n     * @param  {*} field The field.\n     * @param  {number} index The record index\n     * @return {void}\n     */\n    focusGridCell(field, index) {\n        var _a;\n        const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = this.selection.range;\n        const newFocus = (_a = this.getCellRangeByField(field, index)) === null || _a === void 0 ? void 0 : _a.start;\n        if (newFocus == null) {\n            return;\n        }\n        this.focusCell(newFocus.col, newFocus.row);\n        this.selection.select = newFocus;\n        this.invalidateGridRect(startCol, startRow, endCol, endRow);\n        this.invalidateCell(newFocus.col, newFocus.row);\n    }\n    /**\n     * Scroll to where cell is visible.\n     * @param  {*} field The field.\n     * @param  {number} index The record index\n     * @return {void}\n     */\n    makeVisibleGridCell(field, index) {\n        var _a, _b, _c;\n        const cell = (_a = this.getCellRangeByField(field, index)) === null || _a === void 0 ? void 0 : _a.start;\n        this.makeVisibleCell((_b = cell === null || cell === void 0 ? void 0 : cell.col) !== null && _b !== void 0 ? _b : 0, (_c = cell === null || cell === void 0 ? void 0 : cell.row) !== null && _c !== void 0 ? _c : this[_].layoutMap.headerRowCount);\n    }\n    getGridCanvasHelper() {\n        return this[_].gridCanvasHelper;\n    }\n    /**\n     * Get cell range information for a given cell.\n     * @param {number} col column index of the cell\n     * @param {number} row row index of the cell\n     * @returns {object} cell range info\n     */\n    getCellRange(col, row) {\n        return _getCellRange(this, col, row);\n    }\n    /**\n     * Get header range information for a given cell.\n     * @param {number} col column index of the cell\n     * @param {number} row row index of the cell\n     * @returns {object} cell range info\n     * @deprecated use `getCellRange` instead\n     */\n    getHeaderCellRange(col, row) {\n        return this.getCellRange(col, row);\n    }\n    getCopyCellValue(col, row, range) {\n        var _a;\n        const cellRange = _getCellRange(this, col, row);\n        const startCol = range\n            ? Math.max(range.start.col, cellRange.start.col)\n            : cellRange.start.col;\n        const startRow = range\n            ? Math.max(range.start.row, cellRange.start.row)\n            : cellRange.start.row;\n        if (startCol !== col || startRow !== row) {\n            return \"\";\n        }\n        const value = _getCellValue(this, col, row);\n        if (row < this[_].layoutMap.headerRowCount) {\n            return value;\n        }\n        const columnData = this[_].layoutMap.getBody(col, row);\n        return ((_a = columnData.columnType.getCopyCellValue(value, this, { col, row })) !== null && _a !== void 0 ? _a : value);\n    }\n    onDrawCell(col, row, context) {\n        const { layoutMap } = this[_];\n        let draw;\n        let style;\n        if (row < layoutMap.headerRowCount) {\n            const hd = layoutMap.getHeader(col, row);\n            draw = hd.headerType.onDrawCell;\n            ({ style } = hd);\n            _updateRect(this, col, row, context);\n        }\n        else {\n            const column = layoutMap.getBody(col, row);\n            draw = column.columnType.onDrawCell;\n            ({ style } = column);\n            _updateRect(this, col, row, context);\n        }\n        const cellValue = _getCellValue(this, col, row);\n        return _onDrawValue(this, cellValue, context, { col, row }, style, draw);\n    }\n    doGetCellValue(col, row, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    valueCallback) {\n        if (row < this[_].layoutMap.headerRowCount) {\n            // nop\n            return false;\n        }\n        else {\n            const value = _getCellValue(this, col, row);\n            if (utils_1.isPromise(value)) {\n                //\n                return false;\n            }\n            valueCallback(value);\n        }\n        return true;\n    }\n    doChangeValue(col, row, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    changeValueCallback) {\n        if (row < this[_].layoutMap.headerRowCount) {\n            // nop\n            return false;\n        }\n        else {\n            const record = this.getRowRecord(row);\n            if (utils_1.isPromise(record)) {\n                //\n                return false;\n            }\n            const before = _getCellValue(this, col, row);\n            if (utils_1.isPromise(before)) {\n                //\n                return false;\n            }\n            const after = changeValueCallback(before);\n            if (after === undefined) {\n                return false;\n            }\n            return utils_1.then(_setCellValue(this, col, row, after), (ret) => {\n                if (ret) {\n                    const { field } = this[_].layoutMap.getBody(col, row);\n                    this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, {\n                        col,\n                        row,\n                        record: record,\n                        field: field,\n                        value: after,\n                        oldValue: before,\n                    });\n                }\n                return ret;\n            });\n        }\n    }\n    doSetPasteValue(text, test) {\n        _onRangePaste.call(this, text, test);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getHeaderValue(col, row) {\n        const field = this.getHeaderField(col, row);\n        return this.headerValues.get(field);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    setHeaderValue(col, row, newValue) {\n        const field = this.getHeaderField(col, row);\n        const oldValue = this.headerValues.get(field);\n        this.headerValues.set(field, newValue);\n        this.fireListeners(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_HEADER_VALUE, {\n            col,\n            row,\n            field,\n            value: newValue,\n            oldValue,\n        });\n    }\n    getLayoutCellId(col, row) {\n        return this[_].layoutMap.getCellId(col, row);\n    }\n    bindEventsInternal() {\n        const grid = this;\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\n            const range = _getCellRange(this, e.col, e.row);\n            const { start: { col: startCol, row: startRow }, end: { col: endCol, row: endRow }, } = range;\n            if (startCol !== endCol || startRow !== endRow) {\n                this.invalidateCellRange(range);\n            }\n        });\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.PASTE_CELL, (e) => {\n            if (!this[_].allowRangePaste) {\n                return;\n            }\n            const { start, end } = this.selection.range;\n            if (!e.multi && utils_1.cellEquals(start, end)) {\n                return;\n            }\n            const { layoutMap } = this[_];\n            if (start.row < layoutMap.headerRowCount) {\n                return;\n            }\n            utils_1.event.cancel(e.event);\n            _onRangePaste.call(this, e.normalizeValue);\n        });\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.DELETE_CELL, (e) => {\n            const { start } = this.selection.range;\n            const { layoutMap } = this[_];\n            if (start.row < layoutMap.headerRowCount) {\n                return;\n            }\n            utils_1.event.cancel(e.event);\n            _onRangeDelete.call(this);\n        });\n    }\n    getMoveLeftColByKeyDownInternal({ col, row }) {\n        const { start: { col: startCol }, } = _getCellRange(this, col, row);\n        col = startCol;\n        return super.getMoveLeftColByKeyDownInternal({ col, row });\n    }\n    getMoveRightColByKeyDownInternal({ col, row, }) {\n        const { end: { col: endCol }, } = _getCellRange(this, col, row);\n        col = endCol;\n        return super.getMoveRightColByKeyDownInternal({ col, row });\n    }\n    getMoveUpRowByKeyDownInternal({ col, row }) {\n        const { start: { row: startRow }, } = _getCellRange(this, col, row);\n        row = startRow;\n        return super.getMoveUpRowByKeyDownInternal({ col, row });\n    }\n    getMoveDownRowByKeyDownInternal({ col, row }) {\n        const { end: { row: endRow }, } = _getCellRange(this, col, row);\n        row = endRow;\n        return super.getMoveDownRowByKeyDownInternal({ col, row });\n    }\n    getOffsetInvalidateCells() {\n        return 1;\n    }\n    getCopyRangeInternal(range) {\n        const { start } = this.getCellRange(range.start.col, range.start.row);\n        const { end } = this.getCellRange(range.end.col, range.end.row);\n        return { start, end };\n    }\n    fireListeners(type, ...event) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return super.fireListeners(type, ...event);\n    }\n}\nexports.ListGrid = ListGrid;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar simple_header_layout_1 = require(\"./internal/simple-header-layout\");\nexports.SimpleHeaderLayoutMap = simple_header_layout_1.SimpleHeaderLayoutMap;\nvar multi_layout_1 = require(\"./internal/multi-layout\");\nexports.MultiLayoutMap = multi_layout_1.MultiLayoutMap;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst columns = __importStar(require(\"../../../columns\"));\nconst headerAction = __importStar(require(\"../../../header/action\"));\nconst headerType = __importStar(require(\"../../../header/type\"));\nconst utils_1 = require(\"./utils\");\nlet seqId = 0;\nclass SimpleHeaderLayoutMap {\n    constructor(header) {\n        this.bodyRowCount = 1;\n        this._emptyDataCache = new utils_1.EmptyDataCache();\n        this._columns = [];\n        this._headerCellIds = [];\n        this._headerObjects = this._addHeaders(0, header, []);\n        this._headerObjectMap = this._headerObjects.reduce((o, e) => {\n            o[e.id] = e;\n            return o;\n        }, {});\n    }\n    get columnWidths() {\n        return this._columns;\n    }\n    get headerRowCount() {\n        return this._headerCellIds.length;\n    }\n    get colCount() {\n        return this._columns.length;\n    }\n    get headerObjects() {\n        return this._headerObjects;\n    }\n    get columnObjects() {\n        return this._columns;\n    }\n    getCellId(col, row) {\n        if (this.headerRowCount <= row) {\n            return this._columns[col].id;\n        }\n        //in header\n        return this._headerCellIds[row][col];\n    }\n    getHeader(col, row) {\n        const id = this.getCellId(col, row);\n        return (this._headerObjectMap[id] ||\n            this._emptyDataCache.getHeader(col, row));\n    }\n    getBody(col, _row) {\n        return this._columns[col] || this._emptyDataCache.getBody(col, 0);\n    }\n    getBodyLayoutRangeById(id) {\n        for (let col = 0; col < this.colCount; col++) {\n            if (id === this._columns[col].id) {\n                return {\n                    start: { col, row: 0 },\n                    end: { col, row: 0 },\n                };\n            }\n        }\n        throw new Error(`can not found body layout @id=${id}`);\n    }\n    getCellRange(col, row) {\n        const result = { start: { col, row }, end: { col, row } };\n        if (this.headerRowCount <= row) {\n            return result;\n        }\n        //in header\n        const id = this.getCellId(col, row);\n        for (let c = col - 1; c >= 0; c--) {\n            if (id !== this.getCellId(c, row)) {\n                break;\n            }\n            result.start.col = c;\n        }\n        for (let c = col + 1; c < this.colCount; c++) {\n            if (id !== this.getCellId(c, row)) {\n                break;\n            }\n            result.end.col = c;\n        }\n        for (let r = row - 1; r >= 0; r--) {\n            if (id !== this.getCellId(col, r)) {\n                break;\n            }\n            result.start.row = r;\n        }\n        for (let r = row + 1; r < this.headerRowCount; r++) {\n            if (id !== this.getCellId(col, r)) {\n                break;\n            }\n            result.end.row = r;\n        }\n        return result;\n    }\n    getRecordIndexByRow(row) {\n        if (row < this.headerRowCount) {\n            return -1;\n        }\n        else {\n            return row - this.headerRowCount;\n        }\n    }\n    getRecordStartRowByRecordIndex(index) {\n        return this.headerRowCount + index;\n    }\n    _addHeaders(row, header, roots) {\n        const results = [];\n        const rowCells = this._headerCellIds[row] || this._newRow(row);\n        header.forEach((hd) => {\n            const col = this._columns.length;\n            const id = seqId++;\n            const cell = {\n                id,\n                caption: hd.caption,\n                field: hd.headerField || hd.field,\n                style: hd.headerStyle,\n                headerType: headerType.ofCell(hd),\n                action: headerAction.ofCell(hd),\n                define: hd,\n            };\n            results[id] = cell;\n            rowCells[col] = id;\n            for (let r = row - 1; r >= 0; r--) {\n                this._headerCellIds[r][col] = roots[r];\n            }\n            if (hd.columns) {\n                this._addHeaders(row + 1, hd.columns, [\n                    ...roots,\n                    id,\n                ]).forEach((c) => results.push(c));\n            }\n            else {\n                const colDef = hd;\n                this._columns.push({\n                    id: seqId++,\n                    field: colDef.field,\n                    width: colDef.width,\n                    minWidth: colDef.minWidth,\n                    maxWidth: colDef.maxWidth,\n                    icon: colDef.icon,\n                    message: colDef.message,\n                    columnType: columns.type.of(colDef.columnType),\n                    action: columns.action.of(colDef.action),\n                    style: colDef.style,\n                    define: colDef,\n                });\n                for (let r = row + 1; r < this._headerCellIds.length; r++) {\n                    this._headerCellIds[r][col] = id;\n                }\n            }\n        });\n        return results;\n    }\n    _newRow(row) {\n        const newRow = (this._headerCellIds[row] = []);\n        if (!this._columns.length) {\n            return newRow;\n        }\n        const prev = this._headerCellIds[row - 1];\n        for (let col = 0; col < prev.length; col++) {\n            newRow[col] = prev[col];\n        }\n        return newRow;\n    }\n}\nexports.SimpleHeaderLayoutMap = SimpleHeaderLayoutMap;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst columns = __importStar(require(\"../../../columns\"));\nconst headerAction = __importStar(require(\"../../../header/action\"));\nconst headerType = __importStar(require(\"../../../header/type\"));\nconst utils_1 = require(\"./utils\");\nfunction normalizeLayout(layout) {\n    if (Array.isArray(layout)) {\n        return {\n            header: layout,\n            body: layout,\n        };\n    }\n    return layout;\n}\nlet seqId = 0;\nclass LayoutObjectGrid {\n    constructor(layout, transform) {\n        this.objects = [];\n        this.objectGrid = [];\n        this.objectMap = {};\n        this.columnCount = 0;\n        this.columnWidths = [];\n        layout.forEach((rowLayout, row) => {\n            let col = 0;\n            rowLayout.forEach((cell) => {\n                var _a, _b;\n                const id = seqId++;\n                const obj = transform(cell, id);\n                this.objects.push(obj);\n                this.objectMap[id] = obj;\n                col = this._findStartCell(col, row);\n                const rowSpan = Number((_a = cell.rowSpan) !== null && _a !== void 0 ? _a : 1);\n                const colSpan = Number((_b = cell.colSpan) !== null && _b !== void 0 ? _b : 1);\n                const endRow = row + rowSpan;\n                const endCol = col + colSpan;\n                for (let rowIndex = row; rowIndex < endRow; rowIndex++) {\n                    const objectGridRow = this._getObjectGridRow(rowIndex);\n                    for (let colIndex = col; colIndex < endCol; colIndex++) {\n                        objectGridRow[colIndex] = obj;\n                    }\n                }\n                if (colSpan === 1) {\n                    this._setWidthDataIfAbsent(col, cell);\n                }\n                this._useColumnIndex(endCol - 1);\n                col = endCol;\n            });\n        });\n    }\n    get rowCount() {\n        return this.objectGrid.length;\n    }\n    _findStartCell(col, row) {\n        const objectGridRow = this._getObjectGridRow(row);\n        for (let index = col; index < objectGridRow.length; index++) {\n            if (!objectGridRow[index]) {\n                return index;\n            }\n        }\n        return objectGridRow.length;\n    }\n    _getObjectGridRow(row) {\n        return this.objectGrid[row] || (this.objectGrid[row] = []);\n    }\n    _useColumnIndex(col) {\n        if (this.columnCount > col) {\n            return;\n        }\n        this.columnCount = col + 1;\n    }\n    _setWidthDataIfAbsent(col, cell) {\n        if (!this.columnWidths[col]) {\n            if (cell.width != null ||\n                cell.maxWidth != null ||\n                cell.minWidth != null) {\n                this.columnWidths[col] = {\n                    width: cell.width,\n                    maxWidth: cell.maxWidth,\n                    minWidth: cell.minWidth,\n                };\n            }\n        }\n    }\n}\nclass MultiLayoutMap {\n    constructor(layout) {\n        this._columnWidths = [];\n        this._emptyDataCache = new utils_1.EmptyDataCache();\n        const hbLayouut = normalizeLayout(layout);\n        const header = (this._header = new LayoutObjectGrid(hbLayouut.header, (hd, id) => {\n            return {\n                id,\n                caption: hd.caption,\n                field: hd.headerField || hd.field,\n                style: hd.headerStyle,\n                headerType: headerType.ofCell(hd),\n                action: headerAction.ofCell(hd),\n                define: hd,\n            };\n        }));\n        const body = (this._body = new LayoutObjectGrid(hbLayouut.body, (colDef, id) => {\n            return {\n                id,\n                field: colDef.field,\n                width: colDef.width,\n                minWidth: colDef.minWidth,\n                maxWidth: colDef.maxWidth,\n                icon: colDef.icon,\n                message: colDef.message,\n                columnType: columns.type.of(colDef.columnType),\n                action: columns.action.of(colDef.action),\n                style: colDef.style,\n                define: colDef,\n            };\n        }));\n        const columnCount = (this._columnCount = Math.max(header.columnCount, body.columnCount));\n        for (let col = 0; col < columnCount; col++) {\n            const widthDef = header.columnWidths[col] || body.columnWidths[col] || {};\n            this._columnWidths[col] = widthDef;\n        }\n    }\n    get columnWidths() {\n        return this._columnWidths;\n    }\n    get headerRowCount() {\n        return this._header.rowCount;\n    }\n    get bodyRowCount() {\n        return this._body.rowCount;\n    }\n    get colCount() {\n        return this._columnCount;\n    }\n    get headerObjects() {\n        return this._header.objects;\n    }\n    get columnObjects() {\n        return this._body.objects;\n    }\n    getCellId(col, row) {\n        var _a, _b, _c, _d;\n        if (this.headerRowCount <= row) {\n            const bodyRow = row - this.headerRowCount;\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\n            return (_b = (_a = this._body.objectGrid[bodyLayoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\n        }\n        //in header\n        return (_d = (_c = this._header.objectGrid[row]) === null || _c === void 0 ? void 0 : _c[col]) === null || _d === void 0 ? void 0 : _d.id;\n    }\n    getHeader(col, row) {\n        const id = this.getCellId(col, row);\n        return (this._header.objectMap[id] ||\n            this._emptyDataCache.getHeader(col, row));\n    }\n    getBody(col, row) {\n        const id = this.getCellId(col, row);\n        return (this._body.objectMap[id] ||\n            this._emptyDataCache.getBody(col, row));\n    }\n    getBodyLayoutRangeById(id) {\n        var _a;\n        for (let row = 0; row < this.bodyRowCount; row++) {\n            const objectGridRow = this._body.objectGrid[row];\n            if (!objectGridRow) {\n                continue;\n            }\n            for (let col = 0; col < this.colCount; col++) {\n                if (id === ((_a = objectGridRow[col]) === null || _a === void 0 ? void 0 : _a.id)) {\n                    return this._getCellRange(this._body, col, row, 0);\n                }\n            }\n        }\n        throw new Error(`can not found body layout @id=${id}`);\n    }\n    getCellRange(col, row) {\n        if (this.headerRowCount <= row) {\n            const recordIndex = this.getRecordIndexByRow(row);\n            const startRow = this.getRecordStartRowByRecordIndex(recordIndex);\n            const bodyRow = row - this.headerRowCount;\n            const bodyLayoutRow = bodyRow % this.bodyRowCount;\n            return this._getCellRange(this._body, col, bodyLayoutRow, startRow);\n        }\n        //in header\n        return this._getCellRange(this._header, col, row, 0);\n    }\n    getRecordIndexByRow(row) {\n        if (row < this.headerRowCount) {\n            return -1;\n        }\n        else {\n            const bodyRow = row - this.headerRowCount;\n            return Math.floor(bodyRow / this.bodyRowCount);\n        }\n    }\n    getRecordStartRowByRecordIndex(index) {\n        return this.headerRowCount + index * this.bodyRowCount;\n    }\n    _getCellRange(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    layout, col, layoutRow, offsetRow) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        const result = {\n            start: { col, row: layoutRow + offsetRow },\n            end: { col, row: layoutRow + offsetRow },\n        };\n        const { objectGrid } = layout;\n        const id = (_b = (_a = objectGrid[layoutRow]) === null || _a === void 0 ? void 0 : _a[col]) === null || _b === void 0 ? void 0 : _b.id;\n        if (id == null) {\n            return result;\n        }\n        for (let c = col - 1; c >= 0; c--) {\n            if (id !== ((_d = (_c = objectGrid[layoutRow]) === null || _c === void 0 ? void 0 : _c[c]) === null || _d === void 0 ? void 0 : _d.id)) {\n                break;\n            }\n            result.start.col = c;\n        }\n        for (let c = col + 1; c < layout.columnCount; c++) {\n            if (id !== ((_f = (_e = objectGrid[layoutRow]) === null || _e === void 0 ? void 0 : _e[c]) === null || _f === void 0 ? void 0 : _f.id)) {\n                break;\n            }\n            result.end.col = c;\n        }\n        for (let r = layoutRow - 1; r >= 0; r--) {\n            if (id !== ((_h = (_g = objectGrid[r]) === null || _g === void 0 ? void 0 : _g[col]) === null || _h === void 0 ? void 0 : _h.id)) {\n                break;\n            }\n            result.start.row = r + offsetRow;\n        }\n        for (let r = layoutRow + 1; r < layout.rowCount; r++) {\n            if (id !== ((_k = (_j = objectGrid[r]) === null || _j === void 0 ? void 0 : _j[col]) === null || _k === void 0 ? void 0 : _k.id)) {\n                break;\n            }\n            result.end.row = r + offsetRow;\n        }\n        return result;\n    }\n}\nexports.MultiLayoutMap = MultiLayoutMap;\n","\"use strict\";\n//see https://github.com/typekit/webfontloader\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\nconst FontRuler_1 = require(\"./FontRuler\");\nconst LastResortFonts = {\n    SERIF: \"serif\",\n    SANS_SERIF: \"sans-serif\",\n};\nconst watchRunners = {};\nclass FontWatchRunner {\n    constructor(font, testStr) {\n        this.activeCallbacks = [];\n        this.inactiveCallbacks = [];\n        this.status = null;\n        this.lastResortWidths_ = {};\n        this.fontRulerA_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SERIF}`, testStr);\n        this.fontRulerB_ = new FontRuler_1.FontRuler(`${font},${LastResortFonts.SANS_SERIF}`, testStr);\n        const lastResortRulerA = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SERIF}`, testStr);\n        const lastResortRulerB = new FontRuler_1.FontRuler(`4px ${LastResortFonts.SANS_SERIF}`, testStr);\n        //start\n        this.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\n        this.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\n        lastResortRulerA.remove();\n        lastResortRulerB.remove();\n        this.started_ = Date.now();\n        this.check_();\n    }\n    static load(font, testStr, activeCallback, inactiveCallback) {\n        const c = watchRunners[font] || (watchRunners[font] = {});\n        testStr += \"\";\n        let runner;\n        if (c[testStr]) {\n            runner = c[testStr];\n        }\n        else {\n            runner = c[testStr] = new FontWatchRunner(font, testStr);\n        }\n        runner.then(activeCallback, inactiveCallback);\n    }\n    then(activeCallback, inactiveCallback) {\n        if (this.status) {\n            if (this.status !== \"ng\") {\n                activeCallback();\n            }\n            else {\n                inactiveCallback();\n            }\n        }\n        else {\n            this.activeCallbacks.push(activeCallback);\n            this.inactiveCallbacks.push(inactiveCallback);\n        }\n    }\n    check_() {\n        const widthA = this.fontRulerA_.getWidth();\n        const widthB = this.fontRulerB_.getWidth();\n        if (this.isFallbackFont_(widthA, widthB) ||\n            this.isLastResortFont_(widthA, widthB)) {\n            if (Date.now() - this.started_ >= 3000) {\n                // timeout\n                if (this.isLastResortFont_(widthA, widthB)) {\n                    this.finish_(this.activeCallbacks);\n                    this.status = \"ok\";\n                }\n                else {\n                    this.finish_(this.inactiveCallbacks);\n                    this.status = \"ng\";\n                }\n            }\n            else {\n                setTimeout(() => {\n                    this.check_();\n                }, 50);\n            }\n        }\n        else {\n            this.finish_(this.activeCallbacks);\n            this.status = \"ok\";\n        }\n    }\n    isFallbackFont_(a, b) {\n        return (this.widthMatches_(a, LastResortFonts.SERIF) &&\n            this.widthMatches_(b, LastResortFonts.SANS_SERIF));\n    }\n    widthsMatchLastResortWidths_(a, b) {\n        for (const font in LastResortFonts) {\n            if (LastResortFonts.hasOwnProperty(font)) {\n                if (this.widthMatches_(a, LastResortFonts[font]) &&\n                    this.widthMatches_(b, LastResortFonts[font])) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    widthMatches_(width, lastResortFont) {\n        return width === this.lastResortWidths_[lastResortFont];\n    }\n    isLastResortFont_(a, b) {\n        return hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\n    }\n    finish_(callbacks) {\n        setTimeout(() => {\n            this.fontRulerA_.remove();\n            this.fontRulerB_.remove();\n            callbacks.forEach((cb) => cb());\n        }, 0);\n    }\n}\nlet HAS_WEBKIT_FALLBACK_BUG = null;\nfunction hasWebKitFallbackBug() {\n    if (HAS_WEBKIT_FALLBACK_BUG === null) {\n        const match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\n        HAS_WEBKIT_FALLBACK_BUG =\n            !!match &&\n                (parseInt(match[1], 10) < 536 ||\n                    (parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11));\n    }\n    return HAS_WEBKIT_FALLBACK_BUG;\n}\nmodule.exports = FontWatchRunner;\n","\"use strict\";\n//see https://github.com/typekit/webfontloader\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction computeStyle(font) {\n    return [\n        {\n            display: \"block\",\n            position: \"absolute\",\n            top: \"-9999px\",\n            left: \"-9999px\",\n            width: \"auto\",\n            height: \"auto\",\n            margin: \"0\",\n            padding: \"0\",\n            \"white-space\": \"nowrap\",\n            font,\n        },\n        {\n            \"font-variant\": \"normal\",\n            \"font-size\": \"300px\",\n            \"font-style\": \"normal\",\n            \"font-weight\": \"400\",\n            \"line-height\": \"normal\",\n        },\n    ];\n}\nclass FontRuler {\n    constructor(font, testStr) {\n        const e = document.createElement(\"span\");\n        e.setAttribute(\"aria-hidden\", \"true\");\n        e.textContent = testStr || \"BESbswy\";\n        computeStyle(font).forEach((style) => {\n            for (const k in style) {\n                const key = k;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                e.style[key] = style[key];\n            }\n        });\n        document.body.appendChild(e);\n        this.el_ = e;\n    }\n    getWidth() {\n        return this.el_.offsetWidth;\n    }\n    remove() {\n        document.body.removeChild(this.el_);\n    }\n}\nexports.FontRuler = FontRuler;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst icons = __importStar(require(\"../icons\"));\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\nconst Inline_1 = require(\"./Inline\");\nconst canvases_1 = require(\"../internal/canvases\");\nconst InlineDrawer_1 = require(\"./InlineDrawer\");\nconst InlineIcon_1 = require(\"./InlineIcon\");\nconst InlineImage_1 = require(\"./InlineImage\");\nconst InlinePath2D_1 = require(\"./InlinePath2D\");\nconst InlineSvg_1 = require(\"./InlineSvg\");\nconst utils_1 = require(\"../internal/utils\");\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, { offset = 2, padding } = {}) {\n    const rect = {\n        left,\n        top,\n        width,\n        height,\n        right: left + width,\n        bottom: top + height,\n    };\n    ctx.save();\n    try {\n        ctx.beginPath();\n        ctx.rect(rect.left, rect.top, rect.width, rect.height);\n        //clip\n        ctx.clip();\n        //\n        const pos = canvases_1.calcStartPosition(ctx, rect, drawWidth, drawHeight, {\n            offset,\n            padding,\n        });\n        path2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\n    }\n    finally {\n        ctx.restore();\n    }\n}\nfunction isIconConstructorOption(icon) {\n    if (icon.font && icon.content) {\n        return true;\n    }\n    return false;\n}\nfunction isInlineImageConstructorOption(icon) {\n    if (icon.src) {\n        return true;\n    }\n    return false;\n}\nfunction isInlineSvgConstructorOption(icon) {\n    if (icon.path) {\n        return true;\n    }\n    return false;\n}\nfunction iconOf(icon) {\n    if (icon instanceof Inline_1.Inline) {\n        return icon;\n    }\n    if (!icon) {\n        return null;\n    }\n    if (isIconConstructorOption(icon)) {\n        return new InlineIcon_1.InlineIcon(icon);\n    }\n    if (isInlineImageConstructorOption(icon)) {\n        return new InlineImage_1.InlineImage({\n            src: icon.src,\n            width: icon.width,\n            height: icon.width,\n        });\n    }\n    if (icon.svg) {\n        return new InlineSvg_1.InlineSvg({\n            svg: icon.svg,\n            width: icon.width,\n            height: icon.width,\n        });\n    }\n    if (isInlineSvgConstructorOption(icon)) {\n        return new InlinePath2D_1.InlinePath2D({\n            path: icon.path,\n            width: icon.width,\n            height: icon.width,\n            color: icon.color,\n        });\n    }\n    const regedIcons = icons.get();\n    if (icon.name && regedIcons[icon.name]) {\n        const regedIcon = regedIcons[icon.name];\n        const width = icon.width || Math.max(regedIcon.width, regedIcon.height);\n        return new InlineDrawer_1.InlineDrawer({\n            draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\n                drawRegisteredIcon(ctx, regedIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\n                    offset: offset + 1,\n                    padding: {\n                        left: offsetLeft,\n                        right: offsetRight,\n                        top: offsetTop,\n                        bottom: offsetBottom,\n                    },\n                });\n            },\n            width,\n            height: width,\n            color: icon.color,\n        });\n    }\n    return new InlineIcon_1.InlineIcon(icon);\n}\nexports.iconOf = iconOf;\nfunction of(content) {\n    if (!utils_1.isDef(content)) {\n        return null;\n    }\n    if (content instanceof Inline_1.Inline) {\n        return content;\n    }\n    return new Inline_1.Inline(content);\n}\nexports.of = of;\nfunction buildInlines(icons, inline) {\n    const result = [];\n    if (icons) {\n        result.push(...icons.map((icon) => iconOf(icon)).filter(utils_1.isDef));\n    }\n    if (Array.isArray(inline)\n    // && inline.filter(il => il instanceof Inline).length <- ?\n    ) {\n        result.push(...inline.map((il) => of(il)).filter(utils_1.isDef));\n    }\n    else {\n        const il = of(inline);\n        if (il) {\n            result.push(il);\n        }\n    }\n    return result;\n}\nexports.buildInlines = buildInlines;\nfunction string(inline) {\n    return buildInlines(undefined, inline).join(\"\");\n}\nexports.string = string;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst PathCommandsParser_1 = require(\"./PathCommandsParser\");\nconst parser = new PathCommandsParser_1.PathCommandsParser();\nclass Path2DShim {\n    constructor(arg) {\n        this._ops = [];\n        if (arg === undefined) {\n            return;\n        }\n        if (typeof arg === \"string\") {\n            // try {\n            this._ops = parser.parse(arg);\n            // } catch (e) {\n            // \tthrow e;\n            // }\n        }\n        else if (arg.hasOwnProperty(\"_ops\")) {\n            this._ops = [...arg._ops];\n        }\n        else {\n            throw new Error(`Error: ${typeof arg} is not a valid argument to Path`);\n        }\n    }\n    arc(...args) {\n        this._ops.push({ op: \"arc\", args });\n    }\n    arcTo(...args) {\n        this._ops.push({ op: \"arcTo\", args });\n    }\n    bezierCurveTo(...args) {\n        this._ops.push({ op: \"bezierCurveTo\", args });\n    }\n    closePath(...args) {\n        this._ops.push({ op: \"closePath\", args });\n    }\n    ellipse(...args) {\n        this._ops.push({ op: \"ellipse\", args });\n    }\n    lineTo(...args) {\n        this._ops.push({ op: \"lineTo\", args });\n    }\n    moveTo(...args) {\n        this._ops.push({ op: \"moveTo\", args });\n    }\n    quadraticCurveTo(...args) {\n        this._ops.push({ op: \"quadraticCurveTo\", args });\n    }\n    rect(...args) {\n        this._ops.push({ op: \"rect\", args });\n    }\n}\nexports.Path2DShim = Path2DShim;\nconst { CanvasRenderingContext2D } = window;\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nCanvasRenderingContext2D.prototype.fill = function (...args) {\n    if (args[0] instanceof Path2DShim) {\n        const path = args[0];\n        this.beginPath();\n        path._ops.forEach((op) => {\n            const fn = this[op.op];\n            fn.apply(this, op.args);\n        });\n        originalFill.apply(this, Array.prototype.slice.call(args, 1));\n    }\n    else {\n        originalFill.apply(this, args);\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst PathCommands_1 = require(\"./PathCommands\");\nfunction pathTokens(d) {\n    let idx = 0;\n    return {\n        next() {\n            let s = \"\";\n            while (d.length > idx) {\n                const c = d[idx];\n                idx++;\n                if (\" ,\\n\\r\\t\".indexOf(c) > -1) {\n                    if (s) {\n                        return s;\n                    }\n                }\n                else {\n                    const type = \".+-1234567890\".indexOf(c) > -1 ? \"num\" : \"str\";\n                    if (type === \"str\") {\n                        if (s) {\n                            idx--;\n                            return s;\n                        }\n                        return c;\n                    }\n                    if (\"-+\".indexOf(c) > -1) {\n                        if (s) {\n                            idx--;\n                            return s;\n                        }\n                    }\n                    if (c === \".\") {\n                        if (s.indexOf(\".\") > -1) {\n                            idx--;\n                            return s;\n                        }\n                    }\n                    s += c;\n                }\n            }\n            return s || null;\n        },\n    };\n}\nfunction command(builder, cmd, argsProvider) {\n    if (cmd.toUpperCase() === \"M\" ||\n        cmd.toUpperCase() === \"L\" ||\n        cmd.toUpperCase() === \"T\") {\n        builder.command(cmd, argsProvider.next(), argsProvider.next());\n        return cmd === \"M\" ? \"L\" : cmd === \"m\" ? \"l\" : cmd;\n    }\n    else if (cmd.toUpperCase() === \"H\" || cmd.toUpperCase() === \"V\") {\n        builder.command(cmd, argsProvider.next());\n        return cmd;\n    }\n    else if (cmd.toUpperCase() === \"Z\") {\n        builder.command(cmd);\n        return cmd;\n    }\n    else if (cmd.toUpperCase() === \"C\") {\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n        return cmd;\n    }\n    else if (cmd.toUpperCase() === \"S\" || cmd.toUpperCase() === \"Q\") {\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n        return cmd;\n    }\n    else if (cmd.toUpperCase() === \"A\") {\n        builder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n        return cmd;\n    }\n    else {\n        // https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\n        console.warn(`unsupported:${cmd}`);\n    }\n    return null;\n}\nclass PathCommandsParser {\n    constructor() {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this._ops = [];\n        this._commands = new PathCommands_1.PathCommands(this);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const buildPush = (op) => (...args) => {\n            this._ops.push({\n                op,\n                args,\n            });\n        };\n        this.moveTo = buildPush(\"moveTo\");\n        this.lineTo = buildPush(\"lineTo\");\n        this.closePath = buildPush(\"closePath\");\n        this.bezierCurveTo = buildPush(\"bezierCurveTo\");\n        this.quadraticCurveTo = buildPush(\"quadraticCurveTo\");\n        this.save = buildPush(\"save\");\n        this.translate = buildPush(\"translate\");\n        this.rotate = buildPush(\"rotate\");\n        this.scale = buildPush(\"scale\");\n        this.arc = buildPush(\"arc\");\n        this.restore = buildPush(\"restore\");\n        this.arcTo = buildPush(\"arcTo\");\n        this.ellipse = buildPush(\"ellipse\");\n        this.rect = buildPush(\"rect\");\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    command(name, ...args) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const numArgs = args || [];\n        for (let i = 0; i < args.length; i++) {\n            numArgs[i] -= 0;\n        }\n        const command = this._commands[name];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        command.apply(this, numArgs);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parse(d) {\n        const ops = (this._ops = []);\n        const tokens = pathTokens(d);\n        try {\n            let cmd;\n            let subsequentCommand = \"Z\";\n            while ((cmd = tokens.next())) {\n                if (!isNaN(Number(cmd))) {\n                    let fst = true;\n                    const argsProvider = {\n                        next() {\n                            if (fst) {\n                                fst = false;\n                                return cmd;\n                            }\n                            return tokens.next();\n                        },\n                    };\n                    subsequentCommand =\n                        command(this, subsequentCommand, argsProvider) || \"Z\";\n                }\n                else {\n                    subsequentCommand =\n                        command(this, cmd, tokens) || \"Z\";\n                }\n            }\n        }\n        catch (e) {\n            console.log(`Error: ${d}`);\n            throw e;\n        }\n        return ops;\n    }\n}\nexports.PathCommandsParser = PathCommandsParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*eslint new-cap: \"off\"*/\nfunction mag(v) {\n    return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\nfunction dot(u, v) {\n    return u[0] * v[0] + u[1] * v[1];\n}\nfunction ratio(u, v) {\n    return dot(u, v) / (mag(u) * mag(v));\n}\nfunction clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\nfunction angle(u, v) {\n    let sign = 1.0;\n    if (u[0] * v[1] - u[1] * v[0] < 0) {\n        sign = -1.0;\n    }\n    return sign * Math.acos(clamp(ratio(u, v), -1, 1));\n}\nfunction rotClockwise(v, angle) {\n    const cost = Math.cos(angle);\n    const sint = Math.sin(angle);\n    return [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\n}\nfunction rotCounterClockwise(v, angle) {\n    const cost = Math.cos(angle);\n    const sint = Math.sin(angle);\n    return [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\n}\nfunction midPoint(u, v) {\n    return [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\n}\nfunction meanVec(u, v) {\n    return [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\n}\nfunction pointMul(u, v) {\n    return [u[0] * v[0], u[1] * v[1]];\n}\nfunction scale(c, v) {\n    return [c * v[0], c * v[1]];\n}\nfunction sum(u, v) {\n    return [u[0] + v[0], u[1] + v[1]];\n}\n// Convert an SVG elliptical arc to a series of canvas commands.\n//\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\n// rx, ry: radii of the ellipse.\n// phi: rotation of the ellipse.\n// fA: large arc flag.\n// fS: sweep flag.\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\n    // Convert from endpoint to center parametrization, as detailed in:\n    //   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n    if (rx === 0 || ry === 0) {\n        ctx.lineTo(x2, x1);\n        return;\n    }\n    phi *= Math.PI / 180.0;\n    rx = Math.abs(rx);\n    ry = Math.abs(ry);\n    const xPrime = rotClockwise(midPoint([x1, y1], [x2, y2]), phi); // F.6.5.1\n    const xPrime2 = pointMul(xPrime, xPrime);\n    let rx2 = Math.pow(rx, 2);\n    let ry2 = Math.pow(ry, 2);\n    const lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\n    if (lambda > 1) {\n        rx *= lambda;\n        ry *= lambda;\n        rx2 = Math.pow(rx, 2);\n        ry2 = Math.pow(ry, 2);\n    }\n    let factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\n        (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\n    if (fA === fS) {\n        factor *= -1.0;\n    }\n    const cPrime = scale(factor, [(rx * xPrime[1]) / ry, (-ry * xPrime[0]) / rx]); // F.6.5.2\n    const c = sum(rotCounterClockwise(cPrime, phi), meanVec([x1, y1], [x2, y2])); // F.6.5.3\n    const x1UnitVector = [\n        (xPrime[0] - cPrime[0]) / rx,\n        (xPrime[1] - cPrime[1]) / ry,\n    ];\n    const x2UnitVector = [\n        (-1.0 * xPrime[0] - cPrime[0]) / rx,\n        (-1.0 * xPrime[1] - cPrime[1]) / ry,\n    ];\n    const theta = angle([1, 0], x1UnitVector); // F.6.5.5\n    const deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\n    const start = theta;\n    const end = theta + deltaTheta;\n    ctx.save();\n    ctx.translate(c[0], c[1]);\n    ctx.rotate(phi);\n    ctx.scale(rx, ry);\n    ctx.arc(0, 0, 1, start, end, !fS);\n    ctx.restore();\n}\nclass PathCommands {\n    constructor(ctx) {\n        let lMx;\n        let lMy;\n        let lx = 0;\n        let ly = 0;\n        let reflected;\n        let lastCommand = \"\";\n        function makeReflected() {\n            if (\"CcSsQqTt\".indexOf(lastCommand) < 0) {\n                return { x: lx, y: ly };\n            }\n            return reflected;\n        }\n        this.M = (px, py) => {\n            ctx.moveTo(px, py);\n            lMx = px;\n            lMy = py;\n            lx = px;\n            ly = py;\n            lastCommand = \"M\";\n            return this;\n        };\n        this.m = (px, py) => this.M(px + lx, py + ly);\n        this.L = (px, py) => {\n            ctx.lineTo(px, py);\n            lx = px;\n            ly = py;\n            lastCommand = \"L\";\n            return this;\n        };\n        this.l = (px, py) => this.L(px + lx, py + ly);\n        this.H = (px) => this.L(px, ly);\n        this.h = (px) => this.H(px + lx);\n        this.V = (py) => this.L(lx, py);\n        this.v = (py) => this.V(py + ly);\n        this.Z = () => {\n            ctx.closePath();\n            lx = lMx;\n            ly = lMy;\n            lastCommand = \"Z\";\n            return this;\n        };\n        this.z = () => this.Z();\n        //C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\n        this.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\n            ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\n            lx = px;\n            ly = py;\n            reflected = {\n                x: 2 * px - cp2x,\n                y: 2 * py - cp2y,\n            };\n            lastCommand = \"C\";\n            return this;\n        };\n        this.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly);\n        //S x2 y2, x y (or s dx2 dy2, dx dy)\n        this.S = (cpx, cpy, px, py) => {\n            const { x: cp1x, y: cp1y } = makeReflected( /*lastCommand*/);\n            return this.C(cp1x, cp1y, cpx, cpy, px, py);\n        };\n        this.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\n        //Q x1 y1, x y (or q dx1 dy1, dx dy)\n        this.Q = (cpx, cpy, px, py) => {\n            ctx.quadraticCurveTo(cpx, cpy, px, py);\n            lx = px;\n            ly = py;\n            reflected = {\n                x: 2 * px - cpx,\n                y: 2 * py - cpy,\n            };\n            lastCommand = \"Q\";\n            return this;\n        };\n        this.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\n        //T x y (or t dx dy)\n        this.T = (px, py) => {\n            const { x: cpx, y: cpy } = makeReflected();\n            return this.Q(cpx, cpy, px, py);\n        };\n        this.t = (px, py) => this.T(px + lx, py + ly);\n        //A rx ry x-axis-rotation large-arc-flag sweep-flag x y\n        this.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\n            const x1 = lx;\n            const y1 = ly;\n            ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\n            lx = px;\n            ly = py;\n            lastCommand = \"A\";\n            return this;\n        };\n        //a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\n        this.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\n    }\n}\nexports.PathCommands = PathCommands;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fonts = __importStar(require(\"../internal/fonts\"));\nconst Inline_1 = require(\"./Inline\");\nclass InlineIcon extends Inline_1.Inline {\n    constructor(icon) {\n        super();\n        this._icon = icon || {};\n    }\n    width({ ctx }) {\n        const icon = this._icon;\n        if (icon.width) {\n            return icon.width;\n        }\n        if (icon.font && fonts.check(icon.font, icon.content || \"\")) {\n            ctx.save();\n            ctx.canvas.style.letterSpacing = \"normal\";\n            try {\n                ctx.font = icon.font || ctx.font;\n                return ctx.measureText(icon.content || \"\").width;\n            }\n            finally {\n                ctx.canvas.style.letterSpacing = \"\";\n                ctx.restore();\n            }\n        }\n        return 0; //unknown\n    }\n    font() {\n        var _a;\n        return (_a = this._icon.font) !== null && _a !== void 0 ? _a : null;\n    }\n    color() {\n        var _a;\n        return (_a = this._icon.color) !== null && _a !== void 0 ? _a : null;\n    }\n    canDraw() {\n        const icon = this._icon;\n        return icon.font ? fonts.check(icon.font, icon.content || \"\") : true;\n    }\n    onReady(callback) {\n        const icon = this._icon;\n        if (icon.font && !fonts.check(icon.font, icon.content || \"\")) {\n            fonts.load(icon.font, icon.content || \"\", callback);\n        }\n    }\n    draw({ ctx, canvashelper, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\n        const icon = this._icon;\n        if (icon.content) {\n            ctx.canvas.style.letterSpacing = \"normal\";\n            try {\n                // eslint-disable-next-line no-self-assign\n                ctx.font = ctx.font; // To apply letterSpacing, we need to reset it.\n                canvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\n                    offset: offset + 1,\n                    padding: {\n                        left: offsetLeft,\n                        right: offsetRight,\n                        top: offsetTop,\n                        bottom: offsetBottom,\n                    },\n                });\n            }\n            finally {\n                ctx.canvas.style.letterSpacing = \"\";\n            }\n        }\n    }\n    canBreak() {\n        return false;\n    }\n    toString() {\n        return \"\";\n    }\n}\nexports.InlineIcon = InlineIcon;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst path2DManager = __importStar(require(\"../internal/path2DManager\"));\nconst Inline_1 = require(\"./Inline\");\nconst canvases_1 = require(\"../internal/canvases\");\nclass InlinePath2D extends Inline_1.Inline {\n    constructor({ path, width, height, color }) {\n        super();\n        // IEPath2Dpolyfill\n        const Path2D = path2DManager.getPath2D();\n        this._path = new Path2D(path);\n        this._width = width;\n        this._height = height;\n        this._color = color;\n    }\n    width(_arg) {\n        return this._width;\n    }\n    font() {\n        return null;\n    }\n    color() {\n        var _a;\n        return (_a = this._color) !== null && _a !== void 0 ? _a : null;\n    }\n    canDraw() {\n        return true;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    onReady(_callback) { }\n    draw({ ctx, rect, offset, offsetLeft, offsetRight, offsetTop, offsetBottom, }) {\n        offset++;\n        const padding = {\n            left: offsetLeft,\n            right: offsetRight,\n            top: offsetTop,\n            bottom: offsetBottom,\n        };\n        ctx.save();\n        try {\n            ctx.beginPath();\n            ctx.rect(rect.left, rect.top, rect.width, rect.height);\n            //clip\n            ctx.clip();\n            //\n            const pos = canvases_1.calcStartPosition(ctx, rect, this._width, this._height, {\n                offset,\n                padding,\n            });\n            ctx.translate(pos.x, pos.y);\n            ctx.fill(this._path);\n        }\n        finally {\n            ctx.restore();\n        }\n    }\n    canBreak() {\n        return false;\n    }\n    toString() {\n        return \"\";\n    }\n}\nexports.InlinePath2D = InlinePath2D;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"../internal/utils\");\nconst InlineImage_1 = require(\"./InlineImage\");\nfunction buildSvgDataUrl(svg) {\n    const data = typeof svg === \"string\" ? svg : new XMLSerializer().serializeToString(svg);\n    const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(data)}`; //svgbase64\n    return url;\n}\nfunction getSvgElement(svg) {\n    if (typeof svg === \"string\") {\n        const parser = new DOMParser();\n        return parser.parseFromString(svg, \"image/svg+xml\")\n            .children[0];\n    }\n    else {\n        return svg;\n    }\n}\nclass InlineSvg extends InlineImage_1.InlineImage {\n    constructor({ svg, width, height }) {\n        var _a, _b;\n        const svgElem = utils_1.then(svg, getSvgElement);\n        const elmWidth = !utils_1.isPromise(svgElem)\n            ? (_a = svgElem.getAttribute(\"width\")) !== null && _a !== void 0 ? _a : undefined : undefined;\n        const elmHeight = !utils_1.isPromise(svgElem)\n            ? (_b = svgElem.getAttribute(\"height\")) !== null && _b !== void 0 ? _b : undefined : undefined;\n        const numElmWidth = elmWidth != null ? Number(elmWidth) : undefined;\n        const numElmHeight = elmHeight != null ? Number(elmHeight) : undefined;\n        super({\n            src: utils_1.then(svg, buildSvgDataUrl),\n            width: width || numElmWidth,\n            height: height || numElmHeight,\n            imageWidth: numElmWidth,\n            imageHeight: numElmHeight,\n        });\n    }\n    canBreak() {\n        return false;\n    }\n    toString() {\n        return \"\";\n    }\n}\nexports.InlineSvg = InlineSvg;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ErrorMessage_1 = require(\"./ErrorMessage\");\nconst InfoMessage_1 = require(\"./InfoMessage\");\nconst LG_EVENT_TYPE_1 = require(\"../../list-grid/LG_EVENT_TYPE\");\nconst WarningMessage_1 = require(\"./WarningMessage\");\nconst utils_1 = require(\"../../internal/utils\");\nconst EMPTY_MESSAGE = {\n    type: \"error\",\n    message: null,\n};\nconst MESSAGE_INSTANCE_FACTORY = {\n    error(grid) {\n        return new ErrorMessage_1.ErrorMessage(grid);\n    },\n    info(grid) {\n        return new InfoMessage_1.InfoMessage(grid);\n    },\n    warning(grid) {\n        return new WarningMessage_1.WarningMessage(grid);\n    },\n};\nfunction normalizeMessage(message) {\n    if (!message || utils_1.isPromise(message)) {\n        return EMPTY_MESSAGE;\n    }\n    if (typeof message === \"string\") {\n        return {\n            type: \"error\",\n            message,\n            original: message,\n        };\n    }\n    const type = message.type || \"error\";\n    if (type && type in MESSAGE_INSTANCE_FACTORY) {\n        return {\n            type: type.toLowerCase(),\n            message: message.message,\n            original: message,\n        };\n    }\n    return {\n        type: \"error\",\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        message: `${message}`,\n        original: message,\n    };\n}\nfunction hasMessage(message) {\n    return !!normalizeMessage(message).message;\n}\nclass MessageHandler {\n    constructor(grid, getMessage) {\n        this._attachInfo = null;\n        this._grid = grid;\n        this._messageInstances = {};\n        this._bindGridEvent(grid, getMessage);\n    }\n    dispose() {\n        var _a;\n        const messageInstances = this._messageInstances;\n        for (const k in messageInstances) {\n            (_a = messageInstances[k]) === null || _a === void 0 ? void 0 : _a.dispose();\n        }\n        delete this._messageInstances;\n        delete this._attachInfo;\n    }\n    drawCellMessage(message, context, style, helper, grid, info) {\n        if (!hasMessage(message)) {\n            return;\n        }\n        const instance = this._getMessageInstanceOfMessage(message);\n        instance.drawCellMessage(normalizeMessage(message), context, style, helper, grid, info);\n    }\n    _attach(col, row, message) {\n        const info = this._attachInfo;\n        const instance = this._getMessageInstanceOfMessage(message);\n        if (info && info.instance !== instance) {\n            info.instance.detachMessageElement();\n        }\n        instance.attachMessageElement(col, row, normalizeMessage(message));\n        this._attachInfo = { col, row, instance };\n    }\n    _move(col, row) {\n        const info = this._attachInfo;\n        if (!info || info.col !== col || info.row !== row) {\n            return;\n        }\n        const { instance } = info;\n        instance.moveMessageElement(col, row);\n    }\n    _detach() {\n        const info = this._attachInfo;\n        if (!info) {\n            return;\n        }\n        const { instance } = info;\n        instance.detachMessageElement();\n        this._attachInfo = null;\n    }\n    _bindGridEvent(grid, getMessage) {\n        const onSelectMessage = (sel) => {\n            const message = getMessage(sel.col, sel.row);\n            if (!hasMessage(message)) {\n                this._detach();\n            }\n            else {\n                this._attach(sel.col, sel.row, message);\n            }\n        };\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\n            if (!e.selected) {\n                return;\n            }\n            if (e.before.col === e.col && e.before.row === e.row) {\n                return;\n            }\n            onSelectMessage(e);\n        });\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\n            const sel = grid.selection.select;\n            this._move(sel.col, sel.row);\n        });\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\n            const sel = grid.selection.select;\n            if (sel.col !== e.col || sel.row !== e.row) {\n                return;\n            }\n            onSelectMessage(e);\n        });\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.FOCUS_GRID, (_e) => {\n            const sel = grid.selection.select;\n            onSelectMessage(sel);\n        });\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.BLUR_GRID, (_e) => {\n            this._detach();\n        });\n    }\n    _getMessageInstanceOfMessage(message) {\n        const messageInstances = this._messageInstances;\n        const { type } = normalizeMessage(message);\n        return (messageInstances[type] ||\n            (messageInstances[type] = MESSAGE_INSTANCE_FACTORY[type](this._grid)));\n    }\n}\nexports.MessageHandler = MessageHandler;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messageUtils = __importStar(require(\"./messageUtils\"));\nconst BaseMessage_1 = require(\"./BaseMessage\");\nconst ErrorMessageElement_1 = require(\"./internal/ErrorMessageElement\");\nconst utils_1 = require(\"../../internal/utils\");\nconst RED_A100 = \"#ff8a80\";\nclass ErrorMessage extends BaseMessage_1.BaseMessage {\n    createMessageElementInternal() {\n        return new ErrorMessageElement_1.ErrorMessageElement();\n    }\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n        const { bgColor } = style;\n        const { select } = context.getSelection();\n        if (!utils_1.cellInRange(grid.getCellRange(context.col, context.row), select.col, select.row) ||\n            !grid.hasFocusGrid()) {\n            helper.drawBorderWithClip(context, (_ctx) => {\n                messageUtils.drawExclamationMarkBox(context, {\n                    bgColor: RED_A100,\n                    color: bgColor,\n                }, helper);\n            });\n        }\n    }\n}\nexports.ErrorMessage = ErrorMessage;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst MessageElement_1 = require(\"./MessageElement\");\nconst CLASSNAME = \"cheetah-grid__error-message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\nclass ErrorMessageElement extends MessageElement_1.MessageElement {\n    constructor() {\n        super();\n        require(\"@/columns/message/internal/ErrorMessageElement.css\");\n        this._rootElement.classList.add(CLASSNAME);\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\n    }\n}\nexports.ErrorMessageElement = ErrorMessageElement;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__message-element {\\n\\tposition: absolute;\\n\\tmargin-top: -2px;\\n\\tbox-sizing: border-box;\\n\\tborder-radius: 0 0 3px 3px;\\n\\tbackground-color: rgba(250, 250, 250, .85);\\n\\tpadding: 8px 2px;\\n\\tpointer-events: none;\\n\\tuser-select: none;\\n\\tborder-top: solid 1px rgba(0, 0, 0, .87);\\n\\tcolor: rgba(0, 0, 0, .87);\\n}\\n.cheetah-grid__message-element--hidden {\\n\\tdisplay: none;\\n}\\n.cheetah-grid__message-element--shown {\\n\\tdisplay: block;\\n}\\n.cheetah-grid__message-element__message {\\n\\tfont-family: Roboto;\\n\\tfont-size: 12px;\\n\\tfont-size: .75rem;\\n\\tmin-height: 1em;\\n\\tline-height: 1;\\n\\tdisplay: block;\\n\\twidth: 100%;\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__error-message-element {\\n\\tborder-top: solid 1px #ff1744;\\n\\tcolor: #ff1744;\\n}\\n\", \"\"]);\n\n// exports\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messageUtils = __importStar(require(\"./messageUtils\"));\nconst BaseMessage_1 = require(\"./BaseMessage\");\nconst MessageElement_1 = require(\"./internal/MessageElement\");\nconst utils_1 = require(\"../../internal/utils\");\nconst GREY_L2 = \"#e0e0e0\";\nclass InfoMessage extends BaseMessage_1.BaseMessage {\n    createMessageElementInternal() {\n        return new MessageElement_1.MessageElement();\n    }\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n        const { bgColor } = style;\n        const { select } = context.getSelection();\n        if (!utils_1.cellInRange(grid.getCellRange(context.col, context.row), select.col, select.row) ||\n            !grid.hasFocusGrid()) {\n            helper.drawBorderWithClip(context, (_ctx) => {\n                messageUtils.drawExclamationMarkBox(context, {\n                    bgColor: GREY_L2,\n                    color: bgColor,\n                }, helper);\n            });\n        }\n    }\n}\nexports.InfoMessage = InfoMessage;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messageUtils = __importStar(require(\"./messageUtils\"));\nconst BaseMessage_1 = require(\"./BaseMessage\");\nconst WarningMessageElement_1 = require(\"./internal/WarningMessageElement\");\nconst utils_1 = require(\"../../internal/utils\");\nconst DEEP_ORANGE_A100 = \"#ff9e80\";\nclass WarningMessage extends BaseMessage_1.BaseMessage {\n    createMessageElementInternal() {\n        return new WarningMessageElement_1.WarningMessageElement();\n    }\n    drawCellMessageInternal(_message, context, style, helper, grid, _info) {\n        const { bgColor } = style;\n        const { select } = context.getSelection();\n        if (!utils_1.cellInRange(grid.getCellRange(context.col, context.row), select.col, select.row) ||\n            !grid.hasFocusGrid()) {\n            helper.drawBorderWithClip(context, (_ctx) => {\n                messageUtils.drawExclamationMarkBox(context, {\n                    bgColor: DEEP_ORANGE_A100,\n                    color: bgColor,\n                }, helper);\n            });\n        }\n    }\n}\nexports.WarningMessage = WarningMessage;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst MessageElement_1 = require(\"./MessageElement\");\nconst CLASSNAME = \"cheetah-grid__warning-message-element\";\nconst MESSAGE_CLASSNAME = `${CLASSNAME}__message`;\nclass WarningMessageElement extends MessageElement_1.MessageElement {\n    constructor() {\n        super();\n        require(\"@/columns/message/internal/WarningMessageElement.css\");\n        this._rootElement.classList.add(CLASSNAME);\n        this._messageElement.classList.add(MESSAGE_CLASSNAME);\n    }\n}\nexports.WarningMessageElement = WarningMessageElement;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__warning-message-element {\\n\\tborder-top: solid 1px #dd2c00;\\n\\tcolor: #dd2c00;\\n}\\n\", \"\"]);\n\n// exports\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst LG_EVENT_TYPE_1 = require(\"../list-grid/LG_EVENT_TYPE\");\nconst Tooltip_1 = require(\"./Tooltip\");\nconst utils_1 = require(\"../internal/utils\");\nconst TOOLTIP_INSTANCE_FACTORY = {\n    \"overflow-text\"(grid) {\n        return new Tooltip_1.Tooltip(grid);\n    },\n};\nfunction getTooltipInstanceInfo(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ngrid, col, row) {\n    //\n    // overflow text tooltip\n    const overflowText = grid.getCellOverflowText(col, row);\n    if (overflowText) {\n        return {\n            type: \"overflow-text\",\n            content: overflowText,\n        };\n    }\n    return null;\n}\nclass TooltipHandler {\n    constructor(grid) {\n        this._grid = grid;\n        this._tooltipInstances = {};\n        this._bindGridEvent(grid);\n    }\n    dispose() {\n        const tooltipInstances = this._tooltipInstances;\n        for (const k in tooltipInstances) {\n            tooltipInstances[k].dispose();\n        }\n        delete this._tooltipInstances;\n        this._attachInfo = null;\n    }\n    _attach(col, row) {\n        const info = this._attachInfo;\n        const instanceInfo = this._getTooltipInstanceInfo(col, row);\n        if (info && (!instanceInfo || info.instance !== instanceInfo.instance)) {\n            info.instance.detachTooltipElement();\n            this._attachInfo = null;\n        }\n        if (!instanceInfo) {\n            return;\n        }\n        const { instance } = instanceInfo;\n        instance.attachTooltipElement(col, row, instanceInfo.content);\n        const range = this._grid.getCellRange(col, row);\n        this._attachInfo = { range, instance };\n    }\n    _move(col, row) {\n        const info = this._attachInfo;\n        if (!info || !utils_1.cellInRange(info.range, col, row)) {\n            return;\n        }\n        const { instance } = info;\n        instance.moveTooltipElement(col, row);\n    }\n    _detach() {\n        const info = this._attachInfo;\n        if (!info) {\n            return;\n        }\n        const { instance } = info;\n        instance.detachTooltipElement();\n        this._attachInfo = null;\n    }\n    _isAttachCell(col, row) {\n        const info = this._attachInfo;\n        if (!info) {\n            return false;\n        }\n        return utils_1.cellInRange(info.range, col, row);\n    }\n    _bindGridEvent(grid) {\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOVER_CELL, (e) => {\n            if (e.related) {\n                if (this._isAttachCell(e.col, e.row)) {\n                    return;\n                }\n            }\n            this._attach(e.col, e.row);\n        });\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.MOUSEOUT_CELL, (e) => {\n            if (e.related) {\n                if (this._isAttachCell(e.related.col, e.related.row)) {\n                    return;\n                }\n            }\n            this._detach();\n        });\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SELECTED_CELL, (e) => {\n            if (this._isAttachCell(e.col, e.row)) {\n                this._detach();\n            }\n        });\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.SCROLL, () => {\n            const info = this._attachInfo;\n            if (!info) {\n                return;\n            }\n            this._move(info.range.start.col, info.range.start.row);\n        });\n        grid.listen(LG_EVENT_TYPE_1.LG_EVENT_TYPE.CHANGED_VALUE, (e) => {\n            if (this._isAttachCell(e.col, e.row)) {\n                this._detach();\n                this._attach(e.col, e.row);\n            }\n        });\n    }\n    _getTooltipInstanceInfo(col, row) {\n        const grid = this._grid;\n        const tooltipInstances = this._tooltipInstances;\n        const info = getTooltipInstanceInfo(grid, col, row);\n        if (!info) {\n            return null;\n        }\n        const { type } = info;\n        const instance = tooltipInstances[type] ||\n            (tooltipInstances[type] = TOOLTIP_INSTANCE_FACTORY[type](grid));\n        return {\n            instance,\n            type,\n            content: info.content,\n        };\n    }\n}\nexports.TooltipHandler = TooltipHandler;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst BaseTooltip_1 = require(\"./BaseTooltip\");\nconst TooltipElement_1 = require(\"./internal/TooltipElement\");\nclass Tooltip extends BaseTooltip_1.BaseTooltip {\n    createTooltipElementInternal() {\n        return new TooltipElement_1.TooltipElement();\n    }\n}\nexports.Tooltip = Tooltip;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass BaseTooltip {\n    constructor(grid) {\n        this._grid = grid;\n    }\n    dispose() {\n        this.detachTooltipElement();\n        if (this._tooltipElement) {\n            this._tooltipElement.dispose();\n        }\n        this._tooltipElement = undefined;\n    }\n    _getTooltipElement() {\n        if (this._tooltipElement) {\n            return this._tooltipElement;\n        }\n        return (this._tooltipElement = this.createTooltipElementInternal());\n    }\n    attachTooltipElement(col, row, content) {\n        const tooltipElement = this._getTooltipElement();\n        tooltipElement.attach(this._grid, col, row, content);\n    }\n    moveTooltipElement(col, row) {\n        const tooltipElement = this._getTooltipElement();\n        tooltipElement.move(this._grid, col, row);\n    }\n    detachTooltipElement() {\n        const tooltipElement = this._getTooltipElement();\n        tooltipElement._detach();\n    }\n}\nexports.BaseTooltip = BaseTooltip;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EventHandler_1 = require(\"../../internal/EventHandler\");\nconst dom_1 = require(\"../../internal/dom\");\nconst CLASSNAME = \"cheetah-grid__tooltip-element\";\nconst CONTENT_CLASSNAME = `${CLASSNAME}__content`;\nconst HIDDEN_CLASSNAME = `${CLASSNAME}--hidden`;\nconst SHOWN_CLASSNAME = `${CLASSNAME}--shown`;\nfunction createTooltipDomElement() {\n    require(\"@/tooltip/internal/TooltipElement.css\");\n    const rootElement = dom_1.createElement(\"div\", {\n        classList: [CLASSNAME, HIDDEN_CLASSNAME],\n    });\n    const messageElement = dom_1.createElement(\"pre\", {\n        classList: [CONTENT_CLASSNAME],\n    });\n    rootElement.appendChild(messageElement);\n    return rootElement;\n}\nclass TooltipElement {\n    constructor() {\n        this._handler = new EventHandler_1.EventHandler();\n        const rootElement = (this._rootElement = createTooltipDomElement());\n        this._messageElement = rootElement.querySelector(`.${CONTENT_CLASSNAME}`);\n    }\n    dispose() {\n        this.detach();\n        const rootElement = this._rootElement;\n        if (rootElement.parentElement) {\n            rootElement.parentElement.removeChild(rootElement);\n        }\n        this._handler.dispose();\n        delete this._rootElement;\n        delete this._messageElement;\n    }\n    attach(grid, col, row, content) {\n        const rootElement = this._rootElement;\n        const messageElement = this._messageElement;\n        rootElement.classList.remove(SHOWN_CLASSNAME);\n        rootElement.classList.add(HIDDEN_CLASSNAME);\n        if (this._attachCell(grid, col, row)) {\n            rootElement.classList.add(SHOWN_CLASSNAME);\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\n            messageElement.textContent = content;\n        }\n        else {\n            this._detach();\n        }\n    }\n    move(grid, col, row) {\n        const rootElement = this._rootElement;\n        if (this._attachCell(grid, col, row)) {\n            rootElement.classList.add(SHOWN_CLASSNAME);\n            rootElement.classList.remove(HIDDEN_CLASSNAME);\n        }\n        else {\n            this._detach();\n        }\n    }\n    detach() {\n        this._detach();\n    }\n    _detach() {\n        const rootElement = this._rootElement;\n        if (rootElement.parentElement) {\n            // rootElement.parentElement.removeChild(rootElement);\n            rootElement.classList.remove(SHOWN_CLASSNAME);\n            rootElement.classList.add(HIDDEN_CLASSNAME);\n        }\n    }\n    _attachCell(grid, col, row) {\n        const rootElement = this._rootElement;\n        const { element, rect } = grid.getAttachCellsArea(grid.getCellRange(col, row));\n        const { bottom: top, left, width } = rect;\n        const { frozenRowCount, frozenColCount } = grid;\n        if (row >= frozenRowCount && frozenRowCount > 0) {\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(col, frozenRowCount - 1));\n            if (top < frozenRect.bottom) {\n                return false; //\n            }\n        }\n        else {\n            if (top < 0) {\n                return false; //\n            }\n        }\n        if (col >= frozenColCount && frozenColCount > 0) {\n            const { rect: frozenRect } = grid.getAttachCellsArea(grid.getCellRange(frozenColCount - 1, row));\n            if (left < frozenRect.right) {\n                return false; //\n            }\n        }\n        else {\n            if (left < 0) {\n                return false; //\n            }\n        }\n        const { offsetHeight, offsetWidth } = element;\n        if (offsetHeight < top) {\n            return false; //\n        }\n        if (offsetWidth < left) {\n            return false; //\n        }\n        rootElement.style.top = `${top.toFixed()}px`;\n        rootElement.style.left = `${(left + width / 2).toFixed()}px`;\n        rootElement.style.minWidth = `${width.toFixed()}px`;\n        if (rootElement.parentElement !== element) {\n            element.appendChild(rootElement);\n        }\n        return true;\n    }\n}\nexports.TooltipElement = TooltipElement;\n","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?minimize!./TooltipElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js?minimize!./TooltipElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js?minimize!./TooltipElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"@keyframes cheetah-grid__tooltip-element--shown-animation {\\n\\t0% {\\n\\t\\topacity: 0;\\n\\t\\ttransform: scale(.8) translateX(-60%);\\n\\t}\\n\\t100% {\\n\\t\\topacity: 1;\\n\\t\\ttransform: scale(1) translateX(-50%);\\n\\t}\\n}\\n.cheetah-grid__tooltip-element {\\n\\tposition: absolute;\\n\\tbox-sizing: border-box;\\n\\tborder-radius: 3px;\\n\\tbackground-color: #232f34;\\n\\tpadding: 8px;\\n\\tpointer-events: none;\\n\\tuser-select: none;\\n\\tcolor: #fff;\\n}\\n.cheetah-grid__tooltip-element--hidden {\\n\\topacity: 0;\\n\\ttransform: translateX(-50%);\\n\\ttransition: opacity 75ms linear;\\n}\\n.cheetah-grid__tooltip-element--shown {\\n\\topacity: 1;\\n\\ttransform: translateX(-50%);\\n\\tanimation: cheetah-grid__tooltip-element--shown-animation 150ms ease-out;\\n}\\n.cheetah-grid__tooltip-element__content {\\n\\tfont-family: Roboto;\\n\\tfont-size: 12px;\\n\\tfont-size: .75rem;\\n\\tmin-height: 1em;\\n\\tline-height: 1;\\n\\twidth: 100%;\\n\\tdisplay: block;\\n\\twhite-space: pre-wrap;\\n\\tmargin: 0;\\n\\tbox-sizing: border-box;\\n}\\n\", \"\"]);\n\n// exports\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getInternal() {\n    console.warn(\"use internal!!\");\n    return {\n        color: require(\"./internal/color\"),\n        sort: require(\"./internal/sort\"),\n        calc: require(\"./internal/calc\"),\n        symbolManager: require(\"./internal/symbolManager\"),\n        path2DManager: require(\"./internal/path2DManager\"),\n    };\n}\nexports.getInternal = getInternal;\n"],"sourceRoot":""}